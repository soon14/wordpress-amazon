(function(){videojs.plugin("playlist",function(e){console.log(this);var t=this.el().id;var n=document.querySelectorAll("#"+t+"-vjs-playlist .vjs-track"),r=n.length,i=this,s=n[0],o=0,u=true,a=e.onTrackSelected;for(var f=0;f<r;f++){n[f].onclick=function(){l(this)}}if(typeof e.continuous=="undefined"||e.continuous==true){i.on("ended",function(){o++;if(o>=r){o=0}else;n[o].click()})}else;var l=function(t){var s=t.getAttribute("data-src");o=parseInt(t.getAttribute("data-index"))||o;if(i.techName=="youtube"){i.src([{type:type="video/youtube",src:s}])}else{if(i.el().firstChild.tagName=="AUDIO"||typeof e.mediaType!="undefined"&&e.mediaType=="audio"){i.src([{type:"audio/mp4",src:s+".m4a"},{type:"audio/webm",src:s+".webm"},{type:"audio/ogg",src:s+".ogg"}])}else{i.src([{type:"video/mp4",src:s+".mp4"},{type:"video/webm",src:s+".webm"}])}}if(u)i.play();for(var f=0;f<r;f++){if(n[f].classList.contains("currentTrack")){n[f].className=n[f].className.replace(/\bcurrentTrack\b/,"nonPlayingTrack")}}t.className=t.className+" currentTrack";if(typeof a==="function")a.apply(t)};if(typeof e.setTrack!="undefined"){e.setTrack=parseInt(e.setTrack);s=n[e.setTrack];o=e.setTrack;u=false;l(n[o]);u=true}var c={tracks:n,trackCount:r,play:function(){return u},index:function(){return o},prev:function(){var e=o-1;if(e<0||e>r)e=0;l(n[e])},next:function(){var e=o+1;if(e<0||e>r)e=0;l(n[e])}};return c})})()