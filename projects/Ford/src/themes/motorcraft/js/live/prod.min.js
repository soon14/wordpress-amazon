
(function(a){revealModal={init:function(){if(a(".reveal-content-modal").length){a(".reveal-content-modal").on("click",function(b){b.preventDefault();b=a(this).attr("href");var c=a(this),d=a("#content-modal");a.ajax({url:b,success:function(e){revealModal.modalSuccess(e,c,d)}});a(window).resize(function(){d.is(":visible")&&revealModal.modalResize(c,d)})});revealModal.modalClose()}},modalResize:function(b,c){if(a(window).width()>767){a("body").removeClass("no-scroll has-scroll");c.removeClass("full").addClass(b.data("reveal-sizing")).css({top:a(window).scrollTop()+
c.data("css-top")+"px"})}else{a("body").addClass("no-scroll has-scroll");c.removeClass(b.data("reveal-sizing")).addClass("full")}},modalSuccess:function(b,c,d){a(".reveal-modal-bg").show();a("#content-modal").show();a("#content-modal .content").html(b);a("#content-modal").foundation("reveal","open",{animationSpeed:100,animation:"fade"});revealModal.modalResize(c,d);a.publish("foundation-reveal-modal-open",[c])},modalClose:function(){a("#content-modal .close-reveal-modal").on("click",function(b){b.preventDefault();
a(".reveal-modal").foundation("reveal","close");a(".reveal-modal-bg").hide();a("#content-modal").hide();setTimeout(function(){a("#content-modal .content").html("")},500);a("body").focus();a.publish("foundation-reveal-modal-close");a("body").removeClass("no-scroll has-scroll")})}};a(function(){revealModal.init()})})(jQuery);

(function(a){detectLocation={init:function(){this.site=a("#common-config").embeddedData().site;this.restfulURL=a("#detect-location-config").embeddedData().redirectRestfulURL;this.restfulURLAlt=a("#rest-services").embeddedData()["homepage.byLanguage"]||"";this.languageList=a("#language-list").embeddedData()||"";this.stayonRedirection=a("#detect-location-config").embeddedData().stayonRedirection||5E3;this.tplData={};this.urlRedirect=true;this.url=window.location.href;if(window.location.pathname=="/")a.cookie("dfy.locale")||
a.cookie("userInfo")?this.openOverlay():a("body").removeClass("target")},checkCookie:function(){var b=this,c=a.cookie("dfy.locale"),d=a.cookie("userInfo"),f=b.languageList;localeArr=[];localeArr=c?c.split("-"):[];if(c&&localeArr[0]&&localeArr[1]){b.tplData.redirect=true;if(b.restfulURLAlt){c=b.restfulURLAlt.replace("{site}",f[localeArr[1]].lang[localeArr[0]].site).replace("{country}",localeArr[1]).replace("{language}",localeArr[0]);a.ajax({url:c}).done(function(e){detectLocation.tplData.location=
e.url;detectLocation.processRedirection(b.tplData)})}else{b.tplData.location=window.location.protocol+"//"+window.location.host+"/"+localeArr[0]+"/"+localeArr[1];b.processRedirection(b.tplData)}}else if(d){localeArr=d.split("#");localeArr[0]&&localeArr[0].indexOf("country_code")!=-1&&b.restfulURL&&a.ajax({url:b.restfulURL.replace("{countryCode}",localeArr[0].split("=")[1].toLowerCase()).replace("{encoded url}",encodeURIComponent(b.url)),success:function(e){b.tplData=e;b.processRedirection(b.tplData)},
error:function(){b.closeOverlay()},timeout:function(){b.closeOverlay()}})}else b.closeOverlay()},processRedirection:function(b){var c=this;if(b.redirect){c.openOverlay(b);setTimeout(function(){if(detectLocation.urlRedirect){a("#content-modal .cancel-redirect").addClass("disabled");a("#content-modal .close-reveal-modal").addClass("disabled");window.location.href=b.location}},c.stayonRedirection)}else c.closeOverlay()},openOverlay:function(b){var c=this,d=a(".country-list"),f=a("#content-modal");d.data("reveal-sizing",
"fixed-tiny");if(typeof b=="undefined"){a("body").addClass("open-overlay");if(!c.isIE(8)){a("#header").addClass("target");a(".country-list").addClass("target");a(".reveal-modal-bg").addClass("target");a("#footer-wrapper").addClass("target")}a("body").removeClass("target");a.subscribe("foundation-reveal-modal-open",function(){var e=setInterval(function(){if(a("#content-modal").css("display")!=="none"){clearInterval(e);c.loadOverlay()}},1E3)});revealModal.modalSuccess(a(".message-overlay"),d,f)}else{c.renderTemplate(b);
a(".message-overlay .layout-detecting").hide();a(".message-overlay .layout-redirecting").show()}},loadOverlay:function(){var b=this;revealModal.modalClose();b.renderTemplate();a(".message-overlay .layout-detecting").show();a(".message-overlay .layout-redirecting").hide();a(window).resize(function(){modalContainer.is(":visible")&&revealModal.modalResize(elem,modalContainer)});setTimeout(function(){b.checkCookie()},b.stayonRedirection)},renderTemplate:function(b){var c=this;if(a(".message-overlay").length){a(".message-overlay .layout-detecting").remove();
a(".message-overlay .layout-redirecting").remove();typeof b=="undefined"?a("#message-template").tmpl().appendTo(".message-overlay"):a("#message-template").tmpl(b).appendTo(".message-overlay");a(".cancel-redirect").on("click",function(d){d.preventDefault();a(this).hasClass("disabled")||c.cancelRedirection()})}},closeOverlay:function(){var b=this;a("body").removeClass("open-overlay");if(!b.isIE(8)){a("#header").removeClass("target");a(".country-list").removeClass("target");a(".reveal-modal-bg").removeClass("target");
a("#footer-wrapper").removeClass("target");a("body").removeClass("target")}a("#content-modal .close-reveal-modal").trigger("click")},cancelRedirection:function(){var b=this;b.urlRedirect=false;b.closeOverlay()},isIE:function(b,c){var d="IE",f=document.createElement("B"),e=document.documentElement;if(b){d+=" "+b;if(c)d=c+" "+d}f.innerHTML="<!--[if "+d+']><b id="iecctest"></b><![endif]--\>';e.appendChild(f);b=!!document.getElementById("iecctest");e.removeChild(f);return b}};a(function(){detectLocation.init()})})(jQuery);

(function(b){mcLocale={init:function(){var a=b("#common-config").embeddedData(),c=window.location.href;this.cookieKey="dfy.locale";this.cookieDomain=a.cookieDomain;b("#locale-data").size()&&this.updateCookie(c);b(".country-list>.country>ul>li>a, .country-select>ul>li a").on("click",function(){b(this).attr("href")&&mcLocale.updateCookie(b(this).attr("href"))})},updateCookie:function(a){if(a){var c=location.host,d=a.indexOf(c);if(a=d>0?a.substr(d+c.length):a){a=a.charAt(0)=="/"?a.substr(1):a;a=a.split("/").slice(0,
2);b.cookie(this.cookieKey,a.join("-"),{expires:365,path:"/",domain:this.cookieDomain});if(location.href.indexOf("/"+a.slice(0,2).join("/"))>0)return 0}}}};b(function(){mcLocale.init()})})(jQuery);

(function(c){mcLanguageSelect={init:function(){var a=this;if(typeof mcLanguageSelect){a.countrySelectEl=c("#country-select");a.langeSelectEl=c("#language-select");a.redirectButtonEl=c("#redirect-btn");a.languageList=c("#language-list").embeddedData();a.homepageUrl=c("#rest-services").embeddedData()["homepage.byLanguage"];a.populateCountry(a.languageList);a.countrySelectEl.on("change",a.countryChange.bind(a));a.langeSelectEl.on("change",a.languageChange.bind(a));a.removeLink();c.uniform.update();a=
this.findFirstOption(this.langeSelectEl);this.langeSelectEl.siblings("span").text(a)}},setCookie:function(a,b){guxApp.cookie.set("dfy.locale",b+"-"+a)},populateCountry:function(a){var b='<option value="0" selected>'+this.findFirstOption(this.countrySelectEl)+" </option>";b+=this.renderOption("country",a);this.countrySelectEl.html(b)},populateLanguage:function(a,b){var d='<option value="0" selected>'+this.findFirstOption(this.langeSelectEl)+" </option>";d+=this.renderOption("language",a[b].lang);this.langeSelectEl.html(d).prop("disabled",
false);this.langeSelectEl.parent().removeClass("disabled")},countryChange:function(a){var b=this;a=c(a.target).val();this.removeLink();if(a!="0")this.populateLanguage(this.languageList,a);else{this.langeSelectEl.find("option:first").attr("selected","selected");this.langeSelectEl.parent().addClass("disabled");this.langeSelectEl.prop("disabled",true)}b.redirectButtonEl.find("span").remove();c.uniform.update()},languageChange:function(a){c(a.target).val()!="0"?this.updateLink():this.removeLink()},findFirstOption:function(a){return a.find("option[value='0']").text()},
updateLink:function(){var a=this,b=a.countrySelectEl.val(),d=a.langeSelectEl.val(),e=this.homepageUrl.replace("{site}",a.languageList[b].lang[d].site).replace("{country}",b).replace("{language}",d);console.log(e);c.ajax({url:e,beforeSend:function(){mcLanguageSelect.removeLink()}}).done(function(f){mcLanguageSelect.redirectButtonEl.removeClass("disabled").prop("disabled",false).attr("href",f.url);mcLanguageSelect.redirectButtonEl.on("click",function(){a.setCookie(b,d)})}).fail(function(){mcLanguageSelect.redirectButtonEl.append("<span> Error </span>")})},
removeLink:function(){this.redirectButtonEl.addClass("disabled").attr("href","#").prop("disabled",true)},renderOption:function(a,b){var d;c.each(b,function(e,f){d+='<option value="'+e+'"> '+f.name+" </option>"});return d}};c(function(){mcLanguageSelect.init()})})(jQuery);

(function(a){mcStickyFooter={init:function(){this.mainContentDiv=a(".landing-page-v2");this.wHeight=a(window).height();this.dheight=a(document.body).height();this.wHeight<this.dheight?a("body").removeClass("sticky-footer"):a("body").addClass("sticky-footer");this.resize();this.centerBody(this.wHeight,this.dheight)},resize:function(){a(window).on("resize",function(){this.wHeight=a(window).height();this.dheight=a(document.body).height();this.wHeight<this.dheight?a("body").removeClass("sticky-footer"):
a("body").addClass("sticky-footer");mcStickyFooter.centerBody(this.wHeight,this.dheight)})},centerBody:function(b,c){this.mainContentDiv.css("marginTop",Math.max(0,(b-c)/2))}};a(function(){mcStickyFooter.init()})})(jQuery);
