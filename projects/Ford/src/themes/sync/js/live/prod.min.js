
/*!
 * jQuery UI 1.8.18
 *
 * Copyright 2011, AUTHORS.txt (http://jqueryui.com/about)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 *
 * http://docs.jquery.com/UI
 */(function(a,b){function d(b){return!a(b).parents().andSelf().filter(function(){return a.curCSS(this,"visibility")==="hidden"||a.expr.filters.hidden(this)}).length}function c(b,c){var e=b.nodeName.toLowerCase();if("area"===e){var f=b.parentNode,g=f.name,h;if(!b.href||!g||f.nodeName.toLowerCase()!=="map")return!1;h=a("img[usemap=#"+g+"]")[0];return!!h&&d(h)}return(/input|select|textarea|button|object/.test(e)?!b.disabled:"a"==e?b.href||c:c)&&d(b)}a.ui=a.ui||{};a.ui.version||(a.extend(a.ui,{version:"1.8.18",keyCode:{ALT:18,BACKSPACE:8,CAPS_LOCK:20,COMMA:188,COMMAND:91,COMMAND_LEFT:91,COMMAND_RIGHT:93,CONTROL:17,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,INSERT:45,LEFT:37,MENU:93,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SHIFT:16,SPACE:32,TAB:9,UP:38,WINDOWS:91}}),a.fn.extend({propAttr:a.fn.prop||a.fn.attr,_focus:a.fn.focus,focus:function(b,c){return typeof b=="number"?this.each(function(){var d=this;setTimeout(function(){a(d).focus(),c&&c.call(d)},b)}):this._focus.apply(this,arguments)},scrollParent:function(){var b;a.browser.msie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?b=this.parents().filter(function(){return/(relative|absolute|fixed)/.test(a.curCSS(this,"position",1))&&/(auto|scroll)/.test(a.curCSS(this,"overflow",1)+a.curCSS(this,"overflow-y",1)+a.curCSS(this,"overflow-x",1))}).eq(0):b=this.parents().filter(function(){return/(auto|scroll)/.test(a.curCSS(this,"overflow",1)+a.curCSS(this,"overflow-y",1)+a.curCSS(this,"overflow-x",1))}).eq(0);return/fixed/.test(this.css("position"))||!b.length?a(document):b},zIndex:function(c){if(c!==b)return this.css("zIndex",c);if(this.length){var d=a(this[0]),e,f;while(d.length&&d[0]!==document){e=d.css("position");if(e==="absolute"||e==="relative"||e==="fixed"){f=parseInt(d.css("zIndex"),10);if(!isNaN(f)&&f!==0)return f}d=d.parent()}}return 0},disableSelection:function(){return this.bind((a.support.selectstart?"selectstart":"mousedown")+".ui-disableSelection",function(a){a.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")}}),a.each(["Width","Height"],function(c,d){function h(b,c,d,f){a.each(e,function(){c-=parseFloat(a.curCSS(b,"padding"+this,!0))||0,d&&(c-=parseFloat(a.curCSS(b,"border"+this+"Width",!0))||0),f&&(c-=parseFloat(a.curCSS(b,"margin"+this,!0))||0)});return c}var e=d==="Width"?["Left","Right"]:["Top","Bottom"],f=d.toLowerCase(),g={innerWidth:a.fn.innerWidth,innerHeight:a.fn.innerHeight,outerWidth:a.fn.outerWidth,outerHeight:a.fn.outerHeight};a.fn["inner"+d]=function(c){if(c===b)return g["inner"+d].call(this);return this.each(function(){a(this).css(f,h(this,c)+"px")})},a.fn["outer"+d]=function(b,c){if(typeof b!="number")return g["outer"+d].call(this,b);return this.each(function(){a(this).css(f,h(this,b,!0,c)+"px")})}}),a.extend(a.expr[":"],{data:function(b,c,d){return!!a.data(b,d[3])},focusable:function(b){return c(b,!isNaN(a.attr(b,"tabindex")))},tabbable:function(b){var d=a.attr(b,"tabindex"),e=isNaN(d);return(e||d>=0)&&c(b,!e)}}),a(function(){var b=document.body,c=b.appendChild(c=document.createElement("div"));c.offsetHeight,a.extend(c.style,{minHeight:"100px",height:"auto",padding:0,borderWidth:0}),a.support.minHeight=c.offsetHeight===100,a.support.selectstart="onselectstart"in c,b.removeChild(c).style.display="none"}),a.extend(a.ui,{plugin:{add:function(b,c,d){var e=a.ui[b].prototype;for(var f in d)e.plugins[f]=e.plugins[f]||[],e.plugins[f].push([c,d[f]])},call:function(a,b,c){var d=a.plugins[b];if(!!d&&!!a.element[0].parentNode)for(var e=0;e<d.length;e++)a.options[d[e][0]]&&d[e][1].apply(a.element,c)}},contains:function(a,b){return document.compareDocumentPosition?a.compareDocumentPosition(b)&16:a!==b&&a.contains(b)},hasScroll:function(b,c){if(a(b).css("overflow")==="hidden")return!1;var d=c&&c==="left"?"scrollLeft":"scrollTop",e=!1;if(b[d]>0)return!0;b[d]=1,e=b[d]>0,b[d]=0;return e},isOverAxis:function(a,b,c){return a>b&&a<b+c},isOver:function(b,c,d,e,f,g){return a.ui.isOverAxis(b,d,f)&&a.ui.isOverAxis(c,e,g)}}))})(jQuery);/*!
 * jQuery UI Widget 1.8.18
 *
 * Copyright 2011, AUTHORS.txt (http://jqueryui.com/about)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 *
 * http://docs.jquery.com/UI/Widget
 */(function(a,b){if(a.cleanData){var c=a.cleanData;a.cleanData=function(b){for(var d=0,e;(e=b[d])!=null;d++)try{a(e).triggerHandler("remove")}catch(f){}c(b)}}else{var d=a.fn.remove;a.fn.remove=function(b,c){return this.each(function(){c||(!b||a.filter(b,[this]).length)&&a("*",this).add([this]).each(function(){try{a(this).triggerHandler("remove")}catch(b){}});return d.call(a(this),b,c)})}}a.widget=function(b,c,d){var e=b.split(".")[0],f;b=b.split(".")[1],f=e+"-"+b,d||(d=c,c=a.Widget),a.expr[":"][f]=function(c){return!!a.data(c,b)},a[e]=a[e]||{},a[e][b]=function(a,b){arguments.length&&this._createWidget(a,b)};var g=new c;g.options=a.extend(!0,{},g.options),a[e][b].prototype=a.extend(!0,g,{namespace:e,widgetName:b,widgetEventPrefix:a[e][b].prototype.widgetEventPrefix||b,widgetBaseClass:f},d),a.widget.bridge(b,a[e][b])},a.widget.bridge=function(c,d){a.fn[c]=function(e){var f=typeof e=="string",g=Array.prototype.slice.call(arguments,1),h=this;e=!f&&g.length?a.extend.apply(null,[!0,e].concat(g)):e;if(f&&e.charAt(0)==="_")return h;f?this.each(function(){var d=a.data(this,c),f=d&&a.isFunction(d[e])?d[e].apply(d,g):d;if(f!==d&&f!==b){h=f;return!1}}):this.each(function(){var b=a.data(this,c);b?b.option(e||{})._init():a.data(this,c,new d(e,this))});return h}},a.Widget=function(a,b){arguments.length&&this._createWidget(a,b)},a.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",options:{disabled:!1},_createWidget:function(b,c){a.data(c,this.widgetName,this),this.element=a(c),this.options=a.extend(!0,{},this.options,this._getCreateOptions(),b);var d=this;this.element.bind("remove."+this.widgetName,function(){d.destroy()}),this._create(),this._trigger("create"),this._init()},_getCreateOptions:function(){return a.metadata&&a.metadata.get(this.element[0])[this.widgetName]},_create:function(){},_init:function(){},destroy:function(){this.element.unbind("."+this.widgetName).removeData(this.widgetName),this.widget().unbind("."+this.widgetName).removeAttr("aria-disabled").removeClass(this.widgetBaseClass+"-disabled "+"ui-state-disabled")},widget:function(){return this.element},option:function(c,d){var e=c;if(arguments.length===0)return a.extend({},this.options);if(typeof c=="string"){if(d===b)return this.options[c];e={},e[c]=d}this._setOptions(e);return this},_setOptions:function(b){var c=this;a.each(b,function(a,b){c._setOption(a,b)});return this},_setOption:function(a,b){this.options[a]=b,a==="disabled"&&this.widget()[b?"addClass":"removeClass"](this.widgetBaseClass+"-disabled"+" "+"ui-state-disabled").attr("aria-disabled",b);return this},enable:function(){return this._setOption("disabled",!1)},disable:function(){return this._setOption("disabled",!0)},_trigger:function(b,c,d){var e,f,g=this.options[b];d=d||{},c=a.Event(c),c.type=(b===this.widgetEventPrefix?b:this.widgetEventPrefix+b).toLowerCase(),c.target=this.element[0],f=c.originalEvent;if(f)for(e in f)e in c||(c[e]=f[e]);this.element.trigger(c,d);return!(a.isFunction(g)&&g.call(this.element[0],c,d)===!1||c.isDefaultPrevented())}}})(jQuery);/*
 * jQuery UI Progressbar 1.8.18
 *
 * Copyright 2011, AUTHORS.txt (http://jqueryui.com/about)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 *
 * http://docs.jquery.com/UI/Progressbar
 *
 * Depends:
 *   jquery.ui.core.js
 *   jquery.ui.widget.js
 */(function(a,b){a.widget("ui.progressbar",{options:{value:0,max:100},min:0,_create:function(){this.element.addClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").attr({role:"progressbar","aria-valuemin":this.min,"aria-valuemax":this.options.max,"aria-valuenow":this._value()}),this.valueDiv=a("<div class='ui-progressbar-value ui-widget-header ui-corner-left'></div>").appendTo(this.element),this.oldValue=this._value(),this._refreshValue()},destroy:function(){this.element.removeClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").removeAttr("role").removeAttr("aria-valuemin").removeAttr("aria-valuemax").removeAttr("aria-valuenow"),this.valueDiv.remove(),a.Widget.prototype.destroy.apply(this,arguments)},value:function(a){if(a===b)return this._value();this._setOption("value",a);return this},_setOption:function(b,c){b==="value"&&(this.options.value=c,this._refreshValue(),this._value()===this.options.max&&this._trigger("complete")),a.Widget.prototype._setOption.apply(this,arguments)},_value:function(){var a=this.options.value;typeof a!="number"&&(a=0);return Math.min(this.options.max,Math.max(this.min,a))},_percentage:function(){return 100*this._value()/this.options.max},_refreshValue:function(){var a=this.value(),b=this._percentage();this.oldValue!==a&&(this.oldValue=a,this._trigger("change")),this.valueDiv.toggle(a>this.min).toggleClass("ui-corner-right",a===this.options.max).width(b.toFixed(0)+"%"),this.element.attr("aria-valuenow",a)}}),a.extend(a.ui.progressbar,{version:"1.8.18"})})(jQuery);


var FAP=function(l){function m(){j.DOWNLOAD_FAIL="CONTROL_STATUS_DOWNLOAD_FAILED";j.UPLOAD_FAIL="CONTROL_STATUS_UPLOAD_FAILED"}var i={},n={},e={},j={};i.manager=n;i.tasks=e;i.statusCodes=j;e.base={isOk:function(){return this.c.getSControlStatus()==this.c.getConstantControlStatusOK()},status:function(){return this.c.getSControlStatus()}};e.drives=$.extend(Object.create(e.base),{driveConstStatus:function(){return this.c.DMGetConstantDriveStatusOk()},refreshDrives:function(){this.c.DMRefreshDrives()},
getUsedDrives:function(){this.c.DMLoadDrivesByStatusAndSyncFootprint(this.driveConstStatus(),true);return this._getDrives(true)},getWritableDrives:function(){this.c.DMLoadDrivesByStatusAndSyncFootprint(this.driveConstStatus(),false);return this._getDrives(true)},getReadonlyDrives:function(){this.c.DMLoadDrivesByNotStatus(this.driveConstStatus());return this._getDrives()},_getDrives:function(a){for(var b=[],c=this.c.DMGetIDrives(),d,f=0;f<c;f++){d=this._getDriveDetail(f);if(arguments.length===0||a&&
d.status===this.driveConstStatus())b.push(this._getDriveDetail(f))}return b},_getDriveDetail:function(a){var b=this.c;return{description:b.DMGetSDriveDescription(a),name:b.DMGetSDriveName(a),status:b.DMGetSDriveStatus(a),isNew:b.DMGetBNewDrive(a)}}});e.download=$.extend(Object.create(e.base),{configure:function(a){this._driveName=a},start:function(){this._started=+new Date;this.totalKiloBytesReadsCount=this.totalKiloBytesReads=0;this.c.DMRefreshDrives();this.c.DMLoadDrivesByName(this._driveName);
this.c.IMStartDownload(this.c.DMGetSDriveName(0))},_getData:function(){var a=this.c.IMIsBInstallDone(),b=this.c.IMGetIDownloadSizeKiloBytes(),c=this.c.IMGetITotalKiloBytesDownloaded(),d=b-c,f=a?1:c/b,g=(+new Date-this._started)/1E3,h=c/g,k=h*8;h=d/h;d=d<=0;return{filesize:b,downloaded:c.toFixed(0),ratio:f,speed:k.toFixed(0),duration:g,wait:h.toFixed(0),isDone:a,isVerifing:d&&!a}},getProgress:function(){return $.extend(this._getData(),{error:!this.isOk(),status:this.status(),started:this._started})}});
e.logfiles=$.extend(Object.create(e.base),{driveRegEx:/^([A-Za-z]:\\)/,refreshFiles:function(){this.c.DMRefreshDrives();this.c.LMRefreshLogFiles()},getList:function(){for(var a=[],b=this.c.LMGetILogFiles(),c=0;c<b;c++)a.push(this._getLogDetail(c));return a},getDriveList:function(){for(var a=this.getList(),b=typeof a!=="undefined"?a.length:0,c,d={},f=[],g=0;g<b;g++){c=a[g].filepath.match(this.driveRegEx)[1];if(!d[c]){d[c]=true;f.push(c)}}return f},_getLogDetail:function(a){var b=this.c;return{status:b.LMGetSLogFileStatus(a),
filepath:b.LMGetSLogFilePath(a),filename:b.LMGetSLogFileName(a)}}});e.upload=$.extend(Object.create(e.base),{driveRegEx:/^([A-Za-z]:\\$)/,configure:function(a){if($.type(a)==="string"&&this.driveRegEx.test(a))this._driveName=a;else this._filepath=$.type(a)==="array"?a:[a]},start:function(){this._started=+new Date;this.c.LMRefreshLogFiles();for(var a=this.c.LMGetILogFiles(),b=0;b<a;b++)if(this._filepath)for(var c=this._filepath.length,d=0;d<c;d++){if(this._filepath[d]==this.c.LMGetSLogFilePath(b)){this.c.LMSetBLogFileSelectedForUpload(b,
true);break}}else this._driveName&&this.c.LMGetSLogFilePath(b).indexOf(this._driveName)===0&&this.c.LMSetBLogFileSelectedForUpload(b,true);this.c.UMStartUpload()},_getData:function(){var a=this.c.UMIsBUploadDone(),b=this.c.UMGetITotalUploadKiloBytes(),c=this.c.UMGetITotalKiloBytesUploaded(),d=b-c,f=a?1:c/b,g=(+new Date-this._started)/1E3,h=c/g,k=h*8;h=d/h;d=d<=0;return{filesize:b,uploaded:c.toFixed(0),ratio:f,speed:k.toFixed(0),duration:g,wait:h.toFixed(0),isDone:a,isVerifing:d&&!a}},getProgress:function(){return $.extend(this._getData(),
{error:!this.isOk(),status:this.status(),started:this._started})}});e.Progress=function(a){function b(){var d=a.getProgress();if(d.done||d.isDone||d.error){c.trigger("status",d);c.trigger("end",d)}else{c.trigger("status",d);setTimeout(b,25)}}if(arguments.length){var c=$(this);c.start=function(){c.trigger("start");a.start();b()};return c}};$.extend(n,{getDriveList:function(){this.setApplet();var a=Object.create(e.drives),b={error:false};a.refreshDrives();if(a.isOk()){b.used=a.getUsedDrives();b.writable=
a.getWritableDrives();b.readonly=a.getReadonlyDrives()}else b.error=true;b.status=a.status();return b},downloadPackage:function(a){this.setApplet();var b=Object.create(e.download);b.configure(a);return new e.Progress(b)},getLogFileList:function(){this.setApplet();var a=Object.create(e.logfiles),b={error:false};a.refreshFiles();if(a.isOk()){b.logs=a.getList();b.drives=a.getDriveList()}else b.error=true;b.status=a.status();return b},getLogFileStatus:function(){this.setApplet();return Object.create(e.logfiles).getList()},
uploadLogFile:function(a){this.setApplet();var b=Object.create(e.upload);b.configure(a);return new e.Progress(b)},setApplet:function(a){if(a){e.base.c=a;m()}else if(typeof e.base.c==="undefined"){e.base.c=document.TransferApplet;m()}},getStatusCodes:function(){this.setApplet();return i.statusCodes},getStatus:function(){this.setApplet();return{status:e.base.c.getSControlStatus(),debug:e.base.c.getSDebugInfo()}}});l.syncTransfer=i;return l}(window.FAP||{});

var FAP=function(j){var i={},k={},f={},g={};i.manager=k;i.tasks=f;g={downloadComplete:function(a){var b=ND.API.getOverlay();g.bindRefresh(b.closeButton);a&&g.updateTitle()},updateTitle:function(){var a=$(".sync-overlay .sync-success").text();a&&$(".sync-overlay .title h2").text(a)},bindRefresh:function(a){a.show().on("click",function(){location.reload()})},updateRatio:function(a){if(a>0){$(".loading").attr({style:"display:none !important;"});$(".loading").hide();$(".syncstatus").show()}g.sendHttprequestC();
a=(a>1?100:a*100)>>0;$(".syncstatus .percent").text(a+"%");return a},hiddenButton:function(){$(".sync-transfer-primer").attr({style:"visibility:hidden"})},sendHttprequestC:function(){var a=0;a=(new Date).getTime();if(a-g.issend>6E4){setTimeout(function(){$.post(window.location.href,{h_t_t_o_t:"http post"})},1);g.issend=(new Date).getTime()}},issend:Number=0};i.utility=g;f.base={init:function(a,b){this.conf=$("#sync-transfer-data").embeddedData()||{};this._transferManager=a;this._statusCodes=a.getStatusCodes();
this._prevTaskValue=b;this._container=$("#overlay");this.controller()},valid:function(){var a=this.value();a||this.error();return!!a},toggleError:function(a){var b=this._container.find(".error");b.hide();if(typeof a!=="undefined"){$(".loading").attr({style:"display:none !important;"});$(".loading").hide();$(".syncstatus").show();b.text(a).show()}},_sentence:function(a,b){return this.conf[a]?this.conf[a].replace("{0}",b||""):b}};f.baseProgress=$.extend(Object.create(f.base),{_friendlySpeed:function(a){return a>
1024?this._sentence("UI_MEGABITSPERSEC",(a/1024).toFixed(0)):this._sentence("UI_KILOBITSPERSEC",a)},_friendlySize:function(a){return a>1024?this._sentence("UI_MEGABBYTE",(a/1024).toFixed(0)):this._sentence("UI_KILOBBYTE",a)},_friendlyTime:function(a){return a>60?this._sentence("UI_TIME",(a/60).toFixed(0)):this._sentence("UI_TIME_SMALL")},value:function(){return this._ratio===1}});f.drives=$.extend(Object.create(f.base),{controller:function(){this._button=$("#sync-button-select-drive");this._refreshButton=
$("#sync-button-refresh-drives");this._tmpl=$("#tmpl-sync-drives").template();this._tmplContainer=$("#sync-drives");this.render();this.bind()},render:function(){this.view(this._tmpl,this._tmplContainer,this.model(),this._button)},model:function(){var a=this._transferManager.getDriveList(),b=[],c=+new Date;$.each(["used","writable"],function(d,h){$.each(a[h],function(e,l){l.guid="drive-"+c++;b.push(l)})});return b},view:function(a,b,c,d){d.hide();b.empty();if(c.length){a=$.tmpl(a,c);b.append(a);d.show()}else b.append("<li>"+
this._sentence("UI_NO_DRIVES")+"</li>")},bind:function(){this._refreshButton.on("click",$.proxy(this.render,this))},value:function(){return this._container.find("input[name=sync-drivename]:checked").val()},error:function(){this.toggleError(this._sentence("MSG_SELECT_DRIVE"))}});f.download=$.extend(Object.create(f.baseProgress),{controller:function(){this._progressbar=$("#sync-download-progress");this._button=$("#sync-button-finished-download");this._statusPanel=$("#sync-download-status");this._status=
this._statusPanel.find(".status");this._speed=this._statusPanel.find(".speed");this._remaining=this._statusPanel.find(".remaining");this._filesize=this._statusPanel.find(".filesize");var a=this.model();this.view(a);a.start()},model:function(){return this._transferManager.downloadPackage(this._prevTaskValue)},view:function(a){var b=this,c=this._progressbar,d=0;b._button.hide();c.progressbar({value:0});g.hiddenButton();$(".syncstatus").hide();$(".loading").attr({style:"text-indent: -9999px; display:block !important;"});
a.on("status",function(h,e){b._ratio=e.ratio;if(e.error){g.downloadComplete(false);b.error(e.status);b._statusPanel.hide()}else{c.progressbar("option","value",e.ratio*100);h=g.updateRatio(e.ratio);e.isVerifing=h>95&&e.isVerifing;if(d%10===0||e.isVerifing||e.isDone)b.updateMetrics(e);if(e.isDone){g.downloadComplete(true);g.bindRefresh(b._button);c.addClass("finished");$(".close-button a").addClass("trackable").attr({"data-name":"close","data-onclick":"close","data-type":"o"})}}d++})},updateMetrics:function(a){this._filesize.text(this._friendlySize(a.filesize));
this._speed.text(this._friendlySpeed(a.speed));this._remaining.text(this._friendlyTime(a.wait));if(a.isVerifing||a.isDone){this._speed.closest("p").hide("slow");this._remaining.closest("p").hide("slow");a.isVerifing&&this._status.text(this.conf.UI_DL_VERIFY);a.isDone&&this._status.text(this.conf.UI_DL_COMPLETE);a.isDone&&$.ajax({type:"GET",url:"/servlet/ContentServer?pagename=DFY/UserProfile/UserProfileEmail&type=DownloadComplete&site=FOA"})}},error:function(a){this._progressbar.addClass("fail");
this.toggleError(this._sentence(a===this._statusCodes.DOWNLOAD_FAIL?"MSG_DOWNLOAD_FAIL":a==="HND|201"?"MSG_DEALER_VISIT_REQD":"MSG_GENERIC"))}});f.logfiles=$.extend(Object.create(f.base),{controller:function(){this._button=$("#sync-button-select-logfiles");this._refreshButton=$("#sync-button-refresh-logfiles");this._tmpl=$("#tmpl-sync-logfiles").template();this._tmplContainer=$("#sync-logfiles");this.render();this.bind()},render:function(){this.view(this._tmpl,this._tmplContainer,this.model(),this._button)},
model:function(){var a=this._transferManager.getLogFileList(),b=[],c=+new Date;$.each(a.drives,function(d,h){d={name:h,guid:"logfile-"+c++};b.push(d)});return b},view:function(a,b,c,d){d.hide();b.empty();if(c.length){a=$.tmpl(a,c);b.append(a);this._container.find("input[name=sync-logfilename]:eq(0)")[0].checked=true;d.show()}else b.append("<li>"+this._sentence("UI_NO_LOGS")+"</li>")},bind:function(){this._refreshButton.on("click",$.proxy(this.render,this))},value:function(){return this._container.find("input[name=sync-logfilename]:checked").val()},
error:function(){this.toggleError(this.conf.MSG_SELECT_DRIVE)}});f.upload=$.extend(Object.create(f.baseProgress),{controller:function(){this._progressbar=$("#sync-upload-progress");this._button=$("#sync-button-finished-upload");this._statusPanel=$("#sync-upload-status");this._status=this._statusPanel.find(".status");this._speed=this._statusPanel.find(".speed");this._remaining=this._statusPanel.find(".remaining");this._filesize=this._statusPanel.find(".filesize");var a=this.model();this.view(a);a.start()},
model:function(){return this._transferManager.uploadLogFile(this._prevTaskValue)},view:function(a){var b=this,c=this._progressbar,d=0;b._button.hide();c.progressbar({value:0});g.hiddenButton();a.on("status",function(h,e){b._ratio=e.ratio;if(e.error){b.error(e.status);b._statusPanel.hide()}else{g.updateRatio(e.ratio);c.progressbar("option","value",e.ratio*100);if(d%10===0||e.isVerifing||e.isDone)b.updateMetrics(e);if(e.isDone){g.bindRefresh(b._button);c.addClass("finished")}}d++})},updateMetrics:function(a){this._filesize.text(this._friendlySize(a.filesize));
this._speed.text(this._friendlySpeed(a.speed));this._remaining.text(this._friendlyTime(a.wait));if(a.isVerifing||a.isDone){this._speed.closest("p").hide("slow");this._remaining.closest("p").hide("slow");a.isVerifing&&this._status.text(this.conf.UI_UP_VERIFY);a.isDone&&this._status.text(this.conf.UI_UP_COMPLETE);a.isDone&&g.updateTitle();if(a.isDone){a=this._transferManager.getLogFileStatus();for(var b=false,c=$(".sync-overlay .title h2"),d=0;d<a.length;d++)if(a[d].status!=="UploadSuccessfulDeleted")b=
true;if(b){this._progressbar.addClass("fail");c.text(this._sentence("MSG_UPLOADFILE_FAIL_TITLE"));this.toggleError(this._sentence("MSG_ANUPLOADFILE_FAIL"))}}}},error:function(a){this._progressbar.addClass("fail");this.toggleError(this._sentence(a===this._statusCodes.UPLOAD_FAIL?"MSG_UPLOAD_FAIL":"MSG_GENERIC"))}});$.extend(k,{prefix:"/sync-transfer/",downloadData:{},init:function(a){a=a||{};this.transferManager=a.transferManager;this.conf=$("#sync-transfer-data").embeddedData();this.listen()},listen:function(){var a=
this;this.pubsub={prepare:function(){a.displayBrowserHelp()},start:function(){$("#sync-transfer-data").embeddedData().ENABLE_ZIPHANDLER==="true"?a.downloadRequest():a.displayUpdates()},report:function(){a.displayLogList();var c=function(){$("#sync-button-refresh-logfiles").length>0&&$("#sync-button-refresh-logfiles").click()};$.browser.msie&&window.setTimeout(c,1E3)},statusChecker:function(){a.displaySchecker()},startDownload:function(){$(".sync_start_download").attr("data-download")&&a.displayUpdates()},
downloadReady:function(c,d){this.downloadData=d;c=$("#sync-transfer-data").embeddedData();if($(".sync_start_download").length>0&&c.ENABLE_ZIPHANDLER==="true"){$(".sync_start_download").attr("data-download","ready");$("#sync_zipdownload_url").attr("href",unescape(d.url))}}};for(var b in this.pubsub)$.subscribe(this.prefix+b,this.pubsub[b])},bindEvents:function(){if(!this._bound){var a=this;$("#overlay").on("click","#sync-button-agree-updates",function(){a.displayEULA()}).on("click","#sync-button-agree-updates-schecker",
function(){a.displayEULASchecker()}).on("click","#sync-button-agree-eula",function(){$("#sync-transfer-data").embeddedData().ENABLE_ZIPHANDLER==="true"?a.fileDownload():a.displayDriveList()}).on("click","#sync-button-agree-eula-schecker",function(){a.displayDriveList()}).on("click","#sync-button-select-drive",function(){a.validateTask()&&a.displayDownloadPackage(a.getTaskValue())}).on("click","#sync-button-finished-download",function(){if(a.validateTask()){$.publish("overlay.hide");$.publish("/sync-transfer/post-event/download-finished");
a.displayInstallInstructions();a.updateHostPage("download")}}).on("click","#sync-button-select-logfiles",function(){a.validateTask()&&a.displayUploadLogFile(a.getTaskValue())}).on("click","#sync-button-finished-upload",function(){if(a.validateTask()){$.publish("overlay.hide");$.publish("/sync-transfer/post-event/upload-finished");a.updateHostPage("upload")}});this._bound=true}},nextStep:function(a,b,c){var d=this;$.publish("overlay.launch",{url:this.conf["xhr-step-"+a],positionType:"window",type:"overlay-sync",
name:"Sync "+a,disableClose:a==="download"||a==="upload",success:function(){d.bindEvents();d.setCurrentTask(b);c.apply(d,[]);$.publish("overlay.reinitalise")}})},prefetchStep:function(a){$.publish("overlay.prefetch",{url:this.conf["xhr-step-"+a]})},validateTask:function(){return!!this._task.valid()},getTaskValue:function(){return this._task.value()},setCurrentTask:function(a){this._task=a},displayBrowserHelp:function(){this.nextStep("ActiveXObject"in window?"browser-ie":"browser",{},function(){this.prefetchStep("updates")})},
fileDownload:function(){$("#sync_zipdownload_url")[0].click();var a=this.conf["xhr-step-downloadstatus"],b=setInterval(function(){$.ajax({type:"GET",cache:false,url:a}).done(function(c){if(c)if($.parseJSON(c)["download-status"]==="done"){window.location.href=window.location.href;clearInterval(b)}})},1E3)},downloadRequest:function(){var a=$("#tmpl-sync-download-request").template();this.nextStep("request",{},function(){$("#sync-download-request").append($.tmpl(a));this.prefetchStep("eula")})},displayUpdates:function(){var a=
$("#tmpl-sync-updates-available").template();this.nextStep("updates",{},function(){$("#sync-updates-available").append($.tmpl(a));this.prefetchStep("eula")})},displaySchecker:function(){var a=$("#tmpl-sync-updates-available-schecker").template();this.nextStep("schecker",{},function(){$("#sync-updates-available-schecker").append($.tmpl(a));this.prefetchStep("eulaschecker")})},displayEULASchecker:function(){var a=$("#tmpl-sync-eula-schecker").template();this.nextStep("eulaschecker",{},function(){$("#sync-eulaschecker").append($.tmpl(a));
this.prefetchStep("drives")})},displayEULA:function(){var a=$("#tmpl-sync-eula").template();this.nextStep("eula",{},function(){$("#sync-eula").append($.tmpl(a));this.prefetchStep("drives")})},displayDriveList:function(){this._driveTask=Object.create(f.drives);this.nextStep("drives",this._driveTask,function(){this._driveTask.init(this.transferManager);this.prefetchStep("download")})},displayDownloadPackage:function(a){var b=Object.create(f.download);this.nextStep("download",b,function(){b.init(this.transferManager,
a);this.prefetchStep("logfiles")})},displayInstallInstructions:function(){window.open(this.conf["xhr-step-instructions"],"_newtab")},displayLogList:function(){var a=Object.create(f.logfiles);this.nextStep("logfiles",a,function(){a.init(this.transferManager);this.prefetchStep("upload")})},displayUploadLogFile:function(a){var b=Object.create(f.upload);this.nextStep("upload",b,function(){b.init(this.transferManager,a)})},updateHostPage:function(a){$("#sync-tranfser-recent-installation").load(this.conf["xhr-recent-install-panel-"+
a])}});j.syncUI=i;return j}(window.FAP||{});

$(function(){var a=Object.create(FAP.syncUI.manager),b=Object.create(FAP.syncTransfer.manager);a.init({transferManager:b})});
