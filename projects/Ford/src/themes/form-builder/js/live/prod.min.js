
var getParameterByName=function(l,a){l=l.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");l=(new RegExp("[\\?&]"+l+"=([^&#]*)")).exec(location.search);return l==null?"":typeof a!=="undefined"&&a===false?l[1].replace(/\+/g," "):decodeURIComponent(l[1].replace(/\+/g," "))},updateQueryStringParameter=function(l,a,b){var c=new RegExp("([?|&])"+a+"=.*?(&|$)","i"),d=l.indexOf("?")!==-1?"&":"?";return l.match(c)?l.replace(c,"$1"+a+"="+b+"$2"):l+d+a+"="+b},ND=function(l,a){l.lincolnForm=function(){a(window);return{init:function(b){a(b||
"form");b=this;b.updateUsername();b.captchaLoad();b.elements();b.customValidity();b.signIn();b.editProPage();b.passwordsMatch();b.socialLogin();b.changeLocation();b.groupValidation([".phone-group",".dob-group"]);b.dropdownCtrl();b.updateProfile();return this},updateUsername:function(){var b=a(".row div#currentUsername"),c=a.cookie("LH-CURRENT-USERNAME");if(b.length>0)if(c){b.text(c);a('form input[name="username"]').val(c);a.cookie("LH-CURRENT-USERNAME",null,{path:"/"})}else{b=a("#up-config").embeddedData().loginPage;
window.location=b}},dropdownCtrl:function(){var b=a("#voi-model-name"),c=a("#voi-series-name"),d=c.html();b.change(function(){c.empty().append(d);var f=a(this).find("option:first-child").nextAll(":selected");if(f.length>0){var i=f.text();c.find("option:first-child").nextAll().each(function(){a(this).text().indexOf(i)===-1&&a(this).val()!=="YZDCD"&&a(this).remove()})}})},captchaLoad:function(){var b=function(){var c=document.getElementById("captchaimage");if(c!==undefined)c.src="/servlet/captcha.png?a="+
(new Date).getTime()};a("#captchareload").on("click",function(c){c.preventDefault();b();return false})},updateProfile:function(){var b=a("#owner-edit-profile-submit");b.size()&&b.on("click",function(){a("#user-profile-action").attr("value","update-user");a(this).closest("form").submit()})},signIn:function(){var b=a("#user-login-btn");if(b.size()){var c=true,d=a("#up-config").embeddedData();b.on("click",function(h){h.preventDefault();var e=a(this),j=e.val();h=e.attr("data-pleasewait")?e.attr("data-pleasewait"):
"Wait...";var n=e.closest("form");if(!(c==false||!n.checkValidity())){c=false;var u=(d["eai.server"]&&d["eai.server"].length>0?d["eai.server"]:"")+d["eai.login.api"],m=getParameterByName("REFERER",false),o=true;if(m==null||m==""){m=d["url.welcome"];o=false}if(m.indexOf("user-profile-action")<0)m=o?m.indexOf("%3F")<0?m+"%3Fuser-profile-action%3Dwelcome":m+"%26user-profile-action%3Dwelcome":m.indexOf("?")<0?m+"?user-profile-action=welcome":m+"&user-profile-action=welcome";o=n.serialize();e.val(h);n.find("input[type=text], input[type=password]").prop("disabled",
true);a.cookie("PD-S-SESSION-ID")&&a.cookie("PD-S-SESSION-ID",null,{domain:".ford.com",path:"/"});a.cookie("BIGIP")&&a.cookie("BIGIP",null,{path:"/"});a.ajax({url:u,type:"POST",dataType:"text",data:o,crossDomain:false,cache:false,timeout:3E4,xhrFields:{withCredentials:true}}).done(function(q,t,r){a.parseJSON(q);if(r.status==200){_da.user=_da.user||{};_da.user.loggedin="x";l.analyticsTag.trackOmniturePage({pname:"my lincoln:login:complete"});window.location.href=decodeURIComponent(m)}}).fail(function(q,
t){var r=a.parseJSON(q.responseText);if(a("form div.large-centered > div.columns div.row.errormsg p").size()<1)a("form div.large-centered > div.columns:first-child > fieldset").length?a("<div class='row errormsg'><p style='color: #f00'></p></div>").insertBefore(a("form div.large-centered > div.columns:first-child > fieldset")):a("<div class='row errormsg'><p style='color: #f00'></p></div>").insertBefore(a("form div.large-centered > div.columns:first-child > .row:first-child"));if(t=="timeout"){var s=
d.timeout.length>0?d.timeout:"Sorry, timeout! Please try it later.";a("form div.large-centered > div.columns div.row.errormsg p").text(s)}else if(r&&r.errorKeys&&r.errorKeys[0]==="UserProfile/Messages/AccountTemporarilyLocked"){s=d.loginLocked;a("form div.large-centered > div.columns div.row.errormsg p").text(s)}else if(r&&r.errorCode=="PASS"){s=d.loginFailed;a("form div.large-centered > div.columns div.row.errormsg p").text(s)}else if(r&&r.errorCode=="NACT"){t=a("#resend-act-tmpl");q=a("#resend-activation").closest(".columns");
q.height(q.height()+112);a("#resend-activation").replaceWith(t.html());t=a("#resend-activation-btn");t.parent().css({position:"absolute",bottom:"42px",width:q.width()});t.on("click",function(){var p=d["lighthouse.resend.activation"];p=a(document.createElement("form")).css({display:"none"}).attr("method","POST").attr("action",p);var v=a(document.createElement("input")).attr("name","data").val(r.data),x=a(document.createElement("input")).attr("name","isLH").val("true");p.append(v);p.append(x);a("body").append(p);
p.submit()})}else if(q.status==401){s=d.loginFailed;q=JSON.parse(a("#rest-services").html())["owner.migration-status"];var w=a("#username").val();q=q.replace("{username}",w);a.ajax({url:q,type:"GET",async:false}).done(function(p){if(p.failedMigration=="true"){a.cookie("LH-CURRENT-USERNAME",w,{path:"/"});p=d["lighthouse.usernameupdate"];p=a(document.createElement("form")).css({display:"none"}).attr("method","POST").attr("action",p);var v=a(document.createElement("input")).attr("name","data").val(r.data);
p.append(v);a("body").append(p);p.submit()}else a("form div.large-centered > div.columns div.row.errormsg p").text(s)}).fail(function(){a("form div.large-centered > div.columns div.row.errormsg p").text(s)})}else{s=d.loginFailed;a("form div.large-centered > div.columns div.row.errormsg p").text(s)}c=true;e.val(j);n.find("input[type=text], input[type=password]").prop("disabled",false)})}});b=getParameterByName("REFERER",false);if(b.length>0){var f=a(".nav-links"),i=f.find("a.register-link");f=f.find("a.login-link");
var k=i.attr("href"),g=typeof f=="undefined"?f.attr("href"):null;k&&k.indexOf("REFERER")<0&&i.attr("href",k+"?REFERER="+b);g!=null&&g.indexOf("REFERER")<0&&f.attr("href",g+"?REFERER="+b)}}},changeLocation:function(){if(a("#provinceCityData").size()){var b=a("#provinceCityData").embeddedData(),c=b.province,d=b.initProvinceCode;b=b.initCityCode;var f=a("#province"),i=a("#city"),k=i.html(),g=function(h){var e=k;h!=""&&a.each(c,function(j,n){n.provinceCode==h&&a.each(n.city,function(u,m){e=e+"<option value='"+
m.cityCode+"'>"+m.cityName+"</option>"})});i.html(e)};f.val(d);d!==""&&g(d);i.val(b);f.on("change",function(){var h=a(this).val();g(h)})}},editProPage:function(){if(a("form.lcn-edit-form").size()===0&&a("form.lcnforms").find(".service-form").size()>0)a(".submit-form").on("click",function(){var c=a(".lcnforms > .service-form .service-info"),d=c.find('input[type="checkbox"]');if(d.length>0){for(var f=false,i=0;i<d.length;i++)if(a(d[i]).prop("checked"))f=true;f||c.removeClass("ws-success").addClass("ws-invalid")}a(this).closest("form").checkValidity()&&
f&&l.analyticsTag.trackOmniturePage({pname:"service:request appointment:confirm"})});else if(a("form.lcn-edit-form").size()){var b=this;b.showPostSuccessMsg();b.changeMandatory();a("body").append("<div class='scn-cover'><div class='loading-gif'></div></div>");a("form.lcnforms a.edit-btn").each(function(){a(this).on("click",function(c){c.preventDefault();c=a(this);var d=c.closest("form");c.hide();d.find(".state-readonly").hide();d.find(".state-edit").show();a("div.success-info").hide();a("div.state-readonly div.error-info").remove()})});
a("form.lcnforms INPUT.cancel").on("click",function(){a(this).parents(".state-edit").hide();a(this).parents("form.lcnforms").find(".state-readonly").show();a(this).parents("form.lcnforms").find("A.edit-btn").show();a(this).parents("form.lcnforms").find("div.error-info").remove()});a(".submit-form").on("click",function(c){c.preventDefault();c=a(this);var d=c.closest("form");d.find("div.error-info").remove();a("#offers_via_direct_mail").is(":checked")&&a("#province").val()===""&&a("#province").parent().addClass("ws-invalid");
a("#offers_via_direct_mail").is(":checked")&&a("#city").val()===""&&a("#city").parent().addClass("ws-invalid");a("#preferredcommunicationtime").hasClass("required-field")&&a("#preferredcommunicationtime").val()===""&&a("#preferredcommunicationtime").parent().addClass("ws-invalid");if(d.checkValidity()){a("div.scn-cover").show();var f={},i=a("input, select, textarea",d),k="";a.each(i,function(){var g=a(this),h=g.val();if(!(g.hasClass("no-post")||g.attr("type")=="submit"||g.attr("type")=="reset"))if(g.attr("type")==
"radio"){if(g.is(":checked"))f[g.attr("name")]=h}else if(g.attr("type")=="checkbox"){if(g.hasClass("interest")&&g.val()!="on"){if(g.is(":checked"))k=k==""?g.val():k+","+g.val()}else if(g.is(":checked"))f[g.attr("name")]=true;else f[g.attr("name")]=false;if(g.hasClass("channel"))if(g.is(":checked"))f[g.attr("id")]="Y";else f[g.attr("id")]="N";else if(g.is(":checked"))f[g.attr("name")]=h}else f[g.attr("name")]=h});if(d.find(".interest").size()>0)f.interests=k;b.sendFormData(c,d,f)}})}},changeMandatory:function(){var b=
a("#email"),c=a("#min"),d=a("#province, #city, #district, #street"),f=a("#preferredcommunicationtime");a("#offers_via_email").is(":checked")&&b.addClass("init-required required-field").prop("required",true);a("#offers_via_sms").is(":checked")&&c.addClass("init-required required-field").prop("required",true);a("#offers_via_direct_mail").is(":checked")&&d.addClass("init-required required-field").prop("required",true);if(a("#offers_via_mobile").is(":checked")){c.addClass("init-required required-field").prop("required",
true);f.addClass("init-required required-field").prop("required",true);f.prop("disabled",false)}a("input[name='preferChannel']").on("change",function(){var i=a(this).attr("id");a(".required-field").parents(".row").removeClass("ws-invalid");a(".required-field").parent(".styled-select").removeClass("ws-invalid");if(i=="offers_via_email")a("#offers_via_email").is(":checked")?b.addClass("init-required required-field").prop("required",true):b.removeClass("required-field user-error").prop("required",false);
else if(i=="offers_via_sms")if(a("#offers_via_sms").is(":checked"))c.addClass("init-required required-field").prop("required",true);else a("#offers_via_mobile").is(":checked")?c.addClass("init-required required-field").prop("required",true):c.removeClass("required-field user-error").prop("required",false);else if(i=="offers_via_direct_mail")a("#offers_via_direct_mail").is(":checked")?d.addClass("init-required required-field").prop("required",true):d.removeClass("required-field user-error").prop("required",
false);else if(i=="offers_via_mobile")if(a("#offers_via_mobile").is(":checked")){c.addClass("init-required required-field").prop("required",true);f.addClass("required-field").prop("required",true)}else if(a("#offers_via_sms").is(":checked")){c.addClass("init-required required-field").prop("required",true);f.removeClass("required-field").prop("required",false)}else{c.removeClass("required-field").prop("required",false);f.removeClass("required-field user-error").prop("required",false)}});a("#edit-pro-cancel").on("click",
function(){a(".required-field").parents(".row").removeClass("ws-invalid");a(".required-field").parent(".styled-select").removeClass("ws-invalid");a(".required-field").removeClass("required-field").prop("required",false);a(".init-required").addClass("init-required required-field").prop("required",true)});f.on("blur",function(){a(this).val()===""&&a(this).parent().addClass("ws-invalid")})},sendFormData:function(b,c,d){if(!(c.find(".ws-invalid").length>0)){d=JSON.stringify(d);var f=a("#up-config").embeddedData(),
i=a("form.lcnforms").index(c[0]);a.ajax({type:"post",url:c.attr("action"),contentType:"application/json; charset=UTF-8",data:d,dataType:"json"}).done(function(k){if(k)if(k.success==="true"){a.cookie("postsuccess",i);if(b.attr("id")=="edit-pro-submit")l.analyticsTag.trackOmniturePage({pname:"my lincoln:edit profile:complete"});else b.attr("id")=="submit-psw-submit"&&l.analyticsTag.trackOmniturePage({pname:"my lincoln:change password"});location.reload(true)}else{if(k.errors.length>0){a("div.scn-cover").hide();
var g="";a.each(k.errors,function(h,e){h=a("[name="+e.field+"]").prev("label").text();if(!h)h=e.field;g+=e.translation?e.translation+"<br/>":h+": "+e.translationKey+"<br/>"});c.children(".error-info").size()>0?c.children(".error-info p").text(g):c.find(".state-edit").before("<div class='error-info'><p>"+g+"</p></div>")}}else window.location.href=f.loginPage}).fail(function(k){a("div.scn-cover").hide();c.find(".success-info").hide();var g=f.loginPage;if(k.status==200||k.status==0)window.location.href=
g;else{k=f.saveFailed;c.children(".error-info").size()>0?c.children(".error-info p").text(k):c.find(".state-edit").before("<div class='error-info'><p>"+k+"</p></div>")}})}},showPostSuccessMsg:function(){if(a.cookie("postsuccess")!=null){var b=a.cookie("postsuccess");a("form.lcnforms").eq(b).find("div.success-info").show();a.cookie("postsuccess",null)}},passwordsMatch:function(){if(!(a(".passwords-match").size()<1)){var b=a("#confirmpassword"),c=a("#password");c.on("keyup",function(){if(c.val()!==
b.val()&&b.val()!==""){b.addClass("user-error");b.parent(".row").removeClass("ws-success").addClass("ws-invalid")}else{b.removeClass("user-error");b.parent(".row").removeClass("ws-invalid").addClass("ws-success")}});a("#register_submit").on("click",function(d){a(this).closest("form").find(".user-error").size()>0&&d.preventDefault()})}},customValidity:function(){a.webshims.ready("form-validators",function(){a.webshims.addCustomValidityRule("passwords-match",function(b,c){if(c&&a(b).hasClass("passwords-match")){b=
a("#confirmpassword");if(a("#password").val()!==b.val()&&b.val()!=="")return true;b.removeClass("user-error");b.parent(".row").removeClass("ws-invalid").addClass("ws-success");return false}});a.webshims.addCustomValidityRule("passwords-username-match",function(b,c){if(c&&a(b).hasClass("passwords-username-match")){b=a(".passwords-username-match");if(b[0]&&b[1]&&b[0].value==b[1].value)return true;return false}})})},groupValidation:function(b){if(b instanceof Array&&b.length>0)for(var c=b.length,d=0;d<
c;d++){var f=a(b[d]+" INPUT.altOpt, "+b[d]+" SELECT.altOpt"),i=f.closest("FORM"),k=a(b[d]);if(f.length>0&&i.length>0){i.on("click",b[d]+" .checkbox-image",function(){a(this).siblings("INPUT").trigger("change")});var g=function(h,e,j){var n=0,u=h.closest("FORM"),m=e.hasClass("empty-both");j&&u.find("INPUT[type=submit]").on("click",function(){!e.hasClass("showErr")&&e.find(".altOpt").prop("required")&&e.addClass("showErr")});h.each(function(){var o=a(this);if(o.prop("type")=="text"||o.prop("type")==
"tel"){o.val()!=""&&n++;j&&o.on("blur",function(){g(h,e,false)})}else if(o.prop("type")=="checkbox"){o.prop("checked")&&n++;j&&o.on("change",function(){g(h,e,false)})}else if(o.prop("type")=="select-one"){o.val()!=""&&n++;j&&o.on("change",function(){g(h,e,false)})}});if(m)if(n==0||n==h.length){h.prop("required",false);h.removeClass("user-error").addClass("user-success");h.parent().removeClass("ws-invalid").addClass("ws-success");h.attr("aria-invalid","false");j||e.removeClass("showErr")}else{h.prop("required",
true);j||e.addClass("showErr")}else if(n>0){h.prop("required",false);h.removeClass("user-error").addClass("user-success");h.parent().removeClass("ws-invalid").addClass("ws-success");h.attr("aria-invalid","false");j||e.removeClass("showErr")}else{h.prop("required",true);j||e.addClass("showErr")}};g(f,k,true)}}},elements:function(){a("body").hasClass("forms")&&a("form .columns input[type='checkbox']").addClass("css-checkbox");var b=a(".opt-radio").length,c=a("input[type='radio']").filter(function(){var e=
a(this);if(e.hasClass("css-radio")||b){e.prop("checked")&&e.addClass("checked");return e}});c.next("label").click(function(e){e.preventDefault();a(this).prev('input[type="radio"]').click()});c.on("change",function(){var e=a(this);if(e.attr("id")=="rad1"||e.attr("id")=="rad2"){var j=a("#car-brand,#car-model,#car-model-year");if(e.val()=="yes"){j.prop("disabled",false);j.prop("required",true);a("#car-brand").parent(".styled-select").removeClass("disabled-style")}else{j.prop("disabled",true);j.prop("required",
false);j.removeClass("user-error").parent().removeClass("ws-invalid");a("#car-brand").parent(".styled-select").addClass("disabled-style");j.each(function(){a(this).val("")})}}j=e.attr("name");a("input[type='radio'][name="+j+"]").removeClass("checked");e.addClass("checked")});a('input[type="checkbox"]').filter(function(){var e=a(this);if(e.hasClass("css-checkbox")){e.prop("checked")&&e.addClass("checked");return e}}).on("change",function(){var e=a(this);if(e.attr("id")=="other-interest"){var j=a("INPUT[name=otherInterests]");
if(e.prop("checked")){j.prop("disabled",false);j.prop("required",true)}else{j.prop("disabled",true);j.prop("required",false);j.removeClass("user-error").parent().removeClass("ws-invalid");j.each(function(){a(this).val("")})}}else if(e.attr("name")=="preferChannel")if(a("input#offers_via_mobile").is(":checked")){a("#preferredcommunicationtime").prop("disabled",false);a("#preferredcommunicationtime").parent(".styled-select").removeClass("disabled-style")}else{a("#preferredcommunicationtime").prop("disabled",
true).val("");a("#preferredcommunicationtime").parent(".styled-select").addClass("disabled-style")}e.is(":checked")?e.addClass("checked"):e.removeClass("checked")});if(a("body").hasClass("forms")){var d=decodeURI(window.location.href),f=d.substring(d.indexOf("?")+1,d.length).split("&"),i=f.length;for(c=0;c<i;c++){var k=f[c].substring(0,f[c].indexOf("=")),g=f[c].substring(f[c].indexOf("=")+1,f[c].length),h=a("#"+k);if(h.length>0){h.val(g);h.trigger("change")}}}if(a(".kmi-ie-validate").length&&a.browser.msie||
window.navigator.userAgent.match(/Trident\/7\./))a("#dragonflyform").find("#submit").attr("formnovalidate","formnovalidate")},socialLogin:function(){var b=a("#up-config").embeddedData(),c=a("#common-config").embeddedData();a("#user-login-btn");var d="",f="",i="";if(b["lh.weibo.callback"]=="true"){d="weibo";f=b.weiboLhAppId;i=b["eai.weibo.login.api"]}else if(b["lh.qq.callback"]=="true"){d="qq";f=b.qqLhAppId;i=b["eai.qq.login.api"]}var k=getParameterByName("code");if(k!=""&&d.length>0&&f.length>0){c=
b["social.accesscode"].replace("{site}",c.site).replace("{accessCode}",k).replace("{social}",d);a("body").append("<div class='scn-cover'><div class='loading-gif'></div></div>");a("div.scn-cover").show();a.ajax({url:c,type:"GET",dataType:"text",cache:false}).done(function(g){var h=a.parseJSON(g).accessToken;g=(b["eai.server"]&&b["eai.server"].length>0?b["eai.server"]:"")+i;h=JSON.stringify({token:h,appId:f});var e=b["url.welcome"].replace("?user-profile-action=welcome","?user-profile-action=welcome-social&social="+
d);a.ajax({url:g,type:"POST",contentType:"application/json",data:h,crossDomain:false,timeout:3E4,cache:false,xhrFields:{withCredentials:true}}).done(function(j,n,u){if(u.status==200)window.location.href=e}).fail(function(){a("form div.large-centered > div.columns div.row.errormsg p").size()<1&&a("<div class='row errormsg'><p></p></div>").insertBefore(a("form div.large-centered > div.columns:first-child > .row:first-child"));a("div.scn-cover").remove();var j=b.socialLoginFailed.length>0?b.socialLoginFailed:
"login failed, please try again later...";a("form div.large-centered > div.columns div.row.errormsg p").text(j)})}).fail(function(){a("form div.large-centered > div.columns div.row.errormsg p").size()<1&&a("<div class='row errormsg'><p></p></div>").insertBefore(a("form div.large-centered > div.columns:first-child > .row:first-child"));a("div.scn-cover").remove();var g=b.socialLoginFailed.length>0?b.socialLoginFailed:"login failed, please try again later...";a("form div.large-centered > div.columns div.row.errormsg p").text(g)})}}}};
return l}(window.ND||{},jQuery);(function(l,a){a(function(){l.lincolnForm().init()})})(window.ND||{},jQuery);

(function(f){var a={translations:{selectDealer:"Please select a dealer",selectCity:"Please select a city",selectState:"Please select a state",selectStateOrCity:"Please select a city or state",pleaseWait:"Please wait for dealers to load",noDealersFound:"No dealers found"},restServices:{},$dealerSelect:null,$stateSelect:null,$citySelect:null,$formSalesStateSelect:null,$formSalesCitySelect:null,$formSalesDealerSelect:null,stateCityMap:{},types:{address:"ad",city:"ct",region:"rgn",regionCity:"rgnCt"},
constructDealerUrl:function(b,c){switch(b){case a.types.city:return a.restServices["dealer.byCityUrl"].replace("{city}",encodeURIComponent(c.city));case a.types.region:return a.restServices["dealer.byRegionUrl"].replace("{region}",encodeURIComponent(c.region));case a.types.regionCity:return a.restServices["dealer.byRegionCityUrl"].replace("{region}",encodeURIComponent(c.region)).replace("{city}",encodeURIComponent(c.city));case a.types.address:return a.restServices["dealer.byAddressUrl"].replace("{location}",
encodeURIComponent(c.address))}return null},createOption:function(b,c){return'<option value="'+(c||"")+'">'+b+"</option>"},populateStateDropDown:function(b,c,d){var g=f("#cityDropdownData");if(g.length>0){g=JSON.parse(g.html());var e,h,j,l=0,m=0;for(e=0;e<g.list.length;e++){states=g.list[e].states;l=m=states.length;for(h=0;h<l;h++)if(states[h][1]!=null)a.stateCityMap[states[h][0]]=states[h][1]}d=d?a.translations.selectState:undefined;a.populateDropDown(m,b,d,function(n){for(j in a.stateCityMap){var k=
a.stateCityMap[j].name,o=a.stateCityMap[j].cities[0][0];if(f("body").hasClass("koreanstate")&&k!=o)k=k+" - "+o;(o=window.ND.FORMBUILDER&&window.ND.FORMBUILDER.LOCATIONMAP[j]?window.ND.FORMBUILDER.LOCATIONMAP[j].code:undefined)?n.push(a.createOption(k,o)):n.push(a.createOption(k,a.stateCityMap[j].code?a.stateCityMap[j].code.length>0?a.stateCityMap[j].code:a.stateCityMap[j].name:a.stateCityMap[j].name))}});a.populateDropDown(2,c,d)}},populateDropDown:function(b,c,d,g){var e=[],h=c.is("[required]");
d=d?d:c.find(":first").html();e.push(a.createOption(d));typeof g!=="undefined"&&g(e);c.html(e.join(""));b===1&&h&&c.val(c.val());ND.FormBuilder&&ND.FormBuilder.styleSelectOptions&&ND.FormBuilder.styleSelectOptions(c)},handleAjaxResponse:function(b,c){if(typeof b!=="undefined"&&b!=null&&b.length>0){a.clearAjaxError();if(c)a.populateDropDown(b.length,a.$dealerSelect,a.translations.selectDealer,function(e){for(i=0;i<b.length;i++)if(f("body").hasClass("dealerNameOnly"))b[i].specialities.indexOf("Sales")!==
-1&&e.push(a.createOption(b[i].dealershipName,b[i].dealerInfo));else e.push(a.createOption(b[i].dealershipName+"("+b[i].addressLine1+")",b[i].dealerInfo))});else{c="";if(a.$formSalesStateSelect.get(0).selectedIndex!==0)c=a.$formSalesStateSelect.find(":selected").text();if(a.$formSalesCitySelect.get(0).selectedIndex!==0)c=a.$formSalesCitySelect.find(":selected").text()+" - "+c;a.$formSalesDealerSelect.find(".dealer-container").empty();for(var d=0;d<b.length;d++){var g='<div style="margin-bottom: 1em;"><input name="distrib-radio" type="radio" value="'+
b[d].dealerInfo+'"><div class="dealer-item"><p style="font-weight: bold; margin-bottom:0;">'+b[d].dealershipName+'</p><p style="margin-bottom: 0;"><span class="dealer-place-font">'+c+"</span></p></div></div>";a.$formSalesDealerSelect.find(".dealer-container").append(g)}a.attachFormSalesDealerListener()}}else a.handleAjaxError()},clearAjaxError:function(){a.$dealerSelect.removeClass("user-error");var b=a.$dealerSelect.next("span.error-box");b.length>0&&b.remove()},handleAjaxError:function(){a.$dealerSelect.removeClass("user-success").addClass("user-error");
a.$dealerSelect.next("span.error-box").length===0&&f('<span class="error-box"><span>'+a.translations.noDealersFound+"</span></span>").insertAfter(a.$dealerSelect);a.populateDropDown(2,a.$dealerSelect,a.translations.noDealersFound)},attachPostcodeListener:function(b){b.on("blur",function(){var c=b.val();c!=null&&f.trim(c).length>0&&a.fetchData(a.types.address,{address:f.trim(c)},true,a.handleAjaxResponse)});b.trigger("blur")},attachStateCityListeners:function(b,c,d){b.on("change",function(){a.$formSalesDealerSelect.parent().css("display",
"none");a.$formSalesDealerSelect.next().val("");var g=b.val(),e=b.find('[value="'+g+'"]').text(),h,j=a.stateCityMap[e]?a.stateCityMap[e].cities||[]:[],l=j.length;a.populateDropDown(l,c,d?a.translations.selectCity:undefined,function(m){for(h=0;h<l;h++){var n=j[h][1].name,k=window.ND.FORMBUILDER&&window.ND.FORMBUILDER.LOCATIONMAP[e]?window.ND.FORMBUILDER.LOCATIONMAP[e].cities[n]:undefined;k?m.push(a.createOption(j[h][1].name,k)):m.push(a.createOption(j[h][1].name,n))}});b.get(0).selectedIndex===0&&
c.html(c.find(":first"));g=c.val();a.retrieveDealersForCityState(e,g,d)});c.on("change",function(){a.$formSalesDealerSelect.next().val("");c.get(0).selectedIndex!==0?a.$formSalesDealerSelect.parent().css("display","block"):a.$formSalesDealerSelect.parent().css("display","none");var g=b.val(),e=c.val();g=b.find('[value="'+g+'"]').text();e=c.find('[value="'+e+'"]').text();a.retrieveDealersForCityState(g,e,d)})},attachDealerListener:function(){var b=f("#dealer-by-postcode-dealerinfo");b.length>0&&a.$dealerSelect.on("change",
function(){b.val(a.$dealerSelect.val())})},attachFormSalesDealerListener:function(){var b=a.$formSalesDealerSelect.next();a.$formSalesDealerSelect.find('.dealer-container input[type="radio"]').click(function(){b.val(f(this).val())})},retrieveDealersForCityState:function(b,c,d){var g=b!=null&&f.trim(b).length>0,e=c!=null&&f.trim(c).length>0;if(g&&e)a.fetchData(a.types.regionCity,{region:f.trim(b),city:f.trim(c)},d,a.handleAjaxResponse);else if(g)a.fetchData(a.types.region,{region:f.trim(b)},d,a.handleAjaxResponse);
else if(e)a.fetchData(a.types.city,{city:f.trim(c)},d,a.handleAjaxResponse);else d&&a.populateDropDown(2,a.$dealerSelect,a.translations.selectStateOrCity)},fetchData:function(b,c,d,g){b=a.constructDealerUrl(b,c);if(b!=null){a.addLoader();f.ajax({url:b,dataType:"json",success:function(e){a.removeLoader();g(e,d)},error:function(){a.removeLoader();a.handleAjaxError()}})}},addLoader:function(){a.$dealerSelect.attr("readonly",true).html(a.createOption(a.translations.pleaseWait))},removeLoader:function(){a.$dealerSelect.removeAttr("readonly").empty()},
init:function(){var b=f("#dealer-by-postcode-postcode"),c=f("#dealer-translations"),d=f("#rest-services"),g=f("#common-config"),e=f("#dealer-label-json"),h={};a.$dealerSelect=f("#dealer-by-postcode-dealer");a.$stateSelect=f("#dealer-by-statecity-state");a.$citySelect=f("#dealer-by-statecity-city");a.$formSalesStateSelect=f("#FormSales_State");a.$formSalesCitySelect=f("#FormSales_City");a.$formSalesDealerSelect=f("#FormSales_Dealer");if(e.length){h=JSON.parse(e.html());a.$formSalesDealerSelect.append('<div class="ax-paragraph"><p style="font-weight: bold;margin-left:.5em;width:auto;">'+
h.dealerTitle+'</p></div><div class="dealer-container"></div>')}else a.$formSalesDealerSelect.append('<div class="ax-paragraph"><p style="font-weight: bold;margin-left:.5em;width:auto;">Select a distributor</p></div><div class="dealer-container"></div>');a.$formSalesDealerSelect.parent().css("display","none");if(d.length>0){a.restServices=JSON.parse(d.html());d=JSON.parse(g.html());for(key in a.restServices)a.restServices[key]=a.restServices[key].replace("{site}",d.site);c.length>0&&f.extend(a.translations,
JSON.parse(c.html()));if(a.$dealerSelect.length>0){a.attachDealerListener();b.length>0&&a.attachPostcodeListener(b);if(a.$stateSelect.length>0&&a.$citySelect.length>0){a.populateStateDropDown(a.$stateSelect,a.$citySelect,true);a.attachStateCityListeners(a.$stateSelect,a.$citySelect,true);a.$stateSelect.trigger("change")}if(a.$formSalesStateSelect.length>0&&a.$formSalesCitySelect.length>0){a.populateStateDropDown(a.$formSalesStateSelect,a.$formSalesCitySelect,false);a.attachStateCityListeners(a.$formSalesStateSelect,
a.$formSalesCitySelect,false)}}else{if(a.$stateSelect.length>0&&a.$citySelect.length>0){a.populateStateDropDown(a.$stateSelect,a.$citySelect,true);a.attachStateCityListeners(a.$stateSelect,a.$citySelect,true);a.$stateSelect.trigger("change")}if(a.$formSalesStateSelect.length>0&&a.$formSalesCitySelect.length>0){a.populateStateDropDown(a.$formSalesStateSelect,a.$formSalesCitySelect,false);a.attachStateCityListeners(a.$formSalesStateSelect,a.$formSalesCitySelect,false);a.$formSalesStateSelect.trigger("change")}}}}};
f(document).ready(function(){a.init()})})(jQuery);

(function(a){a(function(){if(a(".form-dealer-info").size())if(a(".form-dealer-info").html())if(a(".form-dealer-info").parents(".section").is(":hidden")){a(".form-dealer-info").parents(".section").next(".row").hide();a(".form-dealer-info").parents(".section").show()}})})(jQuery);

(function(a){var q=function(){this.init=function(){a.webshims.setOptions("extendNative",false);a.webshims.setOptions("waitReady",false);a.webshims.debug=true;typeof SiteConf!=="undefined"&&SiteConf.dev?a.webshims.setOptions({basePath:"../../src/themes/ftd/js/lib/shims/"}):a.webshims.setOptions({basePath:"/themes/ftd/js/lib/shims/"});a.webshims.polyfill("forms");a.webshims.setOptions("forms",{iVal:{handleBubble:"hide"},addValidators:true});this.customValidity();this.elements()};this.customValidity=
function(){a.webshims.ready("form-validators",function(){a.webshims.addCustomValidityRule("group-required-phone",function(b){var e=b.name;if(e&&a(b).hasClass("group-required-phone")){b=a(b.form&&b.form[e]||document.getElementsByName(e));if(b.filter(function(){return a(this).val()!==""})[0]){b.each(function(){a("input[type=tel]").removeClass("user-error").addClass("user-success");a("input[type=tel]").parent().removeClass("ws-invalid").addClass("ws-success");a("input[type=tel]").attr("aria-invalid",
"false")});return false}if(a(".group-required-phone").filter(function(){return a(this).val()!==""}).length==0)return true}});a.webshims.addCustomValidityRule("group-required-dealer-location",function(b){var e=b.name,d=b.form;if(e&&a(b).hasClass("group-required-dealer-location")){b=a(d&&d[e]||document.getElementsByName(e));var g=b.filter(function(){return a(this).val()!==""});g.length==0&&a(d).find(".group-required-dealer-location").each(function(){a(this).val()!==""&&g.push(a(this))});if(g[0]){b.each(function(){a("input[type=text]").removeClass("user-error").addClass("user-success");
a("input[type=text]").parent().removeClass("ws-invalid").addClass("ws-success");a("input[type=text]").attr("aria-invalid","false");a("select.group-required-dealer-location").removeClass("user-error").addClass("user-success");a("select.group-required-dealer-location").parent().removeClass("ws-invalid").addClass("ws-success");a("select.group-required-dealer-location").attr("aria-invalid","false")});return false}return true}});a.webshims.addCustomValidityRule("passwords-match",function(b,e){if(e&&a(b).hasClass("passwords-match")){b=
a(".passwords-match");if(b[0].value!==b[1].value&&b[1].value!=="")return true;return false}});a.webshims.addCustomValidityRule("captcha-validation",function(b,e,d){var g=a(b),i=a(b.form).find("#submit");if(g.hasClass("captcha")){if(typeof d._ajaxvalidation!=="boolean")d._ajaxvalidation=true;if(typeof d._validRs!=="boolean")d._validRs=false;if(typeof d._lastValue!=="string")d._lastValue="";if(i.length>0&&i.attr("data-pleasewait"))var c=i.val(),f=i.attr("data-pleasewait");if(/^[0-9]{5}$/.test(e))if(d._ajaxvalidation&&
d._lastValue!=e){b=JSON.stringify({captcha:e});g.addClass("pending").prop("disabled",true);if(c){i.val(f);i.prop("disabled",true)}a.ajax({type:"POST",url:instance.serviceLocator("captcha.validation"),contentType:"application/json; charset=UTF-8",data:b,dataType:"json",success:function(h){g.removeClass("pending").prop("disabled",false);if(c){i.val(c);i.prop("disabled",false)}d._ajaxvalidation=false;if(h.valid=="false"){d._validRs=true;g.trigger("refreshvalidityui");g.trigger("refreshCustomValidityRules")}else if(h.valid==
"true"){g.removeClass("user-error").addClass("user-success");d._validRs=false;d._ajaxvalidation=true}else d._validRs=false},error:function(){g.removeClass("pending").prop("disabled",false);if(c){i.val(c);i.prop("disabled",false)}d._validRs=true;g.trigger("refreshvalidityui")}})}else d._ajaxvalidation=true;else{d._lastValue=e;return true}d._lastValue=e;return d._validRs}});a("#captchareload").on("click",function(){a(this).siblings(".captcha").val("").trigger("refreshvalidityui")})});this.groupValidation(["#dragonflyform .group fieldset > .column",
".opt-inout-survey"])};this.elements=function(){var b=this;a("select");var e=a(".fbform"),d=a("#FoaConfig");a(".opt-inout-checkbox").show();e.on("focus","select",function(){a(this).parent().addClass("focus")});e.on("blur","select",function(){a(this).parent().removeClass("focus")});a("form select[autofocus]").trigger("focus");a("input, select").on("blur",function(){a(".ws-errorbox").remove()});a.browser.msie&&a(document).on("change","select",function(){a(this).blur()});a('input[type="checkbox"]').not(".uniform-checkbox").filter(function(){if(!a(this).parent().hasClass("hidden-options-checkbox"))return a(this)}).each(function(){var c=
a(this);c.before(a('<div class="checkbox-image" />'));c.prop("checked")&&c.prev().addClass("checked")});a(".checkbox-image").on("click",function(){var c=a(this);if(c.hasClass("checked")){c.removeClass("checked");c.parent().removeClass("ws-success");c.parent().addClass("ws-invalid");c.next().removeAttr("aria-invalid");c.next().removeClass("user-error");c.next().prop("checked",false);c.next().removeClass("user-sucess");c.next().addClass("user-error");c.next().attr("aria-invalid",true)}else{c.addClass("checked");
c.parent().removeClass("ws-invalid");c.parent().addClass("ws-success");c.next().prop("checked",true);c.next().removeClass("user-error");c.next().addClass("user-success");c.next().removeAttr("aria-invalid")}if(c.siblings(".hidden-options-checkbox").length>0){var f=c.siblings(".hidden-options-checkbox").find("input[type='checkbox']");c.is(".checked")?f.prop("checked",true):f.prop("checked",false)}b.applyToShowHideFunc(c,b)});a(".regform [type=submit]").on("click",function(){if(d.length>0){var c=JSON.parse(d.html());
if(typeof c.firstname!=="undefined"&&typeof c.lastname!=="undefined"&&a("#firstname").val().length==0&&a("#lastname").val().length==0){a("#firstname").val(c.firstname);a("#lastname").val(c.lastname)}}});a("label").on("click",function(){var c=a(this),f=c.parent();f=a(".checkbox-image",f);f.hasClass("checked")?f.removeClass("checked"):f.addClass("checked");b.applyToShowHideFunc(c,b)});a(".regform").hasClass("form-invalid")||a(".regform > .section").slice(1).find(".row.form-bg > .columns").hide();a(".section").on("click",
".next-btn",function(c){c.preventDefault();a(this).parents(".section").next().find(".row.form-bg > .columns").slideDown(300,function(){a(this).parents(".section").prev().find(".next-btn").animate({opacity:0},200,function(){a(this).hide()});a("html, body").animate({scrollTop:a(this).parents(".section").offset().top},600)})});a(".hint").length>0&&a(".hint").click(function(){a(this).siblings(".hint-content").slideToggle();return false});a(".regform .next-btn").length>0&&a(document).on("keypress",function(c){if(c.which===
13)a(".section .next-btn:visible").size()>0?a(".section .next-btn:visible").click():a(".regform #submit").click()});a(".ie8 .fbform").length>0&&a(document).on("keypress",function(c){c.which==13&&a(c.target).closest("fieldset").find("input[type='submit']").trigger("click")});if(e=document.getElementById("captchaimage"))e.src="/servlet/captcha.png?a="+(new Date).getTime();e=a(".opt-inout-checkbox .option-group input[type=checkbox]");e.length>0&&e.each(function(){if(a(this).prop("checked")){a(this).closest(".option-group").show();
b.groupValidation([".opt-inout-checkbox"])}});if(a(".two-inputs").length>0){var g=a(".two-inputs input").eq(0),i=a(".two-inputs input").eq(1);i.on("blur, change",function(){g.checkValidity()&&i.checkValidity()||a(this).parent().removeClass("ws-success").addClass("ws-invalid")})}a("a.submitForm").on("click",function(c){c.preventDefault()})};this.applyToShowHideFunc=function(b,e){var d=b.siblings("input[type=checkbox]");if(d.length!=0){var g=d.attr("id").toLowerCase();b.siblings("#opt-inout-checkbox").length>
0&&e.bindShowHidefunc(b,".option-group","checked",".opt-inout-checkbox",true);if(g.indexOf("other")!=-1){d=d.parent().parent();d.hasClass("opt-inout-survey")&&e.bindShowHidefunc(b,".survey-group","checked",".opt-inout-survey");d.hasClass("survey-group")&&e.bindShowHidefunc(b,".textare","checked",".survey-group")}e.alternativeSel(b,"category-one","category-two",".opt-inout-checkbox");e.alternativeSel(b,"category-one","category-two",".opt-inout-survey")}};this.bindShowHidefunc=function(b,e,d,g,i){var c=
this,f=b.find(e),h=d,j=i;b.siblings(".option-group").find("INPUT[type=checkbox]");if(typeof h!=="string"||typeof h==="string"&&h.length==0)h="checked";if(typeof j!=="boolean")j=false;if(typeof g==="string"&&g.length>0)f=b.closest(g).find(e);var m=function(){f.find("INPUT,TEXTAREA").each(function(){var k=a(this);k.prop("type")=="checkbox"||k.prop("type")=="radio"?k.prop("checked",false):k.val("")});f.find(".textare").slideUp();f.find(".checkbox-image").removeClass(h);f.find(".altOpt").prop("required",
false);f.closest(".opt-inout-checkbox").removeClass("showErr").removeClass("ws-invalid");f.closest(".opt-inout-checkbox").find(".ws-invalid").removeClass("ws-invalid")};if(b.prop("type")=="checkbox"||b.prop("type")=="radio")b.prop("checked")&&!j?f.slideDown(function(){f.closest(".opt-inout-checkbox").length>0&&c.groupValidation([".opt-inout-checkbox"])}):f.slideUp(function(){m()});else if(b.hasClass(h))j?f.slideUp(function(){m()}):f.slideDown(function(){f.closest(".opt-inout-checkbox").length>0&&
c.groupValidation([".opt-inout-checkbox"])});else f.slideToggle(function(){if(f.is(":hidden")){if(j){var k=b.siblings(".checkbox-image"),n=b.siblings("INPUT");k.length>0&&k.addClass(h);n.length>0&&n.prop("checked",true)}m()}else if(f.closest(".opt-inout-checkbox").length>0){f.siblings("input[type=checkbox]").prop("checked",false);c.groupValidation([".opt-inout-checkbox"])}})};this.alternativeSel=function(b,e,d,g){if(b.closest(g).length>0){b=b.siblings("INPUT");var i=a(g);g=i.find("."+e);var c=i.find("."+
d);i=function(f){f.siblings(".checkbox-image").removeClass("checked");f.prop("checked",false);if(f.attr("id").toLowerCase().indexOf("other")!=-1&&f.parent().parent().hasClass("opt-inout-survey")){var h=f.closest(".opt-inout-survey").find(".survey-group");h.slideUp(function(){h.find("INPUT").siblings(".checkbox-image").removeClass("checked");h.find("INPUT").prop("checked",false);h.find(".textare").slideUp();h.find("TEXTAREA").val("")})}};if(b.hasClass(e)){e=c;i(e)}else if(b.hasClass(d)){e=g;i(e)}}};
this.groupValidation=function(b){if(b instanceof Array&&b.length>0)for(var e=b.length,d=0;d<e;d++){var g=a(b[d]+" INPUT.altOpt,"+b[d]+" SELECT.altOpt"),i=g.closest("FORM"),c=a(b[d]);if(g.length>0&&i.length>0){if(!a(b[d]).hasClass("eventBinded")){i.on("click",b[d]+" .checkbox-image",function(){a(this).siblings("INPUT").trigger("change")});a(b[d]).addClass("eventBinded")}var f=function(h,j,m,k){var n=0,o=h.closest("FORM");if(m){o.find("INPUT[type=submit]").on("click",function(){!j.hasClass("showErr")&&
j.find(".altOpt").prop("required")&&j.addClass("showErr")});o.find("a.submitForm").on("click",function(){!j.hasClass("showErr")&&j.find(".altOpt").prop("required")&&j.addClass("showErr")})}h.each(function(){var l=a(this),p="change";if(l.prop("type")=="text"){l.val()!=""&&n++;p="blur"}else if(l.prop("type")=="checkbox")l.prop("checked")&&n++;else l.is("select")&&l.val()!=""&&n++;if(m&&!l.hasClass("eventBinded")){l.on(p,function(){f(h,j,false,l)});l.addClass("eventBinded")}});if(n>0){h.prop("required",
false);h.removeClass("user-error").addClass("user-success");h.parent().removeClass("ws-invalid").addClass("ws-success");h.attr("aria-invalid","false");if(!m){j.removeClass("showErr").removeClass("ws-invalid");j.find(".ws-invalid").removeClass("ws-invalid")}}else{h.prop("required",true);if(!m){j.addClass("showErr");if(k&&k.length>0&&k.is("select")){k.removeClass("user-success").addClass("user-error");k.parent().removeClass("ws-success").addClass("ws-invalid");k.attr("aria-invalid","true")}}}};f(g,
c,true)}}}};a(function(){formValidationInstance=new q;formValidationInstance.init()})})(jQuery);

(function(e){var c={data:{},type:{hidden:"input",text:"input",textarea:"input",tel:"input",email:"input",text:"input",select:"select",radio:"check",checkbox:"check"},parseData:function(a){a=a.split(/\|\||;;/);for(i=0;i<a.length;i++){var b=a[i],d=b.indexOf("=");if(d!=-1){var f=b.substring(0,d);b=b.substring(d+1);if(c.data&&c.data[f])c.data[f].push(b);else{d=[];d.push(b);c.data[f]=d}}}},setInput:function(a,b){e(a).attr("value",c.data[b][0])},setCheck:function(a,b){for(x in c.data[b])if(e(a).attr("value")===
c.data[b][x]){e(a).prev(".checkbox-image")&&e(a).prev(".checkbox-image").addClass("checked");e(a).attr("checked",true);break}},setSelect:function(a,b){for(x in c.data[b])e(a).find("option[value="+c.data[b][x]+"]")&&e(a).find("option[value="+c.data[b][x]+"]").attr("selected",true)},setValue:function(){e(".prepopulate").each(function(){var a=e(this),b=a.attr("name"),d=a.attr("type");a=a.get(0).tagName;if((d=c.type[d]||c.type[a.toLowerCase()])&&c.data[b]&&c.data[b][0])switch(d){case "input":c.setInput(this,
b);break;case "check":c.setCheck(this,b);break;case "select":c.setSelect(this,b);break}})},queryString:function(a){var b=decodeURIComponent(window.location.search),d=new RegExp(""+a+"=([^&?]*)","ig");return b.match(d)?b.match(d)[0].substr(a.length+1):null},init:function(){var a=c.queryString("fbdata");if(a){c.parseData(a);c.data&&c.setValue()}}};e(document).ready(function(){c.init()})})(jQuery);

(function(a){var f={init:function(){this.popup("body.confirm-alert .close.formbuilder-close")},popup:function(c){c=a(c);if(c.length<1)return this;c.each(function(){var e=a(this),b=a("#confirmPopup");if(!(b.length<1)){e.on("click",function(d){d.preventDefault();a(".state-edit").length>0&&a(".state-edit:visible").length<1?a("#confirmPopup .formbuilder-close")[0].click():b.foundation("reveal","open",{animationSpeed:110})});a(".close-reveal-modal, .cancel",b).live("click",function(d){d.preventDefault();
b.foundation("reveal","close")});a(".reveal-modal-bg").live("click",function(){b.is(":visible")&&b.foundation("reveal","close")})}});return this}};a(function(){f.init()})})(jQuery);

(function(d){var f={init:function(){var a=d("#InMarketDateMonthName").embeddedData(),c=f.getDate();d.each(c,function(e,b){e=b[0]+""+b[1];b=a[b[0]]+" "+b[1];d("#InMarketDate").append("<option value='"+e+"'>"+b+"</option>")});a.unknown!=""&&a.unknown!=undefined&&d("#InMarketDate").append("<option value='unknown'>"+a.unknown+"</option>")},getDate:function(){var a=new Date,c=a.getMonth();a=a.getFullYear();for(var e=[],b=0;b<12;b++){c+=1;if(c>12){c=1;a+=1}e[b]=new Array(c,a)}return e}};d(function(){f.init()})})(jQuery);

(function(a){var b={activeVehicle:0,modelData:{},filteredData:{},currentPage:0,formTypeStore:Object.create(ND.cacheStore),init:function(){if(a("body.brochure-request").size()){var d="",c=a(".brochure-request .models"),f="digital",e=a(".brochure-request .delivery");b.formTypeStore.key="form.type";b.formTypeStore.expires=365;b.formTypeStore.domin=instance.commonConfig().cookieDomain;(d=b.getDataUrl())&&a.ajax({type:"GET",url:d,dataType:"json",success:function(g){b.modelData.items=g;b.modelData.isMobile=
instance.isMobile();if(b.formTypeStore.is())f=a.trim(a.cookie(b.formTypeStore.key));b.renderContent(c,f)},error:function(){a(".loading",c).hide();a(".alert-text",c).show()}});a(".select-icon",e).click(function(){var g=a(this);if(!g.hasClass("active")){g.parent().siblings().children(".select-icon").removeClass("active");g.addClass("active");g.hasClass("digital")&&b.renderContent(c,"digital");g.hasClass("mail")&&b.renderContent(c,"mail")}});var i;a("html").hasClass("lt-ie9")||a(window).bind("resize",
function(){i&&clearTimeout(i);i=setTimeout(function(){if(a(window).width()<768){var g=a(".active",e).data("type");b.modelData.isMobile=true;b.renderContent(c,g)}if(a(window).width()>=768){g=a(".active",e).data("type");b.modelData.isMobile=false;b.renderContent(c,g)}},100)})}},formSwitch:function(d){var c=a(".brochure-request .delivery"),f=a(".brochure-request .form-switch .section"),e=f.first();f=f.last();a(".select-icon",c).removeClass("active");a("."+d,c).addClass("active");b.formTypeStore.set(d);
if(d==="digital"){e.show();f.hide()}else{f.show();e.hide()}},getVehicleInfo:function(){var d=location.href.search("ctx=");if(d==-1)return false;else{d=location.href.substring(d);var c=d.indexOf("&");return c==-1?d.substring(4):d.substring(4,c)}},getDataUrl:function(){var d=instance.commonConfig(),c=instance.serviceLocator("brochure.request");if(c)c=c.replace("{tooltype}",d.tooltype).replace("{site}",d.site).replace("{priceZone}",d.priceZone);return c},clearSelection:function(d){a(".loading",d).show();
a(".wrapper",d).remove();a(".vehicle",d).remove();a(".model-list",d).remove()},renderContent:function(d,c){var f=a("#model-select").html(),e={};b.clearSelection(d);b.filteredData.items=[];b.filteredData.isMobile=b.modelData.isMobile;if(c==="mail"){if(b.modelData.items)for(var i=0;i<b.modelData.items.length;i++)b.modelData.items[i].hasPaperBrochure&&b.filteredData.items.push(b.modelData.items[i])}else if(b.modelData.items)for(i=0;i<b.modelData.items.length;i++)typeof b.modelData.items[i].brochureUrl!==
"undefined"&&b.filteredData.items.push(b.modelData.items[i]);a(".loading",d).show();if(b.filteredData.items.length>0){a.template("modelsTemplate",f);a.tmpl("modelsTemplate",b.filteredData).appendTo(d)}b.formSwitch(c);if(!b.filteredData.isMobile){c=a("li",d);if(a(window).width()<=1024){e.minSlides=4;e.maxSlides=4;e.moveSlides=4}else{e.minSlides=5;e.maxSlides=5;e.moveSlides=5}b.initialSlider(e,d);c.click(function(){var j=a(this);b.activeVehicle=j.index();j.siblings().removeClass("active");j.addClass("active");
b.updateFormFields();return false})}if(b.filteredData.isMobile){e=a(".model-list .select",d);var g=a(".dropdown",d);c=a(".vehicle",d);var k=a("img",c),m=a("h3 span",c);c=a("li",g);g.jScrollPane({autoReinitialise:true});b.preSelectVehicle(d);e.click(function(){g.toggleClass("dropdownOn")});c.click(function(){var j=a(this),l=a("img",j).attr("src"),h=a("span",j).text();b.activeVehicle=j.index();k.attr("src","");a(".loading",d).show();k.attr("src",l);m.text(h);g.toggleClass("dropdownOn");a(".loading",
d).hide();b.updateFormFields()})}},updateFormFields:function(){var d=a("form .Brochure_dId"),c=a("form .Brochure_dYear"),f=a("form .Brochure_dCksCode"),e=a("form .Brochure_dBrochureCode"),i=a("form .Brochure_dTestDriveCode"),g=a("form .Brochure_dQuoteCode"),k=a("form .Brochure_dName"),m=a("form .Brochure_mId"),j=a("form .Brochure_mName"),l=a("form .Brochure_mCksCode"),h=a("form .Brochure_brochureUrl"),o=a("form .Brochure_makeName"),p=a("form .Brochure_makeName"),n=b.filteredData.items[b.activeVehicle];
d.val(n.dId);c.val(n.dYear);f.val(n.dCksCode);e.val();i.val();g.val();k.val(n.dName);j.val(n.mName);m.val(n.mId);l.val(n.mCksCode);h.val(n.brochureUrl);o.val();p.val()},initialSlider:function(d,c){brochureSlider=a(".bxslider",c).bxSlider({minSlides:d.minSlides,maxSlides:d.maxSlides,moveSlides:d.moveSlides,slideWidth:155,hideControlOnEnd:false,infiniteLoop:false,slideMargin:4,useCSS:false,pager:a(".bxslider",c).children().length>d.minSlides?true:false,controls:a(".bxslider",c).children().length>d.minSlides?
true:false,onSliderLoad:function(){b.preSelectVehicle(d,c)}})},reTriggerSlider:function(d,c){brochureSlider.reloadSlider({minSlides:d.minSlides,maxSlides:d.maxSlides,moveSlides:d.moveSlides,slideWidth:155,hideControlOnEnd:false,infiniteLoop:false,slideMargin:4,useCSS:false,startSlide:b.currentPage,pager:a(".bxslider",c).children().length>d.minSlides?true:false,controls:a(".bxslider",c).children().length>d.minSlides?true:false,onSliderLoad:function(){a(".wrapper",c).animate({opacity:1,filter:"alpha(opacity=100)"},
500);a(".loading",c).hide()}})},preSelectVehicle:function(d,c){var f=b.getVehicleInfo();if(f){var e=f.search(";"),i="",g="",k=false,m=a(".bx-viewport",c).width();if(e==-1)i=f.substring(2);else g=f.substring(f.search("d")+2);a(".model-items li",c).each(function(l){var h=a(this);if(g!==""){if(h.data("did")==g){h.addClass("active");k=true;b.activeVehicle=l;if(b.modelData.isMobile){l=a(".vehicle img",c);var o=a(".vehicle h3 span",c);l.attr("src",a("img",h).attr("src"));o.text(a("span",h).text());a(".loading",
c).hide()}else a(".bxslider").animate({left:-h.position().left+m-h.width()+"px"},function(){b.currentPage=Math.floor(h.position().left/m);b.reTriggerSlider(d,c,k)});b.updateFormFields()}}else if(h.data("mid")==i&&h.data("did")==""){h.addClass("active");k=true;b.activeVehicle=l;if(b.modelData.isMobile){l=a(".vehicle img",c);o=a(".vehicle h3 span",c);l.attr("src",a("img",h).attr("src"));o.text(a("span",h).text());a(".loading",c).hide()}else a(".bxslider").animate({left:-h.position().left+m-h.width()+
"px"},function(){b.currentPage=Math.floor(h.position().left/m);b.reTriggerSlider(d,c,k)});b.updateFormFields()}});if(!k){if(b.modelData.isMobile){f=a(".vehicle img",c);e=a(".vehicle h3 span",c);f.attr("src",a(".model-items li:first img").attr("src"));e.text(a(".model-items li:first span").text());a(".loading",c).hide()}else{var j=a(".bxslider li:first",c);j.addClass("active");a(".bxslider").animate({},function(){b.currentPage=0;b.reTriggerSlider(d,c,k)})}b.updateFormFields()}}else{if(b.modelData.isMobile){f=
a(".vehicle img",c);e=a(".vehicle h3 span",c);f.attr("src",a(".model-items li:first img").attr("src"));e.text(a(".model-items li:first span").text());a(".loading",c).hide()}else{j=a(".bxslider li:first",c);j.addClass("active");a(".bxslider").animate({left:-j.position().left+m-j.width()+"px"},function(){b.currentPage=0;b.reTriggerSlider(d,c,k)})}b.updateFormFields()}}};a(function(){b.init()})})(jQuery);

(function(a){var d={init:function(){if(a("body.quote-request").size()){var b=a(".quote-request .content-banner .content-wrap"),c=d.getData();c?d.renderContent(b,c):d.error(b);var e;a("html").hasClass("lt-ie9")||a(window).bind("resize",function(){e&&clearTimeout(e);e=setTimeout(function(){if(a(window).width()<768){c=d.getData();d.renderContent(b,c)}if(a(window).width()>=768){c=d.getData();d.renderContent(b,c)}},100)})}},clearContent:function(b){a(".loading",b).show();a(".vehicle",b).remove();a(".specs",
b).remove();a(".spec-list",b).remove()},getData:function(){var b=a("#bnp-vehicle-config").embeddedData();if(a.isEmptyObject(b))return false;else{b.isMobile=instance.isMobile();return b}},error:function(b){a(".loading",b).hide();a(".alert-text",b).show()},renderContent:function(b,c){d.clearContent(b);var e=a("#model-specs").html();a.template("modelTemplate",e);a.tmpl("modelTemplate",c).appendTo(b);a(".loading",b).hide();a("<input/>",{id:"vehicleInfo",name:"vehicleInfo",type:"hidden",value:JSON.stringify(c)});
a("#dragonflyform #vehicleInfo").length>0&&a("#dragonflyform #vehicleInfo").remove();if(c.isMobile){var f=a(".dropdown",b);b=a(".select",b);f.jScrollPane({autoReinitialise:true});b.click(function(){f.toggleClass("dropdownOn")})}else a(".specs .detail",b).jScrollPane()}};a(function(){d.init()})})(jQuery);

(function(b){var j={init:function(){this.type=b("#FormSales_Selected_Type");this.typeName=this.type.attr("name");this.companyName=b("#FormSales_Company_Name");this.type.parent().css("display","none");this.companyName.parent().css("display","none");this.selectionElem=b("#FormSales_Selection");this.modelElem=b("#FormSales_Model");this.stateElem=b("#FormSales_State");this.compName=b("#FormSales_Company_Name").attr("name");this.observeElem=b("#FormSales_Observation");this.telElem=b("#FormSales_Tel");
this.singleInputWithCheck=b(".fbform input[type=text][data-check]");this._switchable=false;this.ctrlCode=[108,112,113,114,115,116,117,118,119,120,121,122,123,8,9,12,13,16,17,18,20,27,32,33,34,35,36,37,38,39,40,45,46,144,175,174,179,173,172,180,170,171];this._formatConfig={CNPJ:{pattern:new RegExp(/^[0-9]{2}\.[0-9]{3}\.[0-9]{3}\/[0-9]{4}\-[0-9]{2}$/),formatMap:{"2":".","6":".","10":"/","15":"-",last:"18"}},CPF:{pattern:new RegExp(/^[0-9]{3}\.[0-9]{3}\.[0-9]{3}\-[0-9]{2}$/),formatMap:{"3":".","7":".",
"11":"-",last:"14"}}};this.addEventListener()},dynmCheck:function(a,c,d){var e=this;this._fieldType=c;var i=parseInt(this._formatConfig[this._fieldType].formatMap.last,10);a.on("blur",function(){var f=b(this).val();if(!e._formatConfig[e._fieldType].pattern.test(f))if(d)d.length&&alert(d);else alert(a_messages[e.typeName].r)});a.on("keydown",function(f){var h=f.keyCode;if(h===8){f=b(this).val();var g=f.length;if(e._switchable&&e._fieldType==="CNPJ"&&g===15){f=e.switchPattern(f,"CPF");b(this).val(f)}}if(b.inArray(h,
e.ctrlCode)===-1){f=b(this).val();g=f.length;if(e._switchable&&e._fieldType==="CPF"&&g===14){f=e.switchPattern(f,"CNPJ");g=f.length;i=parseInt(e._formatConfig[e._fieldType].formatMap.last,10);b(this).val(f)}if(g>=i){f=f.slice(0,i-1);b(this).val(f);return true}if(h=e._formatConfig[e._fieldType].formatMap[""+g]){f+=h;b(this).val(f)}}})},switchPattern:function(a,c){a=a.replace(/(\.)|(\-)|(\/)/g,"");this._fieldType=c;if(c==="CNPJ")a=a.replace(/^(.{2})(.{3})(.{3})(.{3})$/,"$1.$2.$3/$4");else if(c==="CPF")a=
a.replace(/^(.{3})(.{3})(.{3})(.{2})/,"$1.$2.$3-$4");return a},addEventListener:function(){var a=this;this.selectionElem.change(function(){var c=b(this).val();a.type.val("");a.type.off();a.companyName.val("");var d=a.type.prev();switch(c){case "CNPJ":a.type.attr({placeholder:"__.___.___/____-__"}).removeAttr("maxlength");d.html(c);a.companyName.parent().css("display","none");a.type.parent().css("display","block");a_fields[a.compName].r=false;a_messages[a.typeName].r=a_messages[a.typeName].message_a;
a._switchable=false;a.dynmCheck(a.type,c);break;case "CPF":a.type.attr({placeholder:"___.___.___-__"}).removeAttr("maxlength");d.html(c);a.companyName.parent().css("display","none");a.type.parent().css("display","block");a_fields[a.compName].r=false;a_messages[a.typeName].r=a_messages[a.typeName].message_b;a._switchable=false;a.dynmCheck(a.type,c);break;case "CPF/CNPJ":a.type.removeAttr("maxlength placeholder");d.html(c);a.companyName.parent().css("display","none");a.type.parent().css("display","block");
a_fields[a.compName].r=false;a_messages[a.typeName].r=a_messages[a.typeName].message_c;a._switchable=true;a.dynmCheck(a.type,"CPF");break;case "CPFB":a.type.attr({placeholder:"___.___.___-__"}).removeAttr("maxlength");d.html("CPF");a.type.parent().css("display","block");a.companyName.parent().css("display","block");a_fields[a.compName].r=true;a_messages[a.typeName].r=a_messages[a.typeName].message_d;a._switchable=false;a.dynmCheck(a.type,"CPF");break;default:a.type.parent().css("display","none");
a.companyName.parent().css("display","none");a_fields[a.compName].r=false;break}});b("#FormSales_Observation").keydown(function(c){if(b.inArray(c.keyCode,a.ctrlCode)===-1){c=a.observeElem.attr("maxlength");if(a.observeElem.val().length>=c){c=a.observeElem.attr("name");alert(a_messages[c].r)}}});b('.fbform input[type="reset"]').click(function(){a.selectionElem.find('option[value=""]').prop("selected",true);a.selectionElem.trigger("change");a.modelElem.find('option[value=""]').prop("selected",true);
a.modelElem.trigger("change");a.stateElem.find('option[value=""]').prop("selected",true);a.stateElem.trigger("change")});a.singleInputWithCheck&&a.singleInputWithCheck.length>0&&a.singleInputWithCheck.each(function(){var c=b(this).attr("data-check");c=c?c.toUpperCase():"";var d=a_messages[b(this).attr("name")]&&a_messages[b(this).attr("name")].r?a_messages[b(this).attr("name")].r:"";switch(c){case "CNPJ":b(this).attr({placeholder:"__.___.___/____-__"}).removeAttr("maxlength");a.dynmCheck(b(this),
c,d);break;case "CPF":b(this).attr({placeholder:"___.___.___-__"}).removeAttr("maxlength");a.dynmCheck(b(this),c,d);break}});this.telElem.on("keydown",function(c){c=c.keyCode;var d=b(this).val(),e=d.length;if(c===8)if(e===5){d=d.replace(/\(([0-9]{2})\)/,"$1");b(this).val(d)}else if(e===10){d=d.slice(0,9);b(this).val(d)}if(b.inArray(c,a.ctrlCode)===-1)if(e===2){d="("+d+")";b(this).val(d)}else if(e===8){d+="-";b(this).val(d)}})}};b(function(){j.init()})})(jQuery);

(function(a){var b={init:function(){b.evtControl()},evtControl:function(){a(".giftsradio #giftsImage").click(function(){a(this).next("label").trigger("click")});a(".giftsradio .gift label").click(function(){a(".giftsradio #gifttag").removeClass("checked");a(".giftsradio #giftsImage").removeClass("checked");a(".giftsradio .gift").removeClass("ws-invalid");a(this).siblings("#gifttag").addClass("checked");a(this).siblings("#giftsImage").addClass("checked")})}};a(function(){b.init()})})(jQuery);
