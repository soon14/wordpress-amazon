
(function(){for(var a,e=function(){},b=["assert","clear","count","debug","dir","dirxml","error","exception","group","groupCollapsed","groupEnd","info","log","markTimeline","profile","profileEnd","table","time","timeEnd","timeStamp","trace","warn"],c=b.length,d=window.console=window.console||{};c--;){a=b[c];d[a]||(d[a]=e)}})();

if(!Object.create)Object.create=function(a,b){if(a===null)a={__proto__:null};else{if(typeof a!="object")throw new TypeError("typeof prototype["+typeof a+"] != 'object'");var c=function(){};c.prototype=a;a=new c}typeof b!=="undefined"&&Object.defineProperties(a,b);return a};

(function(c){c.fn.embeddedData=function(b){var d=this.data("x-json");if(!d&&this.attr("type")==="text/x-json"){d=c.parseJSON(this.html());this.data("x-json",d)}return b?d[b]||null:d||{}};c.fn.doOnce=function(b){this.length&&b.apply(this);return this};c.fn.forEach=function(b){this.length&&this.each(b);return this};c.fn.killFlash=function(){this.length&&this.each(function(){var b=c(this).flash();b.remove&&b.remove()});return this};c.fn.metaBasedFlash=function(){var b={},d=function(a){return(a=a.length>
0?a.metadata({type:"class"}):0)&&"swf"in a?a:0};return function(a){this.length&&this.each(function(){var e=c(this),f=d(e);a=c.extend(b,a);if(f){f=c.extend(true,f,a.swfobject);e.flash(f);e.addClass("flash-loaded");a.success&&a.success.apply(this)}});return this}}();c.fn.lazyLoadImages=function(){var b={},d=function(a){return(a=a.length>0?a.metadata({type:"class"}):0)&&"src"in a?a:0};return function(a){this.length&&this.each(function(){var e=c(this),f=d(e);a=c.extend(b,a);if(f){e.attr("src",f.src);
a.success&&a.success.apply(this)}});return this}}();c.extend({getQueryVariable:function(b,d){var a=b.indexOf("?");if(a!=-1){b=b.substring(a+1).split("&");if(d)for(a=0;a<b.length;a++){var e=b[a].split("=");if(e[0]===d)return decodeURI(e[1])}else return b}return false}})})(jQuery,window,document);

(function(b){if(typeof define==="function"&&define.amd)define(["jquery"],b);else typeof exports==="object"?b(require("jquery")):b(jQuery)})(function(b){function j(a){return e.raw?a:encodeURIComponent(a)}function m(a){return e.raw?a:decodeURIComponent(a)}function n(a){return j(e.json?JSON.stringify(a):String(a))}function o(a){if(a.indexOf('"')===0)a=a.slice(1,-1).replace(/\\"/g,'"').replace(/\\\\/g,"\\");try{a=decodeURIComponent(a.replace(p," "));return e.json?JSON.parse(a):a}catch(d){}}function k(a,
d){a=e.raw?a:o(a);return b.isFunction(d)?d(a):a}var p=/\+/g,e=b.cookie=function(a,d,c){if(arguments.length>1&&!b.isFunction(d)){c=b.extend({},e.defaults,c);if(typeof c.expires==="number"){var g=c.expires,h=c.expires=new Date;h.setTime(+h+g*864E5)}return document.cookie=[j(a),"=",n(d),c.expires?"; expires="+c.expires.toUTCString():"",c.path?"; path="+c.path:"",c.domain?"; domain="+c.domain:"",c.secure?"; secure":""].join("")}g=a?undefined:{};h=document.cookie?document.cookie.split("; "):[];for(var i=
0,q=h.length;i<q;i++){var f=h[i].split("="),l=m(f.shift());f=f.join("=");if(a&&a===l){g=k(f,d);break}if(!a&&(f=k(f))!==undefined)g[l]=f}return g};e.defaults={};b.removeCookie=function(a,d){if(b.cookie(a)===undefined)return false;b.cookie(a,"",b.extend({},d,{expires:-1}));return!b.cookie(a)}});

(function(b){b.pubsubLogging=false;var a=b({});b.subscribe=function(){a.bind.apply(a,arguments)};b.subscribeOnce=function(){a.one.apply(a,arguments)};b.unsubscribe=function(){a.unbind.apply(a,arguments)};b.publish=function(){b.pubsubLogging&&console.log.apply(console,arguments);a.trigger.apply(a,arguments)}})(jQuery);

/* ************************ APAC Ford H.27.3 Code *************************/
/*
  CAUTION: AT NO TIME IS ANY PARTY TO MODIFY THIS FILE OTHER THAN FORD ANALYTICS
  REQUIRED: JS variables that must be set of EVERY call are s_account and omni_filters 

	140827 - add gnav tracking, update BTL
	150609 - current file on site
	160614 - change tracking servers to fordap root

*/

/************************ ADDITIONAL FEATURES ************************   	
	Dynamic Report Suite Selection
	Universal Tag
	Plugins
*/

/*************** Load Account and Filters - Should be set on a page level *****************/

	if (typeof s_account == "undefined" || s_account==null || s_account=='' || typeof omni_filters == "undefined" || omni_filters==null || omni_filters==''){
		var s_account="fapadev";
		var s=s_gi(s_account,1);
		s.linkInternalFilters="javascript:,dragonfly.ford.com," + document.location.host;
	}else{
		var s=s_gi(s_account,1);
		s.linkInternalFilters = omni_filters;
	}
	
	if (changeCookiePeriods(document.location.host)){
		s.cookieDomainPeriods="3"
   		s.fpcookieDomainPeriods="3"
   	}	
		

/**************************************************COMMON CODE******************************************/
/* Conversion Config */
/* Link Tracking Config */
s.trackDownloadLinks=false
s.trackExternalLinks=false
s.trackInlineStats=true
s.linkDownloadFileTypes="exe,zip,wav,mp3,mov,mpg,avi,wmv,pdf,doc,docx,xls,xlsx,ppt,pptx"
s.linkTrackVars="None"
s.linkTrackEvents="None"
s.linkLeaveQueryString=false


/* Plugin Config */
s.usePlugins=true
function s_doPlugins(s) {

/* Set the character set to the same as the page */
	if(!s.charSet) {
		if (document.characterSet)
			{s.charSet = document.characterSet} 
		else
			{s.charSet = document.charset}
	}

/* Force pageName to Lowercase all sites*/
	if(s.pageName)
		s.pageName=s.pageName.toLowerCase();
		
/* Web Trends Tracking */
	if(s.getQueryParam('WT.tsrc') || s.getQueryParam('WT.srch') || s.getQueryParam('WT.mc_id')) webTrendsTracking();
	
/* External Campaign Tracking */
	if(!s.campaign){		
		if(s.getQueryParam('bannerid'))s.campaign=s.getQueryParam('bannerid');
		s.campaign=s.getCustomValOnce(s.campaign,"cmp_getval",0)
	}
	
	if(s.campaign) s.events=s.apl(s.events,"event53",",",2);
	s.prop17=s.getAndPersistValue(s.campaign,'s_p17_pers',90);

/* Set ford campaign ID*/
	if(s.getQueryParam('fmccmp')) s.eVar30=s.getQueryParam('fmccmp');
	s.prop30=s.getAndPersistValue(s.eVar30,'s_p30_pers',90);
	s.eVar30=s.getCustomValOnce(s.eVar30,"eVar30_getval",0);	

/* Campaign Path Tracking */
	s.prop19=s.pageName;
	if(s.campaign) s.prop19=s.campaign+': '+s.pageName;
	else if(s.eVar30) s.prop19=s.eVar30+': '+s.pageName;   
	
/* Internal Campaign Tracking */
	if(!s.eVar13) s.eVar13=s.getQueryParam('intcmp'); 
	s.eVar13=s.getCustomValOnce(s.eVar13,"int_getval",0);
	s.prop13=s.getAndPersistValue(s.eVar13,'s_p13_pers',0);
	
/* Adobe Social Integration */
	if (!s.eVar60) s.eVar60=s.getQueryParam('scmp');
	s.socialPlatforms();

/* Referrer Overide */
	if(s.getQueryParam('referrer')) s.referrer=s.getQueryParam('referrer');   

/* Email Campaign Tracking */
	if (s.getQueryParam('emailid')) s.eVar33=s.getQueryParam('emailid');
	s.prop33=s.getAndPersistValue(s.eVar33,'s_p33_pers',90);
	s.eVar33=s.getCustomValOnce(s.eVar33,"eVar33_getval",0);

/* Paid Search Tracking */
	if (s.getQueryParam('searchid')) s.eVar26 = s.prop26 = s.getQueryParam('searchid','');
	s.eVar26=s.getCustomValOnce(s.eVar26,"eVar26_getval",0);
	if(s.eVar26)s.events=s.apl(s.events,"event54",",",2);
	
/* Navigation Tracking */
	if (s.getQueryParam('gnav')) s.eVar5 = s.getQueryParam('gnav');
	
/* Visit Start Logic */	

	var tempSuite="nosuite"
	if(!s.c_r("s_suite")){
		s.setSuite(s_account,"s_suite",0)	
	}else{
		tempSuite=s.c_r("s_suite");
	}
	
	if(s.getVisitStart("s_visit")||((!tempSuite.match(s_account))&& tempSuite!="")){
		if(!isInternal()||document.referrer==''){
			s.prop48=s.prop49=s.eVar8=trafficsource();			
			s.prop8=s.getAndPersistValue(s.eVar8,'s_p_s_prop8',0);
			var dt=popDT();
			s.eVar36 = s.getCustomValOnce(dt,'ev_36_getval',0);
			s.events = s.apl(s.events,"event17,event52",",",2);
		}
	}
	else if (refSearch(document.referrer)){
    	if (s.getQueryParam('searchid')){
      		s.eVar50 = s.prop50 = "paid:"+s.prop50;
    	}else{
      		s.eVar50 = s.prop50 = "natural:"+s.prop50;
    	}
    	s.eVar50=s.getCustomValOnce(s.eVar50,"eVar50_getval",0)
	}
		
	if(!tempSuite.match(s_account)){
		s.setSuite(tempSuite+s_account,"s_suite",0)
		tempSuite=s.c_r("s_suite");
	}
	    
//support vars
	if((s.linkTrackVars!='None'&& s.linkTrackVars!='')||s.linkTrackVars.match('prop')||s.linkTrackVars.match('eVar')||s.linkTrackVars.match('evar')||s.linkTrackVars.match('events'))
	{
		s.linkTrackVars=s.linkTrackVars+",prop37,prop39,pageName,eVar52,prop52,prop14,eVar14,prop15,eVar15,zip,prop1,prop2,prop3,eVar1,eVar2,eVar3"		
	}
   	s.prop37="160614"
   	if(!s.prop39 && s.pageName)s.prop39=s.pageName
	s.eVar52=s.prop52=document.URL
	s.prop47=s.eVar47="D=UserAgent"
 
 if(s.eVar12 && s.eVar16)s.prop36=s.eVar34=s.eVar12+":"+s.eVar16

}
		
/*************************************CUSTOM COMMON SITE FUNCTIONS*****************************/

function webTrendsTracking(){

	if (s.getQueryParam('WT.srch').indexOf('1') != -1) s.prop26 = s.eVar26 = s.getQueryParam('WT.mc_id');
	
	if (s.getQueryParam('WT.tsrc')){
		if (s.getQueryParam('WT.tsrc').indexOf('AutoBuyout') !=-1) s.campaign='autobuyout: ' + s.getQueryParam('WT.mc_id');
		if (s.getQueryParam('WT.tsrc').indexOf('Banner') !=-1) s.campaign='banner: ' + s.getQueryParam('WT.mc_id');
		if (s.getQueryParam('WT.tsrc').indexOf('Advertorial') !=-1) s.campaign='advertorial: ' + s.getQueryParam('WT.mc_id');
		if (s.getQueryParam('WT.tsrc').indexOf('Video') !=-1) s.campaign='video: ' + s.getQueryParam('WT.mc_id');
		if (s.getQueryParam('WT.tsrc').indexOf('QR_code') !=-1) s.campaign='qrcode: ' + s.getQueryParam('WT.mc_id');
		if (s.getQueryParam('WT.tsrc').indexOf('DirectMail') !=-1) s.campaign='directmail: ' + s.getQueryParam('WT.mc_id');

		if (s.getQueryParam('WT.tsrc').indexOf('Email') !=-1)s.prop33= s.eVar33= s.getQueryParam('WT.mc_id');

		if (s.getQueryParam('WT.tsrc').indexOf('eBroc') !=-1) s.prop30=s.eVar30='ebrochure: ' + s.getQueryParam('WT.mc_id');
		if (s.getQueryParam('WT.tsrc').indexOf('CampaignSite') !=-1) s.prop30=s.eVar30='campaignsite: ' + s.getQueryParam('WT.mc_id');
	}
	
	if (!s.getQueryParam('WT.tsrc') && s.getQueryParam('WT.mc_id')){
	
		if (s.getQueryParam('WT.mc_id').indexOf('eDM_') != -1)s.prop33= s.eVar33= s.getQueryParam('WT.mc_id');
		else s.campaign='banner: ' + s.getQueryParam('WT.mc_id');
	}
}


function padFrontZero(val) {
	if (val < 10) return '0'+val; else return val.toString();
}

function popDT() {
	var dte = new Date();
	return dte.getFullYear()+padFrontZero(dte.getMonth()+1)+padFrontZero(dte.getDate())+' '+padFrontZero(dte.getHours());
}


function trafficsource() {

  	return camp()
}

function camp(){

	if(s.getQueryParam('referrer')) var ref=s.getQueryParam('referrer') 
	else var ref = document.referrer; 
	
	var fordCamp = s.getQueryParam('fmccmp');
	 
	if(s.getQueryParam('bannerid')) return 'banner';
	else if(s.getQueryParam('emailid')) return 'email';
    else if(s.getQueryParam('searchid')) {s.eVar50 = s.prop50 = "paid:" + s.prop50; return 'search-paid';}
    else if(s.getQueryParam('scmp')) return 'social-placement';
    else if(fordCamp){if (fordCamp.indexOf('t2-fdaf')>-1 || fordCamp.indexOf('t2-lda')>-1){return 'fmc:tier2';}else return 'fmc:other';}
    else if(ref=='') return 'typed-bookmarked';
    else if(refSearch(ref)) {s.eVar50 = s.prop50 = "natural:"+s.prop50; return 'search-natural';}
    else if(refSocial(ref)) return 'social';
    else return 'natural-referrer';
}


function refSearch(ref) {
   	var se = new Array('google.|q','yahoo.com|p','msn.com|q','ask.com|q','myway.com|searchfor','altavista.com|q','netscape.com|query','live.com|q','allthweb.com|q','lycos.com|query','.aol.|q','.aol.|query','suche.aolsvc.de|query','suche.aolsvc.de|q','bing.com|q','ask.jp|q','ask.co|ask','ask.jp|ask','ask.co|q','search.mywebsearch.com|searchfor','baidu.com|wd');

    for (i = 0; i < se.length; i++) {
        var tmp = se[i].split('|');
        var keyword = s.getQueryParam(tmp[1], '', ref);
        if (ref.indexOf(tmp[0]) > -1) {
	        if(keyword == ''&& typeof keyword != "undefined")keyword="no keyword"
	   		s.eVar50 = s.prop50 = keyword;
            if (tmp[0] == 'google.') {
                var rnk1 = s.getQueryParam('resnum', '', ref);
                var rnk2 = s.getQueryParam('cd', '', ref);
    
                if (rnk1||rnk2) {
                    s.events = s.apl(s.events, "event50", ",", 1);
                    s.events = s.apl(s.events, "event51", ",", 1);
                   
                    if(rnk1)s.products = s.apl(s.products, ";;;;" + "event50=" + rnk1, ",", 1);
                    if(rnk2)s.products = s.apl(s.products, ";;;;" + "event50=" + rnk2, ",", 1);
                	}
            	}
        
            return true;
        }
    }

    return false;
}

function refSocial(ref) {
   	var socialSites = new Array('12seconds.tv','4travel.jp','advogato.org','ameba.jp','anobii.com','asmallworld.net','backtype.com','badoo.com','bebo.com','bigadda.com','bigtent.com','biip.no','blackplanet.com','blog.seesaa.jp','blogspot.com','blogster.com','blomotion.jp','bolt.com','brightkite.com','buzznet.com','cafemom.com','care2.com','classmates.com','cloob.com','collegeblender.com','cyworld.co.kr','cyworld.com.cn','dailymotion.com','delicious.com','deviantart.com','digg.com','diigo.com','disqus.com','draugiem.lv','facebook.com','faceparty.com','fc2.com','flickr.com','flixster.com','fotolog.com','foursquare.com','friendfeed.com','friendsreunited.com','friendster.com','fubar.com','gaiaonline.com','geni.com','goodreads.com','grono.net','habbo.com','hatena.ne.jp','hi5.com','hotnews.infoseek.co.jp','hyves.nl','ibibo.com','identi.ca','imeem.com','intensedebate.com','irc-galleria.net','iwiw.hu','jaiku.com','jp.myspace.com','kaixin001.com','kaixin002.com','kakaku.com','kanshin.com','kozocom.com','last.fm','linkedin.com','livejournal.com','me2day.net','meetup.com','mister-wong.com','mixi.jp','mixx.com','mouthshut.com','multiply.com','myheritage.com','mylife.com','myspace.com','myyearbook.com','nasza-klasa.pl','netlog.com','nettby.no','netvibes.com','nicovideo.jp','ning.com','odnoklassniki.ru','orkut.com','pakila.jp','photobucket.com','pinterest.com','plaxo.com','plurk.com','plus.google.com','reddit.com','renren.com','skyrock.com','slideshare.net','smcb.jp','smugmug.com','sonico.com','studivz.net','stumbleupon.com','t.163.com','t.co','t.hexun.com','t.ifeng.com','t.people.com.cn','t.qq.com','t.sohu.com','tabelog.com','tagged.com','taringa.net','tripit.com','trombi.com','trytrend.jp','tuenti.com','tumblr.com','twine.com','twitter.com','uhuru.jp','viadeo.com','vimeo.com','vkontakte.ru','vox.com','wayn.com','weibo.com','weourfamily.com','wer-kennt-wen.de','wordpress.com','xanga.com','xing.com','yaplog.jp','yelp.com','youtube.com','yozm.daum.net','yuku.com','zooomr.com');
	
    for (i = 0; i < socialSites.length; i++) {
        if (ref.indexOf(socialSites[i]) > -1) {return true;}
    }
    return false;
}


function isInternal()
{
	
	var ref=document.referrer
	if(ref!='')
	{
		if(ref.indexOf('www.')>-1)ref=ref.replace('www.','')
		if(ref.indexOf('https://')>-1)ref=ref.replace('https://','')
		if(ref.indexOf('http://')>-1)ref=ref.replace('http://','')	
		var ref1=ref.split('/');
		var refdom=ref1[0];
		
	var filter =s.linkInternalFilters.split(',')
	
		for(i=0;i<filter.length; i++)
		{
		if(refdom.indexOf(filter[i])>-1)return true;
		}
	}	

		return false;
}

function changeCookiePeriods(host){
//if more than "ford.co" or "ford.com" - return true
	var hostArray = new Array();
	hostArray = host.split('.');
	for (i=0; i < hostArray.length; i++) {
		if (hostArray[i] == 'ford' || hostArray[i] == 'fordpartner' || hostArray[i] == 'fordfranchise' || hostArray[i] == 'mazda' || hostArray[i] == 'lincoln' || hostArray[i] == 'motocraft' || hostArray[i] == 'fordcaminhoes' || hostArray[i] == 'myford'){
			var maxlength = i + 2;
			if (hostArray.length > maxlength) return true;
		}
	}
}

//List of plugins
s.doPlugins=s_doPlugins
/************************** PLUGINS SECTION *************************/
/* You may insert any plugins you wish to use here.                 */

/*
 * Plugin Utility: Replace v1.0
 */
s.repl=new Function("x","o","n",""
+"var i=x.indexOf(o),l=n.length;while(x&&i>=0){x=x.substring(0,i)+n+x."
+"substring(i+o.length);i=x.indexOf(o,i+l)}return x");

/*
 * Plugin: socialPlatforms v1.1
 */
s.socialPlatforms=new Function("a",""
+"var s=this,g,K,D,E,F,i;g=s.referrer?s.referrer:document.referrer;g=g."
+"toLowerCase();K=s.split(s.socPlatList,'|');for(i=0;i<K.length;i++){"
+"D=s.split(K[i],'>');if(g.indexOf(D[0])!=-1){s.contextData['a.socialcontentprovider']=D[1];}}");
 
s.socPlatList="facebook.com>Facebook|twitter.com>Twitter|t.co/>Twitter|youtube.com>Youtube|clipmarks.com>Clipmarks|dailymotion.com>Dailymotion|delicious.com>Delicious|digg.com>Digg|diigo.com>Diigo|flickr.com>Flickr|flixster.com>Flixster|fotolog.com>Fotolog|friendfeed.com>FriendFeed|google.com/buzz>Google Buzz|buzz.googleapis.com>Google Buzz|plus.google.com>Google+|hulu.com>Hulu|identi.ca>identi.ca|ilike.com>iLike|intensedebate.com>IntenseDebate|myspace.com>MySpace|newsgator.com>Newsgator|photobucket.com>Photobucket|plurk.com>Plurk|slideshare.net>SlideShare|smugmug.com>SmugMug|stumbleupon.com>StumbleUpon|tumblr.com>Tumblr|vimeo.com>Vimeo|wordpress.com>WordPress|xanga.com>Xanga|metacafe.com>Metacafe|pinterest.com>Pinterest";

/*  
 * socialAuthors v1.5.2
 */
s.socialAuthors=new Function("",""
+"var s=this,g;g=s.referrer?s.referrer:document.referrer;if(g.indexOf"
+"('http://t.co/')===0||g.indexOf('https://t.co/')===0||g.indexOf('pi"
+"nterest.com/pin')!==-1||g.indexOf('tumblr.com')!==-1||g.indexOf('yo"
+"utube.com')!==-1){s.Integrate.add('SocialAuthor');s.Integrate.Socia"
+"lAuthor.tEvar='reserved';s.Integrate.SocialAuthor.get('http://sa-se"
+"rvices.social.omniture.com/author/name?var=[VAR]&callback=s.socialA"
+"uthorSearch&rs='+encodeURIComponent(s_account)+'&q='+encodeURICompo"
+"nent(g));s.Integrate.SocialAuthor.delay();s.Integrate.SocialAuthor."
+"setVars=function(s,p){if(p.tEvar==='reserved'){s.contextData['a.soc"
+"ialauthor']=s.user;}else{s[p.tEvar]=s.user;}}}");
s.socialAuthorSearch=new Function("obj",""
+"var s=this;if(typeof obj==='undefined'||typeof obj.author==='undefi"
+"ned'){s.user='Not Found';}else{s.user=obj.author;}s.Integrate.Socia"
+"lAuthor.ready();");

/*
* Plugin Utility: apl v1.1
*/
s.apl = new Function("l", "v", "d", "u", ""
+ "var s=this,m=0;if(!l)l='';if(u){var i,n,a=s.split(l,d);for(i=0;i<a."
+ "length;i++){n=a[i];m=m||(u==1?(n==v):(n.toLowerCase()==v.toLowerCas"
+ "e()));}}if(!m)l=l?l+d+v:v;return l");

/*
* Utility Function: split v1.5 (JS 1.0 compatible)
*/
s.split = new Function("l", "d", ""
+ "var i,x=0,a=new Array;while(l){i=l.indexOf(d);i=i>-1?i:l.length;a[x"
+ "++]=l.substring(0,i);l=l.substring(i+d.length);}return a");

/*
 * Plugin: getQueryParam 2.3
 */
s.getQueryParam=new Function("p","d","u",""
+"var s=this,v='',i,t;d=d?d:'';u=u?u:(s.pageURL?s.pageURL:s.wd.locati"
+"on);if(u=='f')u=s.gtfs().location;while(p){i=p.indexOf(',');i=i<0?p"
+".length:i;t=s.p_gpv(p.substring(0,i),u+'');if(t){t=t.indexOf('#')>-"
+"1?t.substring(0,t.indexOf('#')):t;}if(t)v+=v?d+t:t;p=p.substring(i="
+"=p.length?i:i+1)}return v");
s.p_gpv=new Function("k","u",""
+"var s=this,v='',i=u.indexOf('?'),q;if(k&&i>-1){q=u.substring(i+1);v"
+"=s.pt(q,'&','p_gvf',k)}return v");
s.p_gvf=new Function("t","k",""
+"if(t){var s=this,i=t.indexOf('='),p=i<0?t:t.substring(0,i),v=i<0?'T"
+"rue':t.substring(i+1);if(p.toLowerCase()==k.toLowerCase())return s."
+"epa(v)}return ''");

/*
 * Plugin: Set Suite
 */
s.setSuite=new Function("v","c","e",""
+"var s=this,k=s.c_r(c),a=new Date;e=e?e:0;if(v){a.setTime(a.getTime("
+")+1800000);s.c_w(c,v,a);}else{v='novalue';a.setTime(a.getTime()+1800000);s.c_w(c,v,a);}");

/*
 * Plugin: getAndPersistValue 0.3 - get a value on every page
 */
s.getAndPersistValue=new Function("v","c","e",""
+"var s=this,a=new Date;e=e?e:0;a.setTime(a.getTime()+e*86400000);if("
+"v)s.c_w(c,v,e?a:0);return s.c_r(c);");



/*
 * Plugin: getCustomValOnce 
 */
s.getCustomValOnce=new Function("v","c","e",""
+"var s=this,k=s.c_r(c),a=new Date;e=e?e:0;if(v){a.setTime(a.getTime("
+")+1800000);if(!s.c_w(c,v,a))s.c_w(c,v,0);}else{a.setTime(a.getTime()+1800000);v=s.c_r(c);if(!s.c_w(c,v,a))s.c_w(c,v,a);}return v==k?'':v");


s.join = new Function("v","p",""
+"var s = this;var f,b,d,w;if(p){f=p.front?p.front:'';b=p.back?p.back"
+":'';d=p.delim?p.delim:'';w=p.wrap?p.wrap:'';}var str='';for(var x=0"
+";x<v.length;x++){if(typeof(v[x])=='object' )str+=s.join( v[x],p);el"
+"se str+=w+v[x]+w;if(x<v.length-1)str+=d;}return f+str+b;");

/*
 * Plugin: getVisitStart v2.0 - returns 1 on first page of visit
 * otherwise 0
 */
s.getVisitStart=new Function("c",""
+"var s=this,v=1,t=new Date;t.setTime(t.getTime()+1800000);if(s.c_r(c"
+")){v=0}if(!s.c_w(c,1,t)){s.c_w(c,1,0)}if(!s.c_r(c)){v=0}return v;"); 

function fnGetDomain(url) {
return (url.match(/:\/\/(.[^/]+)/)[1]);
}

/* Configure Modules and Plugins */

s.maxDelay='3000';//max time to wait for 3rd party api response in milliseconds
s.loadModule("Integrate")
s.Integrate.onLoad=function(s,m){
	s.socialAuthors();
	//add other integration module dependent functions here
 };


/* WARNING: Changing any of the below variables will cause drastic
changes to how your visitor data is collected.  Changes should only be
made when instructed to do so by your account manager.*/

s.trackingServer="fordap.sc.omtrdc.net"
s.trackingServerSecure="fordap.sc.omtrdc.net"

/************* Modules **************/

/* Module: Integrate */
s.m_Integrate_c="var m=s.m_i('Integrate');m.add=function(n,o){var m=this,p;if(!o)o='s_Integrate_'+n;if(!m.s.wd[o])m.s.wd[o]=new Object;m[n]=new Object;p=m[n];p._n=n;p._m=m;p._c=0;p._d=0;p.disable=0;p"
+".get=m.get;p.delay=m.delay;p.ready=m.ready;p.beacon=m.beacon;p.script=m.script;m.l[m.l.length]=n};m._g=function(t){var m=this,s=m.s,i,p,f=(t?'use':'set')+'Vars',tcf;for(i=0;i<m.l.length;i++){p=m[m."
+"l[i]];if(p&&!p.disable&&p[f]){if(s.apv>=5&&(!s.isopera||s.apv>=7)){tcf=new Function('s','p','f','var e;try{p[f](s,p)}catch(e){}');tcf(s,p,f)}else p[f](s,p)}}};m._t=function(){this._g(1)};m._fu=func"
+"tion(p,u){var m=this,s=m.s,v,x,y,z,tm=new Date;if(u.toLowerCase().substring(0,4) != 'http')u='http://'+u;if(s.ssl)u=s.rep(u,'http:','https:');p.RAND=Math&&Math.random?Math.floor(Math.random()*10000"
+"000000000):tm.getTime();p.RAND+=Math.floor(tm.getTime()/10800000)%10;x=0;while(x>=0){x=u.indexOf('[',x);if(x>=0){y=u.indexOf(']',x);if(y>x){z=u.substring(x+1,y);if(z.length>2&&z.substring(0,2)=='s."
+"'){v=s[z.substring(2)];if(!v)v=''}else{v=''+p[z];if(!(v==p[z]||parseFloat(v)==p[z]))z=0}if(z) {u=u.substring(0,x)+s.rep(escape(v),'+','%2B')+u.substring(y+1);x=y-(z.length-v.length+1)} else {x=y}}}"
+"}return u};m.get=function(u,v){var p=this,m=p._m;if(!p.disable){if(!v)v='s_'+m._in+'_Integrate_'+p._n+'_get_'+p._c;p._c++;p.VAR=v;p._d++;m.s.loadModule('Integrate:'+v,m._fu(p,u),0,1,p._n)}};m.delay"
+"=function(){var p=this;if(p._d<=0)p._d=1};m.ready=function(){var p=this,m=p._m;p._d=0;if(!p.disable)m.s.dlt()};m._d=function(){var m=this,i,p;for(i=0;i<m.l.length;i++){p=m[m.l[i]];if(p&&!p.disable&"
+"&p._d>0)return 1}return 0};m._x=function(d,n){var p=this[n],x;if(!p.disable){for(x in d)if(x&&(!Object||!Object.prototype||!Object.prototype[x]))p[x]=d[x];p._d--}};m.beacon=function(u){var p=this,m"
+"=p._m,s=m.s,imn='s_i_'+m._in+'_Integrate_'+p._n+'_'+p._c,im;if(!p.disable&&s.d.images&&s.apv>=3&&(!s.isopera||s.apv>=7)&&(s.ns6<0||s.apv>=6.1)){p._c++;im=s.wd[imn]=new Image;im.src=m._fu(p,u)}};m.s"
+"cript=function(u){var p=this,m=p._m;if(!p.disable)m.s.loadModule(0,m._fu(p,u),0,1)};m.l=new Array;if(m.onLoad)m.onLoad(s,m)";
s.m_i("Integrate");


/************* DO NOT ALTER ANYTHING BELOW THIS LINE ! **************/
var s_code='',s_objectID;function s_gi(un,pg,ss){var c="s.version='H.27.3';s.an=s_an;s.logDebug=function(m){var s=this,tcf=new Function('var e;try{console.log(\"'+s.rep(s.rep(s.rep(m,\"\\\\\",\"\\\\"
+"\\\\\"),\"\\n\",\"\\\\n\"),\"\\\"\",\"\\\\\\\"\")+'\");}catch(e){}');tcf()};s.cls=function(x,c){var i,y='';if(!c)c=this.an;for(i=0;i<x.length;i++){n=x.substring(i,i+1);if(c.indexOf(n)>=0)y+=n}retur"
+"n y};s.fl=function(x,l){return x?(''+x).substring(0,l):x};s.co=function(o){return o};s.num=function(x){x=''+x;for(var p=0;p<x.length;p++)if(('0123456789').indexOf(x.substring(p,p+1))<0)return 0;ret"
+"urn 1};s.rep=s_rep;s.sp=s_sp;s.jn=s_jn;s.ape=function(x){var s=this,h='0123456789ABCDEF',f=\"+~!*()'\",i,c=s.charSet,n,l,e,y='';c=c?c.toUpperCase():'';if(x){x=''+x;if(s.em==3){x=encodeURIComponent("
+"x);for(i=0;i<f.length;i++) {n=f.substring(i,i+1);if(x.indexOf(n)>=0)x=s.rep(x,n,\"%\"+n.charCodeAt(0).toString(16).toUpperCase())}}else if(c=='AUTO'&&('').charCodeAt){for(i=0;i<x.length;i++){c=x.su"
+"bstring(i,i+1);n=x.charCodeAt(i);if(n>127){l=0;e='';while(n||l<4){e=h.substring(n%16,n%16+1)+e;n=(n-n%16)/16;l++}y+='%u'+e}else if(c=='+')y+='%2B';else y+=escape(c)}x=y}else x=s.rep(escape(''+x),'+"
+"','%2B');if(c&&c!='AUTO'&&s.em==1&&x.indexOf('%u')<0&&x.indexOf('%U')<0){i=x.indexOf('%');while(i>=0){i++;if(h.substring(8).indexOf(x.substring(i,i+1).toUpperCase())>=0)return x.substring(0,i)+'u00"
+"'+x.substring(i);i=x.indexOf('%',i)}}}return x};s.epa=function(x){var s=this,y,tcf;if(x){x=s.rep(''+x,'+',' ');if(s.em==3){tcf=new Function('x','var y,e;try{y=decodeURIComponent(x)}catch(e){y=unesc"
+"ape(x)}return y');return tcf(x)}else return unescape(x)}return y};s.pt=function(x,d,f,a){var s=this,t=x,z=0,y,r;while(t){y=t.indexOf(d);y=y<0?t.length:y;t=t.substring(0,y);r=s[f](t,a);if(r)return r"
+";z+=y+d.length;t=x.substring(z,x.length);t=z<x.length?t:''}return ''};s.isf=function(t,a){var c=a.indexOf(':');if(c>=0)a=a.substring(0,c);c=a.indexOf('=');if(c>=0)a=a.substring(0,c);if(t.substring("
+"0,2)=='s_')t=t.substring(2);return (t!=''&&t==a)};s.fsf=function(t,a){var s=this;if(s.pt(a,',','isf',t))s.fsg+=(s.fsg!=''?',':'')+t;return 0};s.fs=function(x,f){var s=this;s.fsg='';s.pt(x,',','fsf'"
+",f);return s.fsg};s.mpc=function(m,a){var s=this,c,l,n,v;v=s.d.visibilityState;if(!v)v=s.d.webkitVisibilityState;if(v&&v=='prerender'){if(!s.mpq){s.mpq=new Array;l=s.sp('webkitvisibilitychange,visi"
+"bilitychange',',');for(n=0;n<l.length;n++){s.d.addEventListener(l[n],new Function('var s=s_c_il['+s._in+'],c,v;v=s.d.visibilityState;if(!v)v=s.d.webkitVisibilityState;if(s.mpq&&v==\"visible\"){whil"
+"e(s.mpq.length>0){c=s.mpq.shift();s[c.m].apply(s,c.a)}s.mpq=0}'),false)}}c=new Object;c.m=m;c.a=a;s.mpq.push(c);return 1}return 0};s.si=function(){var s=this,i,k,v,c=s_gi+'var s=s_gi(\"'+s.oun+'\")"
+";s.sa(\"'+s.un+'\");';for(i=0;i<s.va_g.length;i++){k=s.va_g[i];v=s[k];if(v!=undefined){if(typeof(v)!='number')c+='s.'+k+'=\"'+s_fe(v)+'\";';else c+='s.'+k+'='+v+';'}}c+=\"s.lnk=s.eo=s.linkName=s.li"
+"nkType=s.wd.s_objectID=s.ppu=s.pe=s.pev1=s.pev2=s.pev3='';\";return c};s.c_d='';s.c_gdf=function(t,a){var s=this;if(!s.num(t))return 1;return 0};s.c_gd=function(){var s=this,d=s.wd.location.hostnam"
+"e,n=s.fpCookieDomainPeriods,p;if(!n)n=s.cookieDomainPeriods;if(d&&!s.c_d){n=n?parseInt(n):2;n=n>2?n:2;p=d.lastIndexOf('.');if(p>=0){while(p>=0&&n>1){p=d.lastIndexOf('.',p-1);n--}s.c_d=p>0&&s.pt(d,'"
+".','c_gdf',0)?d.substring(p):d}}return s.c_d};s.c_r=function(k){var s=this;k=s.ape(k);var c=' '+s.d.cookie,i=c.indexOf(' '+k+'='),e=i<0?i:c.indexOf(';',i),v=i<0?'':s.epa(c.substring(i+2+k.length,e<"
+"0?c.length:e));return v!='[[B]]'?v:''};s.c_w=function(k,v,e){var s=this,d=s.c_gd(),l=s.cookieLifetime,t;v=''+v;l=l?(''+l).toUpperCase():'';if(e&&l!='SESSION'&&l!='NONE'){t=(v!=''?parseInt(l?l:0):-6"
+"0);if(t){e=new Date;e.setTime(e.getTime()+(t*1000))}}if(k&&l!='NONE'){s.d.cookie=k+'='+s.ape(v!=''?v:'[[B]]')+'; path=/;'+(e&&l!='SESSION'?' expires='+e.toGMTString()+';':'')+(d?' domain='+d+';':''"
+");return s.c_r(k)==v}return 0};s.eh=function(o,e,r,f){var s=this,b='s_'+e+'_'+s._in,n=-1,l,i,x;if(!s.ehl)s.ehl=new Array;l=s.ehl;for(i=0;i<l.length&&n<0;i++){if(l[i].o==o&&l[i].e==e)n=i}if(n<0){n=i"
+";l[n]=new Object}x=l[n];x.o=o;x.e=e;f=r?x.b:f;if(r||f){x.b=r?0:o[e];x.o[e]=f}if(x.b){x.o[b]=x.b;return b}return 0};s.cet=function(f,a,t,o,b){var s=this,r,tcf;if(s.apv>=5&&(!s.isopera||s.apv>=7)){tc"
+"f=new Function('s','f','a','t','var e,r;try{r=s[f](a)}catch(e){r=s[t](e)}return r');r=tcf(s,f,a,t)}else{if(s.ismac&&s.u.indexOf('MSIE 4')>=0)r=s[b](a);else{s.eh(s.wd,'onerror',0,o);r=s[f](a);s.eh(s"
+".wd,'onerror',1)}}return r};s.gtfset=function(e){var s=this;return s.tfs};s.gtfsoe=new Function('e','var s=s_c_il['+s._in+'],c;s.eh(window,\"onerror\",1);s.etfs=1;c=s.t();if(c)s.d.write(c);s.etfs=0"
+";return true');s.gtfsfb=function(a){return window};s.gtfsf=function(w){var s=this,p=w.parent,l=w.location;s.tfs=w;if(p&&p.location!=l&&p.location.host==l.host){s.tfs=p;return s.gtfsf(s.tfs)}return "
+"s.tfs};s.gtfs=function(){var s=this;if(!s.tfs){s.tfs=s.wd;if(!s.etfs)s.tfs=s.cet('gtfsf',s.tfs,'gtfset',s.gtfsoe,'gtfsfb')}return s.tfs};s.mrq=function(u){var s=this,l=s.rl[u],n,r;s.rl[u]=0;if(l)fo"
+"r(n=0;n<l.length;n++){r=l[n];s.mr(0,0,r.r,r.t,r.u)}};s.flushBufferedRequests=function(){};s.mr=function(sess,q,rs,ta,u){var s=this,dc=s.dc,t1=s.trackingServer,t2=s.trackingServerSecure,tb=s.trackin"
+"gServerBase,p='.sc',ns=s.visitorNamespace,un=s.cls(u?u:(ns?ns:s.fun)),r=new Object,l,imn='s_i_'+s._in+'_'+un,im,b,e;if(!rs){if(t1){if(t2&&s.ssl)t1=t2}else{if(!tb)tb='2o7.net';if(dc)dc=(''+dc).toLow"
+"erCase();else dc='d1';if(tb=='2o7.net'){if(dc=='d1')dc='112';else if(dc=='d2')dc='122';p=''}t1=un+'.'+dc+'.'+p+tb}rs='http'+(s.ssl?'s':'')+'://'+t1+'/b/ss/'+s.un+'/'+(s.mobile?'5.1':'1')+'/'+s.vers"
+"ion+(s.tcn?'T':'')+'/'+sess+'?AQB=1&ndh=1'+(q?q:'')+'&AQE=1';if(s.isie&&!s.ismac)rs=s.fl(rs,2047)}if(s.d.images&&s.apv>=3&&(!s.isopera||s.apv>=7)&&(s.ns6<0||s.apv>=6.1)){if(!s.rc)s.rc=new Object;if"
+"(!s.rc[un]){s.rc[un]=1;if(!s.rl)s.rl=new Object;s.rl[un]=new Array;setTimeout('if(window.s_c_il)window.s_c_il['+s._in+'].mrq(\"'+un+'\")',750)}else{l=s.rl[un];if(l){r.t=ta;r.u=un;r.r=rs;l[l.length]"
+"=r;return ''}imn+='_'+s.rc[un];s.rc[un]++}if(s.debugTracking){var d='AppMeasurement Debug: '+rs,dl=s.sp(rs,'&'),dln;for(dln=0;dln<dl.length;dln++)d+=\"\\n\\t\"+s.epa(dl[dln]);s.logDebug(d)}im=s.wd["
+"imn];if(!im)im=s.wd[imn]=new Image;im.alt=\"\";im.s_l=0;im.onload=im.onerror=new Function('e','this.s_l=1;var wd=window,s;if(wd.s_c_il){s=wd.s_c_il['+s._in+'];s.bcr();s.mrq(\"'+un+'\");s.nrs--;if(!"
+"s.nrs)s.m_m(\"rr\")}');if(!s.nrs){s.nrs=1;s.m_m('rs')}else s.nrs++;im.src=rs;if(s.useForcedLinkTracking||s.bcf){if(!s.forcedLinkTrackingTimeout)s.forcedLinkTrackingTimeout=250;setTimeout('if(window"
+".s_c_il)window.s_c_il['+s._in+'].bcr()',s.forcedLinkTrackingTimeout);}else if((s.lnk||s.eo)&&(!ta||ta=='_self'||ta=='_top'||ta=='_parent'||(s.wd.name&&ta==s.wd.name))){b=e=new Date;while(!im.s_l&&e"
+".getTime()-b.getTime()<500)e=new Date}return ''}return '<im'+'g sr'+'c=\"'+rs+'\" width=1 height=1 border=0 alt=\"\">'};s.gg=function(v){var s=this;if(!s.wd['s_'+v])s.wd['s_'+v]='';return s.wd['s_'"
+"+v]};s.glf=function(t,a){if(t.substring(0,2)=='s_')t=t.substring(2);var s=this,v=s.gg(t);if(v)s[t]=v};s.gl=function(v){var s=this;if(s.pg)s.pt(v,',','glf',0)};s.rf=function(x){var s=this,y,i,j,h,p,"
+"l=0,q,a,b='',c='',t;if(x&&x.length>255){y=''+x;i=y.indexOf('?');if(i>0){q=y.substring(i+1);y=y.substring(0,i);h=y.toLowerCase();j=0;if(h.substring(0,7)=='http://')j+=7;else if(h.substring(0,8)=='ht"
+"tps://')j+=8;i=h.indexOf(\"/\",j);if(i>0){h=h.substring(j,i);p=y.substring(i);y=y.substring(0,i);if(h.indexOf('google')>=0)l=',q,ie,start,search_key,word,kw,cd,';else if(h.indexOf('yahoo.co')>=0)l="
+"',p,ei,';if(l&&q){a=s.sp(q,'&');if(a&&a.length>1){for(j=0;j<a.length;j++){t=a[j];i=t.indexOf('=');if(i>0&&l.indexOf(','+t.substring(0,i)+',')>=0)b+=(b?'&':'')+t;else c+=(c?'&':'')+t}if(b&&c)q=b+'&'"
+"+c;else c=''}i=253-(q.length-c.length)-y.length;x=y+(i>0?p.substring(0,i):'')+'?'+q}}}}return x};s.s2q=function(k,v,vf,vfp,f){var s=this,qs='',sk,sv,sp,ss,nke,nk,nf,nfl=0,nfn,nfm;if(k==\"contextDat"
+"a\")k=\"c\";if(v){for(sk in v)if((!f||sk.substring(0,f.length)==f)&&v[sk]&&(!vf||vf.indexOf(','+(vfp?vfp+'.':'')+sk+',')>=0)&&(!Object||!Object.prototype||!Object.prototype[sk])){nfm=0;if(nfl)for(n"
+"fn=0;nfn<nfl.length;nfn++)if(sk.substring(0,nfl[nfn].length)==nfl[nfn])nfm=1;if(!nfm){if(qs=='')qs+='&'+k+'.';sv=v[sk];if(f)sk=sk.substring(f.length);if(sk.length>0){nke=sk.indexOf('.');if(nke>0){n"
+"k=sk.substring(0,nke);nf=(f?f:'')+nk+'.';if(!nfl)nfl=new Array;nfl[nfl.length]=nf;qs+=s.s2q(nk,v,vf,vfp,nf)}else{if(typeof(sv)=='boolean'){if(sv)sv='true';else sv='false'}if(sv){if(vfp=='retrieveLi"
+"ghtData'&&f.indexOf('.contextData.')<0){sp=sk.substring(0,4);ss=sk.substring(4);if(sk=='transactionID')sk='xact';else if(sk=='channel')sk='ch';else if(sk=='campaign')sk='v0';else if(s.num(ss)){if(s"
+"p=='prop')sk='c'+ss;else if(sp=='eVar')sk='v'+ss;else if(sp=='list')sk='l'+ss;else if(sp=='hier'){sk='h'+ss;sv=sv.substring(0,255)}}}qs+='&'+s.ape(sk)+'='+s.ape(sv)}}}}}if(qs!='')qs+='&.'+k}return "
+"qs};s.hav=function(){var s=this,qs='',l,fv='',fe='',mn,i,e;if(s.lightProfileID){l=s.va_m;fv=s.lightTrackVars;if(fv)fv=','+fv+','+s.vl_mr+','}else{l=s.va_t;if(s.pe||s.linkType){fv=s.linkTrackVars;fe"
+"=s.linkTrackEvents;if(s.pe){mn=s.pe.substring(0,1).toUpperCase()+s.pe.substring(1);if(s[mn]){fv=s[mn].trackVars;fe=s[mn].trackEvents}}}if(fv)fv=','+fv+','+s.vl_l+','+s.vl_l2;if(fe){fe=','+fe+',';if"
+"(fv)fv+=',events,'}if (s.events2)e=(e?',':'')+s.events2}for(i=0;i<l.length;i++){var k=l[i],v=s[k],b=k.substring(0,4),x=k.substring(4),n=parseInt(x),q=k;if(!v)if(k=='events'&&e){v=e;e=''}if(v&&(!fv|"
+"|fv.indexOf(','+k+',')>=0)&&k!='linkName'&&k!='linkType'){if(k=='supplementalDataID')q='sdid';else if(k=='timestamp')q='ts';else if(k=='dynamicVariablePrefix')q='D';else if(k=='visitorID')q='vid';e"
+"lse if(k=='marketingCloudVisitorID')q='mid';else if(k=='analyticsVisitorID')q='aid';else if(k=='audienceManagerLocationHint')q='aamlh';else if(k=='audienceManagerBlob')q='aamb';else if(k=='authStat"
+"e')q='as';else if(k=='pageURL'){q='g';if(v.length>255){s.pageURLRest=v.substring(255);v=v.substring(0,255);}}else if(k=='pageURLRest')q='-g';else if(k=='referrer'){q='r';v=s.fl(s.rf(v),255)}else if"
+"(k=='vmk'||k=='visitorMigrationKey')q='vmt';else if(k=='visitorMigrationServer'){q='vmf';if(s.ssl&&s.visitorMigrationServerSecure)v=''}else if(k=='visitorMigrationServerSecure'){q='vmf';if(!s.ssl&&"
+"s.visitorMigrationServer)v=''}else if(k=='charSet'){q='ce';if(v.toUpperCase()=='AUTO')v='ISO8859-1';else if(s.em==2||s.em==3)v='UTF-8'}else if(k=='visitorNamespace')q='ns';else if(k=='cookieDomainP"
+"eriods')q='cdp';else if(k=='cookieLifetime')q='cl';else if(k=='variableProvider')q='vvp';else if(k=='currencyCode')q='cc';else if(k=='channel')q='ch';else if(k=='transactionID')q='xact';else if(k=="
+"'campaign')q='v0';else if(k=='resolution')q='s';else if(k=='colorDepth')q='c';else if(k=='javascriptVersion')q='j';else if(k=='javaEnabled')q='v';else if(k=='cookiesEnabled')q='k';else if(k=='brows"
+"erWidth')q='bw';else if(k=='browserHeight')q='bh';else if(k=='connectionType')q='ct';else if(k=='homepage')q='hp';else if(k=='plugins')q='p';else if(k=='events'){if(e)v+=(v?',':'')+e;if(fe)v=s.fs(v"
+",fe)}else if(k=='events2')v='';else if(k=='contextData'){qs+=s.s2q('c',s[k],fv,k,0);v=''}else if(k=='lightProfileID')q='mtp';else if(k=='lightStoreForSeconds'){q='mtss';if(!s.lightProfileID)v=''}el"
+"se if(k=='lightIncrementBy'){q='mti';if(!s.lightProfileID)v=''}else if(k=='retrieveLightProfiles')q='mtsr';else if(k=='deleteLightProfiles')q='mtsd';else if(k=='retrieveLightData'){if(s.retrieveLig"
+"htProfiles)qs+=s.s2q('mts',s[k],fv,k,0);v=''}else if(s.num(x)){if(b=='prop')q='c'+n;else if(b=='eVar')q='v'+n;else if(b=='list')q='l'+n;else if(b=='hier'){q='h'+n;v=s.fl(v,255)}}if(v)qs+='&'+s.ape("
+"q)+'='+(k.substring(0,3)!='pev'?s.ape(v):v)}}return qs};s.ltdf=function(t,h){t=t?t.toLowerCase():'';h=h?h.toLowerCase():'';var qi=h.indexOf('?'),hi=h.indexOf('#');if(qi>=0){if(hi>=0&&hi<qi)qi=hi;}e"
+"lse qi=hi;h=qi>=0?h.substring(0,qi):h;if(t&&h.substring(h.length-(t.length+1))=='.'+t)return 1;return 0};s.ltef=function(t,h){t=t?t.toLowerCase():'';h=h?h.toLowerCase():'';if(t&&h.indexOf(t)>=0)ret"
+"urn 1;return 0};s.lt=function(h){var s=this,lft=s.linkDownloadFileTypes,lef=s.linkExternalFilters,lif=s.linkInternalFilters;lif=lif?lif:s.wd.location.hostname;h=h.toLowerCase();if(s.trackDownloadLi"
+"nks&&lft&&s.pt(lft,',','ltdf',h))return 'd';if(s.trackExternalLinks&&h.indexOf('#')!=0&&h.indexOf('about:')!=0&&h.indexOf('javascript:')!=0&&(lef||lif)&&(!lef||s.pt(lef,',','ltef',h))&&(!lif||!s.pt"
+"(lif,',','ltef',h)))return 'e';return ''};s.lc=new Function('e','var s=s_c_il['+s._in+'],b=s.eh(this,\"onclick\");s.lnk=this;s.t();s.lnk=0;if(b)return this[b](e);return true');s.bcr=function(){var "
+"s=this;if(s.bct&&s.bce)s.bct.dispatchEvent(s.bce);if(s.bcf){if(typeof(s.bcf)=='function')s.bcf();else if(s.bct&&s.bct.href)s.d.location=s.bct.href}s.bct=s.bce=s.bcf=0};s.bc=new Function('e','if(e&&"
+"e.s_fe)return;var s=s_c_il['+s._in+'],f,tcf,t,n,nrs,a,h;if(s.d&&s.d.all&&s.d.all.cppXYctnr)return;if(!s.bbc)s.useForcedLinkTracking=0;else if(!s.useForcedLinkTracking){s.b.removeEventListener(\"cli"
+"ck\",s.bc,true);s.bbc=s.useForcedLinkTracking=0;return}else s.b.removeEventListener(\"click\",s.bc,false);s.eo=e.srcElement?e.srcElement:e.target;nrs=s.nrs;s.t();s.eo=0;if(s.nrs>nrs&&s.useForcedLin"
+"kTracking&&e.target){a=e.target;while(a&&a!=s.b&&a.tagName.toUpperCase()!=\"A\"&&a.tagName.toUpperCase()!=\"AREA\")a=a.parentNode;if(a){h=a.href;if(h.indexOf(\"#\")==0||h.indexOf(\"about:\")==0||h."
+"indexOf(\"javascript:\")==0)h=0;t=a.target;if(e.target.dispatchEvent&&h&&(!t||t==\"_self\"||t==\"_top\"||t==\"_parent\"||(s.wd.name&&t==s.wd.name))){tcf=new Function(\"s\",\"var x;try{n=s.d.createE"
+"vent(\\\\\"MouseEvents\\\\\")}catch(x){n=new MouseEvent}return n\");n=tcf(s);if(n){tcf=new Function(\"n\",\"e\",\"var x;try{n.initMouseEvent(\\\\\"click\\\\\",e.bubbles,e.cancelable,e.view,e.detail"
+",e.screenX,e.screenY,e.clientX,e.clientY,e.ctrlKey,e.altKey,e.shiftKey,e.metaKey,e.button,e.relatedTarget)}catch(x){n=0}return n\");n=tcf(n,e);if(n){n.s_fe=1;e.stopPropagation();if (e.stopImmediate"
+"Propagation) {e.stopImmediatePropagation();}e.preventDefault();s.bct=e.target;s.bce=n}}}}}');s.oh=function(o){var s=this,l=s.wd.location,h=o.href?o.href:'',i,j,k,p;i=h.indexOf(':');j=h.indexOf('?')"
+";k=h.indexOf('/');if(h&&(i<0||(j>=0&&i>j)||(k>=0&&i>k))){p=o.protocol&&o.protocol.length>1?o.protocol:(l.protocol?l.protocol:'');i=l.pathname.lastIndexOf('/');h=(p?p+'//':'')+(o.host?o.host:(l.host"
+"?l.host:''))+(h.substring(0,1)!='/'?l.pathname.substring(0,i<0?0:i)+'/':'')+h}return h};s.ot=function(o){var t=o.tagName;if(o.tagUrn||(o.scopeName&&o.scopeName.toUpperCase()!='HTML'))return '';t=t&"
+"&t.toUpperCase?t.toUpperCase():'';if(t=='SHAPE')t='';if(t){if((t=='INPUT'||t=='BUTTON')&&o.type&&o.type.toUpperCase)t=o.type.toUpperCase();else if(!t&&o.href)t='A';}return t};s.oid=function(o){var "
+"s=this,t=s.ot(o),p,c,n='',x=0;if(t&&!o.s_oid){p=o.protocol;c=o.onclick;if(o.href&&(t=='A'||t=='AREA')&&(!c||!p||p.toLowerCase().indexOf('javascript')<0))n=s.oh(o);else if(c){n=s.rep(s.rep(s.rep(s.r"
+"ep(''+c,\"\\r\",''),\"\\n\",''),\"\\t\",''),' ','');x=2}else if(t=='INPUT'||t=='SUBMIT'){if(o.value)n=o.value;else if(o.innerText)n=o.innerText;else if(o.textContent)n=o.textContent;x=3}else if(o.s"
+"rc&&t=='IMAGE')n=o.src;if(n){o.s_oid=s.fl(n,100);o.s_oidt=x}}return o.s_oid};s.rqf=function(t,un){var s=this,e=t.indexOf('='),u=e>=0?t.substring(0,e):'',q=e>=0?s.epa(t.substring(e+1)):'';if(u&&q&&("
+"','+u+',').indexOf(','+un+',')>=0){if(u!=s.un&&s.un.indexOf(',')>=0)q='&u='+u+q+'&u=0';return q}return ''};s.rq=function(un){if(!un)un=this.un;var s=this,c=un.indexOf(','),v=s.c_r('s_sq'),q='';if(c"
+"<0)return s.pt(v,'&','rqf',un);return s.pt(un,',','rq',0)};s.sqp=function(t,a){var s=this,e=t.indexOf('='),q=e<0?'':s.epa(t.substring(e+1));s.sqq[q]='';if(e>=0)s.pt(t.substring(0,e),',','sqs',q);re"
+"turn 0};s.sqs=function(un,q){var s=this;s.squ[un]=q;return 0};s.sq=function(q){var s=this,k='s_sq',v=s.c_r(k),x,c=0;s.sqq=new Object;s.squ=new Object;s.sqq[q]='';s.pt(v,'&','sqp',0);s.pt(s.un,',','"
+"sqs',q);v='';for(x in s.squ)if(x&&(!Object||!Object.prototype||!Object.prototype[x]))s.sqq[s.squ[x]]+=(s.sqq[s.squ[x]]?',':'')+x;for(x in s.sqq)if(x&&(!Object||!Object.prototype||!Object.prototype["
+"x])&&s.sqq[x]&&(x==q||c<2)){v+=(v?'&':'')+s.sqq[x]+'='+s.ape(x);c++}return s.c_w(k,v,0)};s.wdl=new Function('e','var s=s_c_il['+s._in+'],r=true,b=s.eh(s.wd,\"onload\"),i,o,oc;if(b)r=this[b](e);for("
+"i=0;i<s.d.links.length;i++){o=s.d.links[i];oc=o.onclick?\"\"+o.onclick:\"\";if((oc.indexOf(\"s_gs(\")<0||oc.indexOf(\".s_oc(\")>=0)&&oc.indexOf(\".tl(\")<0)s.eh(o,\"onclick\",0,s.lc);}return r');s."
+"wds=function(){var s=this;if(s.apv>3&&(!s.isie||!s.ismac||s.apv>=5)){if(s.b&&s.b.attachEvent)s.b.attachEvent('onclick',s.bc);else if(s.b&&s.b.addEventListener){if(s.n&&((s.n.userAgent.indexOf('WebK"
+"it')>=0&&s.d.createEvent)||(s.n.userAgent.indexOf('Firefox/2')>=0&&s.wd.MouseEvent))){s.bbc=1;s.useForcedLinkTracking=1;s.b.addEventListener('click',s.bc,true)}s.b.addEventListener('click',s.bc,fal"
+"se)}else s.eh(s.wd,'onload',0,s.wdl)}};s.vs=function(x){var s=this,v=s.visitorSampling,g=s.visitorSamplingGroup,k='s_vsn_'+s.un+(g?'_'+g:''),n=s.c_r(k),e=new Date,y=e.getYear();e.setYear(y+10+(y<19"
+"00?1900:0));if(v){v*=100;if(!n){if(!s.c_w(k,x,e))return 0;n=x}if(n%10000>v)return 0}return 1};s.dyasmf=function(t,m){if(t&&m&&m.indexOf(t)>=0)return 1;return 0};s.dyasf=function(t,m){var s=this,i=t"
+"?t.indexOf('='):-1,n,x;if(i>=0&&m){var n=t.substring(0,i),x=t.substring(i+1);if(s.pt(x,',','dyasmf',m))return n}return 0};s.uns=function(){var s=this,x=s.dynamicAccountSelection,l=s.dynamicAccountL"
+"ist,m=s.dynamicAccountMatch,n,i;s.un=s.un.toLowerCase();if(x&&l){if(!m)m=s.wd.location.host;if(!m.toLowerCase)m=''+m;l=l.toLowerCase();m=m.toLowerCase();n=s.pt(l,';','dyasf',m);if(n)s.un=n}i=s.un.i"
+"ndexOf(',');s.fun=i<0?s.un:s.un.substring(0,i)};s.sa=function(un){var s=this;if(s.un&&s.mpc('sa',arguments))return;s.un=un;if(!s.oun)s.oun=un;else if((','+s.oun+',').indexOf(','+un+',')<0)s.oun+=',"
+"'+un;s.uns()};s.m_i=function(n,a){var s=this,m,f=n.substring(0,1),r,l,i;if(!s.m_l)s.m_l=new Object;if(!s.m_nl)s.m_nl=new Array;m=s.m_l[n];if(!a&&m&&m._e&&!m._i)s.m_a(n);if(!m){m=new Object,m._c='s_"
+"m';m._in=s.wd.s_c_in;m._il=s._il;m._il[m._in]=m;s.wd.s_c_in++;m.s=s;m._n=n;m._l=new Array('_c','_in','_il','_i','_e','_d','_dl','s','n','_r','_g','_g1','_t','_t1','_x','_x1','_rs','_rr','_l');s.m_l"
+"[n]=m;s.m_nl[s.m_nl.length]=n}else if(m._r&&!m._m){r=m._r;r._m=m;l=m._l;for(i=0;i<l.length;i++)if(m[l[i]])r[l[i]]=m[l[i]];r._il[r._in]=r;m=s.m_l[n]=r}if(f==f.toUpperCase())s[n]=m;return m};s.m_a=ne"
+"w Function('n','g','e','if(!g)g=\"m_\"+n;var s=s_c_il['+s._in+'],c=s[g+\"_c\"],m,x,f=0;if(s.mpc(\"m_a\",arguments))return;if(!c)c=s.wd[\"s_\"+g+\"_c\"];if(c&&s_d)s[g]=new Function(\"s\",s_ft(s_d(c)"
+"));x=s[g];if(!x)x=s.wd[\\'s_\\'+g];if(!x)x=s.wd[g];m=s.m_i(n,1);if(x&&(!m._i||g!=\"m_\"+n)){m._i=f=1;if((\"\"+x).indexOf(\"function\")>=0)x(s);else s.m_m(\"x\",n,x,e)}m=s.m_i(n,1);if(m._dl)m._dl=m."
+"_d=0;s.dlt();return f');s.m_m=function(t,n,d,e){t='_'+t;var s=this,i,x,m,f='_'+t,r=0,u;if(s.m_l&&s.m_nl)for(i=0;i<s.m_nl.length;i++){x=s.m_nl[i];if(!n||x==n){m=s.m_i(x);u=m[t];if(u){if((''+u).index"
+"Of('function')>=0){if(d&&e)u=m[t](d,e);else if(d)u=m[t](d);else u=m[t]()}}if(u)r=1;u=m[t+1];if(u&&!m[f]){if((''+u).indexOf('function')>=0){if(d&&e)u=m[t+1](d,e);else if(d)u=m[t+1](d);else u=m[t+1]("
+")}}m[f]=1;if(u)r=1}}return r};s.m_ll=function(){var s=this,g=s.m_dl,i,o;if(g)for(i=0;i<g.length;i++){o=g[i];if(o)s.loadModule(o.n,o.u,o.d,o.l,o.e,1);g[i]=0}};s.loadModule=function(n,u,d,l,e,ln){var"
+" s=this,m=0,i,g,o=0,f1,f2,c=s.h?s.h:s.b,b,tcf;if(n){i=n.indexOf(':');if(i>=0){g=n.substring(i+1);n=n.substring(0,i)}else g=\"m_\"+n;m=s.m_i(n)}if((l||(n&&!s.m_a(n,g)))&&u&&s.d&&c&&s.d.createElement"
+"){if(d){m._d=1;m._dl=1}if(ln){if(s.ssl)u=s.rep(u,'http:','https:');i='s_s:'+s._in+':'+n+':'+g;b='var s=s_c_il['+s._in+'],o=s.d.getElementById(\"'+i+'\");if(s&&o){if(!o.l&&s.wd.'+g+'){o.l=1;if(o.i)c"
+"learTimeout(o.i);o.i=0;s.m_a(\"'+n+'\",\"'+g+'\"'+(e?',\"'+e+'\"':'')+')}';f2=b+'o.c++;if(!s.maxDelay)s.maxDelay=250;if(!o.l&&o.c<(s.maxDelay*2)/100)o.i=setTimeout(o.f2,100)}';f1=new Function('e',b"
+"+'}');tcf=new Function('s','c','i','u','f1','f2','var e,o=0;try{o=s.d.createElement(\"script\");if(o){o.type=\"text/javascript\";'+(n?'o.id=i;o.defer=true;o.onload=o.onreadystatechange=f1;o.f2=f2;o"
+".l=0;':'')+'o.src=u;c.appendChild(o);'+(n?'o.c=0;o.i=setTimeout(f2,100)':'')+'}}catch(e){o=0}return o');o=tcf(s,c,i,u,f1,f2)}else{o=new Object;o.n=n+':'+g;o.u=u;o.d=d;o.l=l;o.e=e;g=s.m_dl;if(!g)g=s"
+".m_dl=new Array;i=0;while(i<g.length&&g[i])i++;g[i]=o}}else if(n){m=s.m_i(n);m._e=1}return m};s.voa=function(vo,r){var s=this,l=s.va_g,i,k,v,x;for(i=0;i<l.length;i++){k=l[i];v=vo[k];if(v||vo['!'+k]"
+"){if(!r&&(k==\"contextData\"||k==\"retrieveLightData\")&&s[k])for(x in s[k])if(!v[x])v[x]=s[k][x];s[k]=v}}};s.vob=function(vo,onlySet){var s=this,l=s.va_g,i,k;for(i=0;i<l.length;i++){k=l[i];vo[k]=s"
+"[k];if(!onlySet&&!vo[k])vo['!'+k]=1}};s.dlt=new Function('var s=s_c_il['+s._in+'],d=new Date,i,vo,f=0;if(s.dll)for(i=0;i<s.dll.length;i++){vo=s.dll[i];if(vo){if(!s.m_m(\"d\")||d.getTime()-vo._t>=s."
+"maxDelay){s.dll[i]=0;s.t(vo)}else f=1}}if(s.dli)clearTimeout(s.dli);s.dli=0;if(f){if(!s.dli)s.dli=setTimeout(s.dlt,s.maxDelay)}else s.dll=0');s.dl=function(vo){var s=this,d=new Date;if(!vo)vo=new O"
+"bject;s.vob(vo);vo._t=d.getTime();if(!s.dll)s.dll=new Array;s.dll[s.dll.length]=vo;if(!s.maxDelay)s.maxDelay=250;s.dlt()};s._waitingForMarketingCloudVisitorID = false;s._doneWaitingForMarketingClou"
+"dVisitorID = false;s._marketingCloudVisitorIDCallback=function(marketingCloudVisitorID) {var s=this;s.marketingCloudVisitorID = marketingCloudVisitorID;s._doneWaitingForMarketingCloudVisitorID = tr"
+"ue;s._callbackWhenReadyToTrackCheck();};s._waitingForAnalyticsVisitorID = false;s._doneWaitingForAnalyticsVisitorID = false;s._analyticsVisitorIDCallback=function(analyticsVisitorID) {var s=this;s."
+"analyticsVisitorID = analyticsVisitorID;s._doneWaitingForAnalyticsVisitorID = true;s._callbackWhenReadyToTrackCheck();};s._waitingForAudienceManagerLocationHint = false;s._doneWaitingForAudienceMan"
+"agerLocationHint = false;s._audienceManagerLocationHintCallback=function(audienceManagerLocationHint) {var s=this;s.audienceManagerLocationHint = audienceManagerLocationHint;s._doneWaitingForAudien"
+"ceManagerLocationHint = true;s._callbackWhenReadyToTrackCheck();};s._waitingForAudienceManagerBlob = false;s._doneWaitingForAudienceManagerBlob = false;s._audienceManagerBlobCallback=function(audie"
+"nceManagerBlob) {var s=this;s.audienceManagerBlob = audienceManagerBlob;s._doneWaitingForAudienceManagerBlob = true;s._callbackWhenReadyToTrackCheck();};s.isReadyToTrack=function() {var s=this,read"
+"yToTrack = true,visitor = s.visitor;if ((visitor) && (visitor.isAllowed())) {if ((!s._waitingForMarketingCloudVisitorID) && (!s.marketingCloudVisitorID) && (visitor.getMarketingCloudVisitorID)) {s."
+"_waitingForMarketingCloudVisitorID = true;s.marketingCloudVisitorID = visitor.getMarketingCloudVisitorID([s,s._marketingCloudVisitorIDCallback]);if (s.marketingCloudVisitorID) {s._doneWaitingForMar"
+"ketingCloudVisitorID = true;}}if ((!s._waitingForAnalyticsVisitorID) && (!s.analyticsVisitorID) && (visitor.getAnalyticsVisitorID)) {s._waitingForAnalyticsVisitorID = true;s.analyticsVisitorID = vi"
+"sitor.getAnalyticsVisitorID([s,s._analyticsVisitorIDCallback]);if (s.analyticsVisitorID) {s._doneWaitingForAnalyticsVisitorID = true;}}if ((!s._waitingForAudienceManagerLocationHint) && (!s.audienc"
+"eManagerLocationHint) && (visitor.getAudienceManagerLocationHint)) {s._waitingForAudienceManagerLocationHint = true;s.audienceManagerLocationHint = visitor.getAudienceManagerLocationHint([s,s._audi"
+"enceManagerLocationHintCallback]);if (s.audienceManagerLocationHint) {s._doneWaitingForAudienceManagerLocationHint = true;}}if ((!s._waitingForAudienceManagerBlob) && (!s.audienceManagerBlob) && (v"
+"isitor.getAudienceManagerBlob)) {s._waitingForAudienceManagerBlob = true;s.audienceManagerBlob = visitor.getAudienceManagerBlob([s,s._audienceManagerBlobCallback]);if (s.audienceManagerBlob) {s._do"
+"neWaitingForAudienceManagerBlob = true;}}if (((s._waitingForMarketingCloudVisitorID)     && (!s._doneWaitingForMarketingCloudVisitorID)     && (!s.marketingCloudVisitorID)) ||((s._waitingForAnalyti"
+"csVisitorID)          && (!s._doneWaitingForAnalyticsVisitorID)          && (!s.analyticsVisitorID)) ||((s._waitingForAudienceManagerLocationHint) && (!s._doneWaitingForAudienceManagerLocationHint)"
+" && (!s.audienceManagerLocationHint)) ||((s._waitingForAudienceManagerBlob)         && (!s._doneWaitingForAudienceManagerBlob)         && (!s.audienceManagerBlob))) {readyToTrack = false;}}return r"
+"eadyToTrack;};s._callbackWhenReadyToTrackQueue = null;s._callbackWhenReadyToTrackInterval = 0;s.callbackWhenReadyToTrack=function(callbackThis,callback,args) {var s=this,callbackInfo;callbackInfo ="
+" {};callbackInfo.callbackThis = callbackThis;callbackInfo.callback     = callback;callbackInfo.args         = args;if (s._callbackWhenReadyToTrackQueue == null) {s._callbackWhenReadyToTrackQueue = "
+"[];}s._callbackWhenReadyToTrackQueue.push(callbackInfo);if (s._callbackWhenReadyToTrackInterval == 0) {s._callbackWhenReadyToTrackInterval = setInterval(s._callbackWhenReadyToTrackCheck,100);}};s._"
+"callbackWhenReadyToTrackCheck=new Function('var s=s_c_il['+s._in+'],callbackNum,callbackInfo;if (s.isReadyToTrack()) {if (s._callbackWhenReadyToTrackInterval) {clearInterval(s._callbackWhenReadyToT"
+"rackInterval);s._callbackWhenReadyToTrackInterval = 0;}if (s._callbackWhenReadyToTrackQueue != null) {while (s._callbackWhenReadyToTrackQueue.length > 0) {callbackInfo = s._callbackWhenReadyToTrack"
+"Queue.shift();callbackInfo.callback.apply(callbackInfo.callbackThis,callbackInfo.args);}}}');s._handleNotReadyToTrack=function(variableOverrides) {var s=this,args,varKey,variableOverridesCopy = nul"
+"l,setVariables = null;if (!s.isReadyToTrack()) {args = [];if (variableOverrides != null) {variableOverridesCopy = {};for (varKey in variableOverrides) {variableOverridesCopy[varKey] = variableOverr"
+"ides[varKey];}}setVariables = {};s.vob(setVariables,true);args.push(variableOverridesCopy);args.push(setVariables);s.callbackWhenReadyToTrack(s,s.track,args);return true;}return false;};s.gfid=func"
+"tion(){var s=this,d='0123456789ABCDEF',k='s_fid',fid=s.c_r(k),h='',l='',i,j,m=8,n=4,e=new Date,y;if(!fid||fid.indexOf('-')<0){for(i=0;i<16;i++){j=Math.floor(Math.random()*m);h+=d.substring(j,j+1);j"
+"=Math.floor(Math.random()*n);l+=d.substring(j,j+1);m=n=16}fid=h+'-'+l;}y=e.getYear();e.setYear(y+2+(y<1900?1900:0));if(!s.c_w(k,fid,e))fid=0;return fid};s.track=s.t=function(vo,setVariables){var s="
+"this,notReadyToTrack,trk=1,tm=new Date,sed=Math&&Math.random?Math.floor(Math.random()*10000000000000):tm.getTime(),sess='s'+Math.floor(tm.getTime()/10800000)%10+sed,y=tm.getYear(),vt=tm.getDate()+'"
+"/'+tm.getMonth()+'/'+(y<1900?y+1900:y)+' '+tm.getHours()+':'+tm.getMinutes()+':'+tm.getSeconds()+' '+tm.getDay()+' '+tm.getTimezoneOffset(),tcf,tfs=s.gtfs(),ta=-1,q='',qs='',code='',vb=new Object;i"
+"f (s.visitor) {if (s.visitor.getAuthState) {s.authState = s.visitor.getAuthState();}if ((!s.supplementalDataID) && (s.visitor.getSupplementalDataID)) {s.supplementalDataID = s.visitor.getSupplement"
+"alDataID(\"AppMeasurement:\" + s._in,(s.expectSupplementalData ? false : true));}}if(s.mpc('t',arguments))return;s.gl(s.vl_g);s.uns();s.m_ll();notReadyToTrack = s._handleNotReadyToTrack(vo);if (!no"
+"tReadyToTrack) {if (setVariables) {s.voa(setVariables);}if(!s.td){var tl=tfs.location,a,o,i,x='',c='',v='',p='',bw='',bh='',j='1.0',k=s.c_w('s_cc','true',0)?'Y':'N',hp='',ct='',pn=0,ps;if(String&&S"
+"tring.prototype){j='1.1';if(j.match){j='1.2';if(tm.setUTCDate){j='1.3';if(s.isie&&s.ismac&&s.apv>=5)j='1.4';if(pn.toPrecision){j='1.5';a=new Array;if(a.forEach){j='1.6';i=0;o=new Object;tcf=new Fun"
+"ction('o','var e,i=0;try{i=new Iterator(o)}catch(e){}return i');i=tcf(o);if(i&&i.next){j='1.7';if(a.reduce){j='1.8';if(j.trim){j='1.8.1';if(Date.parse){j='1.8.2';if(Object.create)j='1.8.5'}}}}}}}}}"
+"if(s.apv>=4)x=screen.width+'x'+screen.height;if(s.isns||s.isopera){if(s.apv>=3){v=s.n.javaEnabled()?'Y':'N';if(s.apv>=4){c=screen.pixelDepth;bw=s.wd.innerWidth;bh=s.wd.innerHeight}}s.pl=s.n.plugins"
+"}else if(s.isie){if(s.apv>=4){v=s.n.javaEnabled()?'Y':'N';c=screen.colorDepth;if(s.apv>=5){bw=s.d.documentElement.offsetWidth;bh=s.d.documentElement.offsetHeight;if(!s.ismac&&s.b){tcf=new Function("
+"'s','tl','var e,hp=0;try{s.b.addBehavior(\"#default#homePage\");hp=s.b.isHomePage(tl)?\"Y\":\"N\"}catch(e){}return hp');hp=tcf(s,tl);tcf=new Function('s','var e,ct=0;try{s.b.addBehavior(\"#default#"
+"clientCaps\");ct=s.b.connectionType}catch(e){}return ct');ct=tcf(s)}}}else r=''}if(s.pl)while(pn<s.pl.length&&pn<30){ps=s.fl(s.pl[pn].name,100)+';';if(p.indexOf(ps)<0)p+=ps;pn++}s.resolution=x;s.co"
+"lorDepth=c;s.javascriptVersion=j;s.javaEnabled=v;s.cookiesEnabled=k;s.browserWidth=bw;s.browserHeight=bh;s.connectionType=ct;s.homepage=hp;s.plugins=p;s.td=1}if(vo){s.vob(vb);s.voa(vo)}if(!s.analyt"
+"icsVisitorID&&!s.marketingCloudVisitorID)s.fid=s.gfid();if((vo&&vo._t)||!s.m_m('d')){if(s.usePlugins)s.doPlugins(s);if(!s.abort){var l=s.wd.location,r=tfs.document.referrer;if(!s.pageURL)s.pageURL="
+"l.href?l.href:l;if(!s.referrer&&!s._1_referrer){s.referrer=r;s._1_referrer=1}s.m_m('g');if(s.lnk||s.eo){var o=s.eo?s.eo:s.lnk,p=s.pageName,w=1,t=s.ot(o),n=s.oid(o),x=o.s_oidt,h,l,i,oc;if(s.eo&&o==s"
+".eo){while(o&&!n&&t!='BODY'){o=o.parentElement?o.parentElement:o.parentNode;if(o){t=s.ot(o);n=s.oid(o);x=o.s_oidt}}if(!n||t=='BODY')o='';if(o){oc=o.onclick?''+o.onclick:'';if((oc.indexOf('s_gs(')>="
+"0&&oc.indexOf('.s_oc(')<0)||oc.indexOf('.tl(')>=0)o=0}}if(o){if(n)ta=o.target;h=s.oh(o);i=h.indexOf('?');h=s.linkLeaveQueryString||i<0?h:h.substring(0,i);l=s.linkName;t=s.linkType?s.linkType.toLowe"
+"rCase():s.lt(h);if(t&&(h||l)){s.pe='lnk_'+(t=='d'||t=='e'?t:'o');s.pev1=(h?s.ape(h):'');s.pev2=(l?s.ape(l):'')}else trk=0;if(s.trackInlineStats){if(!p){p=s.pageURL;w=0}t=s.ot(o);i=o.sourceIndex;if("
+"o.dataset&&o.dataset.sObjectId){s.wd.s_objectID=o.dataset.sObjectId;}else if(o.getAttribute&&o.getAttribute('data-s-object-id')){s.wd.s_objectID=o.getAttribute('data-s-object-id');}else if(s.useFor"
+"cedLinkTracking){s.wd.s_objectID='';oc=o.onclick?''+o.onclick:'';if(oc){var ocb=oc.indexOf('s_objectID'),oce,ocq,ocx;if(ocb>=0){ocb+=10;while(ocb<oc.length&&(\"= \\t\\r\\n\").indexOf(oc.charAt(ocb)"
+")>=0)ocb++;if(ocb<oc.length){oce=ocb;ocq=ocx=0;while(oce<oc.length&&(oc.charAt(oce)!=';'||ocq)){if(ocq){if(oc.charAt(oce)==ocq&&!ocx)ocq=0;else if(oc.charAt(oce)==\"\\\\\")ocx=!ocx;else ocx=0;}else"
+"{ocq=oc.charAt(oce);if(ocq!='\"'&&ocq!=\"'\")ocq=0}oce++;}oc=oc.substring(ocb,oce);if(oc){o.s_soid=new Function('s','var e;try{s.wd.s_objectID='+oc+'}catch(e){}');o.s_soid(s)}}}}}if(s.gg('objectID'"
+")){n=s.gg('objectID');x=1;i=1}if(p&&n&&t)qs='&pid='+s.ape(s.fl(p,255))+(w?'&pidt='+w:'')+'&oid='+s.ape(s.fl(n,100))+(x?'&oidt='+x:'')+'&ot='+s.ape(t)+(i?'&oi='+i:'')}}else trk=0}if(trk||qs){s.sampl"
+"ed=s.vs(sed);if(trk){if(s.sampled)code=s.mr(sess,(vt?'&t='+s.ape(vt):'')+s.hav()+q+(qs?qs:s.rq()),0,ta);qs='';s.m_m('t');if(s.p_r)s.p_r();s.referrer=s.lightProfileID=s.retrieveLightProfiles=s.delet"
+"eLightProfiles=''}s.sq(qs)}}}else s.dl(vo);if(vo)s.voa(vb,1);}s.abort=0;s.supplementalDataID=s.pageURLRest=s.lnk=s.eo=s.linkName=s.linkType=s.wd.s_objectID=s.ppu=s.pe=s.pev1=s.pev2=s.pev3='';if(s.p"
+"g)s.wd.s_lnk=s.wd.s_eo=s.wd.s_linkName=s.wd.s_linkType='';return code};s.trackLink=s.tl=function(o,t,n,vo,f){var s=this;s.lnk=o;s.linkType=t;s.linkName=n;if(f){s.bct=o;s.bcf=f}s.t(vo)};s.trackLight"
+"=function(p,ss,i,vo){var s=this;s.lightProfileID=p;s.lightStoreForSeconds=ss;s.lightIncrementBy=i;s.t(vo)};s.setTagContainer=function(n){var s=this,l=s.wd.s_c_il,i,t,x,y;s.tcn=n;if(l)for(i=0;i<l.le"
+"ngth;i++){t=l[i];if(t&&t._c=='s_l'&&t.tagContainerName==n){s.voa(t);if(t.lmq)for(i=0;i<t.lmq.length;i++){x=t.lmq[i];y='m_'+x.n;if(!s[y]&&!s[y+'_c']){s[y]=t[y];s[y+'_c']=t[y+'_c']}s.loadModule(x.n,x"
+".u,x.d)}if(t.ml)for(x in t.ml)if(s[x]){y=s[x];x=t.ml[x];for(i in x)if(!Object.prototype[i]){if(typeof(x[i])!='function'||(''+x[i]).indexOf('s_c_il')<0)y[i]=x[i]}}if(t.mmq)for(i=0;i<t.mmq.length;i++"
+"){x=t.mmq[i];if(s[x.m]){y=s[x.m];if(y[x.f]&&typeof(y[x.f])=='function'){if(x.a)y[x.f].apply(y,x.a);else y[x.f].apply(y)}}}if(t.tq)for(i=0;i<t.tq.length;i++)s.t(t.tq[i]);t.s=s;return}}};s.wd=window;"
+"s.ssl=(s.wd.location.protocol.toLowerCase().indexOf('https')>=0);s.d=document;s.b=s.d.body;if(s.d.getElementsByTagName){s.h=s.d.getElementsByTagName('HEAD');if(s.h)s.h=s.h[0]}s.n=navigator;s.u=s.n."
+"userAgent;s.ns6=s.u.indexOf('Netscape6/');var apn=s.n.appName,v=s.n.appVersion,ie=v.indexOf('MSIE '),o=s.u.indexOf('Opera '),i;if(v.indexOf('Opera')>=0||o>0)apn='Opera';s.isie=(apn=='Microsoft Inte"
+"rnet Explorer');s.isns=(apn=='Netscape');s.isopera=(apn=='Opera');s.ismac=(s.u.indexOf('Mac')>=0);if(o>0)s.apv=parseFloat(s.u.substring(o+6));else if(ie>0){s.apv=parseInt(i=v.substring(ie+5));if(s."
+"apv>3)s.apv=parseFloat(i)}else if(s.ns6>0)s.apv=parseFloat(s.u.substring(s.ns6+10));else s.apv=parseFloat(v);s.em=0;if(s.em.toPrecision)s.em=3;else if(String.fromCharCode){i=escape(String.fromCharC"
+"ode(256)).toUpperCase();s.em=(i=='%C4%80'?2:(i=='%U0100'?1:0))}if(s.oun)s.sa(s.oun);s.sa(un);s.vl_l='supplementalDataID,timestamp,dynamicVariablePrefix,visitorID,marketingCloudVisitorID,analyticsVi"
+"sitorID,audienceManagerLocationHint,fid,vmk,visitorMigrationKey,visitorMigrationServer,visitorMigrationServerSecure,ppu,charSet,visitorNamespace,cookieDomainPeriods,cookieLifetime,pageName,pageURL,"
+"referrer,contextData,currencyCode,lightProfileID,lightStoreForSeconds,lightIncrementBy,retrieveLightProfiles,deleteLightProfiles,retrieveLightData';s.va_l=s.sp(s.vl_l,',');s.vl_mr=s.vl_m='timestamp"
+",charSet,visitorNamespace,cookieDomainPeriods,cookieLifetime,contextData,lightProfileID,lightStoreForSeconds,lightIncrementBy';s.vl_t=s.vl_l+',variableProvider,channel,server,pageType,transactionID"
+",purchaseID,campaign,state,zip,events,events2,products,audienceManagerBlob,authState,linkName,linkType';var n;for(n=1;n<=75;n++){s.vl_t+=',prop'+n+',eVar'+n;s.vl_m+=',prop'+n+',eVar'+n}for(n=1;n<=5"
+";n++)s.vl_t+=',hier'+n;for(n=1;n<=3;n++)s.vl_t+=',list'+n;s.va_m=s.sp(s.vl_m,',');s.vl_l2=',tnt,pe,pev1,pev2,pev3,resolution,colorDepth,javascriptVersion,javaEnabled,cookiesEnabled,browserWidth,bro"
+"wserHeight,connectionType,homepage,pageURLRest,plugins';s.vl_t+=s.vl_l2;s.va_t=s.sp(s.vl_t,',');s.vl_g=s.vl_t+',trackingServer,trackingServerSecure,trackingServerBase,fpCookieDomainPeriods,disableB"
+"ufferedRequests,mobile,visitorSampling,visitorSamplingGroup,dynamicAccountSelection,dynamicAccountList,dynamicAccountMatch,trackDownloadLinks,trackExternalLinks,trackInlineStats,linkLeaveQueryStrin"
+"g,linkDownloadFileTypes,linkExternalFilters,linkInternalFilters,linkTrackVars,linkTrackEvents,linkNames,lnk,eo,lightTrackVars,_1_referrer,un';s.va_g=s.sp(s.vl_g,',');s.pg=pg;s.gl(s.vl_g);s.contextD"
+"ata=new Object;s.retrieveLightData=new Object;if(!ss)s.wds();if(pg){s.wd.s_co=function(o){return o};s.wd.s_gs=function(un){s_gi(un,1,1).t()};s.wd.s_dc=function(un){s_gi(un,1).t()}}",
w=window,l=w.s_c_il,n=navigator,u=n.userAgent,v=n.appVersion,e=v.indexOf('MSIE '),m=u.indexOf('Netscape6/'),a,i,j,x,s;if(un){un=un.toLowerCase();if(l)for(j=0;j<2;j++)for(i=0;i<l.length;i++){s=l[i];x=s._c;if((!x||x=='s_c'||(j>0&&x=='s_l'))&&(s.oun==un||(s.fs&&s.sa&&s.fs(s.oun,un)))){if(s.sa)s.sa(un);if(x=='s_c')return s}else s=0}}w.s_an='0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz';
w.s_sp=new Function("x","d","var a=new Array,i=0,j;if(x){if(x.split)a=x.split(d);else if(!d)for(i=0;i<x.length;i++)a[a.length]=x.substring(i,i+1);else while(i>=0){j=x.indexOf(d,i);a[a.length]=x.subst"
+"ring(i,j<0?x.length:j);i=j;if(i>=0)i+=d.length}}return a");
w.s_jn=new Function("a","d","var x='',i,j=a.length;if(a&&j>0){x=a[0];if(j>1){if(a.join)x=a.join(d);else for(i=1;i<j;i++)x+=d+a[i]}}return x");
w.s_rep=new Function("x","o","n","return s_jn(s_sp(x,o),n)");
w.s_d=new Function("x","var t='`^@$#',l=s_an,l2=new Object,x2,d,b=0,k,i=x.lastIndexOf('~~'),j,v,w;if(i>0){d=x.substring(0,i);x=x.substring(i+2);l=s_sp(l,'');for(i=0;i<62;i++)l2[l[i]]=i;t=s_sp(t,'');d"
+"=s_sp(d,'~');i=0;while(i<5){v=0;if(x.indexOf(t[i])>=0) {x2=s_sp(x,t[i]);for(j=1;j<x2.length;j++){k=x2[j].substring(0,1);w=t[i]+k;if(k!=' '){v=1;w=d[b+l2[k]]}x2[j]=w+x2[j].substring(1)}}if(v)x=s_jn("
+"x2,'');else{w=t[i]+' ';if(x.indexOf(w)>=0)x=s_rep(x,w,t[i]);i++;b+=62}}}return x");
w.s_fe=new Function("c","return s_rep(s_rep(s_rep(c,'\\\\','\\\\\\\\'),'\"','\\\\\"'),\"\\n\",\"\\\\n\")");
w.s_fa=new Function("f","var s=f.indexOf('(')+1,e=f.indexOf(')'),a='',c;while(s>=0&&s<e){c=f.substring(s,s+1);if(c==',')a+='\",\"';else if((\"\\n\\r\\t \").indexOf(c)<0)a+=c;s++}return a?'\"'+a+'\"':"
+"a");
w.s_ft=new Function("c","c+='';var s,e,o,a,d,q,f,h,x;s=c.indexOf('=function(');while(s>=0){s++;d=1;q='';x=0;f=c.substring(s);a=s_fa(f);e=o=c.indexOf('{',s);e++;while(d>0){h=c.substring(e,e+1);if(q){i"
+"f(h==q&&!x)q='';if(h=='\\\\')x=x?0:1;else x=0}else{if(h=='\"'||h==\"'\")q=h;if(h=='{')d++;if(h=='}')d--}if(d>0)e++}c=c.substring(0,s)+'new Function('+(a?a+',':'')+'\"'+s_fe(c.substring(o+1,e))+'\")"
+"'+c.substring(e+1);s=c.indexOf('=function(')}return c;");
c=s_d(c);if(e>0){a=parseInt(i=v.substring(e+5));if(a>3)a=parseFloat(i)}else if(m>0)a=parseFloat(u.substring(m+10));else a=parseFloat(v);if(a<5||v.indexOf('Opera')>=0||u.indexOf('Opera')>=0)c=s_ft(c);if(!s){s=new Object;if(!w.s_c_in){w.s_c_il=new Array;w.s_c_in=0}s._il=w.s_c_il;s._in=w.s_c_in;s._il[s._in]=s;w.s_c_in++;}s._c='s_c';(new Function("s","un","pg","ss",c))(s,un,pg,ss);return s}
function s_giqf(){var w=window,q=w.s_giq,i,t,s;if(q)for(i=0;i<q.length;i++){t=q[i];s=s_gi(t.oun);s.sa(t.un);s.setTagContainer(t.tagContainerName)}w.s_giq=0}s_giqf();


(function(e){var x={},u={mode:"horizontal",slideSelector:"",infiniteLoop:true,hideControlOnEnd:false,speed:500,easing:null,slideMargin:0,startSlide:0,randomStart:false,captions:false,ticker:false,tickerHover:false,adaptiveHeight:false,adaptiveHeightSpeed:500,video:false,useCSS:true,preloadImages:"visible",touchEnabled:true,swipeThreshold:50,oneToOneTouch:true,preventDefaultSwipeX:true,preventDefaultSwipeY:false,pager:true,pagerType:"full",pagerShortSeparator:" / ",pagerSelector:null,buildPager:null,
pagerCustom:null,controls:true,nextText:"Next",prevText:"Prev",nextSelector:null,prevSelector:null,autoControls:false,startText:"Start",stopText:"Stop",autoControlsCombine:false,autoControlsSelector:null,auto:false,pause:4E3,autoStart:true,autoDirection:"next",autoHover:false,autoDelay:0,minSlides:1,maxSlides:1,moveSlides:0,slideWidth:0,onSliderLoad:function(){},onSlideBefore:function(){},onSlideAfter:function(){},onSlideNext:function(){},onSlidePrev:function(){}};e.fn.bxSlider=function(p){if(this.length!=
0){if(this.length>1){this.each(function(){e(this).bxSlider(p)});return this}var a={},d=this;x.el=this;var q=e(window).width(),m=e(window).height(),v=function(){a.settings=e.extend({},u,p);a.settings.slideWidth=parseInt(a.settings.slideWidth);a.children=d.children(a.settings.slideSelector);if(a.children.length<a.settings.minSlides)a.settings.minSlides=a.children.length;if(a.children.length<a.settings.maxSlides)a.settings.maxSlides=a.children.length;if(a.settings.randomStart)a.settings.startSlide=Math.floor(Math.random()*
a.children.length);a.active={index:a.settings.startSlide};a.carousel=a.settings.minSlides>1||a.settings.maxSlides>1;if(a.carousel)a.settings.preloadImages="all";a.minThreshold=a.settings.minSlides*a.settings.slideWidth+(a.settings.minSlides-1)*a.settings.slideMargin;a.maxThreshold=a.settings.maxSlides*a.settings.slideWidth+(a.settings.maxSlides-1)*a.settings.slideMargin;a.working=false;a.controls={};a.interval=null;a.animProp=a.settings.mode=="vertical"?"top":"left";a.usingCSS=a.settings.useCSS&&
a.settings.mode!="fade"&&function(){var b=document.createElement("div"),c=["WebkitPerspective","MozPerspective","OPerspective","msPerspective"];for(var g in c)if(b.style[c[g]]!==undefined){a.cssPrefix=c[g].replace("Perspective","").toLowerCase();a.animProp="-"+a.cssPrefix+"-transform";return true}return false}();if(a.settings.mode=="vertical")a.settings.maxSlides=a.settings.minSlides;n()},n=function(){d.wrap('<div class="bx-wrapper"><div class="bx-viewport"></div></div>');a.viewport=d.parent();a.loader=
e('<div class="bx-loading" />');a.viewport.prepend(a.loader);d.css({width:a.settings.mode=="horizontal"?a.children.length*215+"%":"auto",position:"relative"});if(a.usingCSS&&a.settings.easing)d.css("-"+a.cssPrefix+"-transition-timing-function",a.settings.easing);else if(!a.settings.easing)a.settings.easing="swing";f();a.viewport.css({width:"100%",overflow:"hidden",position:"relative"});a.viewport.parent().css({maxWidth:s()});a.children.css({"float":a.settings.mode=="horizontal"?"left":"none",listStyle:"none",
position:"relative"});a.children.width(h());a.settings.mode=="horizontal"&&a.settings.slideMargin>0&&a.children.css("marginRight",a.settings.slideMargin);a.settings.mode=="vertical"&&a.settings.slideMargin>0&&a.children.css("marginBottom",a.settings.slideMargin);if(a.settings.mode=="fade"){a.children.css({position:"absolute",zIndex:0,display:"none"});a.children.eq(a.settings.startSlide).css({zIndex:50,display:"block"})}a.controls.el=e('<div class="bx-controls" />');a.settings.captions&&I();if(a.settings.infiniteLoop&&
a.settings.mode!="fade"&&!a.settings.ticker){var b=a.settings.mode=="vertical"?a.settings.minSlides:a.settings.maxSlides,c=a.children.slice(0,b).clone().addClass("bx-clone");b=a.children.slice(-b).clone().addClass("bx-clone");d.append(c).prepend(b)}a.active.last=a.settings.startSlide==j()-1;a.settings.video&&d.fitVids();c=a.children.eq(a.settings.startSlide);if(a.settings.preloadImages=="all")c=d.children();if(!a.settings.ticker){a.settings.pager&&J();a.settings.controls&&K();a.settings.auto&&a.settings.autoControls&&
L();if(a.settings.controls||a.settings.autoControls||a.settings.pager)a.viewport.after(a.controls.el)}c.imagesLoaded(t)},t=function(){a.loader.remove();C();if(a.settings.mode=="vertical")a.settings.adaptiveHeight=true;a.viewport.height(o());d.redrawSlider();a.settings.onSliderLoad(a.active.index);a.initialized=true;e(window).bind("resize",D);a.settings.auto&&a.settings.autoStart&&M();a.settings.ticker&&N();a.settings.pager&&y(a.settings.startSlide);a.settings.controls&&E();a.settings.touchEnabled&&
!a.settings.ticker&&O()},o=function(){var b=0,c=e();if(a.settings.mode!="vertical"&&!a.settings.adaptiveHeight)c=a.children;else if(a.carousel){var g=a.settings.moveSlides==1?a.active.index:a.active.index*r();c=a.children.eq(g);for(i=1;i<=a.settings.maxSlides-1;i++)c=g+i>=a.children.length?c.add(a.children.eq(i-1)):c.add(a.children.eq(g+i))}else c=a.children.eq(a.active.index);if(a.settings.mode=="vertical"){c.each(function(){b+=e(this).outerHeight()});if(a.settings.slideMargin>0)b+=a.settings.slideMargin*
(a.settings.minSlides-1)}else b=Math.max.apply(Math,c.map(function(){return e(this).outerHeight(false)}).get());return b},s=function(){var b="100%";if(a.settings.slideWidth>0)b=a.settings.mode=="horizontal"?a.settings.maxSlides*a.settings.slideWidth+(a.settings.maxSlides-1)*a.settings.slideMargin:a.settings.slideWidth;return b},h=function(){var b=a.settings.slideWidth,c=a.viewport.width();if(a.settings.slideWidth==0||a.settings.slideWidth>c&&!a.carousel||a.settings.mode=="vertical")b=c;else if(a.settings.maxSlides>
1&&a.settings.mode=="horizontal")if(!(c>a.maxThreshold))if(c<a.minThreshold)b=(c-a.settings.slideMargin*(a.settings.minSlides-1))/a.settings.minSlides;return b},f=function(){var b=1;if(a.settings.mode=="horizontal"&&a.settings.slideWidth>0)if(a.viewport.width()<a.minThreshold)b=a.settings.minSlides;else if(a.viewport.width()>a.maxThreshold)b=a.settings.maxSlides;else{b=a.children.first().width();b=Math.floor(a.viewport.width()/b)}else if(a.settings.mode=="vertical")b=a.settings.minSlides;return b},
j=function(){var b=0;if(a.settings.moveSlides>0)if(a.settings.infiniteLoop)b=a.children.length/r();else for(var c=0,g=0;c<a.children.length;){++b;c=g+f();g+=a.settings.moveSlides<=f()?a.settings.moveSlides:f()}else b=Math.ceil(a.children.length/f());return b},r=function(){if(a.settings.moveSlides>0&&a.settings.moveSlides<=f())return a.settings.moveSlides;return f()},C=function(){if(a.children.length>a.settings.maxSlides&&a.active.last&&!a.settings.infiniteLoop)if(a.settings.mode=="horizontal"){var b=
a.children.last(),c=b.position();l(-(c.left-(a.viewport.width()-b.width())),"reset",0)}else{if(a.settings.mode=="vertical"){c=a.children.eq(a.children.length-a.settings.minSlides).position();l(-c.top,"reset",0)}}else{c=a.children.eq(a.active.index*r()).position();if(a.active.index==j()-1)a.active.last=true;if(c!=undefined)if(a.settings.mode=="horizontal")l(-c.left,"reset",0);else a.settings.mode=="vertical"&&l(-c.top,"reset",0)}},l=function(b,c,g,k){if(a.usingCSS){b=a.settings.mode=="vertical"?"translate3d(0, "+
b+"px, 0)":"translate3d("+b+"px, 0, 0)";d.css("-"+a.cssPrefix+"-transition-duration",g/1E3+"s");if(c=="slide"){d.css(a.animProp,b);a.working=false;d.bind("transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd",function(){d.unbind("transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd");z()})}else if(c=="reset")d.css(a.animProp,b);else if(c=="ticker"){d.css("-"+a.cssPrefix+"-transition-timing-function","linear");d.css(a.animProp,b);d.bind("transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd",
function(){d.unbind("transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd");l(k.resetValue,"reset",0);w()})}}else{var A={};A[a.animProp]=b;if(c=="slide")d.animate(A,g,a.settings.easing,function(){z()});else if(c=="reset")d.css(a.animProp,b);else c=="ticker"&&d.animate(A,speed,"linear",function(){l(k.resetValue,"reset",0);w()})}},F=function(){var b="";pagerQty=j();for(var c=0;c<pagerQty;c++){var g="";if(a.settings.buildPager&&e.isFunction(a.settings.buildPager)){g=a.settings.buildPager(c);
a.pagerEl.addClass("bx-custom-pager")}else{g=c+1;a.pagerEl.addClass("bx-default-pager")}b+='<div class="bx-pager-item"><a href="" data-slide-index="'+c+'" class="bx-pager-link">'+g+"</a></div>"}a.pagerEl.html(b)},J=function(){if(a.settings.pagerCustom)a.pagerEl=e(a.settings.pagerCustom);else{a.pagerEl=e('<div class="bx-pager" />');a.settings.pagerSelector?e(a.settings.pagerSelector).html(a.pagerEl):a.controls.el.addClass("bx-has-pager").append(a.pagerEl);F()}a.pagerEl.delegate("a","click",P)},K=function(){a.controls.next=
e('<a class="bx-next" href="">'+a.settings.nextText+"</a>");a.controls.prev=e('<a class="bx-prev" href="">'+a.settings.prevText+"</a>");a.controls.next.bind("click",Q);a.controls.prev.bind("click",R);a.settings.nextSelector&&e(a.settings.nextSelector).append(a.controls.next);a.settings.prevSelector&&e(a.settings.prevSelector).append(a.controls.prev);if(!a.settings.nextSelector&&!a.settings.prevSelector){a.controls.directionEl=e('<div class="bx-controls-direction" />');a.controls.directionEl.append(a.controls.prev).append(a.controls.next);
a.controls.el.addClass("bx-has-controls-direction").append(a.controls.directionEl)}},L=function(){a.controls.start=e('<div class="bx-controls-auto-item"><a class="bx-start" href="">'+a.settings.startText+"</a></div>");a.controls.stop=e('<div class="bx-controls-auto-item"><a class="bx-stop" href="">'+a.settings.stopText+"</a></div>");a.controls.autoEl=e('<div class="bx-controls-auto" />');a.controls.autoEl.delegate(".bx-start","click",S);a.controls.autoEl.delegate(".bx-stop","click",T);a.settings.autoControlsCombine?
a.controls.autoEl.append(a.controls.start):a.controls.autoEl.append(a.controls.start).append(a.controls.stop);a.settings.autoControlsSelector?e(a.settings.autoControlsSelector).html(a.controls.autoEl):a.controls.el.addClass("bx-has-controls-auto").append(a.controls.autoEl);B(a.settings.autoStart?"stop":"start")},I=function(){a.children.each(function(){var b=e(this).find("img:first").attr("title");b!=undefined&&e(this).append('<div class="bx-caption"><span>'+b+"</span></div>")})},Q=function(b){a.settings.auto&&
d.stopAuto();d.goToNextSlide();b.preventDefault()},R=function(b){a.settings.auto&&d.stopAuto();d.goToPrevSlide();b.preventDefault()},S=function(b){d.startAuto();b.preventDefault()},T=function(b){d.stopAuto();b.preventDefault()},P=function(b){a.settings.auto&&d.stopAuto();var c=e(b.currentTarget);c=parseInt(c.attr("data-slide-index"));c!=a.active.index&&d.goToSlide(c);b.preventDefault()},y=function(b){if(a.settings.pagerType=="short")a.pagerEl.html(b+1+a.settings.pagerShortSeparator+a.children.length);
else{a.pagerEl.find("a").removeClass("active");a.pagerEl.each(function(c,g){e(g).find("a").eq(b).addClass("active")})}},z=function(){if(a.settings.infiniteLoop){var b="";if(a.active.index==0)b=a.children.eq(0).position();else if(a.active.index==j()-1&&a.carousel)b=a.children.eq((j()-1)*r()).position();else if(a.active.index==a.children.length-1)b=a.children.eq(a.children.length-1).position();if(a.settings.mode=="horizontal")l(-b.left,"reset",0);else a.settings.mode=="vertical"&&l(-b.top,"reset",0)}a.working=
false;a.settings.onSlideAfter(a.children.eq(a.active.index),a.oldIndex,a.active.index)},B=function(b){if(a.settings.autoControlsCombine)a.controls.autoEl.html(a.controls[b]);else{a.controls.autoEl.find("a").removeClass("active");a.controls.autoEl.find("a:not(.bx-"+b+")").addClass("active")}},E=function(){if(!a.settings.infiniteLoop&&a.settings.hideControlOnEnd)if(a.active.index==0){a.controls.prev.addClass("disabled");a.controls.next.removeClass("disabled")}else if(a.active.index==j()-1){a.controls.next.addClass("disabled");
a.controls.prev.removeClass("disabled")}else{a.controls.prev.removeClass("disabled");a.controls.next.removeClass("disabled")}else if(j()==1){a.controls.prev.addClass("disabled");a.controls.next.addClass("disabled")}},M=function(){a.settings.autoDelay>0?setTimeout(d.startAuto,a.settings.autoDelay):d.startAuto();a.settings.autoHover&&d.hover(function(){if(a.interval){d.stopAuto(true);a.autoPaused=true}},function(){if(a.autoPaused){d.startAuto(true);a.autoPaused=null}})},N=function(){var b=0;if(a.settings.autoDirection==
"next")d.append(a.children.clone().addClass("bx-clone"));else{d.prepend(a.children.clone().addClass("bx-clone"));b=a.children.first().position();b=a.settings.mode=="horizontal"?-b.left:-b.top}l(b,"reset",0);a.settings.pager=false;a.settings.controls=false;a.settings.autoControls=false;a.settings.tickerHover&&!a.usingCSS&&a.viewport.hover(function(){d.stop()},function(){var c=0;a.children.each(function(){c+=a.settings.mode=="horizontal"?e(this).outerWidth(true):e(this).outerHeight(true)});var g=a.settings.speed/
c*(c-Math.abs(parseInt(d.css(a.settings.mode=="horizontal"?"left":"top"))));w(g)});w()},w=function(b){speed=b?b:a.settings.speed;b={left:0,top:0};var c={left:0,top:0};if(a.settings.autoDirection=="next")b=d.find(".bx-clone").first().position();else c=a.children.first().position();l(a.settings.mode=="horizontal"?-b.left:-b.top,"ticker",speed,{resetValue:a.settings.mode=="horizontal"?-c.left:-c.top})},O=function(){a.touch={start:{x:0,y:0},end:{x:0,y:0}};a.viewport.bind("touchstart",U)},U=function(b){if(a.working)b.preventDefault();
else{a.touch.originalPos=d.position();b=b.originalEvent;a.touch.start.x=b.changedTouches[0].pageX;a.touch.start.y=b.changedTouches[0].pageY;a.viewport.bind("touchmove",G);a.viewport.bind("touchend",H)}},G=function(b){var c=b.originalEvent,g=Math.abs(c.changedTouches[0].pageX-a.touch.start.x),k=Math.abs(c.changedTouches[0].pageY-a.touch.start.y);if(g*3>k&&a.settings.preventDefaultSwipeX)b.preventDefault();else k*3>g&&a.settings.preventDefaultSwipeY&&b.preventDefault();if(a.settings.mode!="fade"&&a.settings.oneToOneTouch){b=
0;if(a.settings.mode=="horizontal"){c=c.changedTouches[0].pageX-a.touch.start.x;b=a.touch.originalPos.left+c}else{c=c.changedTouches[0].pageY-a.touch.start.y;b=a.touch.originalPos.top+c}l(b,"reset",0)}},H=function(b){a.viewport.unbind("touchmove",G);var c=b.originalEvent;b=0;a.touch.end.x=c.changedTouches[0].pageX;a.touch.end.y=c.changedTouches[0].pageY;if(a.settings.mode=="fade"){c=Math.abs(a.touch.start.x-a.touch.end.x);if(c>=a.settings.swipeThreshold){a.touch.start.x>a.touch.end.x?d.goToNextSlide():
d.goToPrevSlide();d.stopAuto()}}else{if(a.settings.mode=="horizontal"){c=a.touch.end.x-a.touch.start.x;b=a.touch.originalPos.left}else{c=a.touch.end.y-a.touch.start.y;b=a.touch.originalPos.top}if(!a.settings.infiniteLoop&&(a.active.index==0&&c>0||a.active.last&&c<0))l(b,"reset",200);else if(Math.abs(c)>=a.settings.swipeThreshold){c<0?d.goToNextSlide():d.goToPrevSlide();d.stopAuto()}else l(b,"reset",200)}a.viewport.unbind("touchend",H)},D=function(){var b=e(window).width(),c=e(window).height();if(q!=
b||m!=c){q=b;m=c;d.redrawSlider()}};d.goToSlide=function(b,c){if(!(a.working||a.active.index==b)){a.working=true;a.oldIndex=a.active.index;a.active.index=b<0?j()-1:b>=j()?0:b;a.settings.onSlideBefore(a.children.eq(a.active.index),a.oldIndex,a.active.index);if(c=="next")a.settings.onSlideNext(a.children.eq(a.active.index),a.oldIndex,a.active.index);else c=="prev"&&a.settings.onSlidePrev(a.children.eq(a.active.index),a.oldIndex,a.active.index);a.active.last=a.active.index>=j()-1;a.settings.pager&&y(a.active.index);
a.settings.controls&&E();if(a.settings.mode=="fade"){a.settings.adaptiveHeight&&a.viewport.height()!=o()&&a.viewport.animate({height:o()},a.settings.adaptiveHeightSpeed);a.children.filter(":visible").fadeOut(a.settings.speed).css({zIndex:0});a.children.eq(a.active.index).css("zIndex",51).fadeIn(a.settings.speed,function(){e(this).css("zIndex",50);z()})}else{a.settings.adaptiveHeight&&a.viewport.height()!=o()&&a.viewport.animate({height:o()},a.settings.adaptiveHeightSpeed);var g=0,k={left:0,top:0};
if(!a.settings.infiniteLoop&&a.carousel&&a.active.last)if(a.settings.mode=="horizontal"){b=a.children.eq(a.children.length-1);k=b.position();g=a.viewport.width()-b.width()}else k=a.children.eq(a.children.length-a.settings.minSlides).position();else if(a.carousel&&a.active.last&&c=="prev"){k=a.settings.moveSlides==1?a.settings.maxSlides-r():(j()-1)*r()-(a.children.length-a.settings.maxSlides);b=d.children(".bx-clone").eq(k);k=b.position()}else if(c=="next"&&a.active.index==0){k=d.find(".bx-clone").eq(a.settings.maxSlides).position();
a.active.last=false}else if(b>=0){k=b*r();k=a.children.eq(k).position()}l(a.settings.mode=="horizontal"?-(k.left-g):-k.top,"slide",a.settings.speed)}}};d.goToNextSlide=function(){if(!(!a.settings.infiniteLoop&&a.active.last)){var b=parseInt(a.active.index)+1;d.goToSlide(b,"next")}};d.goToPrevSlide=function(){if(!(!a.settings.infiniteLoop&&a.active.index==0)){var b=parseInt(a.active.index)-1;d.goToSlide(b,"prev")}};d.startAuto=function(b){if(!a.interval){a.interval=setInterval(function(){a.settings.autoDirection==
"next"?d.goToNextSlide():d.goToPrevSlide()},a.settings.pause);a.settings.autoControls&&b!=true&&B("stop")}};d.stopAuto=function(b){if(a.interval){clearInterval(a.interval);a.interval=null;a.settings.autoControls&&b!=true&&B("start")}};d.getCurrentSlide=function(){return a.active.index};d.getSlideCount=function(){return a.children.length};d.redrawSlider=function(){a.children.add(d.find(".bx-clone")).width(h());a.viewport.css("height",o());a.settings.ticker||C();if(a.active.last)a.active.index=j()-
1;if(a.active.index>=j())a.active.last=true;if(a.settings.pager&&!a.settings.pagerCustom){F();y(a.active.index)}};d.destroySlider=function(){if(a.initialized){a.initialized=false;e(".bx-clone",this).remove();a.children.removeAttr("style");this.removeAttr("style").unwrap().unwrap();a.controls.el&&a.controls.el.remove();a.controls.next&&a.controls.next.remove();a.controls.prev&&a.controls.prev.remove();a.pagerEl&&a.pagerEl.remove();e(".bx-caption",this).remove();a.controls.autoEl&&a.controls.autoEl.remove();
clearInterval(a.interval);e(window).unbind("resize",D)}};d.reloadSlider=function(b){if(b!=undefined)p=b;d.destroySlider();v()};v();return this}}})(jQuery);
(function(e,x){var u="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///ywAAAAAAQABAAACAUwAOw==";e.fn.imagesLoaded=function(p){function a(){var h=e(o),f=e(s);m&&(s.length?m.reject(n,h,f):m.resolve(n));e.isFunction(p)&&p.call(q,n,h,f)}function d(h,f){h.src===u||-1!==e.inArray(h,t)||(t.push(h),f?s.push(h):o.push(h),e.data(h,"imagesLoaded",{isBroken:f,src:h.src}),v&&m.notifyWith(e(h),[f,n,e(o),e(s)]),n.length===t.length&&(setTimeout(a),n.unbind(".imagesLoaded")))}var q=this,m=e.isFunction(e.Deferred)?e.Deferred():
0,v=e.isFunction(m.notify),n=q.find("img").add(q.filter("img")),t=[],o=[],s=[];e.isPlainObject(p)&&e.each(p,function(h,f){if("callback"===h)p=f;else m&&m[h](f)});n.length?n.bind("load.imagesLoaded error.imagesLoaded",function(h){d(h.target,"error"===h.type)}).each(function(h,f){h=f.src;var j=e.data(f,"imagesLoaded");if(j&&j.src===h)d(f,j.isBroken);else if(f.complete&&f.naturalWidth!==x)d(f,0===f.naturalWidth||0===f.naturalHeight);else if(f.readyState||f.complete){f.src=u;f.src=h}}):a();return m?m.promise(q):
q}})(jQuery);

var guxPersonalisation=guxPersonalisation||{};
(function(b){guxPersonalisation.psn={uuid:{},profile:{},init:function(){var a,c;b.subscribe("profile-done",function(){typeof guxPersonalisation.components!=="undefined"&&guxPersonalisation.components.execute()});a=function(i){guxPersonalisation.psn.setProfile(i)};c=function(){};typeof FPS!=="undefined"&&FPS.get([{KBA:{}},{LastViewedVehicle:{}},{RecentlyViewedVehicles:{}},{PreferredDealer:{}}],{success:a,error:c})},setUUID:function(){if(b.cookie("dfy.uuid"))guxPersonalisation.psn.uuid=b.parseJSON(JSON.stringify(b.cookie("dfy.uuid")));
else if(typeof uuid!=="undefined"){var a=guxPersonalisation.psn.commonConfig(),c=window.location.host;if(a!==null&&a.cookieDomain)c=a.cookieDomain;guxPersonalisation.psn.uuid={id:uuid.v1()};b.cookie("dfy.uuid",JSON.stringify(guxPersonalisation.psn.uuid),{expires:1825,path:"/",domain:c})}},setProfile:function(a){if(typeof sessionStorage!=="undefined")if(sessionStorage.getItem("dfy.p")===null){sessionStorage.setItem("dfy.p",JSON.stringify(this.fillProfile(a)));guxPersonalisation.psn.setUUID()}else{guxPersonalisation.psn.setUUID();
sessionStorage.setItem("dfy.p",JSON.stringify(this.fillProfile(a)))}else if(b.cookie("dfy.p")){guxPersonalisation.psn.setUUID();b.cookie("dfy.p",JSON.stringify(this.fillProfile(a)),{path:"/",domain:i})}else{var c=guxPersonalisation.psn.commonConfig(),i=window.location.host;if(c!==null&&c.cookieDomain)i=c.cookieDomain;b.cookie("dfy.p",JSON.stringify(this.fillProfile(a)),{path:"/",domain:i});guxPersonalisation.psn.setUUID()}},fillProfile:function(a){function c(l){for(var o in l)if(l.hasOwnProperty(o))return false;
return true}function i(l){return l.sort(function(o,s){var t=o.on,u=s.on;return t<=u?-1:1}).reverse()}var e=guxPersonalisation.psn.commonConfig(),j=null,d=null,k=null;if(b.cookie("dfy.uuid"))j=b.parseJSON(b.cookie("dfy.uuid"));if(b.cookie("dfy.u"))d=b.parseJSON(b.cookie("dfy.u"));if(b.cookie("dfy.dl"))k=b.cookie("dfy.dl");var r="NoVehicle",p="",m=[];k=k!=null?k:"";if(typeof a!=="undefined"&&a!==null&&!c(a)){var h=a[0].KBA,n=a[1].LastViewedVehicle,g=a[2].RecentlyViewedVehicles;a=a[3].PreferredDealer;
if(typeof h!=="undefined"&&!c(h)){p="#";for(var f in h)if(h.hasOwnProperty(f))p+=h[f]._KBA+"#"}if(typeof g!=="undefined"&&!c(g)){n=i(g);r=n[0]._nameplate.split(":")[1];for(f in g)g.hasOwnProperty(f)&&m.push({_nameplate:g[f]._nameplate});m=JSON.stringify(m)}if(typeof a!=="undefined"&&!c(a)){a=i(a);k=a[0]._paCode}}h=a=f="";n=j?j.id:"";var q=g="";if(this.viewport()==="mobile")if(d!==null){a=d.s;h=d.now;g=d.authid;q=d.fn}else if(j===null){a="FS";if(e!=null&&e.smobFsTools)f=e.smobFsTools}else{if(j!=null&&
d===null){a="AN";if(e!=null&&e.smobAnTools)f=e.smobAnTools}}else if(d!==null){a=d.s;h=d.now;g=d.authid;q=d.fn}else if(j===null){a="FS";if(e!=null&&e.fsTools)f=e.fsTools}else if(j!=null&&d===null){a="AN";if(e!=null&&e.anTools)f=e.anTools}guxPersonalisation.psn.profile={authState:a,now:h,noi:r,id:n,authid:g,tools:f,kba:p,fn:q,f:"",rvv:m,dc:k};b.publish("profile-done");return guxPersonalisation.psn.profile},commonConfig:function(){return b("#common-config").length?b("#common-config").embeddedData():
null},viewport:function(){this.view=b(window).width()<768?"mobile":"tablet";return""}};b(function(){guxPersonalisation.psn.init()})})(jQuery);

(function(){var k=(window.ND=window.ND||{}).fps={_init:function(a){this._fpstag=a},pageClicks:{},trackPageView:function(a){k.trackFps(a)},trackLink:function(a){k.trackFps(a)},trackFps:function(a){var e="",j={},l={},m={},n={},o={},p={},q={},c="",f="",g="",h="",d="",i="",b=false;if(typeof a!=="undefined"&&typeof a.nameplate!=="undefined"){if(typeof _da!=="undefined"&&typeof _da.nameplate!=="undefined")if(a.nameplate==_da.nameplate.name){if(typeof _da.om.site!=="undefined")g=_da.om.site;if(typeof _da.nameplate!==
"undefined"){if(typeof _da.nameplate.name!=="undefined")d=_da.nameplate.name;if(typeof _da.nameplate.id!=="undefined")i=_da.nameplate.id;if(typeof _da.nameplate.year!=="undefined")h=_da.nameplate.year}if(typeof _da.der!=="undefined"){if(typeof _da.der.name!=="undefined")c=_da.der.name;if(typeof _da.der.id!=="undefined")f=_da.der.id}if(d!=""){j={ViewedVehicle:{_year:h,_brand:g,_nameplate:i+":"+d,_trim:f+":"+c,_interior:"",_exterior:""},metadata:{active:"true"}};b=true}}}else if(typeof _da!=="undefined"){if(typeof _da.om.site!==
"undefined")g=_da.om.site;if(typeof _da.nameplate!=="undefined"){if(typeof _da.nameplate.name!=="undefined")d=_da.nameplate.name;if(typeof _da.nameplate.id!=="undefined")i=_da.nameplate.id;if(typeof _da.nameplate.year!=="undefined")h=_da.nameplate.year}if(typeof _da.der!=="undefined"){if(typeof _da.der.name!=="undefined")c=_da.der.name;if(typeof _da.der.id!=="undefined")f=_da.der.id}if(d!=""){j={ViewedVehicle:{_year:h,_brand:g,_nameplate:i+":"+d,_trim:f+":"+c,_interior:"",_exterior:""},metadata:{active:"true"}};
b=true}}if(typeof _da.events!=="undefined"){if(typeof guxPersonalisation!=="undefined")if(typeof guxPersonalisation.psn.profile.kba!=="undefined")e=guxPersonalisation.psn.profile.kba;for(c=0;c<_da.events.length;c++){a=_da.events[c];if(a=="event2")if(e.search("BAPC")==-1){p={KBAEvent:{_KBA:"BAPC"},metadata:{active:"true"}};b=true}if(a=="event3")if(e.search("RAQC")==-1){q={KBAEvent:{_KBA:"RAQC"},metadata:{active:"true"}};b=true}if(a=="event15")if(e.search("BRQC")==-1){o={KBAEvent:{_KBA:"BRQC"},metadata:{active:"true"}};
b=true}if(a=="event20")if(e.search("RTDC")==-1){n={KBAEvent:{_KBA:"RTDC"},metadata:{active:"true"}};b=true}}}if(typeof guxPersonalisation!=="undefined"){if(typeof guxPersonalisation.psn.profile.authid!=="undefined"){m={ExternalRef:{_type:"DFL",_id:guxPersonalisation.psn.profile.authid},metadata:{active:"true"}};b=true}if(typeof guxPersonalisation.psn.profile.id!=="undefined"){l={ExternalRef:{_type:"DFLA",_id:guxPersonalisation.psn.profile.id},metadata:{active:"true"}};b=true}}typeof FPS!=="undefined"&&
b&&FPS.set([j,p,o,n,q,m,l])},trackEvent:function(a){a.type=="fav-dealer"&&typeof FPS!=="undefined"&&FPS.set([{PreferredDealer:{_paCode:a.code},metadata:{active:"true"}}])},trackSocial:function(){},trackField:function(){},preCollection:function(){}}})();

(function(){var b=(window.ND=window.ND||{}).omniture={_init:function(a){this._omtag=a},pageClicks:{},moduleTypes:{},trackPageView:function(a){if(typeof a.login!=="undefined")s.eVar42="x"},createHier1:function(a){s.hier1=typeof a!=="undefined"?a:_da.hier;if(typeof _da.nameplate!=="undefined")s.hier1=s.hier1+":"+_da.nameplate.year+":"+_da.nameplate.cat+":"+_da.nameplate.name},createPageName:function(a){s.pageName=typeof a!=="undefined"&&a!==""?(s.eVar11=s.prop11=a):(s.eVar11=s.prop11=_da.pname);if(_da.funnel.stepname){s.pageName=
s.pageName+":"+_da.funnel.stepname;s.eVar11=s.eVar11+":"+_da.funnel.stepname;s.prop11=s.prop11+":"+_da.funnel.stepname}if(_da.pagenumber){s.pageName+=_da.pagenumber;s.eVar11+=_da.pagenumber;s.prop11+=_da.pagenumber}if(typeof _da.sync!=="undefined")if(typeof _da.sync.version!=="undefined"){s.pageName=s.pageName+":"+_da.sync.version;s.eVar11=s.eVar11+":"+_da.sync.version;s.prop11=s.prop11+":"+_da.sync.version}if(typeof _da.prefix!=="undefined"){s.pageName=_da.prefix+":"+s.pageName;s.eVar11=_da.prefix+
":"+s.eVar11;s.prop11=_da.prefix+":"+s.prop11}if(typeof _da.nameplate!=="undefined")s.pageName=s.pageName+":"+_da.nameplate.name;if(typeof _da.radui!=="undefined"){a=_da.radui;var c=$(window).width();a=a.split("|");if(c>976)s.prop54=s.eVar54=a[0]+a[1];else if(c<977&&c>767)s.prop54=s.eVar54=a[0]+a[2];else if(c<768)s.prop54=s.eVar54=a[0]+a[3]}},setRegion:function(){s.prop2=typeof _da.region!=="undefined"?(s.eVar2=_da.region):(s.eVar2=undefined)},trackDerivativeDetails:function(){s.eVar18=s.eVar19=s.eVar20=
s.eVar21=s.eVar23=s.eVar24=s.eVar25=undefined;if(typeof _da.der!=="undefined"){if(typeof _da.der.name!=="undefined")s.eVar18=_da.der.name;if(typeof _da.der.colour!=="undefined"&&typeof _da.der.trim!=="undefined")s.eVar19=_da.der.colour+":"+_da.der.trim;if(typeof _da.der.features!=="undefined")s.eVar20=_da.der.features;if(typeof _da.der.options!=="undefined")s.eVar21=_da.der.options;if(typeof _da.der.optionpacks!=="undefined")s.eVar23=_da.der.optionpacks;if(typeof _da.der.engine!=="undefined")s.eVar24=
_da.der.engine;if(typeof _da.der.price!=="undefined")s.eVar25=_da.der.price}},trackLink:function(a){if(a!==undefined){s.channel=_da.funnel.name;s.eVar4=s.prop4=_da.om.lang;s.eVar14=s.prop14=_da.om.client;s.eVar15=s.prop15=_da.om.site;s.prop57=s.eVar57=undefined;s.prop55=s.eVar55=undefined;s.linkTrackVars=_da.om.linkTrackVars;s.linkTrackEvents=_da.om.linkTrackEvents;if(_da.nameplate&&_da.nameplate.name&&a.nameplate===undefined)a.nameplate=_da.nameplate.name;typeof a.pname!=="undefined"?b.createPageName(a.pname):
b.createPageName();typeof a.hier1!=="undefined"&&a.hier1!==""?b.createHier1(a.hier1):b.createHier1(_da.hier);if(a.intcmp)s.eVar13=s.prop13=a.intcmp;s.prop5=a.onclicks;s.prop18=a.leadtype;s.prop48=s.eVar48=a.tool;s.prop49=s.eVar49=a.tooldesc;if(typeof _da.deviceType!=="undefined")s.eVar54=_da.deviceType;s.events=a.events;if(a.year||typeof _da.nameplate!=="undefined"){if(a.year)s.prop12=s.eVar12=a.year;if(typeof _da.nameplate!=="undefined"&&!a.year)s.prop12=s.eVar12=_da.nameplate.year}else s.prop12=
s.eVar12=undefined;if(a.nameplate&&a.nameplate!=="none"){s.prop16=s.eVar16=a.nameplate;a.title=a.titleNameplate=="none"?a.title:a.title+":"+a.nameplate;b.trackDerivativeDetails()}else s.prop16=s.eVar16=undefined;if(a.content){s.prop56=s.eVar56=a.content;s.prop5=s.prop5=="video start"||s.prop5=="video finish"||s.prop5=="video complete"?s.prop5:s.prop5+":"+a.content}else s.prop56=s.eVar56=undefined;b.setRegion();s.prop24=typeof a.moduletype!=="undefined"?a.moduletype:undefined;s.prop25=typeof a.modulename!==
"undefined"?a.modulename:undefined;b.setModulePage(a.moduleaction);b.createSearchTag(a);var c=a.title;if(typeof _da.prefix!=="undefined"&&a.type!=="e")c=_da.prefix+":"+c;if(typeof a.freq==="undefined")s.tl(a.link,a.type,c);else if(a.freq=="page"&&!b.pageClicks[c]){s.tl(a.link,a.type,c);b.pageClicks[c]=c}else if(a.freq=="category"&&(!b.pageClicks[a.onclicks]||a.moduletype&&!b.moduleTypes[a.moduletype])){s.tl(a.link,a.type,c);b.pageClicks[a.onclicks]=a.onclicks;if(a.moduletype)b.moduleTypes[a.moduletype]=
a.moduletype}}},trackMedia:function(a){s.prop56=a.content?(s.eVar56=a.content):(s.eVar56=undefined);s.prop57=a.progress&&a.content?(s.eVar57=a.content+":"+a.progress):(s.eVar57=undefined);s.eVar55=a.segment?a.segment:undefined;s.prop55=a.content&&s.pageName?a.content+":"+s.pageName:undefined;s.pev3=a.mediaType?a.mediaType:undefined;s.pe=a.linkType?a.linkType:undefined;s.events=a.events?a.events:undefined;s.prop5=a.onclicks?a.onclicks:undefined;s.prop24=typeof a.moduletype!=="undefined"?a.moduletype:
undefined;s.prop25=typeof a.modulename!=="undefined"?a.modulename:undefined;b.setModulePage(a.moduleaction);s.t()},trackEvent:function(){},trackSocial:function(){},trackField:function(){},createSearchTag:function(a){if(typeof a!=="undefined"&&a.search=="none"){s.eVar22=s.prop22=undefined;s.eVar35=s.prop21=undefined}else{s.eVar22=typeof _da.searchKeyword!=="undefined"?(s.prop22=_da.searchKeyword):(s.prop22=undefined);s.eVar35=typeof a!=="undefined"&&typeof a.totalresult!=="undefined"&&typeof a.resultnumber!==
"undefined"?(s.prop21=a.resultnumber+":"+a.totalresult):typeof _da.totalresult!=="undefined"?typeof _da.resultnumber!=="undefined"?(s.prop21=_da.resultnumber+":"+_da.totalresult):(s.prop21=_da.totalresult):(s.prop21=undefined)}},setModulePage:function(a){if(typeof a!=="undefined"&&typeof _da.module!=="undefined"&&typeof _da.module.page!=="undefined"&&typeof _da.module.template!=="undefined"){moduleAction=a;s.prop23=_da.module.page+":"+_da.module.template+":"+moduleAction}else s.prop23=undefined},
preCollection:function(a,c){s.eVar4=s.prop4=_da.om.lang;s.eVar14=s.prop14=_da.om.client;s.eVar15=s.prop15=_da.om.site;s.prop56=s.eVar56=undefined;if(typeof c!=="undefined"){b.createPageName(c.pname);b.createHier1(c.hier)}else{b.createPageName(undefined);b.createHier1(undefined)}s.channel=_da.funnel.name;s.prop39=s.prop5=undefined;if(typeof _da.nameplate!=="undefined"){s.prop16=s.eVar16=_da.nameplate.name;s.prop12=s.eVar12=_da.nameplate.year}else{s.prop12=s.eVar12=s.prop16=s.eVar16=undefined;s.prop36=
s.eVar34=undefined}b.trackDerivativeDetails();if(typeof c!=="undefined"&&c.tool!=="undefined"){s.prop48=s.eVar48=c.tool;if(c.tooldesc!=="undefined")s.prop49=s.eVar49=c.tooldesc}else if(typeof _da.tool!=="undefined"){s.prop48=s.eVar48=_da.tool.name;s.prop49=_da.tool.descriptor?(s.eVar49=_da.tool.descriptor):(s.eVar49=undefined)}else s.prop49=s.eVar49=s.prop48=s.eVar48=undefined;if(typeof _da.lead!=="undefined"){s.prop18=s.eVar28=_da.lead.type;s.prop20=_da.lead.optins?_da.lead.optins:undefined}else s.prop18=
s.eVar28=s.prop20=undefined;b.setRegion();if(typeof _da.events!=="undefined"){s.events="";for(a=0;a<_da.events.length;a++)s.events+=s.events.length===0?_da.events[a]:","+_da.events[a]}else s.events="";s.prop1=typeof _da.dealer!=="undefined"&&typeof _da.dealer.code!=="undefined"?(s.eVar1=_da.dealer.code):(s.eVar1=undefined);s.prop42=typeof _da.user!=="undefined"&&typeof _da.user.loggedin!=="undefined"?(s.eVar42=_da.user.loggedin):(s.eVar42=undefined);s.prop45=typeof _da.user!=="undefined"&&typeof _da.user.registered!==
"undefined"?(s.eVar45=_da.user.registered):(s.eVar45=undefined);s.prop5=typeof _da.onclicks!=="undefined"?_da.onclicks:undefined;b.createSearchTag();b.setModulePage("impress")}}})();

var ND=function(l,e){var h={},j=[];h.omniture=ND.omniture;h.fps=ND.fps;h.webtrends=function(){function d(a,b){b=b||[];a.dcsMultiTrack.apply(a,b)}var c={each:function(a,b,f){e.each(a.split(","),function(g,k){c[k].apply(this,[b,f])})},title:function(a,b){b&&"title"in b&&e.merge(a,["WT.ti",b.title])},funnel:function(a,b){b&&"funnel"in b&&e.merge(a,["WT.si_n",b.funnel])},step:function(a,b){b&&"step"in b&&e.merge(a,["WT.si_p",b.step])},event:function(a){e.merge(a,["WT.dl","99"])},link:function(a){e.merge(a,
["WT.dl","0"])},share:function(a,b){b&&"socialId"in b&&e.merge(a,["WT.z_share",b.socialId])},uri:function(a,b){b&&"uri"in b&&e.merge(a,["DCS.dcsuri",b.uri])},field:function(a,b){if(b&&"field"in b){var f=b.field;if(f.name)e.merge(a,["DCSext."+b.field.name,b.field.value||""]);else if(f.constructor==Array){b=[];for(var g=f.length;--g>-1;)f[g].name&&b.push("DCSext."+f[g].name,f[g].value||"");e.merge(a,b)}}},meta:function(a,b){return e(['<meta name="',a,'" content="',b,'"/>'].join(""))}};return{_init:function(a){this._tag=
a},trackPageView:function(a){var b=[];c.each("title,uri",b,a);d(this._tag,b)},trackLink:function(a){var b=[];c.each("title,uri,link",b,a);d(this._tag,b)},trackEvent:function(a){var b=[];c.each("event,title,uri",b,a);d(this._tag,b)},trackSocial:function(a){var b=[];c.each("event,title,uri,share",b,a);d(this._tag,b)},trackField:function(a){var b=[];c.each("event,field,funnel,step",b,a);d(this._tag,b)},preCollection:function(a){a=a.funnel||false;var b=e("meta:last");a&&a.name&&b.after(c.meta("WT.si_n",
a.name));a&&a.stepname&&b.after(c.meta("WT.si_p",a.stepname))}}}();l.analytics={create:function(d,c){function a(){}a.prototype=h[d];var b=new a;b._init(c);delete b._init;b.name=d;return b},register:function(d){if(d){for(i=0;i<j.length;i++)if(d.name===j[i].name)return;e.each({pageview:"trackPageView",link:"trackLink",social:"trackSocial",event:"trackEvent",field:"trackField",media:"trackMedia"},function(c,a){a in d&&e.subscribe("/analytics/"+c+"/",function(b,f){return function(g,k){f.apply(b,[k])}}(d,
d[a]))});j.push(d)}},grabber:function(){function d(c){return c=(c||"").toLowerCase().replace(/[\s'"!@#$%\^\&\*\(\),\.<>;:\[\]{}?+/\\-_=]/g,"-").replace(/(-){2,}/g,"-").replace(/^-|-$/g,"")}return function(c){var a,b;if(c.link){a=e(c.link);a=a.attr("data-tracking-value")||a.attr("title")||a.text()||"";b=d(a)}if(c.meta){a=e(c.meta);a=a.attr("content")||"";b=d(a)}if(c.inner){a=e(c.inner);a=a.text()||"";b=d(a)}if(c.name){a=c.name;b=d(c.name)}return{value:a,url:b}}}};return l}(window.ND||{},jQuery);

var ND=function(A,b,q,w){trackWebtrendFields=function(){var f=q._da;if(f!==undefined){var u=f.trackFields;if(u!==undefined){var x=[],v;for(v in u)x.push({name:v,value:u[v]});b.publish("/analytics/field/",{field:x})}}};A.analyticsBinder={bind:function(){b(w).ready(function(){var f=ND.analytics.grabber();master=f({meta:"meta[name='dfy.title']"});b(".socialmedia-wrapper").delegate(".socialmedia a","click",function(){var a=f({link:this});b.publish("/analytics/social/",{title:"Follow "+master.value+" on "+
a.value,uri:"/follow/"+a.url})});b.subscribe("overlay.done",function(a,c){var d,e,g;d={};a=true;if(c&&c.contents&&b(".country-overlay",c.contents).size()<1){d=c.contents?f({link:c.contents.find(".head h1")}):{};e=f({link:c.anchor});g=f({name:c.name});a=!d.value&&!e.value&&!g.value&&!c.assetid;d={title:master.value+" | "+(g.value||d.value||e.value||c.assetid),uri:"/"+master.url+"/overlay/"+(g.url||d.url||e.url||c.assetid)};if(a)d={title:master.value+" | Overlay",uri:"/"+master.url+"/overlay"};b.publish("/analytics/event/",
d)}});b(".rss").delegate("a","click",function(){var a={title:"RSS",uri:f({link:this}).url};b.publish("/analytics/event/",a)});b(w).delegate(".at_item","click",function(){var a=f({link:this});b.publish("/analytics/social/",{title:" Send to "+a.value,uri:"/share/"+a.url,socialId:a.value})});b(w).delegate(".addlist a","click",function(){var a=f({link:this});b.publish("/analytics/social/",{title:" Send to "+a.value,uri:"/share/"+a.url,socialId:a.value})});b("#dragonflyform").delegate(".ff-track-drop-off",
"focusout",function(){var a=b(this);a={field:{name:a.attr("name")||this.id,value:a.val()}};b.publish("/analytics/field/",a)});b("#dragonflyform").submit(function(){var a=b("#VOI_ModelSeries_Model",d),c=b("#VOI_ModelSeries_Series",d);if(a.size()||c.size()){var d=b(this);a={field:[{name:"model",value:a.val()},{name:"series",value:c.val()}]};b.publish("/analytics/field/",a)}});b(".view360-button a").click(function(){var a=f({link:this});b.publish("/analytics/event/",{title:master.value+" | "+a.value,
uri:"/"+master.url+"/360-view"})});b("#car-swapper a").click(function(){var a=f({link:this});b.publish("/analytics/event/",{title:master.value+" | "+a.value,uri:"/"+master.url+"/switch-to-super-cab"})});b(".slider .next, .slider .prev").click(function(){var a=f({link:this});b.publish("/analytics/event/",{title:master.value+" | "+a.value,uri:"/"+master.url+"/switch-to-banner"})});b(".download").click(function(){data={title:"this is my link",link:this,type:"d"};b.publish("/analytics/link/",data)});
b(".trackable,.external-disclaimer").live("mouseup",function(a){if(!(b(".staging-wrap .trackable").size()>0)){if(!a.target||!a.target.tagName||a.target.tagName!="OPTION"||!a.target.parentElement||!a.target.parentElement.tagName||a.target.parentElement.tagName!="SELECT")a.preventDefault();!b(this).hasClass("overlay")&&!b(this).closest("ul").hasClass("gallery")&&!b(this).hasClass("service-booking-overlay")&&!b(this).hasClass("open-video-flip")&&!b(this).hasClass("collapse-btn")&&!b(this).hasClass("save-dealer-btn")&&
!b(this).hasClass("bing-directions")&&!b(this).hasClass("filter-toggler")&&!b(this).hasClass("viewSaved")&&!b(this).hasClass("accordion-next")&&!b(this).hasClass("open-vid")&&!b(this).hasClass("open-modal")&&!b(this).hasClass("save-continue")&&!b(this).hasClass("pdf-btn")&&!b(this).hasClass("finish-btn")&&!b(this).hasClass("tab-area")&&!b(this).closest(".predelivery-new")&&b(this).trigger("click");a=b(this);var c,d,e,g,h,i,j,k,l,m,n,o,p,r,t,z,y,B;if((d=a.attr("data-name"))&&(e=a.attr("data-type"))){g=
a.attr("data-onclicks");h=a.attr("data-nameplate");l=a.attr("data-nameplate-year");i=a.attr("data-leadtype");j=a.attr("data-tool");p=a.attr("data-tooldesc");k=a.attr("data-events");m=a.attr("data-pname");n=a.attr("data-intcmp");o=a.attr("data-hier");r=a.attr("data-content");t=a.attr("data-freq");z=a.attr("data-moduletype");y=a.attr("data-modulename")}else if((c=a.find("img").first())&&(d=c.attr("data-name"))&&(e=c.attr("data-type"))){g=c.attr("data-onclicks");h=c.attr("data-nameplate");l=c.attr("data-nameplate-year");
i=c.attr("data-leadtype");j=c.attr("data-tool");p=c.attr("data-tooldesc");k=c.attr("data-events");m=c.attr("data-pname");n=c.attr("data-intcmp");o=c.attr("data-hier");r=c.attr("data-content");t=c.attr("data-freq");z=a.attr("data-moduletype");y=a.attr("data-modulename")}if(a.hasClass("external-disclaimer"))e="e";if(!d)d=f({link:this}).value;if(!b(this).hasClass("open-video-flip")&&(a.closest("section").hasClass("personalisation")||a.closest("section").hasClass("smartnextsteps")))B="click";if(a.closest("section").data("psn-module")==
"knowvehicle"||a.closest("section").data("psn-module")=="accessories"){if(typeof b.cookie("dfy.u")!=="undefined"&&typeof b.cookie("dfy.u")!=="function")cookieUser=JSON.parse(b.cookie("dfy.u"));if(cookieUser!=null)y=cookieUser.now}b.publish("/analytics/link/",{title:d,link:this,type:e,onclicks:g,leadtype:i,tool:j,tooldesc:p,events:k,year:l,nameplate:h,pname:m,intcmp:n,hier1:o,content:r,freq:t,moduletype:z,modulename:y,moduleaction:B})}});b(".billboard  .flex-next,.billboard .flex-prev,.billboard .flex-control-paging a").live("click",
function(){var a=b(this);if(!(typeof _da!=="undefined"&&_da.om.mobileApp==true&&(b(this).hasClass("flex-prev")||b(this).hasClass("flex-next")))){var c,d,e;e=a.closest("section");a=e.data("name");c=e.data("onclicks");d=e.data("modulename");e=e.data("moduletype");b.publish("/analytics/link/",{title:a,link:this,type:"o",onclicks:c,moduletype:d,modulename:e,moduleaction:"click"})}});b(".view-all-dealers",b("section.dealer-locator")).live("mouseup",function(a){a.preventDefault();b(this).trigger("click");
if(q._da&&q._da.om&&ND&&ND.omniture){_da.funnel.stepname="results";_da.events="event1,event43".split(",");_da.dealer={}}});b.subscribe("dealers-done",function(){if(q._da&&q._da.om&&ND&&ND.omniture){_da.funnel.stepname="results";_da.events="event1,event43".split(",");_da.dealer={};var a=b(".dealer-result-container .count .num").text();if(a){a=Number(a);a=Math.floor((a+5-1)/5);var c=b(".dealer-result-container .result-list .dealer-result:first-child").data("postcode");_da.region=c;ND.analyticsTag.trackOmniturePage({tool:"event:find dealer",
tooldesc:"find dealer:1 of "+a})}b.unsubscribe("dealers-done")}});b("section.dealer-locator .dealer-result .dealer-heading a,section.dealer-locator .dealer-result .details").live("click",function(){var a=b(this).closest(".dealer-result").data("dealerid"),c=b(this).closest(".dealer-result").data("postcode");if(q._da&&q._da.om&&ND&&ND.omniture){_da.funnel.stepname="dealer:info";_da.events="";_da.dealer={code:a};_da.region=c;ND.analyticsTag.trackOmniturePage()}});b("#overlay .vr-container .360trackable").live("slide",
function(a){if(!(b(".staging-wrap .trackable").size()>0)){a.preventDefault();b(this).trigger("click");a=b(this);var c,d,e,g,h,i,j,k,l,m,n,o,p,r,t;if((d=a.attr("data-name"))&&(e=a.attr("data-type"))){g=a.attr("data-onclicks");h=a.attr("data-nameplate");l=a.attr("data-nameplate-year");i=a.attr("data-leadtype");j=a.attr("data-tool");p=a.attr("data-tooldesc");k=a.attr("data-events");m=a.attr("data-pname");n=a.attr("data-intcmp");o=a.attr("data-hier");r=a.attr("data-content");t=a.attr("data-freq")}else if((c=
a.find("img").first())&&(d=c.attr("data-name"))&&(e=c.attr("data-type"))){g=c.attr("data-onclicks");h=c.attr("data-nameplate");l=c.attr("data-nameplate-year");i=c.attr("data-leadtype");j=c.attr("data-tool");p=c.attr("data-tooldesc");k=c.attr("data-events");m=c.attr("data-pname");n=c.attr("data-intcmp");o=c.attr("data-hier");r=c.attr("data-content");t=c.attr("data-freq")}if(a.hasClass("external-disclaimer"))e="e";if(!d)d=f({link:this}).value;b.publish("/analytics/link/",{title:d,link:this,type:e,onclicks:g,
leadtype:i,tool:j,tooldesc:p,events:k,year:l,nameplate:h,pname:m,intcmp:n,hier1:o,content:r,freq:t});b("#overlay .vr-container .360trackable").die("slide")}});var u=function(){var a=b(this).closest(".panel"),c,d;c=a.data("name");d=a.data("onclicks");a=a.data("pname");b.publish("/analytics/link/",{title:c,link:this,type:"o",onclicks:d,pname:a,moduleaction:"click",freq:"category"})};b(".predelivery-new .last-step .panel").on("click","input,select,textarea",u);b(".predelivery-new .last-step .color-palette a").on("click",
u);b(".staging-wrap .trackable, .staging-wrap .external-disclaimer").live("click",function(){var a=b(this),c,d,e,g,h,i,j,k,l,m,n,o,p;if((d=a.attr("data-name"))&&(e=a.attr("data-type"))){g=a.attr("data-onclicks");h=a.attr("data-nameplate");l=a.attr("data-nameplate-year");i=a.attr("data-leadtype");j=a.attr("data-tool");p=a.attr("data-tooldesc");k=a.attr("data-events");m=a.attr("data-pname");n=a.attr("data-intcmp");o=a.attr("data-hier")}else if((c=a.find("img").first())&&(d=c.attr("data-name"))&&(e=
c.attr("data-type"))){g=c.attr("data-onclicks");h=c.attr("data-nameplate");l=c.attr("data-nameplate-year");i=c.attr("data-leadtype");j=c.attr("data-tool");p=c.attr("data-tooldesc");k=c.attr("data-events");m=c.attr("data-pname");n=c.attr("data-intcmp");o=a.attr("data-hier")}if(a.hasClass("external-disclaimer"))e="e";if(!d)d=f({link:this}).value;b.publish("/analytics/link/",{title:d,link:this,type:e,onclicks:g,leadtype:i,tool:j,tooldesc:p,events:k,year:l,nameplate:h,pname:m,intcmp:n,hier1:o})});var x=
function(a){a=a.target.href||"";anchorFormat=a.toLowerCase();if(a&&anchorFormat.indexOf("mailto:")>-1){anchorFormat=anchorFormat.replace(/[^\w]+/g,"-");b.publish("/analytics/event/",{title:a+" | Email",uri:"/"+master.url+"/email/"+anchorFormat})}},v=function(a){a=a.target;var c=a.className;if(c&&typeof c==="string"&&(c.indexOf("external")>-1||c.indexOf("external-disclaimer ")>-1)){a=b(a).attr("href");c="";if(typeof a!="undefined")c=a.replace(/[^\w]+/g,"-");b.publish("/analytics/event/",{title:"Offsite:"+
a,uri:"/"+master.url+"/external/"+c})}},C=function(a){(a=a.target.className)&&typeof a==="string"&&a.indexOf("btn-fullscreen")>-1&&b.publish("/analytics/link/",{title:s.eVar11+":full screen",link:this,type:"o",onclicks:"view full screen"})};if(_da.nameplate!==undefined&&_da.nameplate.id!==undefined||_da.derivative!==undefined&&_da.derivative.id!==undefined)ND.Context.addContextToLinks();b(w).bind("click","a",function(a){if(a&&a.target){v(a);x(a);C(a)}});trackWebtrendFields()})}};return A}(window.ND||
{},jQuery,window,document);

(function(a,b){var j=function(){if(!a._da||!a.ND||!a.ND.analytics)return false;return true},r=function(){if(a._tag&&a._da.wt&&a._tag===a._da.wt&&a.WebTrends)return true;return false},p=function(){if(a._da.om&&(typeof a._da.om.singlePageApp==="undefined"||a._da.om.singlePageApp===false)&&(a._da.om.mobileApp===undefined||a._da.om.mobileApp===false))return true;return false},q=function(){if(!j())return false;if(a._da.om&&a._da.om.singlePageApp===true)return true;return false},t=function(){if(!j())return false;
if(a._da.om&&a._da.om.mobileApp===true)return true;return false},g=function(c){if(_da.skipTracking==undefined||a._da.skipTracking===false){var d=ND.analytics.create("fps",s);ND.analytics.register(d);d.preCollection(_da,c);d.trackPageView(c)}},u=function(c,d,e){c=new WebTrends;b.extend(c,d);c.dcsGetId();e=ND.analytics.create("webtrends",c);ND.analytics.register(e);d=b.extend({},_da);delete d.wt;e.preCollection(d);c.dcsCollect();ND.analytics._tag=c},i=function(c){if(_da.skipTracking==undefined||a._da.skipTracking===
false){var d=ND.analytics.create("omniture",s);ND.analytics.register(d);var e=b(".searchresults-list .no-of-results");if(e.length>0)_da.pname=_da.pname+":"+b.trim(e.html());if(typeof _da.module!=="undefined"&&typeof _da.module.page!=="undefined"&&typeof _da.module.template=="undefined"){var k=null,l=null,f=null;if(b.cookie("dfy.u"))k=b.parseJSON(b.cookie("dfy.u"));if(b.cookie("dfy.uuid"))l=b.parseJSON(b.cookie("dfy.uuid"));if(k!==null)f="owner";else if(l===null)f="new";else if(l!=null&&k===null)f=
"return";if(f!=null){_da.module.template=f;b("section.personalisation a[href*='intcmp='],section.smartnextsteps a[href*='intcmp='],section.personalisation form[action*='intcmp=']").each(function(){var m="",h="",n=b(this).attr("href"),o=b(this).attr("action");if(n!=null&&typeof n!=="undefined"){m="href";h=n}else if(o!=null&&typeof o!=="undefined"){m="action";h=o}h.indexOf("STATUS")!=-1&&b(this).attr(m,h.replace("STATUS",f))})}}d.preCollection(_da,c);s.t()}},v=function(){if(j()){if(r()){var c,d=a._tag,
e;b(document).ready(function(){u(c,d,e);ND.analyticsBinder.bind()});a._tag=a._da.wt=c}if(p()){b(document).ready(function(){if(p()){i();g();ND.analyticsBinder.bind()}});a._tag_om=a._da.om}t()&&b(document).bind("mobileinit",function(){b(document).bind("pagechange",function(){i();g();ND.analyticsBinder.bind()});a._tag_om=a._da.om})}};v();ND.analyticsTag=ND.analyticsTag||{trackOmnitureSinglePageApp:function(){if(q()){i();g();if(ND.analyticsTag._setOnce!==undefined){ND.analyticsTag._setOnce();delete ND.analyticsTag._setOnce}}},
trackOmniturePage:function(c){i(c);g(c)},_setOnce:function(){a._tag_om=a._da.om;ND.analyticsBinder.bind()},isSinglePageAppOmnitureConfigured:q}})(window,jQuery);

var ND=window.ND=window.ND||{};ND.Utils=window.ND.Utils=window.ND.Utils||{};ND.Utils.isTouchDevice=function(){if(/iPhone|iPad|iPod/.test(navigator.platform)||Modernizr!==undefined&&Modernizr.touch)return true;return false};ND.Utils.lazyLoadImage=function(c){$(c?c:"div.thumb-lazy").each(function(){var b=$(this),d=b.data("src"),a=new Image;a.onload=function(){b.html(a);a.alt=b.data("alt")};a.src=d})};

ND.Context=function(h){var j={excludedModels:""},f={restServices:{fetchVOIData:function(a){f.restServices.ajaxCall(a,function(c){f.displayVehicleBanner(c);f.displayDisclaimer(c);f.populateModelDropdown(c);f.populateVehicleDropdown(c)})},fetchColorData:function(a,c){f.restServices.ajaxCall(a,function(b){var d=0,e=[];for(d=0;d<b.length;d++)e.push({name:b[d].name,order:b[d].order,code:b[d].code});c(e)})},ajaxCall:function(a,c){h.ajax({url:a,dataType:"json",success:function(b){typeof b!=="undefined"&&
b!=null&&c(b)},error:function(){}})}},extractContext:function(a,c){a+=4;var b=c.indexOf("&",a);return c.substring(a,b>a?b:c.length)},addContextToHref:function(a,c){var b=a.attr("href"),d;if(typeof b!=="undefined")if((d=b.indexOf("ctx="))>0){var e=b.lastIndexOf("&");if(e<d)e=b.length;d=b.substring(d,e);if(d!==c){b=b.replace(d,c);a.attr("href",b).attr("data-ajax","false")}}else if(b.length>1){b+=b.indexOf("?")>0?"&":"?";a.attr("href",b+c).attr("data-ajax","false")}},addDropdownChangeListeners:function(a,
c){var b=h("#voi-series-name"),d=h("#voi-colour-dd");if(b.length>0){var e;if(f.firstTime){e=b.html();f.firstTime=false}a.on("change",function(g){g.stopImmediatePropagation();g=f.findIdForName(a.val(),null,c);if(g.m!=null){f.setModelDropDownValue(g);f.populateSeriesDropdown(b,c[g.mIdx].derivatives,e,d)}else f.populateSeriesDropdown(b,[],e,d)});b.on("change",function(){var g=f.findIdForName(a.val(),b.val(),c);g.d!=null&&f.setDerivativeDropDownValue(g);d.length>0&&f.populateColorDropdown(b,h("#voi-colour-dd"))});
d.length>0&&d.on("change",function(){f.setColorDropDownValue(d)})}},addDealerDropDownListeners:function(a,c){var b=h("#FormSales_Derivative"),d=h("#FormSales_Color"),e=b.html();a.on("change",function(){if(a.get(0).selectedIndex!==0)b.parent().css("display","block");else{b.parent().css("display","none");d.parent().css("display","none")}var g=f.findIdForName(a.val(),null,c);g.m!=null?f.populateSeriesDropdown(b,c[g.mIdx].derivatives,e,d):f.populateSeriesDropdown(b,[],e,d)});b.on("change",function(){b.get(0).selectedIndex!==
0?d.parent().css("display","block"):d.parent().css("display","none");f.findIdForName(a.val(),b.val(),c);d.length>0&&f.populateColorDropdown(b,d)});d.length>0&&d.on("change",function(){f.setColorDropDownValue(d)})},findIdForName:function(a,c,b){var d,e,g={m:null,d:null,mIdx:-1,dIdx:-1,dy:null,dcks:null,mcks:null,dqcode:null,dtdcode:null,dbcode:null};for(d=0;d<b.length;d++)if(a===b[d].name){g.m=b[d].id;g.mcks=b[d].modelCode;g.mIdx=d;if(c!=null)for(a=0;a<b[d].derivatives.length;a++){e=b[d].derivatives[a];
if(c===e.name){g.dcks=e.derivativeCode;g.dy=e.year;g.d=e.id;g.dIdx=a;g.dqcode=e.quoteFulfilmentCode;g.dtdcode=e.testdriveFulfilmentCode;g.dbcode=e.brochureFulfilmentCode;break}}break}return g},firstTime:true,displayVehicleBanner:function(a){var c=k.toJSONFromUrl();if(c!=null&&typeof c.m!=="undefined"&&c.m!=null){var b=h("#voi-banner"),d=h(".voi-banner"),e;if(b.length>0&&d.length>0)for(i=0;i<a.length;i++)if(c.m===a[i].id){e=a[i][j.formRequestType+"Banner"];if(typeof e!=="undefined"&&e!=null&&e!==""){d.each(function(){h(this).removeAttr("style")});
a=new Image;a.onload=function(){d.each(function(){h(this).find("img").attr("src",e)})};a.src=e}break}}},displayDisclaimer:function(a){var c=k.toJSONFromUrl();if(c!=null&&typeof c.m!=="undefined"&&c.m!=null){var b=h("#voi-disclaimer"),d=null,e=false,g;if(b.length>0)for(g=0;g<a.length;g++)if(c.m===a[g].id){if(typeof c.d!=="undefined"&&c.d!=null)for(d=0;d<a[g].derivatives.length;d++)if(c.d===a[g].derivatives[d].id){d=a[g].derivatives[d]["derivative"+j.formRequestTypeUppercase+"Disclaimer"];if(typeof d!==
"undefined"&&d!=null){b.hide().html(d).fadeIn("fast");e=true}break}if(!e){d=a[g][j.formRequestType+"Disclaimer"];typeof d!=="undefined"&&d!=null&&b.hide().html(d).fadeIn("fast")}}}},populateModelDropdown:function(a){var c=h("#voi-model-name");if(c.length>0){var b=[],d=h("#modelseries"),e=[],g=a.slice(0);if(d.length>0)if((d=h.parseJSON(d.html()).excludedModels)&&d.length>0){d=d.split(",");for(var l=0;l<a.length;l++){var n=0;if(d&&d instanceof Array&&d.length>0){for(var m=0;m<d.length;m++)h.trim(a[l].name)==
h.trim(d[m])&&n++;n==0&&e.push(a[l])}}}if(e.length>0)g=e.slice(0);for(e=0;e<g.length;e++)b.push('<option value="'+g[e].name+'">'+g[e].name+"</options>");c.append(b.join(""));ND.FormBuilder&&ND.FormBuilder.styleSelectOptions&&ND.FormBuilder.styleSelectOptions(c);f.addDropdownChangeListeners(c,a);b=k.toJSONFromUrl();if(b!=null&&typeof b.m!=="undefined"&&b.m!=null)for(e=0;e<a.length;e++)if(b.m===a[e].id){c.val(a[e].name);f.setModelDropDownValue(b);c.trigger("change");break}f.refreshMobileDropdown(c)}},
populateVehicleDropdown:function(a){for(var c=h("#FormSales_Model"),b=[],d=a.slice(0),e=0;e<d.length;e++)b.push('<option value="'+d[e].name+'">'+d[e].name+"</option>");c.append(b.join(""));f.addDealerDropDownListeners(c,a)},setHiddenInputValue:function(a,c){if(c!=undefined){a=h(a);a.length>0&&a.val(c)}},setModelDropDownValue:function(a){f.setHiddenInputValue("#voi-model-id",a.m);f.setHiddenInputValue("#voi-model-cks-code",a.mcks)},populateSeriesDropdown:function(a,c,b,d){if(typeof c!=="undefined"&&
c!=null&&c.length>0){var e=[],g;for(g=0;g<c.length;g++)e.push('<option value="'+c[g].name+'" data-derivativeid="'+c[g].id+'">'+c[g].name+"</options>");a.empty().html(b).append(e.join(""));ND.FormBuilder&&ND.FormBuilder.styleSelectOptions&&ND.FormBuilder.styleSelectOptions(a);b=k.toJSONFromUrl();if(b!=null&&typeof b.d!=="undefined"&&b.d!=null)for(g=0;g<c.length;g++){d=c[g];if(b.d===d.id){a.val(d.name);f.setDerivativeDropDownValue(b);a.trigger("change");break}}else f.populateColorDropdown(a,d)}else{a.html(b);
f.populateColorDropdown(a,d)}f.refreshMobileDropdown(a)},setDerivativeDropDownValue:function(a){f.setHiddenInputValue("#voi-series-id",a.d);f.setHiddenInputValue("#voi-series-cks-code",a.dcks);f.setHiddenInputValue("#voi-series-year",a.dy);f.setHiddenInputValue("#voi-series-quote-code",a.dqcode);f.setHiddenInputValue("#voi-series-brochure-code",a.dbcode);f.setHiddenInputValue("#voi-series-testdrive-code",a.dtdcode)},colorDropdownFirstOption:null,populateColorDropdown:function(a,c){if(c.length>0){if(f.colorDropdownFirstOption==
null)f.colorDropdownFirstOption=c.html();a=a.find(":selected").data("derivativeid");if(typeof a!=="undefined"&&a!=null){a=j.colorUrl.replace("{site}",j.site).replace("{priceZone}",j.priceZone).replace("{derivative}",a);c.empty().html('<option value="">'+j.pleaseWaitMsg+"</options>");f.restServices.fetchColorData(a,function(b){var d=[],e;for(e=0;e<b.length;e++)d.push('<option value="'+b[e].code+'">'+b[e].name+"</options>");c.empty().html(f.colorDropdownFirstOption).append(d.join(""));ND.FormBuilder&&
ND.FormBuilder.styleSelectOptions&&ND.FormBuilder.styleSelectOptions(c);f.refreshMobileDropdown(c)})}else c.empty().html(f.colorDropdownFirstOption);f.refreshMobileDropdown(c)}},refreshMobileDropdown:function(a){h.mobile&&a.selectmenu("refresh",true)},setColorDropDownValue:function(a){f.setHiddenInputValue("#voi-colour-code",a.find(":selected").val());f.setHiddenInputValue("#voi-colour-name",a.find(":selected").text())},init:function(){var a=h("#rest-services"),c=h("#modelseries"),b=h("#common-config");
h("#FormSales_Derivative").parent().css("display","none");h("#FormSales_Color").parent().css("display","none");k.legacyDisplayVehicleBanner();k.legacyDisplayVehicleDisclaimer();if(a.length>0&&c.length>0){h.extend(j,JSON.parse(c.html()),JSON.parse(a.html()),JSON.parse(b.html()));if(j.formRequestType){a=j.formRequestType.charAt(0);j.formRequestTypeUppercase=j.formRequestType;j.formRequestType=j.formRequestType.replace(a,a.toLowerCase())}j.voiUrl=j.voiUrl.replace("{site}",j.site).replace("{makeName}",
j.make);j.voiUrl+=j.excludedModels;f.restServices.fetchVOIData(j.voiUrl)}}},k={isContextInitialised:false,startUp:function(){if(!k.isContextInitialised){k.addContextToLinks();k.addPostcodeContextToLinks();f.init();k.isContextInitialised=true}},toJSON:function(a){var c={};if(typeof a!=="undefined"){params=a.split(";");for(a=0;a<params.length;a++){var b=params[a].split(":");if(b.length==2)c[b[0]]=b[1]}}return c},buildContext:function(a){var c=[];typeof _da!=="undefined"&&typeof _da.nameplate!=="undefined"&&
typeof _da.nameplate.id!=="undefined"&&_da.nameplate.id!=""&&c.push("m:"+_da.nameplate.id);typeof _da!=="undefined"&&typeof _da.der!=="undefined"&&typeof _da.der.id!=="undefined"&&_da.der.id!=""&&c.push("d:"+_da.der.id);if(typeof a!=="undefined"&&a!=null)for(key in a)c.push(key+":"+a[key]);return c.length>0?"ctx="+c.join(";"):""},toJSONFromUrl:function(a){a=decodeURIComponent(a||window.location.href);var c=a.indexOf("ctx="),b=null;if(c>0)b=f.extractContext(c,a);else{var d=c=null;if((d=h('div[data-role="page"]').filter(":visible"))!=
null&&(c=d.attr("data-url"))!=null)if((c=c.indexOf("ctx="))>0)b=f.extractContext(c,a)}if(b!=null)b=k.toJSON(b);return b},addContextToLinks:function(){var a=k.buildContext();h("a.ctx-voi").each(function(){f.addContextToHref(h(this),a)})},addPostcodeContextToLinks:function(){h.publish("shopping.pref.retrieve",function(a,c){if(typeof c!=="undefined"&&c!=null&&typeof c.postcode!=="undefined"&&c.postcode!=null){var b=k.buildContext({pc:c.postcode});h("a.ctx-pc").each(function(){var d=h(this);if(!d.hasClass("ctx-pc-added")){f.addContextToHref(d,
b);d.attr("data-ajax","false")}})}})},legacyDisplayVehicleBanner:function(){var a=k.toJSONFromUrl();if(a!=null&&typeof a.m!=="undefined"&&a.m!=null){var c=h("#voi-banner"),b=h("#model-context-banner");if(c.size()&&b.size()){b=JSON.parse(b.html());typeof b[a.m]!=="undefined"&&c.html('<img src="'+b[a.m]+'" />')}}},legacyDisplayVehicleDisclaimer:function(){var a=k.toJSONFromUrl(),c=h("#voi-disclaimer");if(a!=null&&c.size()){var b=h("#derivative-context-disclaimer");if(typeof a.d!=="undefined"&&a.d!=
null&&b.size()){b=b.embeddedData();if(b[a.d]!=null){a=b[a.d];c.hide().html(a).fadeIn("fast")}else k.legacyDisplayNameplateDisclaimer(a,c)}else k.legacyDisplayNameplateDisclaimer(a,c)}},legacyDisplayNameplateDisclaimer:function(a,c){var b=h("#model-context-disclaimer");if(typeof a.m!=="undefined"&&a.m!=null&&b.size()){b=b.embeddedData();if(b[a.m]!=null){a=b[a.m];c.hide().html(a).fadeIn("fast")}}},legacyPopulateModelDropdown:function(a,c,b){var d=k.toJSONFromUrl();a=h("#"+a);if(d!=null&&typeof d.m!==
"undefined"&&d.m!=null&&a.length>0)if((b=b[d.m])&&b!=null){a.val(b);a.trigger("change");c=h("#"+c);c.size()&&c.val(d.m)}},legacyPopulateSeriesDropdown:function(a,c,b){var d=k.toJSONFromUrl();a=h("#"+a);if(d!=null&&typeof d.d!=="undefined"&&d.d!=null&&a.length>0)if((b=b[d.d])&&b!=null){a.val(b);a.trigger("change");c=h("#"+c);c.size()&&c.val(d.d)}}};h(document).ready(k.startUp);return k}(jQuery);

//Ford chooses to use jQuery tmpl and its associated components under the MIT License.
(function(a){var r=a.fn.domManip,d="_tmplitem",q=/^[^<]*(<[\w\W]+>)[^>]*$|\{\{\! /,b={},f={},e,p={key:0,data:{}},h=0,c=0,l=[];function g(e,d,g,i){var c={data:i||(d?d.data:{}),_wrap:d?d._wrap:null,tmpl:null,parent:d||null,nodes:[],calls:u,nest:w,wrap:x,html:v,update:t};e&&a.extend(c,e,{nodes:[],parent:d});if(g){c.tmpl=g;c._ctnt=c._ctnt||c.tmpl(a,c);c.key=++h;(l.length?f:b)[h]=c}return c}a.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(f,d){a.fn[f]=function(n){var g=[],i=a(n),k,h,m,l,j=this.length===1&&this[0].parentNode;e=b||{};if(j&&j.nodeType===11&&j.childNodes.length===1&&i.length===1){i[d](this[0]);g=this}else{for(h=0,m=i.length;h<m;h++){c=h;k=(h>0?this.clone(true):this).get();a.fn[d].apply(a(i[h]),k);g=g.concat(k)}c=0;g=this.pushStack(g,f,i.selector)}l=e;e=null;a.tmpl.complete(l);return g}});a.fn.extend({tmpl:function(d,c,b){return a.tmpl(this[0],d,c,b)},tmplItem:function(){return a.tmplItem(this[0])},template:function(b){return a.template(b,this[0])},domManip:function(d,l,j){if(d[0]&&d[0].nodeType){var f=a.makeArray(arguments),g=d.length,i=0,h;while(i<g&&!(h=a.data(d[i++],"tmplItem")));if(g>1)f[0]=[a.makeArray(d)];if(h&&c)f[2]=function(b){a.tmpl.afterManip(this,b,j)};r.apply(this,f)}else r.apply(this,arguments);c=0;!e&&a.tmpl.complete(b);return this}});a.extend({tmpl:function(d,h,e,c){var j,k=!c;if(k){c=p;d=a.template[d]||a.template(null,d);f={}}else if(!d){d=c.tmpl;b[c.key]=c;c.nodes=[];c.wrapped&&n(c,c.wrapped);return a(i(c,null,c.tmpl(a,c)))}if(!d)return[];if(typeof h==="function")h=h.call(c||{});e&&e.wrapped&&n(e,e.wrapped);j=a.isArray(h)?a.map(h,function(a){return a?g(e,c,d,a):null}):[g(e,c,d,h)];return k?a(i(c,null,j)):j},tmplItem:function(b){var c;if(b instanceof a)b=b[0];while(b&&b.nodeType===1&&!(c=a.data(b,"tmplItem"))&&(b=b.parentNode));return c||p},template:function(c,b){if(b){if(typeof b==="string")b=o(b);else if(b instanceof a)b=b[0]||{};if(b.nodeType)b=a.data(b,"tmpl")||a.data(b,"tmpl",o(b.innerHTML));return typeof c==="string"?(a.template[c]=b):b}return c?typeof c!=="string"?a.template(null,c):a.template[c]||a.template(null,q.test(c)?c:a(c)):null},encode:function(a){return(""+a).split("<").join("&lt;").split(">").join("&gt;").split('"').join("&#34;").split("'").join("&#39;")}});a.extend(a.tmpl,{tag:{tmpl:{_default:{$2:"null"},open:"if($notnull_1){_=_.concat($item.nest($1,$2));}"},wrap:{_default:{$2:"null"},open:"$item.calls(_,$1,$2);_=[];",close:"call=$item.calls();_=call._.concat($item.wrap(call,_));"},each:{_default:{$2:"$index, $value"},open:"if($notnull_1){$.each($1a,function($2){with(this){",close:"}});}"},"if":{open:"if(($notnull_1) && $1a){",close:"}"},"else":{_default:{$1:"true"},open:"}else if(($notnull_1) && $1a){"},html:{open:"if($notnull_1){_.push($1a);}"},"=":{_default:{$1:"$data"},open:"if($notnull_1){_.push($.encode($1a));}"},"!":{open:""}},complete:function(){b={}},afterManip:function(f,b,d){var e=b.nodeType===11?a.makeArray(b.childNodes):b.nodeType===1?[b]:[];d.call(f,b);m(e);c++}});function i(e,g,f){var b,c=f?a.map(f,function(a){return typeof a==="string"?e.key?a.replace(/(<\w+)(?=[\s>])(?![^>]*_tmplitem)([^>]*)/g,"$1 "+d+'="'+e.key+'" $2'):a:i(a,e,a._ctnt)}):e;if(g)return c;c=c.join("");c.replace(/^\s*([^<\s][^<]*)?(<[\w\W]+>)([^>]*[^>\s])?\s*$/,function(f,c,e,d){b=a(e).get();m(b);if(c)b=j(c).concat(b);if(d)b=b.concat(j(d))});return b?b:j(c)}function j(c){var b=document.createElement("div");b.innerHTML=c;return a.makeArray(b.childNodes)}function o(b){return new Function("jQuery","$item","var $=jQuery,call,_=[],$data=$item.data;with($data){_.push('"+a.trim(b).replace(/([\\'])/g,"\\$1").replace(/[\r\t\n]/g," ").replace(/\$\{([^\}]*)\}/g,"{{= $1}}").replace(/\{\{(\/?)(\w+|.)(?:\(((?:[^\}]|\}(?!\}))*?)?\))?(?:\s+(.*?)?)?(\(((?:[^\}]|\}(?!\}))*?)\))?\s*\}\}/g,function(m,l,j,d,b,c,e){var i=a.tmpl.tag[j],h,f,g;h=i._default||[];if(c&&!/\w$/.test(b)){b+=c;c=""}if(b){b=k(b);e=e?","+k(e)+")":c?")":"";f=c?b.indexOf(".")>-1?b+c:"("+b+").call($item"+e:b;g=c?f:"(typeof("+b+")==='function'?("+b+").call($item):("+b+"))"}else g=f=h.$1||"null";d=k(d);return"');"+i[l?"close":"open"].split("$notnull_1").join(b?"typeof("+b+")!=='undefined' && ("+b+")!=null":"true").split("$1a").join(g).split("$1").join(f).split("$2").join(d?d.replace(/\s*([^\(]+)\s*(\((.*?)\))?/g,function(d,c,b,a){a=a?","+a+")":b?")":"";return a?"("+c+").call($item"+a:d}):h.$2||"")+"_.push('"})+"');}return _;")}function n(c,b){c._wrap=i(c,true,a.isArray(b)?b:[q.test(b)?b:a(b).html()]).join("")}function k(a){return a?a.replace(/\\'/g,"'").replace(/\\\\/g,"\\"):null}function s(b){var a=document.createElement("div");a.appendChild(b.cloneNode(true));return a.innerHTML}function m(o){var n="_"+c,k,j,l={},e,p,i;for(e=0,p=o.length;e<p;e++){if((k=o[e]).nodeType!==1)continue;j=k.getElementsByTagName("*");for(i=j.length-1;i>=0;i--)m(j[i]);m(k)}function m(j){var p,i=j,k,e,m;if(m=j.getAttribute(d)){while(i.parentNode&&(i=i.parentNode).nodeType===1&&!(p=i.getAttribute(d)));if(p!==m){i=i.parentNode?i.nodeType===11?0:i.getAttribute(d)||0:0;if(!(e=b[m])){e=f[m];e=g(e,b[i]||f[i],null,true);e.key=++h;b[h]=e}c&&o(m)}j.removeAttribute(d)}else if(c&&(e=a.data(j,"tmplItem"))){o(e.key);b[e.key]=e;i=a.data(j.parentNode,"tmplItem");i=i?i.key:0}if(e){k=e;while(k&&k.key!=i){k.nodes.push(j);k=k.parent}delete e._ctnt;delete e._wrap;a.data(j,"tmplItem",e)}function o(a){a=a+n;e=l[a]=l[a]||g(e,b[e.parent.key+n]||e.parent,null,true)}}}function u(a,d,c,b){if(!a)return l.pop();l.push({_:a,tmpl:d,item:this,data:c,options:b})}function w(d,c,b){return a.tmpl(a.template(d),c,b,this)}function x(b,d){var c=b.options||{};c.wrapped=d;return a.tmpl(a.template(b.tmpl),b.data,c,b.item)}function v(d,c){var b=this._wrap;return a.map(a(a.isArray(b)?b.join(""):b).filter(d||"*"),function(a){return c?a.innerText||a.textContent:a.outerHTML||s(a)})}function t(){var b=this.nodes;a.tmpl(null,null,null,this).insertBefore(b[0]);a(b).remove()}})(jQuery);


ND.cacheStore={get:function(){var a=$.trim($.cookie(this.key));try{return a?JSON.parse(a):""}catch(b){return a||""}},set:function(a){a=$.isPlainObject(a)?JSON.stringify(a):a;if(this.get()!==a){var b={path:"/"};if(this.expires)b.expires=this.expires;if(this.domain)b.domain=this.domain;$.cookie(this.key,a||null,b)}},is:function(){return this.get().length>0},contains:function(a){return this.get().indexOf(a)>-1}};

ND.shoppingPreferenceManager=function(c){var h={prefix:"shopping.pref.",list:{postcode:"pc",usage:"us",usageLabel:"us.l",region:"rg",regionLabel:"rg.l",pricezone:"pz",pricezoneLabel:"pz.l",priceformatData:"pf"},init:function(){this.cache={};this.store={};this.listen();this.upgradeCookie()},prepare:function(){var a=this,b=null,e=typeof c("#common-config")!="undefined"&&c("#common-config").length>0?JSON.parse(c("#common-config").html()):null;if(e!=null&&e.cookieDomain)b=e.cookieDomain;c.each(a.list,
function(d,g){var f;f=Object.create(ND.cacheStore);f.key="sp."+g;f.expires=365;if(b)f.domain=b;if(g=f.get())a.cache[d]=g;a.store[d]=f});a.prepare=c.noop},listen:function(){var a=this;this.pubsub={save:function(e,d){d&&a.setStoreData(d);c.publish(a.prefix+"change",a.getStoreData())},clear:function(){a.clearStoreData();c.publish(a.prefix+"change",a.getStoreData())},retrieve:function(e,d){c.isFunction(d)&&d.apply(null,[e,a.getStoreData()])},destroy:function(){a.destroy()}};for(var b in this.pubsub)c.subscribe(this.prefix+
b,this.pubsub[b])},getStoreData:function(){this.prepare();return c.extend({},this.cache)},setStoreData:function(a){var b=this;b.prepare();(a=this.checkDefaults(a))&&c.each(a,function(e,d){if(e in b.list){b.store[e].set(d);if(typeof d!=="undefined"&&String(d).length)b.cache[e]=d;else delete b.cache[e]}})},clearStoreData:function(){this.cache={};c.each(this.store,function(a,b){b.set()})},checkDefaults:function(a){if(a&&a.postcode&&!this.cache.usage&&!a.usage){a.usage="p";a.usageLabel="Personal"}return a},
upgradeCookie:function(){var a,b;b=Object.create(ND.cacheStore);b.key="price.usage";a=typeof c("#common-config")!="undefined"&&c("#common-config").length>0?JSON.parse(c("#common-config").html()):null;if(a!=null&&a.cookieDomain)b.domain=a.cookieDomain;if(a=b.get()){c.publish(this.prefix+"save",a);b.set()}},destroy:function(){for(channel in this.pubsub)c.unsubscribe(this.prefix+channel,this.pubsub[channel]);this.cache=this.store=this.pubsub=this.prefix=this.list=null}};return function(a){var b=Object.create(h);
b.init.call(b,a);return b}}(jQuery);

ND.mobileOverlay=function(c){var b=null,a={},e={};({init:function(){var d=this;c.subscribe("overlay.launch",function(f,g){a=c.extend({},g);d.open()})},open:function(){var d=this;if(typeof a.url!=="undefined"&&a.url!="")if(e[a.url]!=null){b=e[a.url];d.launch()}else{c.mobile.loading("show");c.ajax({url:a.url,success:function(f){d.appendToBodyAndCreate(f,a)},error:d.error})}else if(typeof a.contentId!=="undefined"&&a.contentId!=null){b=c(a.contentId);b.length&&d.create()}},launch:function(){b.popup("open")},
create:function(){var d=this;b.trigger("create");b.popup({history:false});b.on("popupafteropen",function(){a.success&&a.success.call();c.subscribeOnce("overlay.hide",d.close);c.publish("overlay.success");b.one("click",".cancel",function(f){f.preventDefault();c.publish("overlay.usercancel");return false})});d.launch()},appendToBodyAndCreate:function(d){b=e[a.url]=c(d);c("body").append(b);this.create(d);c.mobile.loading("hide")},error:function(){e[a.url]=null;delete e[a.url];c.mobile.loading("hide")},
close:function(){b.popup("close")},destroy:function(){c.unsubscribe("overlay.hide");b&&b.remove();b=e=null}}).init()}(jQuery);

ND.geoLocator=function(c){var g=$("#bing-config"),h=$("#current-position-config"),i="AneS6_OFtD0WZ43Xzp3kTumQpZGNxlycZiFErrnU6cmNmwqKFU3wRBZ7f80Q7MT6";if(g.length)i=g.embeddedData()["bing-maps-key"];var d={"geo-trans-denied-access-error":"User denied the request for Geolocation","geo-trans-loc-unavail-error":"Location information is unavailable","geo-trans-req-timeout-error":"The request to get user location timed out","geo-trans-unknown-error":"Unknown error"};if(h.length)d=$.extend(d,h.embeddedData());
var e=d["geo-trans-unknown-error"],k=function(b){$.ajax({url:"http://dev.virtualearth.net/REST/v1/Locations/"+b.coords.latitude+", "+b.coords.longitude,dataType:"jsonp",jsonp:"jsonp",data:{key:i},success:function(a){if(a&&a.resourceSets&&a.resourceSets.length>0)if((a=a.resourceSets[0])&&a.estimatedTotal>0&&a.resources.length>0)c.success&&c.success(a.resources[0].address.postalCode,a.resources);else f(e);else f(e)},error:function(){f(e)}})},f=function(b){c.error&&c.error(b)},j=function(b){var a=e;
switch(b.code){case b.PERMISSION_DENIED:a=d["geo-trans-denied-access-error"];break;case b.POSITION_UNAVAILABLE:a=d["geo-trans-loc-unavail-error"];break;case b.TIMEOUT:a=d["geo-trans-req-timeout-error"];break}f(a)};return{findLocation:function(){navigator.geolocation?navigator.geolocation.getCurrentPosition(k,j,{enableHighAccuracy:c.highAccuracy||false,maximumAge:c.maxAge||12E4,timeout:c.timeout||6E4}):f(e)},locationNotFound:j}};

ND.platformDependentHotDeal={regionObtainer:{view:function(a){var b=this._panel.find(".hotdeals-postcode");render=$.tmpl(this.tmpl,a);b.length>0?b.replaceWith(render):this._panel.append(render);this._panel.trigger("create")},bindAdditionalListeners:function(){var a=this,b,d=$("input.hotDeals-form-currentLocation").length>0;d&&$(document).on("click","input.hotDeals-form-currentLocation",function(g){g.preventDefault();a.loadingStatus(true);b=setTimeout(function(){a.loadingStatus(false);e.locationNotFound(1)},
2E4);var e=ND.geoLocator({success:function(c){clearTimeout(b);a.loadingStatus(false);var f=$(a.formSelector);f.find("#postcode").val(c);f.submit()},error:function(c){a.loadingStatus(false);a.formError(c)},maximumAge:15E3,timeout:15E3});e.findLocation()});$(document).on("submit","#hotDeals-form",function(){d&&clearTimeout(b);return false});$.subscribe("overlay.usercancel",function(){$(a.formSelector).find("#postcode").val("");a._errorMsg.slideUp("fast")})},loadingStatus:function(a){$.mobile.loading(a?
"show":"hide")}},hotDeal:{needPostcodeTemplate:function(a){a=$.mobile.activePage.find(a);return a.length>0?a:null}}};

ND.polk={showChangeVisually:function(a){a.trigger("create");var b=a.closest(".need-price").size()?["#185a78","#111111"]:["#aad3e6","#FFFFFF"];a.css("backgroundColor",b[0]).delay(1500).animate({backgroundColor:b[1]},1500,function(){$(this).css("backgroundColor","transparent")})},renderDerivative:function(a,b,c,d,e,f){b.length?b.replaceWith(d):a.prepend(d);a=c.find(f);a.length>0?a.replaceWith(e):c.append(e)},notifyChange:function(a){a.find(".price").remove();a.parent().find(".loan-calc").hide()},registerLoanBtn:function(a,
b,c,d){if($(".loan-calc",a).length>0){$(".loan-calc",a).css("display","inline-block");$(".loan-calc",a).off("click").on("click",function(e){e.preventDefault();$(this).loanCalculatorOverlay({price:b,priceformatter:c,location:d,url:$(this).attr("data-url"),complete:function(){$(".ui-popup-active input").val("")}})})}},bindAdditionalListeners:function(a){$("input.polk-form-currentLocation").length>0&&$(document).on("click","input.polk-form-currentLocation",function(b){b.preventDefault();$.publish("loading.calculateprice.dfy",
true);setTimeout(function(){$.publish("loading.calculateprice.dfy",false)},1E4);ND.geoLocator({success:function(c){$.publish("loading.calculateprice.dfy",false);$(a).find("[name=postcode]");var d=$(a);d.find("[name=postcode]").val(c);d.submit()},error:function(c){$.publish("loading.calculateprice.dfy",false);$.publish("usererror.calculateprice.dfy",c)},maximumAge:1E4,timeout:1E4}).findLocation()})},templateUpdated:function(a){a.trigger("create")}};

ND.DealerLocator=function(c){var f={init:function(a){a=a||{};var b=this;b.pubsubPrefix=a.pubsubPrefix||"dealerlocator.dfy";b.currentLocationButtonSelector=a.currentLocationButtonClass||"button.dealer-form-currentLocation";b.$formSelector=c(a.formSelector||"form.search");b.hiddenFieldSelector=a.hiddentFieldSelector||"#dealer-form-currentLocation";b.$errorSelector=c(a.errorSelector||"#currentLocationError");for(key in this.pubsub)c.subscribe(b.pubsubPrefix+key,this.pubsub[key])},isCurrentLocationAvailable:function(){return this.$formSelector.length>
0&&this.$formSelector.find(this.currentLocationButtonSelector).length>0},start:function(){var a=this;a.$formSelector.on("click",a.currentLocationButtonSelector,function(b){b.preventDefault();locationTimeout=setTimeout(function(){d.locationNotFound(1)},15E3);var d=ND.geoLocator({success:function(e){clearTimeout(locationTimeout);c(a.hiddenFieldSelector).val(e);a.$formSelector.submit()},error:function(e){clearTimeout(locationTimeout);a.$errorSelector.text(e)},maximumAge:1E4,timeout:1E4});d.findLocation()})},
destroy:function(){this.$formSelector.off("click",this.currentLocationButtonSelector)},pubsub:{destroy:function(){this.destroy()}}},g=function(){var a=c("#dl-formBuilder");if(a.length>0){var b=a.find("span.radio-icon");b.on("click",function(){b.each(function(){c(this).parent().removeClass("checked")});a.find('input[type="radio"]').each(function(){c(this).removeAttr("checked")});var d=c(this),e=d.data("dealer");d.parent().addClass("checked");c("#dealer-"+e).attr("checked","checked")})}};return function(a){var b=
Object.create(f);b.init.call(b,a);b.isCurrentLocationAvailable()&&b.start();g();return b}}(jQuery);

(function(f){ND.getMobileDevice=function(){var b=navigator.userAgent,c=navigator.platform,a,d={iphone:function(){return b.match(/(iPhone|iPod|iPad)/i)||c.match(/(iPhone|iPod|iPad)/i)},android:function(){return b.match(/Android/)||b.match(/Dalvik/)||b.match(/GINGERBREAD/)||b.match(/Linux;.*Mobile Safari/)||b.match(/Linux 1\..*AppleWebKit/)||c.indexOf("android")>0}};for(a in d)if(d[a].call())return a;return null};var h=function(b,c,a){switch(b){case "iphone":return"http://maps.apple.com/?ll="+c+","+
a;case "android":return"http://maps.apple.com/?ll="+c+","+a}return null},i=function(){var b=ND.getMobileDevice(),c=f(".dl-convertToNativeMapUrl"),a,d,e;b!=null&&c.length>0&&c.each(function(){a=f(this);d=a.data("lat");e=a.data("lng");if(typeof d!=="undefined"&&typeof e!=="undefined"&&d!=null&&e!=null&&d!==""&&e!==""){var g=h(b,d,e);if(g!=null)a.attr("href",g);else{a.removeClass("dl-convertToNativeMapUrl");a.addClass("dl-showDealerOnMap")}}})};f(document).on("pagechange",function(){i()})})(jQuery);

ND.hotDeals=function(c,g){var h={MISSING_POSTCODE:"MISSING_POSTCODE",INVALID_POSTCODE:"INVALID_POSTCODE",INCORRECT_POSTCODE:"INCORRECT_POSTCODE",SUCCESS:"SUCCESS"},l={init:function(a){a||(a={});var b=this;b.enabledRedirect=true;b.elementsSelector=a.links||".overlay-hotdeals, .force-overlay-hotdeals";b.elementPanelSelector=a.panel||"#hotdeals-panel";b.bindLinks();b.initPubsub();b.render()},initPubsub:function(){var a=this;this.pubsub={change:function(b,d){d=d||{};a.postcode=d.postcode;a.region=d.region}};
c.publish("shopping.pref.retrieve",this.pubsub.change);c.subscribe("shopping.pref.change",this.pubsub.change);c.subscribe("shopping.pref.destroy",this.destroy)},render:function(){var a=i(this.elementPanelSelector);if(a!=null){this._template=Object.create(j);this._template.conf=self.conf;this._template.init(a,this.getPostcode(),this.getRegion())}return this._template},getPostcode:function(){return this.postcode},getRegion:function(){return this.region},getObtainer:function(){return this._obtainer},
bindLinks:function(){var a=this;c(document).on("click",a.elementsSelector,function(b){var d;if(c(this).hasClass("force-overlay-hotdeals")){b.preventDefault();a.obtainRegion(this)}else{b.preventDefault();b=a.getRegion();d=a.getPostcode();b||d?a.handleRegion(this,b,d):a.obtainRegion(this)}})},handleRegion:function(a,b,d){var f=this;b=this.ajaxRegionURL(c(a).attr("href")||location.href,b,d);c.when(b).done(function(e){if(e){e.errorCode||(e.errorCode=h.SUCCESS);if(e.errorCode===h.SUCCESS&&e.region&&e.url){c.publish("shopping.pref.save",
{postcode:d,region:e.region,regionLabel:e.regionName});f.doneRedirect(e.url||a.href)}else if(e.errorCode===h.INVALID_POSTCODE){typeof f._template==="undefined"?f.doneNational(a):f.doneCasualError(e.error);c.publish("shopping.pref.save",{postcode:g,region:g,regionLabel:g})}else f.doneObtainerError(e.error||"Oops! There was an internal problem")}else f.doneObtainerError("Oops! There was an internal problem")}).fail(function(){f._obtainer.loadingStatus(false);f.doneNational(a)});return b},ajaxRegionURL:function(a,
b,d){this.conf||(this.conf=c("#hotdeals-data").embeddedData());a={url:a};if(d)a.postcode=d;if(b)a.region=b;return c.ajax({url:this.conf["xhr-hotdeals-data"],dataType:"json",cache:true,data:a})},doneRedirect:function(a){if(window.location.href.indexOf(a)<0){c.publish("hotdeals.redirect",{url:a});if(this.enabledRedirect)window.location.href=a}else this.doneNoRedirect()},doneObtainerError:function(a){c.publish("hotdeals.noredirect");if(this._obtainer){this._obtainer.loadingStatus(false);this._obtainer.formError(a)}},
doneNational:function(a){window.location.href=c(a).attr("href")},doneCasualError:function(a){this.doneNoRedirect();this._template.setError(a)},doneNoRedirect:function(){c.publish("hotdeals.noredirect");if(this._obtainer){this._obtainer.destroy();delete this._obtainer}},obtainRegion:function(a){var b,d=this;b=Object.create(k);b.conf=d.conf;b.init({formSubmit:function(f){d.handleRegion(a,false,f)},cancel:function(){c(a).hasClass("force-overlay-hotdeals")?d.doneNoRedirect():d.doneRedirect(a.href)}});
d._obtainer=b},destroy:function(){if(this._obtainer){this._obtainer.destroy();delete this._obtainer}if(this._template){this._template.destroy();delete this._template}c(document).off("click",this.elementsSelector);for(channel in this.pubsub)c.unsubscribe("shopping.pref."+channel,this.pubsub[channel]);this.pubsub=this.conf=this._template=this._obtainer=null}},k={init:function(a){var b=this;this._guid=+new Date;this.options=a;this.formSelector=a.formSelector||"#hotDeals-form";this.conf||(this.conf=c("#hotdeals-data").embeddedData());
this.conf["xhr-hotdeals-form"]&&c.publish("overlay.launch",{url:this.conf["xhr-hotdeals-form"],positionType:"window",name:"Hot Deals Select Region",success:function(){b._form=c(b.formSelector);b._form.size()?b.ready():b.error()}})},ready:function(){this.bindError();this.bindSubmit();this.bindAdditionalListeners.call(this);this.bindCancel();this.loadingStatus(false);this.setFocus();c.publish("hotdeals.obtainerReady")},done:function(){c(this.formSelector).length&&c.publish("overlay.hide")},setFocus:function(){this._form.find('input[type="text"]').first().select()},
bindSubmit:function(){var a=this;c(document).off("submit","#hotDeals-form").on("submit","#hotDeals-form",function(b){b.preventDefault();b=a._form.find("[name=postcode]");var d=b.val();if(c.trim(d).length===4&&!isNaN(d)){a.loadingStatus(true);a.formSuccess(d);b.val("")}else a.formError();return false});c(document).on("keydown","#hotDeals-form #postcode",function(){a._errorMsg.slideUp("fast")})},bindAdditionalListeners:ND.platformDependentHotDeal.regionObtainer.bindAdditionalListeners,bindCancel:function(){this.loadingStatus(false);
this.options.cancel&&c.subscribeOnce("overlay.usercancel",this.options.cancel)},bindError:function(){var a=this;a.loadingStatus(false);this._errorMsg=this._form.find(".error");this.standardError=this._form.find("#standard-error").text();c(document).on("keydown","#hotDeals-form #postcode",function(){a._errorMsg.slideUp("fast")})},loadingStatus:ND.platformDependentHotDeal.regionObtainer.loadingStatus,formSuccess:function(a){this.loadingStatus(false);this.options.formSubmit.call(null,a)},formError:function(a){this.loadingStatus(false);
this._errorMsg.text(a||this.standardError).slideDown("fast")},error:function(){},destroy:function(){this.done();c(document).off("submit","#hotDeals-form").off("click","#hotDeals-form .hotDeals-form-currentLocation").off("keydown","#hotDeals-form #postcode");c.unsubscribe("overlay.usercancel",this.options.cancel);this._form=this.conf=null}},i=ND.platformDependentHotDeal.hotDeal.needPostcodeTemplate,j={init:function(a,b,d){this._panel=a;this._postcode=b;this._region=d;this.conf||(this.conf=c("#hotdeals-data").embeddedData());
this.tmpl=c("#tmpl-hotdeals-links").template();this.updatePostCode();this.subscribing();this.controller()},subscribing:function(){var a=this;this.pubsub={change:function(b,d){d=d||{};a._postcode=d.postcode;a._region=d.region;a.controller()}};c.subscribe("shopping.pref.change",this.pubsub.change)},updatePostCode:function(){this._postcode?c(".user-selected-postcode").text(" "+this._postcode):c(".user-selected-postcode-msg").hide()},controller:function(){this.view(this.model(this.useError()))},model:function(a){var b=
{};b.postcode=this._postcode;b.wrongPostcode=this._postcode&&this.getPageRegion()&&this._region!==this.getPageRegion();b.error=a;return b},view:ND.platformDependentHotDeal.regionObtainer.view,getPageRegion:function(){return this.conf["page-region"]},setError:function(a){this._error=a},useError:function(){var a=c.type(this._error)==="string"?this._error:false;delete this._error;return a},destroy:function(){c.unsubscribe("shopping.pref.change",this.pubsub.change)}};return function(a){var b=Object.create(l);
b.init.call(b,a);return b}}(jQuery);

(function(a,G){var d={},p=".calculateprice.dfy",C={},A={},D={overlayLaunched:false};priceUpdater=C.PriceUpdater=function(){function m(h){q={};a(h).each(function(n,i){n=a(i);if(i=n.data("derivativeid"))q[i]=n;if(!j&&n.data("modelid"))j=n.data("modelid")});return q}function o(h){if(d.priceformatter!==null)typeof h!=="undefined"&&a.isFunction(h)&&h();else{priceUserDataManager.initPriceFormatter();a.isFunction(h)&&h()}}var q,l={priceClass:".price",hotDealClass:".latest-offer",loanCalcClass:".loan-calc",
priceContainer:".derivative-price",tmpl:"#tmpl-price-main",hotDealTmpl:"#tmpl-price-hotdeal-main",noPriceTmpl:"#tmpl-noprice-main"},j=null;return{init:function(h,n){var i=this;this.options=n=a.extend({},l,n);m(this.options.priceContainer);this.tmpl=a(this.options.tmpl).template();if(a(this.options.hotDealTmpl).length>0)this.hotDealTmpl=a(this.options.hotDealTmpl).template();a.subscribe("userchange"+p,function(){i.notifyChange()})},list:function(){var h=[];a.each(q,function(n){h.push(n)});return h},
update:function(h,n){var i=this;n=n===G||n;if(q){i.notifyChange();o(function(){a.each(h,function(g,s){g=q[g];var t,w,y;if(g&&s.displayPrice){t=g.find(i.options.priceClass);if(typeof guxApp!=="undefined")s.price=guxApp.priceFormatter.format(s.price);y=a.tmpl(i.tmpl,s);if(typeof ND.polk.renderDerivative!=="undefined"){w=g.parents("li").filter(":visible");w=w!=null&&w.length>0?a(w[0]):g.parent().parent();renderHotdeals=a.tmpl(i.hotDealTmpl,s);ND.polk.renderDerivative(g,t,w,y,renderHotdeals,i.options.hotDealClass);
typeof ND.polk.registerLoanBtn!=="undefined"&&ND.polk.registerLoanBtn(w,s.price,d.priceformatter,priceUserDataManager.locationValue())}else{if(t.size())t.replaceWith(y);else{g.find("style").length>0&&g.find("style").remove();g.find(i.options.loanCalcClass).length>0&&g.find(i.options.loanCalcClass).parent().remove();g.prepend(y)}a(i.options.loanCalcClass,g).off("click").on("click",function(b){b.preventDefault();a(this).loanCalculatorOverlay({price:s.price,priceformatter:d.priceformatter,location:priceUserDataManager.locationValue()})})}n&&
ND.polk.showChangeVisually(g.find(i.options.priceClass))}});if(a(i.options.noPriceTmpl).length){var e=a(i.options.noPriceTmpl).html();a(".body.derivative-price").each(function(g,s){a(s).find(".price").length===0&&a(s).prepend(e)})}var z=a(".model-enhance .attribute-bar"),B=a("#price-urls").embeddedData();z.length&&a("a.offers",z).length&&B&&B["latest-offer-backimg"]&&a("a.offers",z).attr("style","background-image:url("+B["latest-offer-backimg"]+")");a(".model-content.body.derivative-price").length&&
a(".model-content.body.derivative-price a.offers").length&&a(".model-content.body.derivative-price").addClass("extend")})}else a.publish("error"+p,"ND.PriceUpdater: Could not update Dom")},notifyChange:function(){var h=this;q&&a.each(q,function(n,i){if(typeof ND.polk.notifyChange!=="undefined")ND.polk.notifyChange(i);else{i.find(h.options.priceClass).remove();i.find(h.options.loanCalcClass).parent().remove()}})},modelId:function(){return j}}}();priceUserDataManager=C.userDataManager=function(){function m(){var b=
a.extend(e,{derivatives:B});a.publish("userchange"+p,{payload:b})}function o(){if((e=l())&&(e.postcode||e.pricezone)&&e.usage){y=true;m()}else e=null;return e}function q(){a.publish("shopping.pref.save",e)}function l(){function b(f,c){e=c}a.publish("shopping.pref.retrieve",b);return e}function j(b,f,c,k,r,u){if(arguments.length>=2)e={postcode:b,usage:f,usageLabel:c,pricezone:k,pricezoneLabel:r,priceformatData:u};return e}function h(b){var f=a(b.formid);if(d.isPricezone){if(!g){b=a("#regional-price-json");
if(b.length>0)g=b.embeddedData()}if(f.size()&&typeof e!=="undefined"&&e!=null&&e.pricezone!=null&&e.pricezone!==""&&e.usage!=null&&e.usage!==""){for(var c in g)if(c&&g[c]){var k=false;a.each(g[c],function(r,u){if(u.id===e.pricezone){f.find("select[name=pricezone]").val(c).select();k=true;return false}});if(k)break}b=f.find("input[name=usage]");if(b.length)b.filter("[value="+e.usage+"]")[0].checked=true;if(a.mobile){f.find("select[name=pricezone]").selectmenu("refresh");b.checkboxradio("refresh")}}}else if(f.size()&&
typeof e!=="undefined"&&e!=null&&e.postcode!=null&&e.postcode!==""&&e.usage!=null&&e.usage!==""){f.find("input[name=postcode]").val(e.postcode).select();b=f.find("input[name=usage]");if(b.length)b.filter("[value="+e.usage+"]")[0].checked=true}}function n(b,f){var c="userchangesuccess"+p,k=[],r;y=false;if(a.isPlainObject(b)){a.isFunction(b.complete)&&k.push(b.complete);b.flashid&&k.push(function(){var u,v=a("#"+b.flashid).find("object").andSelf().filter("object").get(0);try{u=a.extend({},e);u.derivatives&&
delete u.derivatives;v.message("postcode",JSON.stringify(u))}catch(E){}})}if((d.formURL||d.regionformURL)&&(f||!e)){r=function(){a.unsubscribe(c,r);a.unsubscribe("overlay.usercancel",r);a.each(k,function(u,v){v.apply(v,[l()])})};a.subscribe(c,r);a.subscribe("overlay.usercancel",r);typeof guxApp!=="undefined"?a.publish("overlay.launchgux",{url:d.isPricezone?d.regionformURL:d.formURL,positionType:"window",name:"POLK Select Postcode",success:function(){D.overlayLaunched=true}}):a.publish("overlay.launch",
{url:d.isPricezone?d.regionformURL:d.formURL,positionType:"window",name:"POLK Select Postcode",success:function(){D.overlayLaunched=true}})}else a.each(k,function(u,v){v.apply(v,[l()])})}function i(b){ND.polk.bindAdditionalListeners(b);a(document).off("submit",b).on("submit",b,function(f){var c=a(this),k,r,u,v;working=false;f.preventDefault();f=c.find("[name=postcode]").val();r=c.find("[name=usage]:checked");k=r.val();v=c.find("[name=pricezone]").val();c=c.find("[name=pricezone]").find("option:selected").text();
if(d.isPricezone)if(a.trim(v).length>0&&k&&g&&g[v]){var E;a.each(g[v],function(H,x){if(x.type===k){u=x.id;d.priceformatter=ND.PriceFormatter;d.priceformatter.initialise({data:x.priceFormat,formatString:x.currencySymbol,centsSeparator:x.monetaryDecimalSeparator,thousandsSeparator:x.groupingSeparator});E=x.priceFormat+"|"+x.currencySymbol+"|"+x.monetaryDecimalSeparator+"|"+x.groupingSeparator;return false}});r=a("[for="+r.attr("id")+"]").attr("title");j(f,k,r,u,c,E);m()}else a.publish("usererror"+p);
else if(a.trim(f).length===4&&!isNaN(f)&&k){r=a("[for="+r.attr("id")+"]").attr("title");j(f,k,r);m()}else a.publish("usererror"+p);return false})}var e,z,B,g,s,t=null,w=null,y;z={formid:"#calc-price-user",regionformid:"#regional-price-user",needprice:".need-price",getpostcodeusage:".get-postcode-usage",tmpl:"#tmpl-price-links"};A.requestPriceUserData=function(b,f,c,k){if(f&&typeof b=="string"){b={flashid:b};b.complete=c}n(b,k)};A.requestChangePriceUserData=function(b,f,c){A.requestPriceUserData(b,
f,c,true)};A.requestChangePriceBuildAndPrice=function(b,f){A.isBuildAndPrice=ND.API.isBuildAndPrice=true;d.isPricezone=false;n(b,f)};A.requestCookieValuesBuildAndPrice=function(b){b.complete&&a.publish("shopping.pref.retrieve",function(f,c){b.complete.apply(b.complete,[c])})};return{init:function(b,f){var c=this;e=null;c.options=f=a.extend({},z,f,{formid:d.isPricezone?z.regionformid:z.formid});c.needprice=a(f.needprice);c.needprice.on("click",f.getpostcodeusage,function(k){k.preventDefault();n(null,
true)});B=b;i(f.formid);c.tmpl=a(f.tmpl).template();a.subscribe("userchange"+p,function(){});a.subscribe("overlay.success",function(){h(f);ND.polk.bindAdditionalListeners(f.formid)});a.subscribe("destroy"+p,function(){for(var k in c.pubsub)a.unsubscribe(k+p,c.pubsub[k]);a(document).off("submit",a(c.options.formid));c.needprice.off("click",c.options.getpostcodeusage);c.needprice.empty()});if(B.length!==0)o()||c.update()},initPriceFormatter:function(){if(e&&e.priceformatData&&d&&!d.priceformatter&&
ND.PriceFormatter){var b=e.priceformatData.split("|");if(b.length===4){d.priceformatter=ND.PriceFormatter;d.priceformatter.initialise({data:b[0],formatString:b[1],centsSeparator:b[2],thousandsSeparator:b[3]})}}},update:function(b,f){var c=this;b=b||e;if(c.needprice){b=a.tmpl(c.tmpl,b);if(c.previousLinks&&c.previousLinks.length){c.previousLinks.remove();c.needprice.append(b)}else typeof guxApp!=="undefined"?c.needprice.html(b):c.needprice.append(b);c.previousLinks=b;f&&!y&&ND.polk.showChangeVisually(a(c.previousLinks.get(0)));
ND.polk.templateUpdated(c.needprice)}},visualUpdate:function(b){this.update(b,true)},fromCookie:function(){return!!y},displayMsg:function(b){t=a(priceUserDataManager.options.formid);s=t.find(".error");if(w==null)w=t.find("#standard-error").text();s.text(b?b:w);s.filter(":hidden").slideDown("fast")},loading:function(b){t=a(priceUserDataManager.options.formid);if(b){t.find(".error").hide();t.find(".loading").filter(":hidden").slideDown("fast");t.find("button[type=submit]").attr("disabled",true)}else{t.find(".loading").hide();
t.find("button[type=submit]").removeAttr("disabled")}},locationValue:function(){if(e)return d.isPricezone?e.pricezoneLabel+" "+e.usageLabel:e.postcode+" "+e.usageLabel;return""},getData:l,setData:q}}();pubsub={userchange:function(m,o){function q(l){a.publish("change"+p,{error:true,errorMessage:"System error."});a.publish("error"+p,l)}if(!d.dataURL&&!d.isPricezone)a.publish("error"+p,"There was a problem.");else if(o&&o.payload){priceUserDataManager.loading(true);if(d.isPricezone){if(a("#rest-services").length>
0)(m=a("#rest-services").embeddedData()["pricezone.derivatives"])&&a.ajax({type:"GET",url:m.replace("{site}",d.site).replace("{pricezoneId}",o.payload.pricezone).replace("{modelId}",priceUpdater.modelId()),dataType:"json",complete:function(l,j){a.publish("get"+p,j)},success:function(l){var j={};if(l&&l.length>0){d.priceformatter||priceUserDataManager.initPriceFormatter();l=a.map(l,function(h){if(!h.displayPrice)if(d.priceformatter)h.displayPrice=d.priceformatter.format(h.price);return h});j.error=
false;j.derivatives=l}else{j.error=true;j.errorMessage=a("form.calc-price-user p.error").html()}a.publish("change"+p,j)},error:function(l,j){q(j)}})}else a.ajax({type:"POST",url:d.dataURL,cache:false,headers:{"Cache-Control":"no-cache"},data:{data:JSON.stringify(o.payload)},complete:function(l,j){a.publish("get"+p,j)},success:function(l){a.publish("change"+p,l)},error:function(l,j){q(j)},dataType:"json"})}else q("no payload")},change:function(m,o){o=o||{};priceUserDataManager.loading(false);if(o.error)a.publish("usererror"+
p,o.errorMessage||"Error");else{a.publish("userchangesuccess"+p,o);if(D.overlayLaunched)typeof guxApp!=="undefined"?a.publish("overlay.hidegux"):a.publish("overlay.hide")}},userchangesuccess:function(m,o){var q={};a.each(o.derivatives||[],function(l,j){q[j.id]=j});priceUserDataManager.visualUpdate();priceUpdater.update(q,!priceUserDataManager.fromCookie());priceUserDataManager.setData()},usererror:function(m,o){priceUserDataManager.displayMsg(o)},loading:function(m,o){priceUserDataManager.loading(o)}};
for(var F in pubsub)a.subscribe(F+p,pubsub[F]);C.conf=function(m){m=m||a("#price-urls").embeddedData();d.dataURL=m["xhr-calcprice-data"]||d.dataURL;d.formURL=m["xhr-calcprice-form"]||d.formURL;d.regionformURL=m["xhr-regionalprice-form"]||d.regionformURL;d.isPricezone=d.regionformURL&&d.regionformURL.length>0;d.site=a("#common-config").embeddedData().site;d.priceformatter=null};C.init=function(){this.conf();if(!(!d.isPricezone&&!d.dataURL&&!d.formURL||d.isPricezone&&!d.regionformURL)){priceUpdater.init();
var m=priceUpdater.list();priceUserDataManager.init(m)}};ND.CalcPrice=C;ND.API=a.extend(ND.API,A)})(jQuery);

(function(){$(document).on("pagechange",function(){ND.shoppingPreferenceManager();ND.hotDeals();ND.CalcPrice.init();ND.DealerLocator();ND.Context.isContextInitialised=false;ND.Context.startUp()});$(document).on("pagehide",function(){$.publish("shopping.pref.destroy");$.publish("destroy.calculateprice.dfy");$.publish("dealerlocator.dfy.destroy")})})();

(function(a){a.fn.loanCalculatorOverlay=function(b){b=a.extend({price:0,symbol:"",url:"",priceformatter:null,customClass:"loan-calc",location:"",complete:null},b);var m=function(i){var c=this,l,d=0,j=0,g=0,f=0,h=0;c.init=function(){h=d=Math.round(b.price);l=b.url.length>0?b.url:i.attr("href");a.publish("overlay.launch",{url:l,positionType:"window",customClass:b.customClass,name:"Loan Calculator",success:function(){c.calculate();c.updateContent();c.registerEvent()},error:function(e){console.log(e)}})};
c.calculate=function(e){h=!e&&d>0&&j>0&&g>0&&f>0&&f<d?((d-f)*(j/100)*g+(d-f))/(g*12):0};c.updateContent=function(){if(b.priceformatter){a(".loan-calc-overlay .title span.price").html(b.priceformatter.format(d));a(".loan-calc-overlay .result span.price").html(b.priceformatter.format(h))}else{a(".loan-calc-overlay .title span.price").html(d);a(".loan-calc-overlay .result span.price").html(h)}a(".loan-calc-overlay span.symbol").html(b.symbol);b.location.length?a(".loan-calc-overlay span.location").html(b.location):
a(".loan-calc-overlay p.loc").hide()};c.registerEvent=function(){function e(k){if(isNaN(k.val())){k.parent().addClass("invalid");c.calculate(true)}else{k.parent().removeClass("invalid");c.calculate(false)}c.updateContent()}a("#duration").on("change propertychange input",function(){g=parseFloat(a(this).val());e(a(this))});a("#rate").on("change propertychange input",function(){j=parseFloat(a(this).val());e(a(this))});a("#payment").on("change propertychange input",function(){f=parseFloat(a(this).val());
e(a(this))});a("#overlay .close-button a").on("click",function(){a("#overlay").removeClass(b.customClass)});a.isFunction(b.complete)&&b.complete.call(this)}};(function(i){(new m(i)).init()})(a(this))}})(jQuery);

(function(u,v){if(!b)var b=window.ND=window.ND||{};b.PriceFormatter={initialise:function(a){var f={data:"true,0",formatString:"",prefix:"",suffix:"",centsSeparator:".",thousandsSeparator:"",limit:false,centsLimit:0,clearPrefix:false,clearSufix:false,allowNegative:false,forceDecimal:false};b.PriceFormatter.options=u.extend({},f,a);a=b.PriceFormatter.options.data.match(/\W+/g);a=b.PriceFormatter.options.data.split(a);b.PriceFormatter.options.thousandsSeparator=a[0]==="true"?b.PriceFormatter.options.thousandsSeparator:
f.thousandsSeparator;if(parseInt(a[1])>0){b.PriceFormatter.options.forceDecimal=true;b.PriceFormatter.options.centsLimit=parseInt(a[1])}},internalFormatter:function(a){function f(d){for(var c="",e=0;e<d.length;e++){char_=d.charAt(e);if(c.length==0&&char_==0)char_=false;if(char_&&char_.match(m))if(p){if(c.length<p)c+=char_}else c+=char_}return c}function j(d){for(;d.length<k+1;)d="0"+d;return d}function g(d){var c=j(f(d)),e="",q=0,n=c.substr(c.length-k,k),l=c.substr(0,c.length-k);c=l+r+n;if(o){for(c=
l.length;c>0;c--){char_=l.substr(c-1,1);q++;if(q%3==0)char_=o+char_;e=char_+e}if(e.substr(0,1)==o)e=e.substring(1,e.length);c=e+r+n}if(w&&d.indexOf("-")!=-1&&(l!=0||n!=0))c="-"+c;if(s)c=s+c;if(t)c+=t;return c}function i(){var d=h,c=g(d);if(d!=c)h=c}var h=a,m=/[0-9]/,s=b.PriceFormatter.options.prefix,t=b.PriceFormatter.options.suffix,r=b.PriceFormatter.options.centsSeparator,o=b.PriceFormatter.options.thousandsSeparator,p=b.PriceFormatter.options.limit,k=b.PriceFormatter.options.centsLimit,w=b.PriceFormatter.options.allowNegative;
i();return h},pad:function(a,f){for(a=a+"";a.length<f;)a="0"+a;return a},format:function(a){var f=a=a.toString();try{if(b.PriceFormatter.options===v)throw"Priceformatter not initialized";a=a.replace(".",b.PriceFormatter.options.centsSeparator);var j=0,g=b.PriceFormatter.options.centsLimit,i=a.indexOf(b.PriceFormatter.options.centsSeparator);if(g>0&&i===-1)a+=b.PriceFormatter.options.centsSeparator+b.PriceFormatter.pad("0",g);else if(i>0&&(j=a.substring(i+1,a.length).length)<g)a+=b.PriceFormatter.pad("0",
g-j);else if(j>g)a=a.substring(0,i+1+g);var h=b.PriceFormatter.internalFormatter(a);b.PriceFormatter.options.forceDecimal||(h=h.substring(0,h.indexOf(b.PriceFormatter.options.centsSeparator)));f=b.PriceFormatter.options.formatString.replace("%1",h)}catch(m){throw m;}return f}}})(jQuery);

(function(){var a=window,c=a.ND=a.ND||{};a.async=c.async=function(d,e){var f=40,b=a.setInterval(function(){if(typeof a[d]!="undefined"){a.clearInterval(b);e()}else f--||a.clearInterval(b)},800)}})();

(function(){(window.ND=window.ND||{}).loadScript=function(c,b){var a=document.createElement("script");a.type="text/javascript";if(a.readyState)a.onreadystatechange=function(){if(a.readyState=="loaded"||a.readyState=="complete"){a.onreadystatechange=null;b()}};else a.onload=function(){b()};a.src=c;document.body.appendChild(a)}})(jQuery);

(function(e){var b={map:null,defaultCenter:{lat:-25.610111,lng:134.354806},defaultZoom:12,init:function(a){if(a.length)typeof Microsoft==="undefined"||typeof Microsoft.Maps==="undefined"||typeof Microsoft.Maps.Location==="undefined"?setTimeout(function(){b.parseMapConfig(a)},500):b.parseMapConfig(a)},parseMapConfig:function(a){mapConfig=JSON.parse(a.html());var c=[],d,f,g,i;e("div.dealerMapData").filter(":visible").each(function(){d=e(this);f=d.data("lat");g=d.data("lng");if(typeof f!=="undefined"&&
typeof g!=="undefined"&&f!=null&&g!=null&&f!==""&&g!==""){i=new Microsoft.Maps.Location(f,g);c.push(i);b.attachPanToPinEventHandler(d.parent().find(".dl-showDealerOnMap"),i)}});b.attachHeroMapEventHandler(e(".dl-viewFullScreen"),e(mapConfig.mapCloseMapButton));c.length===0&&c.push(new Microsoft.Maps.Location(b.defaultCenter.lat,b.defaultCenter.lng));mapConfig.dealers=c;b.create(mapConfig);for(a=0;a<c.length;a++)b.addPin(c[a])},create:function(a){b.map=new Microsoft.Maps.Map(e(a.mapContainer)[0],{credentials:a.credentials,
enableSearchLogo:false,enableClickableLogo:false,mapTypeId:Microsoft.Maps.MapTypeId.road,zoom:Number(a.zoom),showDashboard:false});b.defaultZoom=Number(a.zoom);b.map.setView({bounds:Microsoft.Maps.LocationRect.fromLocations(a.dealers)})},addPin:function(a){a=new Microsoft.Maps.Pushpin(a);b.map.entities.push(a)},attachPanToPinEventHandler:function(a,c){a.on("click",function(d){d.preventDefault();b.map.setView({center:c,zoom:b.defaultZoom});e("html, body").animate({scrollTop:0},"slow")})},attachHeroMapEventHandler:function(a,
c){if(a.length&&c.length){var d=e(window),f,g,i=function(){d.scrollTop(d.height())};a.on("click",function(h){h.preventDefault();h.stopPropagation();f=e(document.body);g=f.find("div[data-role='page']");h=g.css("min-height");g.css("height",h);f.addClass("hero");d.on("resize",i);d.trigger("resize")});c.on("click",function(h){h.preventDefault();h.stopPropagation();g.css("height","");f.removeClass("hero");d.off("resize",i)})}}};e(document).on("pagechange",function(){var a=e("#dealerLocatorBingMapConfig");
if(a.length>0){var c=Object.create(b);c.init.call(c,a)}})})(jQuery);

(function(b){b.fn.historyBack=function(){return this.each(function(){this.onclick=function(a){a.stopPropagation();a.preventDefault();window.history.back(-1)}})}})(jQuery);

(function(a){var f={uriAttr:"href",target:".imgnav img",targetAttr:"src"};a.fn.switchImage=function(g){function h(b){b.stopPropagation();b.preventDefault();b=a(this);var e=b.attr(d.uriAttr),c=a(d.target);c=c[c.size()-1];c.onload=c.onerror=i;if(e){a.mobile.showPageLoadingMsg();c[d.targetAttr]=e;b.parent().parent().parent().find(".colortxt").html(b.attr("title"))}}function i(){a.mobile.hidePageLoadingMsg()}var d=a.extend(true,{},f,g);return this.each(function(){a(this).click(h)})}})(jQuery);

(function(){var h=(window.ND=window.ND||{}).selectOption={init:function(a){var d=$("#select-state")[0],e=$("#select-city"),j=false;if($("body div[data-role='page']").length>0)j=$("body div[data-role='page']").hasClass("select-region-only")||$("body div[data-role='content']").hasClass("select-region-only");if(d){a=a.list[0].states;var f={},b,g;h.clearOption(d);b=0;for(g=a.length;b<g;b++){var c=a[b][0],k=c;f[c]=a[b][1].cities;if(j)k=c===f[c][0][0]?c:c+"/"+f[c][0][0];h.addOption(d,k,c)}if(j)e[0].parentNode.parentNode.parentNode.remove();
else d.onchange=function(){var i=f[d.value];if(i){h.clearOption(e[0]);b=0;for(g=i.length;b<g;b++)h.addOption(e[0],i[b][0],i[b][0]);$.mobile&&e.selectmenu("refresh")}}}},addOption:function(a,d,e){if(a&&a.options){a=a.options;a[a.length]=new Option(d,e)}},clearOption:function(a){if(a&&a.options)a.options.length=1}}})();

(function(d){function e(b){if(!b)return 0;b=f(b);var a=location.href,c=a.indexOf("#/");if(c>-1)a=a.substr(c+1);if(a.indexOf(b)>-1)return 1;return 0}function f(b){var a=location.host,c=a.length;a=b.indexOf(a);if(a>0)b=b.substr(a+c);return b}var g={selectedClass:"ui-btn-active"};d.fn.linkState=function(b){var a=d.extend(true,{},g,b);return this.each(function(){var c=d(this);e(c[0].href)?c.addClass(a.selectedClass):c.removeClass(a.selectedClass)})}})(jQuery);

(function(a){a.fn.fullArticle=function(){return this.each(function(){var d=a(".article"),b=a(".hide");a(".full").click(function(c){c.stopPropagation();c.preventDefault();a(this).hide();b.show();b.hasClass("alert")&&a(".content",d).hide()})})}})(jQuery);

(function(a){a.fn.hintText=function(){var b=a(this);return this.each(function(){var c=a(this).click(function(){if(c.hasClass("hint")){b.removeClass("hint");b.val("")}})})}})(jQuery);

(function(){(window.ND=window.ND||{}).share={init:function(d,a){var c;a=a?a.toLowerCase():location.href;a=encodeURIComponent(a);for(c=d.length;c-- >0;){var e=d[c],b=e.href.toLowerCase();if(b.indexOf("url=")<0){var f=b.indexOf("?")>=0?"&url=":"?url=";b=b+f+a}else b=b.replace(/url=[^&#]+/g,"url="+a);e.href=b}}}})();

(function(b){window.SyncTable=function(g){this.sync=function(){var a=b(g).children("table");if(a.size()==2){var d=b(a[0]).find("tbody>tr");a=b(a[1]).find("tbody>tr");for(var h=d.length>a.length?a.length:d.length,c=0;c<h;c++){var e=b(d[c]).height(),f=b(a[c]).height();if(e!=f)e>f?b(a[c]).css({height:e}):b(d[c]).css({height:f})}}}}})(jQuery);

(function(a){function d(){var c=a("[data-role='split_screen'] .imgnav"),b=a("[data-role='split_screen'] .imgnav:has(img)");c.addClass("noimagebtns");b.removeClass("noimagebtns");c=a("[data-role='split_screen'] .imgnav .bq_spsc_pre");b=a("[data-role='split_screen'] .imgnav:has(img) .bq_spsc_pre");c.removeClass("prev");c.addClass("noimagebtns_prev");b.removeClass("noimagebtns_prev");b.addClass("prev");c=a("[data-role='split_screen'] .imgnav .bq_spsc_next");b=a("[data-role='split_screen'] .imgnav:has(img) .bq_spsc_next");
c.removeClass("next");c.addClass("noimagebtns_next");b.removeClass("noimagebtns_next");b.addClass("next")}a(document).on("pageinit",function(){a(".back").historyBack();a(".colors li a").switchImage();a(".article").fullArticle();var c=a(".share .btns a");c.size()&&ND.share.init(c);a(".vsersion_content_gray_bg").click(function(){var b=a(this);a(".vsersion_content_blue_bg").removeClass("vsersion_content_blue_bg");b.toggleClass("vsersion_content_blue_bg")});a(".bq_spsc_next").click(function(){var b=a(this);
b="div#p"+(Number(b.parent().parent().attr("id").substring(1))+1);if(a(b).attr("id")!=undefined){a("[data-role='split_screen']").hide();a(b).fadeIn()}});a(".bq_spsc_pre").click(function(){var b=a(this);b="div#p"+(Number(b.parent().parent().attr("id").substring(1))-1);if(a(b).attr("id")!=undefined){a("[data-role='split_screen']").hide();a(b).fadeIn()}});a("[data-role='split_screen']").hide();a("div[data-role='split_screen']:first").show();d();a(document).on("pagechange",function(){a("div[data-role='header'] .ui-controlgroup a").linkState();
a(".hint").hintText();var b=a("#cityDropdownData");if(b.length>0){b=JSON.parse(b.html());ND.selectOption.init(b)}(new SyncTable(a(".tabcde"))).sync()})})})(jQuery);

(function(b){BB={config:{bkBtnCookieName:"dfy.pg.bkbtn",bkBtnId:"#page-back-btn",bkBtnClass:".formbuilder-close"},store:null,$bkBtn:null,prepareBBCookie:function(){var a=BB.store=Object.create(ND.cacheStore),c="";a.key=BB.config.bkBtnCookieName;if(a.is())c=a.get();else a.expires=365;return c},init:function(){var a=b("#form-config");if(a.length>0){a=b.extend(BB.config,JSON.parse(a.html()));if(typeof a.isform!=="undefined"&&(a.isform==="false"||a.isform===false))BB.addPageToCookie(BB.prepareBBCookie());
BB.$bkBtn=b(BB.config.bkBtnClass);BB.$bkBtn.length>0&&BB.addListeners()}},addPageToCookie:function(a){var c=encodeURI(window.location.href);a!==c&&BB.store.set(c)},handleBkBtnEvent:function(a){a.stopPropagation();a=BB.prepareBBCookie();var c=null;if(a!=null&&a.length>0){c=a;BB.store.set(null)}else if(typeof BB.config.homepage!=="undefined"&&BB.config.homepage!==""&&!b("body").hasClass("apaform"))c=BB.config.homepage;else if(b("body").hasClass("apaform")&&BB.config.dashboardpage!=="")c=BB.config.dashboardpage;
else console.error("homepage data attribute is missing, can't go back");if(c!=null){var d=decodeURI(c);BB.$bkBtn.each(function(){b(this).attr("href",d)})}},addListeners:function(){b("body").hasClass("confirm-alert")?b(document).on("click","#confirmPopup .formbuilder-close",BB.handleBkBtnEvent):b(document).on("click",BB.config.bkBtnClass,BB.handleBkBtnEvent)},destroy:function(){if(BB.$bkBtn==null)BB.$bkBtn=b(BB.config.bkBtnClass);BB.$bkBtn.length>0&&b(document).off("click",BB.config.bkBtnClass)}};
b(document).ready(BB.init);b(document).on("pagechange",function(){BB.destroy();BB.init()})})(jQuery);

(function(a){a(function(){var d=a(".show-hide"),e=a(".select-menu > select"),c=function(){d.hide();a("#"+e.val()).show();e.change(function(){d.hide();a("#"+this.value).show()})};d.length>0&&c();a(".section-wrap .section .head").click(function(){var b=a(this).closest(".row"),f=b.find(".comparator_content");b.hasClass("active")?f.slideUp(400,function(){b.removeClass("active")}):f.slideDown(400,function(){b.addClass("active")})});c=a(".specification-table td .banned-link");c.length>0&&c.on("click",function(b){b.preventDefault()})})})(jQuery);

(function(a){a(document).on("pageshow",function(){var c=a(".swipe-page .section-wrap .imgnav > .prev:visible"),d=a(".swipe-page .section-wrap .imgnav > .next:visible"),e=c.attr("href"),f=d.attr("href"),g=a(".swipe-page:visible").closest("div[data-role=page]");g.on("swipeleft",function(b){a.mobile.changePage(f,{transition:"fade",changeHash:false});b.stopImmediatePropagation();return false});g.on("swiperight",function(b){a.mobile.changePage(e,{transition:"fade",changeHash:false});b.stopImmediatePropagation();
return false});d.on("click",function(b){a.mobile.changePage(f,{transition:"fade",changeHash:false});b.stopImmediatePropagation();return false});c.on("click",function(b){a.mobile.changePage(e,{transition:"fade",changeHash:false});b.stopImmediatePropagation();return false})})})(jQuery);

(function(a){a(function(){ND.addActiveCls=function(b){a(b).bind("click",function(){a(this).addClass("active")})}})})(jQuery);
(function(a){a(document).on("pageinit","div:jqmData(role='page')","div:jqmData(role='dialog')",function(){ND.addActiveCls(".navbtns .icon");ND.addActiveCls(".navbtns .custom-brown")});a(document).on("pagebeforeshow pageaftershow","div:jqmData(role='page')","div:jqmData(role='dialog')",function(){a(this).find(".navbtns").length>0&&a(this).find(".navbtns a").removeClass("active")})})(jQuery,window);

var ND=function(b,a){b.rotatingBanner=function(){var f;return{init:function(c,h,d,i){d&&d=="short"&&a(c).parent().addClass("hideFullPager");f=a(c+" li");if(!(f.size()<2)){var e=a(".rotatingbanner .image .slideritemwrap").length>0?true:false,g=a(c).bxSlider({pause:5E3,pager:h,autoHover:true,pagerType:d,startSlide:i,auto:e?true:false,autoHover:e?true:false});e&&a(".image .bx-controls-direction .bx-prev, .image .bx-controls-direction .bx-next").click(function(){g.stopAuto();g.startAuto()})}}}};return b}(window.ND||
{},jQuery);(function(b){b(function(){ND.rotatingBanner().init(".image .slideritemwrap",false)})})(jQuery);

(function(a){a(document).on("pageinit",function(){var c=a(".ui-icon.ui-icon-arrow-d.ui-icon-shadow").parent();a(".ui-icon.ui-icon-arrow-d.ui-icon-shadow").remove();c.append('<span class="nav-dropdown-icon">&nbsp</span>');a(".article .ui-select select, .ui-navbar .ui-select select").change(function(){var b=a(this).val();if(!(b.length<=0))if(a(this).find('option[value="'+b+'"]').data("target")===true)window.open(b);else location.href=b})})})(jQuery);

(function(a){a(document).bind("mobileinit",function(){var b=decodeURIComponent("%E5%BE%88%E6%8A%B1%E6%AD%89%EF%BC%8C%E4%BD%A0%E6%89%80%E8%AE%BF%E9%97%AE%E7%9A%84%E9%A1%B5%E9%9D%A2%E5%87%BA%E7%8E%B0%E9%97%AE%E9%A2%98%E3%80%82%E8%AF%B7%E5%88%B7%E6%96%B0%E9%A1%B5%E9%9D%A2%E3%80%82%0A");a.mobile.pageLoadErrorMessage=b+" An error has occurred, we apologize for the inconvenience. Please refresh your page."})})(jQuery);

var OpenLayers={VERSION_NUMBER:"Release 2.12",singleFile:true,_getScriptLocation:function(){for(var a=/(^|(.*?\/))(OpenLayers[^\/]*?\.js)(\?|$)/,b=document.getElementsByTagName("script"),c,f="",d=0,e=b.length;d<e;d++)if(c=b[d].getAttribute("src"))if(c=c.match(a)){f=c[1];break}return function(){return f}}(),ImgPath:""};
OpenLayers.Class=function(){var a=arguments.length,b=arguments[0],c=arguments[a-1],f=typeof c.initialize=="function"?c.initialize:function(){b.prototype.initialize.apply(this,arguments)};if(a>1){a=[f,b].concat(Array.prototype.slice.call(arguments).slice(1,a-1),c);OpenLayers.inherit.apply(null,a)}else f.prototype=c;return f};
OpenLayers.inherit=function(a,b){var c=function(){};c.prototype=b.prototype;a.prototype=new c;var f,d;c=2;for(f=arguments.length;c<f;c++){d=arguments[c];if(typeof d==="function")d=d.prototype;OpenLayers.Util.extend(a.prototype,d)}};OpenLayers.Util=OpenLayers.Util||{};OpenLayers.Util.extend=function(a,b){a=a||{};if(b){for(var c in b){var f=b[c];if(f!==undefined)a[c]=f}if(!(typeof window.Event=="function"&&b instanceof window.Event)&&b.hasOwnProperty&&b.hasOwnProperty("toString"))a.toString=b.toString}return a};
OpenLayers.Animation=function(a){function b(h,i,j){i=i>0?i:Number.POSITIVE_INFINITY;var l=++e,k=+new Date;g[l]=function(){if(g[l]&&+new Date-k<=i){h();g[l]&&d(g[l],j)}else delete g[l]};d(g[l],j);return l}function c(h){delete g[h]}var f=!!(a.requestAnimationFrame||a.webkitRequestAnimationFrame||a.mozRequestAnimationFrame||a.oRequestAnimationFrame||a.msRequestAnimationFrame),d=function(){var h=a.requestAnimationFrame||a.webkitRequestAnimationFrame||a.mozRequestAnimationFrame||a.oRequestAnimationFrame||
a.msRequestAnimationFrame||function(i){a.setTimeout(i,16)};return function(i,j){h.apply(a,[i,j])}}(),e=0,g={};return{isNative:f,requestFrame:d,start:b,stop:c}}(window);
OpenLayers.Tween=OpenLayers.Class({easing:null,begin:null,finish:null,duration:null,callbacks:null,time:null,animationId:null,playing:false,initialize:function(a){this.easing=a?a:OpenLayers.Easing.Expo.easeOut},start:function(a,b,c,f){this.playing=true;this.begin=a;this.finish=b;this.duration=c;this.callbacks=f.callbacks;this.time=0;OpenLayers.Animation.stop(this.animationId);this.animationId=null;this.callbacks&&this.callbacks.start&&this.callbacks.start.call(this,this.begin);this.animationId=OpenLayers.Animation.start(OpenLayers.Function.bind(this.play,
this))},stop:function(){if(this.playing){this.callbacks&&this.callbacks.done&&this.callbacks.done.call(this,this.finish);OpenLayers.Animation.stop(this.animationId);this.animationId=null;this.playing=false}},play:function(){var a={};for(var b in this.begin){var c=this.begin[b],f=this.finish[b];if(c==null||f==null||isNaN(c)||isNaN(f))throw new TypeError("invalid value for Tween");a[b]=this.easing.apply(this,[this.time,c,f-c,this.duration])}this.time++;this.callbacks&&this.callbacks.eachStep&&this.callbacks.eachStep.call(this,
a);this.time>this.duration&&this.stop()},CLASS_NAME:"OpenLayers.Tween"});OpenLayers.Easing={CLASS_NAME:"OpenLayers.Easing"};OpenLayers.Easing.Linear={easeIn:function(a,b,c,f){return c*a/f+b},easeOut:function(a,b,c,f){return c*a/f+b},easeInOut:function(a,b,c,f){return c*a/f+b},CLASS_NAME:"OpenLayers.Easing.Linear"};
OpenLayers.Easing.Expo={easeIn:function(a,b,c,f){return a==0?b:c*Math.pow(2,10*(a/f-1))+b},easeOut:function(a,b,c,f){return a==f?b+c:c*(-Math.pow(2,-10*a/f)+1)+b},easeInOut:function(a,b,c,f){if(a==0)return b;if(a==f)return b+c;if((a/=f/2)<1)return c/2*Math.pow(2,10*(a-1))+b;return c/2*(-Math.pow(2,-10*--a)+2)+b},CLASS_NAME:"OpenLayers.Easing.Expo"};
OpenLayers.Easing.Quad={easeIn:function(a,b,c,f){return c*(a/=f)*a+b},easeOut:function(a,b,c,f){return-c*(a/=f)*(a-2)+b},easeInOut:function(a,b,c,f){if((a/=f/2)<1)return c/2*a*a+b;return-c/2*(--a*(a-2)-1)+b},CLASS_NAME:"OpenLayers.Easing.Quad"};
OpenLayers.String={startsWith:function(a,b){return a.indexOf(b)==0},contains:function(a,b){return a.indexOf(b)!=-1},trim:function(a){return a.replace(/^\s\s*/,"").replace(/\s\s*$/,"")},camelize:function(a){a=a.split("-");for(var b=a[0],c=1,f=a.length;c<f;c++){var d=a[c];b+=d.charAt(0).toUpperCase()+d.substring(1)}return b},format:function(a,b,c){b||(b=window);return a.replace(OpenLayers.String.tokenRegEx,function(f,d){var e;f=d.split(/\.+/);for(d=0;d<f.length;d++){if(d==0)e=b;e=e[f[d]]}if(typeof e==
"function")e=c?e.apply(null,c):e();return typeof e=="undefined"?"undefined":e})},tokenRegEx:/\$\{([\w.]+?)\}/g,numberRegEx:/^([+-]?)(?=\d|\.\d)\d*(\.\d*)?([Ee]([+-]?\d+))?$/,isNumeric:function(a){return OpenLayers.String.numberRegEx.test(a)},numericIf:function(a){return OpenLayers.String.isNumeric(a)?parseFloat(a):a}};
OpenLayers.Number={decimalSeparator:".",thousandsSeparator:",",limitSigDigs:function(a,b){var c=0;if(b>0)c=parseFloat(a.toPrecision(b));return c},format:function(a,b,c,f){b=typeof b!="undefined"?b:0;c=typeof c!="undefined"?c:OpenLayers.Number.thousandsSeparator;f=typeof f!="undefined"?f:OpenLayers.Number.decimalSeparator;if(b!=null)a=parseFloat(a.toFixed(b));var d=a.toString().split(".");if(d.length==1&&b==null)b=0;a=d[0];if(c)for(var e=/(-?[0-9]+)([0-9]{3})/;e.test(a);)a=a.replace(e,"$1"+c+"$2");
if(b==0)b=a;else{c=d.length>1?d[1]:"0";if(b!=null)c+=(new Array(b-c.length+1)).join("0");b=a+f+c}return b}};OpenLayers.Function={bind:function(a,b){var c=Array.prototype.slice.apply(arguments,[2]);return function(){var f=c.concat(Array.prototype.slice.apply(arguments,[0]));return a.apply(b,f)}},bindAsEventListener:function(a,b){return function(c){return a.call(b,c||window.event)}},False:function(){return false},True:function(){return true},Void:function(){}};
OpenLayers.Array={filter:function(a,b,c){var f=[];if(Array.prototype.filter)f=a.filter(b,c);else{var d=a.length;if(typeof b!="function")throw new TypeError;for(var e=0;e<d;e++)if(e in a){var g=a[e];b.call(c,g,e,a)&&f.push(g)}}return f}};
OpenLayers.Bounds=OpenLayers.Class({left:null,bottom:null,right:null,top:null,centerLonLat:null,initialize:function(a,b,c,f){if(OpenLayers.Util.isArray(a)){f=a[3];c=a[2];b=a[1];a=a[0]}if(a!=null)this.left=OpenLayers.Util.toFloat(a);if(b!=null)this.bottom=OpenLayers.Util.toFloat(b);if(c!=null)this.right=OpenLayers.Util.toFloat(c);if(f!=null)this.top=OpenLayers.Util.toFloat(f)},clone:function(){return new OpenLayers.Bounds(this.left,this.bottom,this.right,this.top)},equals:function(a){var b=false;if(a!=
null)b=this.left==a.left&&this.right==a.right&&this.top==a.top&&this.bottom==a.bottom;return b},toString:function(){return[this.left,this.bottom,this.right,this.top].join(",")},toArray:function(a){return a===true?[this.bottom,this.left,this.top,this.right]:[this.left,this.bottom,this.right,this.top]},toBBOX:function(a,b){if(a==null)a=6;var c=Math.pow(10,a);a=Math.round(this.left*c)/c;var f=Math.round(this.bottom*c)/c,d=Math.round(this.right*c)/c;c=Math.round(this.top*c)/c;return b===true?f+","+a+
","+c+","+d:a+","+f+","+d+","+c},toGeometry:function(){return new OpenLayers.Geometry.Polygon([new OpenLayers.Geometry.LinearRing([new OpenLayers.Geometry.Point(this.left,this.bottom),new OpenLayers.Geometry.Point(this.right,this.bottom),new OpenLayers.Geometry.Point(this.right,this.top),new OpenLayers.Geometry.Point(this.left,this.top)])])},getWidth:function(){return this.right-this.left},getHeight:function(){return this.top-this.bottom},getSize:function(){return new OpenLayers.Size(this.getWidth(),
this.getHeight())},getCenterPixel:function(){return new OpenLayers.Pixel((this.left+this.right)/2,(this.bottom+this.top)/2)},getCenterLonLat:function(){if(!this.centerLonLat)this.centerLonLat=new OpenLayers.LonLat((this.left+this.right)/2,(this.bottom+this.top)/2);return this.centerLonLat},scale:function(a,b){if(b==null)b=this.getCenterLonLat();var c;if(b.CLASS_NAME=="OpenLayers.LonLat"){c=b.lon;b=b.lat}else{c=b.x;b=b.y}return new OpenLayers.Bounds((this.left-c)*a+c,(this.bottom-b)*a+b,(this.right-
c)*a+c,(this.top-b)*a+b)},add:function(a,b){if(a==null||b==null)throw new TypeError("Bounds.add cannot receive null values");return new OpenLayers.Bounds(this.left+a,this.bottom+b,this.right+a,this.top+b)},extend:function(a){var b=null;if(a){switch(a.CLASS_NAME){case "OpenLayers.LonLat":b=new OpenLayers.Bounds(a.lon,a.lat,a.lon,a.lat);break;case "OpenLayers.Geometry.Point":b=new OpenLayers.Bounds(a.x,a.y,a.x,a.y);break;case "OpenLayers.Bounds":b=a;break}if(b){this.centerLonLat=null;if(this.left==
null||b.left<this.left)this.left=b.left;if(this.bottom==null||b.bottom<this.bottom)this.bottom=b.bottom;if(this.right==null||b.right>this.right)this.right=b.right;if(this.top==null||b.top>this.top)this.top=b.top}}},containsLonLat:function(a,b){if(typeof b==="boolean")b={inclusive:b};b=b||{};var c=this.contains(a.lon,a.lat,b.inclusive),f=b.worldBounds;if(f&&!c){c=f.getWidth();f=Math.round((a.lon-(f.left+f.right)/2)/c);c=this.containsLonLat({lon:a.lon-f*c,lat:a.lat},{inclusive:b.inclusive})}return c},
containsPixel:function(a,b){return this.contains(a.x,a.y,b)},contains:function(a,b,c){if(c==null)c=true;if(a==null||b==null)return false;a=OpenLayers.Util.toFloat(a);b=OpenLayers.Util.toFloat(b);var f=false;return f=c?a>=this.left&&a<=this.right&&b>=this.bottom&&b<=this.top:a>this.left&&a<this.right&&b>this.bottom&&b<this.top},intersectsBounds:function(a,b){if(typeof b==="boolean")b={inclusive:b};b=b||{};if(b.worldBounds){var c=this.wrapDateLine(b.worldBounds);a=a.wrapDateLine(b.worldBounds)}else c=
this;if(b.inclusive==null)b.inclusive=true;var f=false,d=c.left==a.right||c.right==a.left||c.top==a.bottom||c.bottom==a.top;if(b.inclusive||!d){f=a.top>=c.bottom&&a.top<=c.top||c.top>a.bottom&&c.top<a.top;d=a.left>=c.left&&a.left<=c.right||c.left>=a.left&&c.left<=a.right;var e=a.right>=c.left&&a.right<=c.right||c.right>=a.left&&c.right<=a.right;f=(a.bottom>=c.bottom&&a.bottom<=c.top||c.bottom>=a.bottom&&c.bottom<=a.top||f)&&(d||e)}if(b.worldBounds&&!f){var g=b.worldBounds;d=g.getWidth();e=!g.containsBounds(c);
g=!g.containsBounds(a);if(e&&!g){a=a.add(-d,0);f=c.intersectsBounds(a,{inclusive:b.inclusive})}else if(g&&!e){c=c.add(-d,0);f=a.intersectsBounds(c,{inclusive:b.inclusive})}}return f},containsBounds:function(a,b,c){if(b==null)b=false;if(c==null)c=true;var f=this.contains(a.left,a.bottom,c),d=this.contains(a.right,a.bottom,c),e=this.contains(a.left,a.top,c);a=this.contains(a.right,a.top,c);return b?f||d||e||a:f&&d&&e&&a},determineQuadrant:function(a){var b="",c=this.getCenterLonLat();b+=a.lat<c.lat?
"b":"t";b+=a.lon<c.lon?"l":"r";return b},transform:function(a,b){this.centerLonLat=null;var c=OpenLayers.Projection.transform({x:this.left,y:this.bottom},a,b),f=OpenLayers.Projection.transform({x:this.right,y:this.bottom},a,b),d=OpenLayers.Projection.transform({x:this.left,y:this.top},a,b);a=OpenLayers.Projection.transform({x:this.right,y:this.top},a,b);this.left=Math.min(c.x,d.x);this.bottom=Math.min(c.y,f.y);this.right=Math.max(f.x,a.x);this.top=Math.max(d.y,a.y);return this},wrapDateLine:function(a,
b){b=b||{};var c=b.leftTolerance||0;b=b.rightTolerance||0;var f=this.clone();if(a){for(var d=a.getWidth();f.left<a.left&&f.right-b<=a.left;)f=f.add(d,0);for(;f.left+c>=a.right&&f.right>a.right;)f=f.add(-d,0);c=f.left+c;if(c<a.right&&c>a.left&&f.right-b>a.right)f=f.add(-d,0)}return f},CLASS_NAME:"OpenLayers.Bounds"});OpenLayers.Bounds.fromString=function(a,b){a=a.split(",");return OpenLayers.Bounds.fromArray(a,b)};
OpenLayers.Bounds.fromArray=function(a,b){return b===true?new OpenLayers.Bounds(a[1],a[0],a[3],a[2]):new OpenLayers.Bounds(a[0],a[1],a[2],a[3])};OpenLayers.Bounds.fromSize=function(a){return new OpenLayers.Bounds(0,a.h,a.w,0)};OpenLayers.Bounds.oppositeQuadrant=function(a){var b="";b+=a.charAt(0)=="t"?"b":"t";b+=a.charAt(1)=="l"?"r":"l";return b};
OpenLayers.Element={visible:function(a){return OpenLayers.Util.getElement(a).style.display!="none"},toggle:function(){for(var a=0,b=arguments.length;a<b;a++){var c=OpenLayers.Util.getElement(arguments[a]),f=OpenLayers.Element.visible(c)?"none":"";c.style.display=f}},remove:function(a){a=OpenLayers.Util.getElement(a);a.parentNode.removeChild(a)},getHeight:function(a){a=OpenLayers.Util.getElement(a);return a.offsetHeight},hasClass:function(a,b){a=a.className;return!!a&&(new RegExp("(^|\\s)"+b+"(\\s|$)")).test(a)},
addClass:function(a,b){OpenLayers.Element.hasClass(a,b)||(a.className+=(a.className?" ":"")+b);return a},removeClass:function(a,b){var c=a.className;if(c)a.className=OpenLayers.String.trim(c.replace(new RegExp("(^|\\s+)"+b+"(\\s+|$)")," "));return a},toggleClass:function(a,b){OpenLayers.Element.hasClass(a,b)?OpenLayers.Element.removeClass(a,b):OpenLayers.Element.addClass(a,b);return a},getStyle:function(a,b){a=OpenLayers.Util.getElement(a);var c=null;if(a&&a.style){c=a.style[OpenLayers.String.camelize(b)];
if(!c)if(document.defaultView&&document.defaultView.getComputedStyle)c=(c=document.defaultView.getComputedStyle(a,null))?c.getPropertyValue(b):null;else if(a.currentStyle)c=a.currentStyle[OpenLayers.String.camelize(b)];var f=["left","top","right","bottom"];if(window.opera&&OpenLayers.Util.indexOf(f,b)!=-1&&OpenLayers.Element.getStyle(a,"position")=="static")c="auto"}return c=="auto"?null:c}};
OpenLayers.LonLat=OpenLayers.Class({lon:0,lat:0,initialize:function(a,b){if(OpenLayers.Util.isArray(a)){b=a[1];a=a[0]}this.lon=OpenLayers.Util.toFloat(a);this.lat=OpenLayers.Util.toFloat(b)},toString:function(){return"lon="+this.lon+",lat="+this.lat},toShortString:function(){return this.lon+", "+this.lat},clone:function(){return new OpenLayers.LonLat(this.lon,this.lat)},add:function(a,b){if(a==null||b==null)throw new TypeError("LonLat.add cannot receive null values");return new OpenLayers.LonLat(this.lon+
OpenLayers.Util.toFloat(a),this.lat+OpenLayers.Util.toFloat(b))},equals:function(a){var b=false;if(a!=null)b=this.lon==a.lon&&this.lat==a.lat||isNaN(this.lon)&&isNaN(this.lat)&&isNaN(a.lon)&&isNaN(a.lat);return b},transform:function(a,b){a=OpenLayers.Projection.transform({x:this.lon,y:this.lat},a,b);this.lon=a.x;this.lat=a.y;return this},wrapDateLine:function(a){var b=this.clone();if(a){for(;b.lon<a.left;)b.lon+=a.getWidth();for(;b.lon>a.right;)b.lon-=a.getWidth()}return b},CLASS_NAME:"OpenLayers.LonLat"});
OpenLayers.LonLat.fromString=function(a){a=a.split(",");return new OpenLayers.LonLat(a[0],a[1])};OpenLayers.LonLat.fromArray=function(a){var b=OpenLayers.Util.isArray(a);return new OpenLayers.LonLat(b&&a[0],b&&a[1])};
OpenLayers.Pixel=OpenLayers.Class({x:0,y:0,initialize:function(a,b){this.x=parseFloat(a);this.y=parseFloat(b)},toString:function(){return"x="+this.x+",y="+this.y},clone:function(){return new OpenLayers.Pixel(this.x,this.y)},equals:function(a){var b=false;if(a!=null)b=this.x==a.x&&this.y==a.y||isNaN(this.x)&&isNaN(this.y)&&isNaN(a.x)&&isNaN(a.y);return b},distanceTo:function(a){return Math.sqrt(Math.pow(this.x-a.x,2)+Math.pow(this.y-a.y,2))},add:function(a,b){if(a==null||b==null)throw new TypeError("Pixel.add cannot receive null values");
return new OpenLayers.Pixel(this.x+a,this.y+b)},offset:function(a){var b=this.clone();if(a)b=this.add(a.x,a.y);return b},CLASS_NAME:"OpenLayers.Pixel"});
OpenLayers.Size=OpenLayers.Class({w:0,h:0,initialize:function(a,b){this.w=parseFloat(a);this.h=parseFloat(b)},toString:function(){return"w="+this.w+",h="+this.h},clone:function(){return new OpenLayers.Size(this.w,this.h)},equals:function(a){var b=false;if(a!=null)b=this.w==a.w&&this.h==a.h||isNaN(this.w)&&isNaN(this.h)&&isNaN(a.w)&&isNaN(a.h);return b},CLASS_NAME:"OpenLayers.Size"});
OpenLayers.Console={log:function(){},debug:function(){},info:function(){},warn:function(){},error:function(){},userError:function(a){alert(a)},assert:function(){},dir:function(){},dirxml:function(){},trace:function(){},group:function(){},groupEnd:function(){},time:function(){},timeEnd:function(){},profile:function(){},profileEnd:function(){},count:function(){},CLASS_NAME:"OpenLayers.Console"};
(function(){for(var a=document.getElementsByTagName("script"),b=0,c=a.length;b<c;++b)if(a[b].src.indexOf("firebug.js")!=-1)if(console){OpenLayers.Util.extend(OpenLayers.Console,console);break}})();
OpenLayers.Lang={code:null,defaultCode:"en",getCode:function(){OpenLayers.Lang.code||OpenLayers.Lang.setCode();return OpenLayers.Lang.code},setCode:function(a){var b;a||(a=OpenLayers.BROWSER_NAME=="msie"?navigator.userLanguage:navigator.language);a=a.split("-");a[0]=a[0].toLowerCase();if(typeof OpenLayers.Lang[a[0]]=="object")b=a[0];if(a[1]){var c=a[0]+"-"+a[1].toUpperCase();if(typeof OpenLayers.Lang[c]=="object")b=c}if(!b){OpenLayers.Console.warn("Failed to find OpenLayers.Lang."+a.join("-")+" dictionary, falling back to default language");
b=OpenLayers.Lang.defaultCode}OpenLayers.Lang.code=b},translate:function(a,b){var c=OpenLayers.Lang[OpenLayers.Lang.getCode()];(c=c&&c[a])||(c=a);if(b)c=OpenLayers.String.format(c,b);return c}};OpenLayers.i18n=OpenLayers.Lang.translate;OpenLayers.Util=OpenLayers.Util||{};OpenLayers.Util.getElement=function(){for(var a=[],b=0,c=arguments.length;b<c;b++){var f=arguments[b];if(typeof f=="string")f=document.getElementById(f);if(arguments.length==1)return f;a.push(f)}return a};
OpenLayers.Util.isElement=function(a){return!!(a&&a.nodeType===1)};OpenLayers.Util.isArray=function(a){return Object.prototype.toString.call(a)==="[object Array]"};if(typeof window.$==="undefined")window.$=OpenLayers.Util.getElement;OpenLayers.Util.removeItem=function(a,b){for(var c=a.length-1;c>=0;c--)a[c]==b&&a.splice(c,1);return a};OpenLayers.Util.indexOf=function(a,b){if(typeof a.indexOf=="function")return a.indexOf(b);else{for(var c=0,f=a.length;c<f;c++)if(a[c]==b)return c;return-1}};
OpenLayers.Util.modifyDOMElement=function(a,b,c,f,d,e,g,h){if(b)a.id=b;if(c){a.style.left=c.x+"px";a.style.top=c.y+"px"}if(f){a.style.width=f.w+"px";a.style.height=f.h+"px"}if(d)a.style.position=d;if(e)a.style.border=e;if(g)a.style.overflow=g;if(parseFloat(h)>=0&&parseFloat(h)<1){a.style.filter="alpha(opacity="+h*100+")";a.style.opacity=h}else if(parseFloat(h)==1){a.style.filter="";a.style.opacity=""}};
OpenLayers.Util.createDiv=function(a,b,c,f,d,e,g,h){var i=document.createElement("div");if(f)i.style.backgroundImage="url("+f+")";a||(a=OpenLayers.Util.createUniqueID("OpenLayersDiv"));d||(d="absolute");OpenLayers.Util.modifyDOMElement(i,a,b,c,d,e,g,h);return i};
OpenLayers.Util.createImage=function(a,b,c,f,d,e,g,h){var i=document.createElement("img");a||(a=OpenLayers.Util.createUniqueID("OpenLayersDiv"));d||(d="relative");OpenLayers.Util.modifyDOMElement(i,a,b,c,d,e,null,g);if(h){i.style.display="none";function j(){i.style.display="";OpenLayers.Event.stopObservingElement(i)}OpenLayers.Event.observe(i,"load",j);OpenLayers.Event.observe(i,"error",j)}i.style.alt=a;i.galleryImg="no";if(f)i.src=f;return i};OpenLayers.IMAGE_RELOAD_ATTEMPTS=0;
OpenLayers.Util.alphaHackNeeded=null;OpenLayers.Util.alphaHack=function(){if(OpenLayers.Util.alphaHackNeeded==null){var a=navigator.appVersion.split("MSIE");a=parseFloat(a[1]);var b=false;try{b=!!document.body.filters}catch(c){}OpenLayers.Util.alphaHackNeeded=b&&a>=5.5&&a<7}return OpenLayers.Util.alphaHackNeeded};
OpenLayers.Util.modifyAlphaImageDiv=function(a,b,c,f,d,e,g,h,i){OpenLayers.Util.modifyDOMElement(a,b,c,f,e,null,null,i);b=a.childNodes[0];if(d)b.src=d;OpenLayers.Util.modifyDOMElement(b,a.id+"_innerImage",null,f,"relative",g);if(OpenLayers.Util.alphaHack()){if(a.style.display!="none")a.style.display="inline-block";if(h==null)h="scale";a.style.filter="progid:DXImageTransform.Microsoft.AlphaImageLoader(src='"+b.src+"', sizingMethod='"+h+"')";if(parseFloat(a.style.opacity)>=0&&parseFloat(a.style.opacity)<
1)a.style.filter+=" alpha(opacity="+a.style.opacity*100+")";b.style.filter="alpha(opacity=0)"}};OpenLayers.Util.createAlphaImageDiv=function(a,b,c,f,d,e,g,h,i){var j=OpenLayers.Util.createDiv();i=OpenLayers.Util.createImage(null,null,null,null,null,null,null,i);i.className="olAlphaImg";j.appendChild(i);OpenLayers.Util.modifyAlphaImageDiv(j,a,b,c,f,d,e,g,h);return j};OpenLayers.Util.upperCaseObject=function(a){var b={};for(var c in a)b[c.toUpperCase()]=a[c];return b};
OpenLayers.Util.applyDefaults=function(a,b){a=a||{};var c=typeof window.Event=="function"&&b instanceof window.Event;for(var f in b)if(a[f]===undefined||!c&&b.hasOwnProperty&&b.hasOwnProperty(f)&&!a.hasOwnProperty(f))a[f]=b[f];if(!c&&b&&b.hasOwnProperty&&b.hasOwnProperty("toString")&&!a.hasOwnProperty("toString"))a.toString=b.toString;return a};
OpenLayers.Util.getParameterString=function(a){var b=[];for(var c in a){var f=a[c];if(f!=null&&typeof f!="function"){if(typeof f=="object"&&f.constructor==Array){for(var d=[],e,g=0,h=f.length;g<h;g++){e=f[g];d.push(encodeURIComponent(e===null||e===undefined?"":e))}f=d.join(",")}else f=encodeURIComponent(f);b.push(encodeURIComponent(c)+"="+f)}}return b.join("&")};OpenLayers.Util.urlAppend=function(a,b){var c=a;if(b){a=(a+" ").split(/[?&]/);c+=a.pop()===" "?b:a.length?"&"+b:"?"+b}return c};
OpenLayers.Util.getImagesLocation=function(){return OpenLayers.ImgPath||OpenLayers._getScriptLocation()+"img/"};OpenLayers.Util.getImageLocation=function(a){return OpenLayers.Util.getImagesLocation()+a};OpenLayers.Util.Try=function(){for(var a=null,b=0,c=arguments.length;b<c;b++){var f=arguments[b];try{a=f();break}catch(d){}}return a};
OpenLayers.Util.getXmlNodeValue=function(a){var b=null;OpenLayers.Util.Try(function(){b=a.text;if(!b)b=a.textContent;if(!b)b=a.firstChild.nodeValue},function(){b=a.textContent});return b};OpenLayers.Util.mouseLeft=function(a,b){for(a=a.relatedTarget?a.relatedTarget:a.toElement;a!=b&&a!=null;)a=a.parentNode;return a!=b};OpenLayers.Util.DEFAULT_PRECISION=14;OpenLayers.Util.toFloat=function(a,b){if(b==null)b=OpenLayers.Util.DEFAULT_PRECISION;if(typeof a!=="number")a=parseFloat(a);return b===0?a:parseFloat(a.toPrecision(b))};
OpenLayers.Util.rad=function(a){return a*Math.PI/180};OpenLayers.Util.deg=function(a){return a*180/Math.PI};OpenLayers.Util.VincentyConstants={a:6378137,b:6356752.3142,f:1/298.257223563};
OpenLayers.Util.distVincenty=function(a,b){var c=OpenLayers.Util.VincentyConstants,f=c.a,d=c.b;c=c.f;var e=OpenLayers.Util.rad(b.lon-a.lon);a=Math.atan((1-c)*Math.tan(OpenLayers.Util.rad(a.lat)));var g=Math.atan((1-c)*Math.tan(OpenLayers.Util.rad(b.lat)));b=Math.sin(a);a=Math.cos(a);var h=Math.sin(g);g=Math.cos(g);for(var i=e,j=2*Math.PI,l=20;Math.abs(i-j)>1.0E-12&&--l>0;){var k=Math.sin(i),m=Math.cos(i),n=Math.sqrt(g*k*g*k+(a*h-b*g*m)*(a*h-b*g*m));if(n==0)return 0;m=b*h+a*g*m;var q=Math.atan2(n,
m),p=Math.asin(a*g*k/n),o=Math.cos(p)*Math.cos(p);k=m-2*b*h/o;var t=c/16*o*(4+c*(4-3*o));j=i;i=e+(1-t)*c*Math.sin(p)*(q+t*n*(k+t*m*(-1+2*k*k)))}if(l==0)return NaN;f=o*(f*f-d*d)/(d*d);c=f/1024*(256+f*(-128+f*(74-47*f)));return(d*(1+f/16384*(4096+f*(-768+f*(320-175*f))))*(q-c*n*(k+c/4*(m*(-1+2*k*k)-c/6*k*(-3+4*n*n)*(-3+4*k*k))))).toFixed(3)/1E3};
OpenLayers.Util.destinationVincenty=function(a,b,c){var f=OpenLayers.Util,d=f.VincentyConstants,e=d.a,g=d.b,h=d.f;d=a.lon;a=a.lat;var i=f.rad(b);b=Math.sin(i);i=Math.cos(i);a=(1-h)*Math.tan(f.rad(a));var j=1/Math.sqrt(1+a*a),l=a*j,k=Math.atan2(a,i);a=j*b;var m=1-a*a;e=m*(e*e-g*g)/(g*g);var n=1+e/16384*(4096+e*(-768+e*(320-175*e))),q=e/1024*(256+e*(-128+e*(74-47*e)));e=c/(g*n);for(var p=2*Math.PI;Math.abs(e-p)>1.0E-12;){var o=Math.cos(2*k+e),t=Math.sin(e),u=Math.cos(e),s=q*t*(o+q/4*(u*(-1+2*o*o)-q/
6*o*(-3+4*t*t)*(-3+4*o*o)));p=e;e=c/(g*n)+s}c=l*t-j*u*i;g=Math.atan2(l*u+j*t*i,(1-h)*Math.sqrt(a*a+c*c));b=Math.atan2(t*b,j*u-l*t*i);i=h/16*m*(4+h*(4-3*m));o=b-(1-i)*h*a*(e+i*t*(o+i*u*(-1+2*o*o)));Math.atan2(a,-c);return new OpenLayers.LonLat(d+f.deg(o),f.deg(g))};
OpenLayers.Util.getParameters=function(a){a=a===null||a===undefined?window.location.href:a;var b="";if(OpenLayers.String.contains(a,"?")){b=a.indexOf("?")+1;var c=OpenLayers.String.contains(a,"#")?a.indexOf("#"):a.length;b=a.substring(b,c)}a={};b=b.split(/[&;]/);c=0;for(var f=b.length;c<f;++c){var d=b[c].split("=");if(d[0]){var e=d[0];try{e=decodeURIComponent(e)}catch(g){e=unescape(e)}d=(d[1]||"").replace(/\+/g," ");try{d=decodeURIComponent(d)}catch(h){d=unescape(d)}d=d.split(",");if(d.length==1)d=
d[0];a[e]=d}}return a};OpenLayers.Util.lastSeqID=0;OpenLayers.Util.createUniqueID=function(a){if(a==null)a="id_";OpenLayers.Util.lastSeqID+=1;return a+OpenLayers.Util.lastSeqID};OpenLayers.INCHES_PER_UNIT={inches:1,ft:12,mi:63360,m:39.3701,km:39370.1,dd:4374754,yd:36};OpenLayers.INCHES_PER_UNIT["in"]=OpenLayers.INCHES_PER_UNIT.inches;OpenLayers.INCHES_PER_UNIT.degrees=OpenLayers.INCHES_PER_UNIT.dd;OpenLayers.INCHES_PER_UNIT.nmi=1852*OpenLayers.INCHES_PER_UNIT.m;OpenLayers.METERS_PER_INCH=0.0254000508001016;
OpenLayers.Util.extend(OpenLayers.INCHES_PER_UNIT,{Inch:OpenLayers.INCHES_PER_UNIT.inches,Meter:1/OpenLayers.METERS_PER_INCH,Foot:0.3048006096012192/OpenLayers.METERS_PER_INCH,IFoot:0.3048/OpenLayers.METERS_PER_INCH,ClarkeFoot:0.3047972651151/OpenLayers.METERS_PER_INCH,SearsFoot:0.30479947153867626/OpenLayers.METERS_PER_INCH,GoldCoastFoot:0.3047997101815088/OpenLayers.METERS_PER_INCH,IInch:0.0254/OpenLayers.METERS_PER_INCH,MicroInch:2.54E-5/OpenLayers.METERS_PER_INCH,Mil:2.54E-8/OpenLayers.METERS_PER_INCH,
Centimeter:0.01/OpenLayers.METERS_PER_INCH,Kilometer:1E3/OpenLayers.METERS_PER_INCH,Yard:0.9144018288036576/OpenLayers.METERS_PER_INCH,SearsYard:0.914398414616029/OpenLayers.METERS_PER_INCH,IndianYard:0.9143985307444408/OpenLayers.METERS_PER_INCH,IndianYd37:0.91439523/OpenLayers.METERS_PER_INCH,IndianYd62:0.9143988/OpenLayers.METERS_PER_INCH,IndianYd75:0.9143985/OpenLayers.METERS_PER_INCH,IndianFoot:0.30479951/OpenLayers.METERS_PER_INCH,IndianFt37:0.30479841/OpenLayers.METERS_PER_INCH,IndianFt62:0.3047996/
OpenLayers.METERS_PER_INCH,IndianFt75:0.3047995/OpenLayers.METERS_PER_INCH,Mile:1609.3472186944373/OpenLayers.METERS_PER_INCH,IYard:0.9144/OpenLayers.METERS_PER_INCH,IMile:1609.344/OpenLayers.METERS_PER_INCH,NautM:1852/OpenLayers.METERS_PER_INCH,"Lat-66":110943.31648893273/OpenLayers.METERS_PER_INCH,"Lat-83":110946.25736872235/OpenLayers.METERS_PER_INCH,Decimeter:0.1/OpenLayers.METERS_PER_INCH,Millimeter:0.001/OpenLayers.METERS_PER_INCH,Dekameter:10/OpenLayers.METERS_PER_INCH,Decameter:10/OpenLayers.METERS_PER_INCH,
Hectometer:100/OpenLayers.METERS_PER_INCH,GermanMeter:1.0000135965/OpenLayers.METERS_PER_INCH,CaGrid:0.999738/OpenLayers.METERS_PER_INCH,ClarkeChain:20.1166194976/OpenLayers.METERS_PER_INCH,GunterChain:20.11684023368047/OpenLayers.METERS_PER_INCH,BenoitChain:20.116782494375872/OpenLayers.METERS_PER_INCH,SearsChain:20.11676512155/OpenLayers.METERS_PER_INCH,ClarkeLink:0.201166194976/OpenLayers.METERS_PER_INCH,GunterLink:0.2011684023368047/OpenLayers.METERS_PER_INCH,BenoitLink:0.20116782494375873/OpenLayers.METERS_PER_INCH,
SearsLink:0.2011676512155/OpenLayers.METERS_PER_INCH,Rod:5.02921005842012/OpenLayers.METERS_PER_INCH,IntnlChain:20.1168/OpenLayers.METERS_PER_INCH,IntnlLink:0.201168/OpenLayers.METERS_PER_INCH,Perch:5.02921005842012/OpenLayers.METERS_PER_INCH,Pole:5.02921005842012/OpenLayers.METERS_PER_INCH,Furlong:201.1684023368046/OpenLayers.METERS_PER_INCH,Rood:3.778266898/OpenLayers.METERS_PER_INCH,CapeFoot:0.3047972615/OpenLayers.METERS_PER_INCH,Brealey:375/OpenLayers.METERS_PER_INCH,ModAmFt:0.304812252984506/
OpenLayers.METERS_PER_INCH,Fathom:1.8288/OpenLayers.METERS_PER_INCH,"NautM-UK":1853.184/OpenLayers.METERS_PER_INCH,"50kilometers":5E4/OpenLayers.METERS_PER_INCH,"150kilometers":15E4/OpenLayers.METERS_PER_INCH});
OpenLayers.Util.extend(OpenLayers.INCHES_PER_UNIT,{mm:OpenLayers.INCHES_PER_UNIT.Meter/1E3,cm:OpenLayers.INCHES_PER_UNIT.Meter/100,dm:OpenLayers.INCHES_PER_UNIT.Meter*100,km:OpenLayers.INCHES_PER_UNIT.Meter*1E3,kmi:OpenLayers.INCHES_PER_UNIT.nmi,fath:OpenLayers.INCHES_PER_UNIT.Fathom,ch:OpenLayers.INCHES_PER_UNIT.IntnlChain,link:OpenLayers.INCHES_PER_UNIT.IntnlLink,"us-in":OpenLayers.INCHES_PER_UNIT.inches,"us-ft":OpenLayers.INCHES_PER_UNIT.Foot,"us-yd":OpenLayers.INCHES_PER_UNIT.Yard,"us-ch":OpenLayers.INCHES_PER_UNIT.GunterChain,
"us-mi":OpenLayers.INCHES_PER_UNIT.Mile,"ind-yd":OpenLayers.INCHES_PER_UNIT.IndianYd37,"ind-ft":OpenLayers.INCHES_PER_UNIT.IndianFt37,"ind-ch":20.11669506/OpenLayers.METERS_PER_INCH});OpenLayers.DOTS_PER_INCH=72;OpenLayers.Util.normalizeScale=function(a){return a>1?1/a:a};OpenLayers.Util.getResolutionFromScale=function(a,b){var c;if(a){if(b==null)b="degrees";c=1/(OpenLayers.Util.normalizeScale(a)*OpenLayers.INCHES_PER_UNIT[b]*OpenLayers.DOTS_PER_INCH)}return c};
OpenLayers.Util.getScaleFromResolution=function(a,b){if(b==null)b="degrees";return a*OpenLayers.INCHES_PER_UNIT[b]*OpenLayers.DOTS_PER_INCH};
OpenLayers.Util.pagePosition=function(a){var b=[0,0],c=OpenLayers.Util.getViewportElement();if(!a||a==window||a==c)return b;var f=OpenLayers.IS_GECKO&&document.getBoxObjectFor&&OpenLayers.Element.getStyle(a,"position")=="absolute"&&(a.style.top==""||a.style.left==""),d=null;if(a.getBoundingClientRect){a=a.getBoundingClientRect();d=c.scrollTop;b[0]=a.left+c.scrollLeft;b[1]=a.top+d}else if(document.getBoxObjectFor&&!f){a=document.getBoxObjectFor(a);c=document.getBoxObjectFor(c);b[0]=a.screenX-c.screenX;
b[1]=a.screenY-c.screenY}else{b[0]=a.offsetLeft;b[1]=a.offsetTop;d=a.offsetParent;if(d!=a)for(;d;){b[0]+=d.offsetLeft;b[1]+=d.offsetTop;d=d.offsetParent}c=OpenLayers.BROWSER_NAME;if(c=="opera"||c=="safari"&&OpenLayers.Element.getStyle(a,"position")=="absolute")b[1]-=document.body.offsetTop;for(d=a.offsetParent;d&&d!=document.body;){b[0]-=d.scrollLeft;if(c!="opera"||d.tagName!="TR")b[1]-=d.scrollTop;d=d.offsetParent}}return b};
OpenLayers.Util.getViewportElement=function(){var a=arguments.callee.viewportElement;if(a==undefined){a=OpenLayers.BROWSER_NAME=="msie"&&document.compatMode!="CSS1Compat"?document.body:document.documentElement;arguments.callee.viewportElement=a}return a};
OpenLayers.Util.isEquivalentUrl=function(a,b,c){c=c||{};OpenLayers.Util.applyDefaults(c,{ignoreCase:true,ignorePort80:true,ignoreHash:true});a=OpenLayers.Util.createUrlObject(a,c);b=OpenLayers.Util.createUrlObject(b,c);for(var f in a)if(f!=="args")if(a[f]!=b[f])return false;for(f in a.args){if(a.args[f]!=b.args[f])return false;delete b.args[f]}for(f in b.args)return false;return true};
OpenLayers.Util.createUrlObject=function(a,b){b=b||{};if(!/^\w+:\/\//.test(a)){var c=window.location,f=c.port?":"+c.port:"";f=c.protocol+"//"+c.host.split(":").shift()+f;if(a.indexOf("/")===0)a=f+a;else{c=c.pathname.split("/");c.pop();a=f+c.join("/")+"/"+a}}if(b.ignoreCase)a=a.toLowerCase();c=document.createElement("a");c.href=a;f={};f.host=c.host.split(":").shift();f.protocol=c.protocol;f.port=b.ignorePort80?c.port=="80"||c.port=="0"?"":c.port:c.port==""||c.port=="0"?"80":c.port;f.hash=b.ignoreHash||
c.hash==="#"?"":c.hash;b=c.search;if(!b){b=a.indexOf("?");b=b!=-1?a.substr(b):""}f.args=OpenLayers.Util.getParameters(b);f.pathname=c.pathname.charAt(0)=="/"?c.pathname:"/"+c.pathname;return f};OpenLayers.Util.removeTail=function(a){var b=null;b=a.indexOf("?");var c=a.indexOf("#");return b=b==-1?c!=-1?a.substr(0,c):a:c!=-1?a.substr(0,Math.min(b,c)):a.substr(0,b)};OpenLayers.IS_GECKO=function(){var a=navigator.userAgent.toLowerCase();return a.indexOf("webkit")==-1&&a.indexOf("gecko")!=-1}();
OpenLayers.CANVAS_SUPPORTED=function(){var a=document.createElement("canvas");return!!(a.getContext&&a.getContext("2d"))}();OpenLayers.BROWSER_NAME=function(){var a="",b=navigator.userAgent.toLowerCase();if(b.indexOf("opera")!=-1)a="opera";else if(b.indexOf("msie")!=-1)a="msie";else if(b.indexOf("safari")!=-1)a="safari";else if(b.indexOf("mozilla")!=-1)a=b.indexOf("firefox")!=-1?"firefox":"mozilla";return a}();OpenLayers.Util.getBrowserName=function(){return OpenLayers.BROWSER_NAME};
OpenLayers.Util.getRenderedDimensions=function(a,b,c){var f,d,e=document.createElement("div");e.style.visibility="hidden";for(var g=c&&c.containerElement?c.containerElement:document.body,h=false,i=null,j=g;j&&j.tagName.toLowerCase()!="body";){var l=OpenLayers.Element.getStyle(j,"position");if(l=="absolute"){h=true;break}else if(l&&l!="static")break;j=j.parentNode}if(h&&(g.clientHeight===0||g.clientWidth===0)){i=document.createElement("div");i.style.visibility="hidden";i.style.position="absolute";
i.style.overflow="visible";i.style.width=document.body.clientWidth+"px";i.style.height=document.body.clientHeight+"px";i.appendChild(e)}e.style.position="absolute";if(b)if(b.w){f=b.w;e.style.width=f+"px"}else if(b.h){d=b.h;e.style.height=d+"px"}if(c&&c.displayClass)e.className=c.displayClass;b=document.createElement("div");b.innerHTML=a;b.style.overflow="visible";if(b.childNodes){a=0;for(c=b.childNodes.length;a<c;a++)if(b.childNodes[a].style)b.childNodes[a].style.overflow="visible"}e.appendChild(b);
i?g.appendChild(i):g.appendChild(e);if(!f){f=parseInt(b.scrollWidth);e.style.width=f+"px"}d||(d=parseInt(b.scrollHeight));e.removeChild(b);if(i){i.removeChild(e);g.removeChild(i)}else g.removeChild(e);return new OpenLayers.Size(f,d)};
OpenLayers.Util.getScrollbarWidth=function(){var a=OpenLayers.Util._scrollbarWidth;if(a==null){var b=null,c=null;b=a=0;b=document.createElement("div");b.style.position="absolute";b.style.top="-1000px";b.style.left="-1000px";b.style.width="100px";b.style.height="50px";b.style.overflow="hidden";c=document.createElement("div");c.style.width="100%";c.style.height="200px";b.appendChild(c);document.body.appendChild(b);a=c.offsetWidth;b.style.overflow="scroll";b=c.offsetWidth;document.body.removeChild(document.body.lastChild);
OpenLayers.Util._scrollbarWidth=a-b;a=OpenLayers.Util._scrollbarWidth}return a};
OpenLayers.Util.getFormattedLonLat=function(a,b,c){c||(c="dms");a=(a+540)%360-180;var f=Math.abs(a),d=Math.floor(f),e=f=(f-d)/(1/60);f=Math.floor(f);e=(e-f)/(1/60);e=Math.round(e*10);e/=10;if(e>=60){e-=60;f+=1;if(f>=60){f-=60;d+=1}}if(d<10)d="0"+d;d=d+"\u00b0";if(c.indexOf("dm")>=0){if(f<10)f="0"+f;d+=f+"'";if(c.indexOf("dms")>=0){if(e<10)e="0"+e;d+=e+'"'}}d+=b=="lon"?a<0?OpenLayers.i18n("W"):OpenLayers.i18n("E"):a<0?OpenLayers.i18n("S"):OpenLayers.i18n("N");return d};
OpenLayers.Event={observers:false,KEY_SPACE:32,KEY_BACKSPACE:8,KEY_TAB:9,KEY_RETURN:13,KEY_ESC:27,KEY_LEFT:37,KEY_UP:38,KEY_RIGHT:39,KEY_DOWN:40,KEY_DELETE:46,element:function(a){return a.target||a.srcElement},isSingleTouch:function(a){return a.touches&&a.touches.length==1},isMultiTouch:function(a){return a.touches&&a.touches.length>1},isLeftClick:function(a){return a.which&&a.which==1||a.button&&a.button==1},isRightClick:function(a){return a.which&&a.which==3||a.button&&a.button==2},stop:function(a,
b){if(!b)if(a.preventDefault)a.preventDefault();else a.returnValue=false;if(a.stopPropagation)a.stopPropagation();else a.cancelBubble=true},findElement:function(a,b){for(a=OpenLayers.Event.element(a);a.parentNode&&(!a.tagName||a.tagName.toUpperCase()!=b.toUpperCase());)a=a.parentNode;return a},observe:function(a,b,c,f){a=OpenLayers.Util.getElement(a);f=f||false;if(b=="keypress"&&(navigator.appVersion.match(/Konqueror|Safari|KHTML/)||a.attachEvent))b="keydown";if(!this.observers)this.observers={};
if(!a._eventCacheID){var d="eventCacheID_";if(a.id)d=a.id+"_"+d;a._eventCacheID=OpenLayers.Util.createUniqueID(d)}d=a._eventCacheID;this.observers[d]||(this.observers[d]=[]);this.observers[d].push({element:a,name:b,observer:c,useCapture:f});if(a.addEventListener)a.addEventListener(b,c,f);else a.attachEvent&&a.attachEvent("on"+b,c)},stopObservingElement:function(a){a=OpenLayers.Util.getElement(a)._eventCacheID;this._removeElementObservers(OpenLayers.Event.observers[a])},_removeElementObservers:function(a){if(a)for(var b=
a.length-1;b>=0;b--){var c=a[b];OpenLayers.Event.stopObserving.apply(this,new Array(c.element,c.name,c.observer,c.useCapture))}},stopObserving:function(a,b,c,f){f=f||false;a=OpenLayers.Util.getElement(a);var d=a._eventCacheID;if(b=="keypress")if(navigator.appVersion.match(/Konqueror|Safari|KHTML/)||a.detachEvent)b="keydown";var e=false,g=OpenLayers.Event.observers[d];if(g)for(var h=0;!e&&h<g.length;){var i=g[h];if(i.name==b&&i.observer==c&&i.useCapture==f){g.splice(h,1);g.length==0&&delete OpenLayers.Event.observers[d];
e=true;break}h++}if(e)if(a.removeEventListener)a.removeEventListener(b,c,f);else a&&a.detachEvent&&a.detachEvent("on"+b,c);return e},unloadCache:function(){if(OpenLayers.Event&&OpenLayers.Event.observers){for(var a in OpenLayers.Event.observers)OpenLayers.Event._removeElementObservers.apply(this,[OpenLayers.Event.observers[a]]);OpenLayers.Event.observers=false}},CLASS_NAME:"OpenLayers.Event"};OpenLayers.Event.observe(window,"unload",OpenLayers.Event.unloadCache,false);
OpenLayers.Events=OpenLayers.Class({BROWSER_EVENTS:["mouseover","mouseout","mousedown","mouseup","mousemove","click","dblclick","rightclick","dblrightclick","resize","focus","blur","touchstart","touchmove","touchend","keydown"],listeners:null,object:null,element:null,eventHandler:null,fallThrough:null,includeXY:false,extensions:null,extensionCount:null,clearMouseListener:null,initialize:function(a,b,c,f,d){OpenLayers.Util.extend(this,d);this.object=a;this.fallThrough=f;this.listeners={};this.extensions=
{};this.extensionCount={};b!=null&&this.attachToElement(b)},destroy:function(){for(var a in this.extensions)typeof this.extensions[a]!=="boolean"&&this.extensions[a].destroy();this.extensions=null;if(this.element){OpenLayers.Event.stopObservingElement(this.element);this.element.hasScrollEvent&&OpenLayers.Event.stopObserving(window,"scroll",this.clearMouseListener)}this.eventHandler=this.fallThrough=this.object=this.listeners=this.element=null},addEventType:function(){},attachToElement:function(a){if(this.element)OpenLayers.Event.stopObservingElement(this.element);
else{this.eventHandler=OpenLayers.Function.bindAsEventListener(this.handleBrowserEvent,this);this.clearMouseListener=OpenLayers.Function.bind(this.clearMouseCache,this)}this.element=a;for(var b=0,c=this.BROWSER_EVENTS.length;b<c;b++)OpenLayers.Event.observe(a,this.BROWSER_EVENTS[b],this.eventHandler);OpenLayers.Event.observe(a,"dragstart",OpenLayers.Event.stop)},on:function(a){for(var b in a)b!="scope"&&a.hasOwnProperty(b)&&this.register(b,a.scope,a[b])},register:function(a,b,c,f){if(a in OpenLayers.Events&&
!this.extensions[a])this.extensions[a]=new OpenLayers.Events[a](this);if(c!=null){if(b==null)b=this.object;var d=this.listeners[a];if(!d){d=[];this.listeners[a]=d;this.extensionCount[a]=0}b={obj:b,func:c};if(f){d.splice(this.extensionCount[a],0,b);typeof f==="object"&&f.extension&&this.extensionCount[a]++}else d.push(b)}},registerPriority:function(a,b,c){this.register(a,b,c,true)},un:function(a){for(var b in a)b!="scope"&&a.hasOwnProperty(b)&&this.unregister(b,a.scope,a[b])},unregister:function(a,
b,c){if(b==null)b=this.object;a=this.listeners[a];if(a!=null)for(var f=0,d=a.length;f<d;f++)if(a[f].obj==b&&a[f].func==c){a.splice(f,1);break}},remove:function(a){if(this.listeners[a]!=null)this.listeners[a]=[]},triggerEvent:function(a,b){var c=this.listeners[a];if(!(!c||c.length==0)){if(b==null)b={};b.object=this.object;b.element=this.element;if(!b.type)b.type=a;c=c.slice();var f;a=0;for(var d=c.length;a<d;a++){f=c[a];f=f.func.apply(f.obj,[b]);if(f!=undefined&&f==false)break}this.fallThrough||OpenLayers.Event.stop(b,
true);return f}},handleBrowserEvent:function(a){var b=a.type,c=this.listeners[b];if(!(!c||c.length==0)){if((c=a.touches)&&c[0]){for(var f=0,d=0,e=c.length,g,h=0;h<e;++h){g=c[h];f+=g.clientX;d+=g.clientY}a.clientX=f/e;a.clientY=d/e}if(this.includeXY)a.xy=this.getMousePosition(a);this.triggerEvent(b,a)}},clearMouseCache:function(){this.element.scrolls=null;this.element.lefttop=null;var a=document.body;if(a&&!((a.scrollTop!=0||a.scrollLeft!=0)&&navigator.userAgent.match(/iPhone/i)))this.element.offsets=
null},getMousePosition:function(a){if(this.includeXY){if(!this.element.hasScrollEvent){OpenLayers.Event.observe(window,"scroll",this.clearMouseListener);this.element.hasScrollEvent=true}}else this.clearMouseCache();if(!this.element.scrolls){var b=OpenLayers.Util.getViewportElement();this.element.scrolls=[b.scrollLeft,b.scrollTop]}if(!this.element.lefttop)this.element.lefttop=[document.documentElement.clientLeft||0,document.documentElement.clientTop||0];if(!this.element.offsets)this.element.offsets=
OpenLayers.Util.pagePosition(this.element);return new OpenLayers.Pixel(a.clientX+this.element.scrolls[0]-this.element.offsets[0]-this.element.lefttop[0],a.clientY+this.element.scrolls[1]-this.element.offsets[1]-this.element.lefttop[1])},CLASS_NAME:"OpenLayers.Events"});
OpenLayers.Projection=OpenLayers.Class({proj:null,projCode:null,titleRegEx:/\+title=[^\+]*/,initialize:function(a,b){OpenLayers.Util.extend(this,b);this.projCode=a;if(window.Proj4js)this.proj=new Proj4js.Proj(a)},getCode:function(){return this.proj?this.proj.srsCode:this.projCode},getUnits:function(){return this.proj?this.proj.units:null},toString:function(){return this.getCode()},equals:function(a){a=a;var b=false;if(a){a instanceof OpenLayers.Projection||(a=new OpenLayers.Projection(a));if(window.Proj4js&&
this.proj.defData&&a.proj.defData)b=this.proj.defData.replace(this.titleRegEx,"")==a.proj.defData.replace(this.titleRegEx,"");else if(a.getCode){b=this.getCode();a=a.getCode();b=b==a||!!OpenLayers.Projection.transforms[b]&&OpenLayers.Projection.transforms[b][a]===OpenLayers.Projection.nullTransform}}return b},destroy:function(){delete this.proj;delete this.projCode},CLASS_NAME:"OpenLayers.Projection"});OpenLayers.Projection.transforms={};
OpenLayers.Projection.defaults={"EPSG:4326":{units:"degrees",maxExtent:[-180,-90,180,90],yx:true},"CRS:84":{units:"degrees",maxExtent:[-180,-90,180,90]},"EPSG:900913":{units:"m",maxExtent:[-2.003750834E7,-2.003750834E7,2.003750834E7,2.003750834E7]}};
OpenLayers.Projection.addTransform=function(a,b,c){if(c===OpenLayers.Projection.nullTransform){var f=OpenLayers.Projection.defaults[a];if(f&&!OpenLayers.Projection.defaults[b])OpenLayers.Projection.defaults[b]=f}OpenLayers.Projection.transforms[a]||(OpenLayers.Projection.transforms[a]={});OpenLayers.Projection.transforms[a][b]=c};
OpenLayers.Projection.transform=function(a,b,c){if(b&&c){b instanceof OpenLayers.Projection||(b=new OpenLayers.Projection(b));c instanceof OpenLayers.Projection||(c=new OpenLayers.Projection(c));if(b.proj&&c.proj)a=Proj4js.transform(b.proj,c.proj,a);else{b=b.getCode();c=c.getCode();var f=OpenLayers.Projection.transforms;f[b]&&f[b][c]&&f[b][c](a)}}return a};OpenLayers.Projection.nullTransform=function(a){return a};
(function(){function a(h){h.x=180*h.x/f;h.y=180/Math.PI*(2*Math.atan(Math.exp(h.y/f*Math.PI))-Math.PI/2);return h}function b(h){h.x=h.x*f/180;h.y=Math.log(Math.tan((90+h.y)*Math.PI/360))/Math.PI*f;return h}function c(h,i){var j=OpenLayers.Projection.addTransform,l=OpenLayers.Projection.nullTransform,k,m,n,q,p;k=0;for(m=i.length;k<m;++k){n=i[k];j(h,n,b);j(n,h,a);for(p=k+1;p<m;++p){q=i[p];j(n,q,l);j(q,n,l)}}}var f=2.003750834E7,d=["EPSG:900913","EPSG:3857","EPSG:102113","EPSG:102100"],e=["CRS:84","urn:ogc:def:crs:EPSG:6.6:4326",
"EPSG:4326"],g;for(g=d.length-1;g>=0;--g)c(d[g],e);for(g=e.length-1;g>=0;--g)c(e[g],d)})();
OpenLayers.Map=OpenLayers.Class({Z_INDEX_BASE:{BaseLayer:100,Overlay:325,Feature:725,Popup:750,Control:1E3},id:null,fractionalZoom:false,events:null,allOverlays:false,div:null,dragging:false,size:null,viewPortDiv:null,layerContainerOrigin:null,layerContainerDiv:null,layers:null,controls:null,popups:null,baseLayer:null,center:null,resolution:null,zoom:0,panRatio:1.5,options:null,tileSize:null,projection:"EPSG:4326",units:null,resolutions:null,maxResolution:null,minResolution:null,maxScale:null,minScale:null,
maxExtent:null,minExtent:null,restrictedExtent:null,numZoomLevels:16,theme:null,displayProjection:null,fallThrough:true,panTween:null,eventListeners:null,panMethod:OpenLayers.Easing.Expo.easeOut,panDuration:50,paddingForPopups:null,minPx:null,maxPx:null,initialize:function(a,b){if(arguments.length===1&&typeof a==="object")a=(b=a)&&b.div;this.tileSize=new OpenLayers.Size(OpenLayers.Map.TILE_WIDTH,OpenLayers.Map.TILE_HEIGHT);this.paddingForPopups=new OpenLayers.Bounds(15,15,15,15);this.theme=OpenLayers._getScriptLocation()+
"theme/default/style.css";this.options=OpenLayers.Util.extend({},b);OpenLayers.Util.extend(this,b);OpenLayers.Util.applyDefaults(this,OpenLayers.Projection.defaults[this.projection instanceof OpenLayers.Projection?this.projection.projCode:this.projection]);if(this.maxExtent&&!(this.maxExtent instanceof OpenLayers.Bounds))this.maxExtent=new OpenLayers.Bounds(this.maxExtent);if(this.minExtent&&!(this.minExtent instanceof OpenLayers.Bounds))this.minExtent=new OpenLayers.Bounds(this.minExtent);if(this.restrictedExtent&&
!(this.restrictedExtent instanceof OpenLayers.Bounds))this.restrictedExtent=new OpenLayers.Bounds(this.restrictedExtent);if(this.center&&!(this.center instanceof OpenLayers.LonLat))this.center=new OpenLayers.LonLat(this.center);this.layers=[];this.id=OpenLayers.Util.createUniqueID("OpenLayers.Map_");this.div=OpenLayers.Util.getElement(a);if(!this.div){this.div=document.createElement("div");this.div.style.height="1px";this.div.style.width="1px"}OpenLayers.Element.addClass(this.div,"olMap");var c=this.id+
"_OpenLayers_ViewPort";this.viewPortDiv=OpenLayers.Util.createDiv(c,null,null,null,"relative",null,"hidden");this.viewPortDiv.style.width="100%";this.viewPortDiv.style.height="100%";this.viewPortDiv.className="olMapViewport";this.div.appendChild(this.viewPortDiv);this.events=new OpenLayers.Events(this,this.viewPortDiv,null,this.fallThrough,{includeXY:true});c=this.id+"_OpenLayers_Container";this.layerContainerDiv=OpenLayers.Util.createDiv(c);this.layerContainerDiv.style.width="100px";this.layerContainerDiv.style.height=
"100px";this.layerContainerDiv.style.zIndex=this.Z_INDEX_BASE.Popup-1;this.viewPortDiv.appendChild(this.layerContainerDiv);this.updateSize();this.eventListeners instanceof Object&&this.events.on(this.eventListeners);if(parseFloat(navigator.appVersion.split("MSIE")[1])<9)this.events.register("resize",this,this.updateSize);else{this.updateSizeDestroy=OpenLayers.Function.bind(this.updateSize,this);OpenLayers.Event.observe(window,"resize",this.updateSizeDestroy)}if(this.theme){c=true;for(var f=document.getElementsByTagName("link"),
d=0,e=f.length;d<e;++d)if(OpenLayers.Util.isEquivalentUrl(f.item(d).href,this.theme)){c=false;break}if(c){c=document.createElement("link");c.setAttribute("rel","stylesheet");c.setAttribute("type","text/css");c.setAttribute("href",this.theme);document.getElementsByTagName("head")[0].appendChild(c)}}if(this.controls==null){this.controls=[];if(OpenLayers.Control!=null){if(OpenLayers.Control.Navigation)this.controls.push(new OpenLayers.Control.Navigation);else OpenLayers.Control.TouchNavigation&&this.controls.push(new OpenLayers.Control.TouchNavigation);
if(OpenLayers.Control.Zoom)this.controls.push(new OpenLayers.Control.Zoom);else OpenLayers.Control.PanZoom&&this.controls.push(new OpenLayers.Control.PanZoom);OpenLayers.Control.ArgParser&&this.controls.push(new OpenLayers.Control.ArgParser);OpenLayers.Control.Attribution&&this.controls.push(new OpenLayers.Control.Attribution)}}d=0;for(e=this.controls.length;d<e;d++)this.addControlToMap(this.controls[d]);this.popups=[];this.unloadDestroy=OpenLayers.Function.bind(this.destroy,this);OpenLayers.Event.observe(window,
"unload",this.unloadDestroy);if(b&&b.layers){delete this.center;this.addLayers(b.layers);b.center&&!this.getCenter()&&this.setCenter(b.center,b.zoom)}},getViewport:function(){return this.viewPortDiv},render:function(a){this.div=OpenLayers.Util.getElement(a);OpenLayers.Element.addClass(this.div,"olMap");this.viewPortDiv.parentNode.removeChild(this.viewPortDiv);this.div.appendChild(this.viewPortDiv);this.updateSize()},unloadDestroy:null,updateSizeDestroy:null,destroy:function(){if(!this.unloadDestroy)return false;
if(this.panTween){this.panTween.stop();this.panTween=null}OpenLayers.Event.stopObserving(window,"unload",this.unloadDestroy);this.unloadDestroy=null;this.updateSizeDestroy?OpenLayers.Event.stopObserving(window,"resize",this.updateSizeDestroy):this.events.unregister("resize",this,this.updateSize);this.paddingForPopups=null;if(this.controls!=null){for(var a=this.controls.length-1;a>=0;--a)this.controls[a].destroy();this.controls=null}if(this.layers!=null){for(a=this.layers.length-1;a>=0;--a)this.layers[a].destroy(false);
this.layers=null}this.viewPortDiv&&this.div.removeChild(this.viewPortDiv);this.viewPortDiv=null;if(this.eventListeners){this.events.un(this.eventListeners);this.eventListeners=null}this.events.destroy();this.options=this.events=null},setOptions:function(a){var b=this.minPx&&a.restrictedExtent!=this.restrictedExtent;OpenLayers.Util.extend(this,a);b&&this.moveTo(this.getCachedCenter(),this.zoom,{forceZoomChange:true})},getTileSize:function(){return this.tileSize},getBy:function(a,b,c){var f=typeof c.test==
"function";return OpenLayers.Array.filter(this[a],function(d){return d[b]==c||f&&c.test(d[b])})},getLayersBy:function(a,b){return this.getBy("layers",a,b)},getLayersByName:function(a){return this.getLayersBy("name",a)},getLayersByClass:function(a){return this.getLayersBy("CLASS_NAME",a)},getControlsBy:function(a,b){return this.getBy("controls",a,b)},getControlsByClass:function(a){return this.getControlsBy("CLASS_NAME",a)},getLayer:function(a){for(var b=null,c=0,f=this.layers.length;c<f;c++){var d=
this.layers[c];if(d.id==a){b=d;break}}return b},setLayerZIndex:function(a,b){a.setZIndex(this.Z_INDEX_BASE[a.isBaseLayer?"BaseLayer":"Overlay"]+b*5)},resetLayersZIndex:function(){for(var a=0,b=this.layers.length;a<b;a++)this.setLayerZIndex(this.layers[a],a)},addLayer:function(a){for(var b=0,c=this.layers.length;b<c;b++)if(this.layers[b]==a)return false;if(this.events.triggerEvent("preaddlayer",{layer:a})===false)return false;if(this.allOverlays)a.isBaseLayer=false;a.div.className="olLayerDiv";a.div.style.overflow=
"";this.setLayerZIndex(a,this.layers.length);a.isFixed?this.viewPortDiv.appendChild(a.div):this.layerContainerDiv.appendChild(a.div);this.layers.push(a);a.setMap(this);if(a.isBaseLayer||this.allOverlays&&!this.baseLayer)this.baseLayer==null?this.setBaseLayer(a):a.setVisibility(false);else a.redraw();this.events.triggerEvent("addlayer",{layer:a});a.events.triggerEvent("added",{map:this,layer:a});a.afterAdd();return true},addLayers:function(a){for(var b=0,c=a.length;b<c;b++)this.addLayer(a[b])},removeLayer:function(a,
b){if(this.events.triggerEvent("preremovelayer",{layer:a})!==false){if(b==null)b=true;a.isFixed?this.viewPortDiv.removeChild(a.div):this.layerContainerDiv.removeChild(a.div);OpenLayers.Util.removeItem(this.layers,a);a.removeMap(this);a.map=null;if(this.baseLayer==a){this.baseLayer=null;if(b){b=0;for(var c=this.layers.length;b<c;b++){var f=this.layers[b];if(f.isBaseLayer||this.allOverlays){this.setBaseLayer(f);break}}}}this.resetLayersZIndex();this.events.triggerEvent("removelayer",{layer:a});a.events.triggerEvent("removed",
{map:this,layer:a})}},getNumLayers:function(){return this.layers.length},getLayerIndex:function(a){return OpenLayers.Util.indexOf(this.layers,a)},setLayerIndex:function(a,b){var c=this.getLayerIndex(a);if(b<0)b=0;else if(b>this.layers.length)b=this.layers.length;if(c!=b){this.layers.splice(c,1);this.layers.splice(b,0,a);c=0;for(var f=this.layers.length;c<f;c++)this.setLayerZIndex(this.layers[c],c);this.events.triggerEvent("changelayer",{layer:a,property:"order"});if(this.allOverlays)if(b===0)this.setBaseLayer(a);
else this.baseLayer!==this.layers[0]&&this.setBaseLayer(this.layers[0])}},raiseLayer:function(a,b){b=this.getLayerIndex(a)+b;this.setLayerIndex(a,b)},setBaseLayer:function(a){if(a!=this.baseLayer)if(OpenLayers.Util.indexOf(this.layers,a)!=-1){var b=this.getCachedCenter(),c=OpenLayers.Util.getResolutionFromScale(this.getScale(),a.units);this.baseLayer!=null&&!this.allOverlays&&this.baseLayer.setVisibility(false);this.baseLayer=a;if(!this.allOverlays||this.baseLayer.visibility){this.baseLayer.setVisibility(true);
this.baseLayer.inRange===false&&this.baseLayer.redraw()}if(b!=null){a=this.getZoomForResolution(c||this.resolution,true);this.setCenter(b,a,false,true)}this.events.triggerEvent("changebaselayer",{layer:this.baseLayer})}},addControl:function(a,b){this.controls.push(a);this.addControlToMap(a,b)},addControls:function(a,b){for(var c=arguments.length===1?[]:b,f=0,d=a.length;f<d;f++)this.addControl(a[f],c[f]?c[f]:null)},addControlToMap:function(a,b){a.outsideViewport=a.div!=null;if(this.displayProjection&&
!a.displayProjection)a.displayProjection=this.displayProjection;a.setMap(this);if(b=a.draw(b))if(!a.outsideViewport){b.style.zIndex=this.Z_INDEX_BASE.Control+this.controls.length;this.viewPortDiv.appendChild(b)}a.autoActivate&&a.activate()},getControl:function(a){for(var b=null,c=0,f=this.controls.length;c<f;c++){var d=this.controls[c];if(d.id==a){b=d;break}}return b},removeControl:function(a){if(a&&a==this.getControl(a.id)){a.div&&a.div.parentNode==this.viewPortDiv&&this.viewPortDiv.removeChild(a.div);
OpenLayers.Util.removeItem(this.controls,a)}},addPopup:function(a,b){if(b)for(b=this.popups.length-1;b>=0;--b)this.removePopup(this.popups[b]);a.map=this;this.popups.push(a);if(a=a.draw()){a.style.zIndex=this.Z_INDEX_BASE.Popup+this.popups.length;this.layerContainerDiv.appendChild(a)}},removePopup:function(a){OpenLayers.Util.removeItem(this.popups,a);if(a.div)try{this.layerContainerDiv.removeChild(a.div)}catch(b){}a.map=null},getSize:function(){var a=null;if(this.size!=null)a=this.size.clone();return a},
updateSize:function(){var a=this.getCurrentSize();if(a&&!isNaN(a.h)&&!isNaN(a.w)){this.events.clearMouseCache();var b=this.getSize();if(b==null)this.size=b=a;if(!a.equals(b)){this.size=a;a=0;for(b=this.layers.length;a<b;a++)this.layers[a].onMapResize();a=this.getCachedCenter();if(this.baseLayer!=null&&a!=null){b=this.getZoom();this.zoom=null;this.setCenter(a,b)}}}},getCurrentSize:function(){var a=new OpenLayers.Size(this.div.clientWidth,this.div.clientHeight);if(a.w==0&&a.h==0||isNaN(a.w)&&isNaN(a.h)){a.w=
this.div.offsetWidth;a.h=this.div.offsetHeight}if(a.w==0&&a.h==0||isNaN(a.w)&&isNaN(a.h)){a.w=parseInt(this.div.style.width);a.h=parseInt(this.div.style.height)}return a},calculateBounds:function(a,b){var c=null;if(a==null)a=this.getCachedCenter();if(b==null)b=this.getResolution();if(a!=null&&b!=null){c=this.size.w*b/2;b=this.size.h*b/2;c=new OpenLayers.Bounds(a.lon-c,a.lat-b,a.lon+c,a.lat+b)}return c},getCenter:function(){var a=null,b=this.getCachedCenter();if(b)a=b.clone();return a},getCachedCenter:function(){if(!this.center&&
this.size)this.center=this.getLonLatFromViewPortPx({x:this.size.w/2,y:this.size.h/2});return this.center},getZoom:function(){return this.zoom},pan:function(a,b,c){c=OpenLayers.Util.applyDefaults(c,{animate:true,dragging:false});if(c.dragging){if(a!=0||b!=0)this.moveByPx(a,b)}else{var f=this.getViewPortPxFromLonLat(this.getCachedCenter());a=f.add(a,b);if(this.dragging||!a.equals(f)){f=this.getLonLatFromViewPortPx(a);if(c.animate)this.panTo(f);else{this.moveTo(f);if(this.dragging){this.dragging=false;
this.events.triggerEvent("moveend")}}}}},panTo:function(a){if(this.panMethod&&this.getExtent().scale(this.panRatio).containsLonLat(a)){if(!this.panTween)this.panTween=new OpenLayers.Tween(this.panMethod);var b=this.getCachedCenter();if(!a.equals(b)){b=this.getPixelFromLonLat(b);var c=this.getPixelFromLonLat(a),f={x:0,y:0};this.panTween.start({x:0,y:0},{x:c.x-b.x,y:c.y-b.y},this.panDuration,{callbacks:{eachStep:OpenLayers.Function.bind(function(d){this.moveByPx(d.x-f.x,d.y-f.y);f.x=Math.round(d.x);
f.y=Math.round(d.y)},this),done:OpenLayers.Function.bind(function(){this.moveTo(a);this.dragging=false;this.events.triggerEvent("moveend")},this)}})}}else this.setCenter(a)},setCenter:function(a,b,c,f){this.panTween&&this.panTween.stop();this.moveTo(a,b,{dragging:c,forceZoomChange:f})},moveByPx:function(a,b){var c=this.size.w/2,f=this.size.h/2,d=c+a,e=f+b,g=this.baseLayer.wrapDateLine,h=0,i=0;if(this.restrictedExtent){h=c;i=f;g=false}a=g||d<=this.maxPx.x-h&&d>=this.minPx.x+h?Math.round(a):0;b=e<=
this.maxPx.y-i&&e>=this.minPx.y+i?Math.round(b):0;if(a||b){if(!this.dragging){this.dragging=true;this.events.triggerEvent("movestart")}this.center=null;if(a){this.layerContainerDiv.style.left=parseInt(this.layerContainerDiv.style.left)-a+"px";this.minPx.x-=a;this.maxPx.x-=a}if(b){this.layerContainerDiv.style.top=parseInt(this.layerContainerDiv.style.top)-b+"px";this.minPx.y-=b;this.maxPx.y-=b}f=0;for(d=this.layers.length;f<d;++f){c=this.layers[f];if(c.visibility&&(c===this.baseLayer||c.inRange)){c.moveByPx(a,
b);c.events.triggerEvent("move")}}this.events.triggerEvent("move")}},adjustZoom:function(a){var b=this.baseLayer.resolutions,c=this.getMaxExtent().getWidth()/this.size.w;if(this.getResolutionForZoom(a)>c)for(var f=a|0,d=b.length;f<d;++f)if(b[f]<=c){a=f;break}return a},moveTo:function(a,b,c){if(a!=null&&!(a instanceof OpenLayers.LonLat))a=new OpenLayers.LonLat(a);c||(c={});if(b!=null){b=parseFloat(b);this.fractionalZoom||(b=Math.round(b))}if(this.baseLayer.wrapDateLine){var f=b;b=this.adjustZoom(b);
if(b!==f)a=this.getCenter()}f=c.dragging||this.dragging;var d=c.forceZoomChange;if(!this.getCachedCenter()&&!this.isValidLonLat(a)){a=this.maxExtent.getCenterLonLat();this.center=a.clone()}if(this.restrictedExtent!=null){if(a==null)a=this.center;if(b==null)b=this.getZoom();var e=this.getResolutionForZoom(b);e=this.calculateBounds(a,e);if(!this.restrictedExtent.containsBounds(e)){var g=this.restrictedExtent.getCenterLonLat();if(e.getWidth()>this.restrictedExtent.getWidth())a=new OpenLayers.LonLat(g.lon,
a.lat);else if(e.left<this.restrictedExtent.left)a=a.add(this.restrictedExtent.left-e.left,0);else if(e.right>this.restrictedExtent.right)a=a.add(this.restrictedExtent.right-e.right,0);if(e.getHeight()>this.restrictedExtent.getHeight())a=new OpenLayers.LonLat(a.lon,g.lat);else if(e.bottom<this.restrictedExtent.bottom)a=a.add(0,this.restrictedExtent.bottom-e.bottom);else if(e.top>this.restrictedExtent.top)a=a.add(0,this.restrictedExtent.top-e.top)}}d=d||this.isValidZoomLevel(b)&&b!=this.getZoom();
e=this.isValidLonLat(a)&&!a.equals(this.center);if(d||e||f){f||this.events.triggerEvent("movestart");if(e){!d&&this.center&&this.centerLayerContainer(a);this.center=a.clone()}a=d?this.getResolutionForZoom(b):this.getResolution();if(d||this.layerContainerOrigin==null){this.layerContainerOrigin=this.getCachedCenter();this.layerContainerDiv.style.left="0px";this.layerContainerDiv.style.top="0px";e=this.getMaxExtent({restricted:true});var h=e.getCenterLonLat();g=this.center.lon-h.lon;h=h.lat-this.center.lat;
var i=Math.round(e.getWidth()/a),j=Math.round(e.getHeight()/a);this.minPx={x:(this.size.w-i)/2-g/a,y:(this.size.h-j)/2-h/a};this.maxPx={x:this.minPx.x+Math.round(e.getWidth()/a),y:this.minPx.y+Math.round(e.getHeight()/a)}}if(d){this.zoom=b;this.resolution=a}a=this.getExtent();if(this.baseLayer.visibility){this.baseLayer.moveTo(a,d,c.dragging);c.dragging||this.baseLayer.events.triggerEvent("moveend",{zoomChanged:d})}a=this.baseLayer.getExtent();for(b=this.layers.length-1;b>=0;--b){e=this.layers[b];
if(e!==this.baseLayer&&!e.isBaseLayer){g=e.calculateInRange();if(e.inRange!=g){(e.inRange=g)||e.display(false);this.events.triggerEvent("changelayer",{layer:e,property:"visibility"})}if(g&&e.visibility){e.moveTo(a,d,c.dragging);c.dragging||e.events.triggerEvent("moveend",{zoomChanged:d})}}}this.events.triggerEvent("move");f||this.events.triggerEvent("moveend");if(d){b=0;for(c=this.popups.length;b<c;b++)this.popups[b].updatePosition();this.events.triggerEvent("zoomend")}}},centerLayerContainer:function(a){var b=
this.getViewPortPxFromLonLat(this.layerContainerOrigin),c=this.getViewPortPxFromLonLat(a);if(b!=null&&c!=null){var f=parseInt(this.layerContainerDiv.style.left);a=parseInt(this.layerContainerDiv.style.top);var d=Math.round(b.x-c.x);b=Math.round(b.y-c.y);this.layerContainerDiv.style.left=d+"px";this.layerContainerDiv.style.top=b+"px";f=f-d;a=a-b;this.minPx.x-=f;this.maxPx.x-=f;this.minPx.y-=a;this.maxPx.y-=a}},isValidZoomLevel:function(a){return a!=null&&a>=0&&a<this.getNumZoomLevels()},isValidLonLat:function(a){var b=
false;if(a!=null){b=this.getMaxExtent();b=b.containsLonLat(a,{worldBounds:this.baseLayer.wrapDateLine&&b})}return b},getProjection:function(){var a=this.getProjectionObject();return a?a.getCode():null},getProjectionObject:function(){var a=null;if(this.baseLayer!=null)a=this.baseLayer.projection;return a},getMaxResolution:function(){var a=null;if(this.baseLayer!=null)a=this.baseLayer.maxResolution;return a},getMaxExtent:function(a){var b=null;if(a&&a.restricted&&this.restrictedExtent)b=this.restrictedExtent;
else if(this.baseLayer!=null)b=this.baseLayer.maxExtent;return b},getNumZoomLevels:function(){var a=null;if(this.baseLayer!=null)a=this.baseLayer.numZoomLevels;return a},getExtent:function(){var a=null;if(this.baseLayer!=null)a=this.baseLayer.getExtent();return a},getResolution:function(){var a=null;if(this.baseLayer!=null)a=this.baseLayer.getResolution();else if(this.allOverlays===true&&this.layers.length>0)a=this.layers[0].getResolution();return a},getUnits:function(){var a=null;if(this.baseLayer!=
null)a=this.baseLayer.units;return a},getScale:function(){var a=null;if(this.baseLayer!=null){a=this.getResolution();a=OpenLayers.Util.getScaleFromResolution(a,this.baseLayer.units)}return a},getZoomForExtent:function(a,b){var c=null;if(this.baseLayer!=null)c=this.baseLayer.getZoomForExtent(a,b);return c},getResolutionForZoom:function(a){var b=null;if(this.baseLayer)b=this.baseLayer.getResolutionForZoom(a);return b},getZoomForResolution:function(a,b){var c=null;if(this.baseLayer!=null)c=this.baseLayer.getZoomForResolution(a,
b);return c},zoomTo:function(a){this.isValidZoomLevel(a)&&this.setCenter(null,a)},zoomIn:function(){this.zoomTo(this.getZoom()+1)},zoomOut:function(){this.zoomTo(this.getZoom()-1)},zoomToExtent:function(a,b){a instanceof OpenLayers.Bounds||(a=new OpenLayers.Bounds(a));var c=a.getCenterLonLat();if(this.baseLayer.wrapDateLine){c=this.getMaxExtent();for(a=a.clone();a.right<a.left;)a.right+=c.getWidth();c=a.getCenterLonLat().wrapDateLine(c)}this.setCenter(c,this.getZoomForExtent(a,b))},zoomToMaxExtent:function(a){this.zoomToExtent(this.getMaxExtent({restricted:a?
a.restricted:true}))},zoomToScale:function(a,b){var c=OpenLayers.Util.getResolutionFromScale(a,this.baseLayer.units);a=this.size.w*c/2;c=this.size.h*c/2;var f=this.getCachedCenter();this.zoomToExtent(new OpenLayers.Bounds(f.lon-a,f.lat-c,f.lon+a,f.lat+c),b)},getLonLatFromViewPortPx:function(a){var b=null;if(this.baseLayer!=null)b=this.baseLayer.getLonLatFromViewPortPx(a);return b},getViewPortPxFromLonLat:function(a){var b=null;if(this.baseLayer!=null)b=this.baseLayer.getViewPortPxFromLonLat(a);return b},
getLonLatFromPixel:function(a){return this.getLonLatFromViewPortPx(a)},getPixelFromLonLat:function(a){a=this.getViewPortPxFromLonLat(a);a.x=Math.round(a.x);a.y=Math.round(a.y);return a},getGeodesicPixelSize:function(a){var b=a?this.getLonLatFromPixel(a):this.getCachedCenter()||new OpenLayers.LonLat(0,0),c=this.getResolution();a=b.add(-c/2,0);var f=b.add(c/2,0),d=b.add(0,-c/2);b=b.add(0,c/2);c=new OpenLayers.Projection("EPSG:4326");var e=this.getProjectionObject()||c;if(!e.equals(c)){a.transform(e,
c);f.transform(e,c);d.transform(e,c);b.transform(e,c)}return new OpenLayers.Size(OpenLayers.Util.distVincenty(a,f),OpenLayers.Util.distVincenty(d,b))},getViewPortPxFromLayerPx:function(a){var b=null;if(a!=null){b=parseInt(this.layerContainerDiv.style.left);var c=parseInt(this.layerContainerDiv.style.top);b=a.add(b,c)}return b},getLayerPxFromViewPortPx:function(a){var b=null;if(a!=null){b=-parseInt(this.layerContainerDiv.style.left);var c=-parseInt(this.layerContainerDiv.style.top);b=a.add(b,c);if(isNaN(b.x)||
isNaN(b.y))b=null}return b},getLonLatFromLayerPx:function(a){a=this.getViewPortPxFromLayerPx(a);return this.getLonLatFromViewPortPx(a)},getLayerPxFromLonLat:function(a){return this.getLayerPxFromViewPortPx(this.getPixelFromLonLat(a))},CLASS_NAME:"OpenLayers.Map"});OpenLayers.Map.TILE_WIDTH=256;OpenLayers.Map.TILE_HEIGHT=256;
OpenLayers.Layer=OpenLayers.Class({id:null,name:null,div:null,opacity:1,alwaysInRange:null,RESOLUTION_PROPERTIES:["scales","resolutions","maxScale","minScale","maxResolution","minResolution","numZoomLevels","maxZoomLevel"],events:null,map:null,isBaseLayer:false,alpha:false,displayInLayerSwitcher:true,visibility:true,attribution:null,inRange:false,imageSize:null,options:null,eventListeners:null,gutter:0,projection:null,units:null,scales:null,resolutions:null,maxExtent:null,minExtent:null,maxResolution:null,
minResolution:null,numZoomLevels:null,minScale:null,maxScale:null,displayOutsideMaxExtent:false,wrapDateLine:false,metadata:null,initialize:function(a,b){this.metadata={};this.addOptions(b);this.name=a;if(this.id==null){this.id=OpenLayers.Util.createUniqueID(this.CLASS_NAME+"_");this.div=OpenLayers.Util.createDiv(this.id);this.div.style.width="100%";this.div.style.height="100%";this.div.dir="ltr";this.events=new OpenLayers.Events(this,this.div);this.eventListeners instanceof Object&&this.events.on(this.eventListeners)}},
destroy:function(a){if(a==null)a=true;this.map!=null&&this.map.removeLayer(this,a);this.options=this.div=this.name=this.map=this.projection=null;if(this.events){this.eventListeners&&this.events.un(this.eventListeners);this.events.destroy()}this.events=this.eventListeners=null},clone:function(a){if(a==null)a=new OpenLayers.Layer(this.name,this.getOptions());OpenLayers.Util.applyDefaults(a,this);a.map=null;return a},getOptions:function(){var a={};for(var b in this.options)a[b]=this[b];return a},setName:function(a){if(a!=
this.name){this.name=a;this.map!=null&&this.map.events.triggerEvent("changelayer",{layer:this,property:"name"})}},addOptions:function(a,b){if(this.options==null)this.options={};if(a){if(typeof a.projection=="string")a.projection=new OpenLayers.Projection(a.projection);a.projection&&OpenLayers.Util.applyDefaults(a,OpenLayers.Projection.defaults[a.projection.getCode()]);if(a.maxExtent&&!(a.maxExtent instanceof OpenLayers.Bounds))a.maxExtent=new OpenLayers.Bounds(a.maxExtent);if(a.minExtent&&!(a.minExtent instanceof
OpenLayers.Bounds))a.minExtent=new OpenLayers.Bounds(a.minExtent)}OpenLayers.Util.extend(this.options,a);OpenLayers.Util.extend(this,a);if(this.projection&&this.projection.getUnits())this.units=this.projection.getUnits();if(this.map){var c=this.map.getResolution(),f=this.RESOLUTION_PROPERTIES.concat(["projection","units","minExtent","maxExtent"]);for(var d in a)if(a.hasOwnProperty(d)&&OpenLayers.Util.indexOf(f,d)>=0){this.initResolutions();if(b&&this.map.baseLayer===this){this.map.setCenter(this.map.getCenter(),
this.map.getZoomForResolution(c),false,true);this.map.events.triggerEvent("changebaselayer",{layer:this})}break}}},onMapResize:function(){},redraw:function(){var a=false;if(this.map){this.inRange=this.calculateInRange();var b=this.getExtent();if(b&&this.inRange&&this.visibility){this.moveTo(b,true,false);this.events.triggerEvent("moveend",{zoomChanged:true});a=true}}return a},moveTo:function(){var a=this.visibility;this.isBaseLayer||(a=a&&this.inRange);this.display(a)},moveByPx:function(){},setMap:function(a){if(this.map==
null){this.map=a;this.maxExtent=this.maxExtent||this.map.maxExtent;this.minExtent=this.minExtent||this.map.minExtent;this.projection=this.projection||this.map.projection;if(typeof this.projection=="string")this.projection=new OpenLayers.Projection(this.projection);this.units=this.projection.getUnits()||this.units||this.map.units;this.initResolutions();if(!this.isBaseLayer){this.inRange=this.calculateInRange();this.div.style.display=this.visibility&&this.inRange?"":"none"}this.setTileSize()}},afterAdd:function(){},
removeMap:function(){},getImageSize:function(){return this.imageSize||this.tileSize},setTileSize:function(a){this.tileSize=a=a?a:this.tileSize?this.tileSize:this.map.getTileSize();if(this.gutter)this.imageSize=new OpenLayers.Size(a.w+2*this.gutter,a.h+2*this.gutter)},getVisibility:function(){return this.visibility},setVisibility:function(a){if(a!=this.visibility){this.visibility=a;this.display(a);this.redraw();this.map!=null&&this.map.events.triggerEvent("changelayer",{layer:this,property:"visibility"});
this.events.triggerEvent("visibilitychanged")}},display:function(a){if(a!=(this.div.style.display!="none"))this.div.style.display=a&&this.calculateInRange()?"block":"none"},calculateInRange:function(){var a=false;if(this.alwaysInRange)a=true;else if(this.map){a=this.map.getResolution();a=a>=this.minResolution&&a<=this.maxResolution}return a},setIsBaseLayer:function(a){if(a!=this.isBaseLayer){this.isBaseLayer=a;this.map!=null&&this.map.events.triggerEvent("changebaselayer",{layer:this})}},initResolutions:function(){var a,
b,c,f={},d=true;a=0;for(b=this.RESOLUTION_PROPERTIES.length;a<b;a++){c=this.RESOLUTION_PROPERTIES[a];f[c]=this.options[c];if(d&&this.options[c])d=false}if(this.alwaysInRange==null)this.alwaysInRange=d;if(f.resolutions==null)f.resolutions=this.resolutionsFromScales(f.scales);if(f.resolutions==null)f.resolutions=this.calculateResolutions(f);if(f.resolutions==null){a=0;for(b=this.RESOLUTION_PROPERTIES.length;a<b;a++){c=this.RESOLUTION_PROPERTIES[a];f[c]=this.options[c]!=null?this.options[c]:this.map[c]}if(f.resolutions==
null)f.resolutions=this.resolutionsFromScales(f.scales);if(f.resolutions==null)f.resolutions=this.calculateResolutions(f)}var e;if(this.options.maxResolution&&this.options.maxResolution!=="auto")e=this.options.maxResolution;if(this.options.minScale)e=OpenLayers.Util.getResolutionFromScale(this.options.minScale,this.units);var g;if(this.options.minResolution&&this.options.minResolution!=="auto")g=this.options.minResolution;if(this.options.maxScale)g=OpenLayers.Util.getResolutionFromScale(this.options.maxScale,
this.units);if(f.resolutions){f.resolutions.sort(function(h,i){return i-h});e||(e=f.resolutions[0]);g||(g=f.resolutions[f.resolutions.length-1])}if(this.resolutions=f.resolutions){b=this.resolutions.length;this.scales=new Array(b);for(a=0;a<b;a++)this.scales[a]=OpenLayers.Util.getScaleFromResolution(this.resolutions[a],this.units);this.numZoomLevels=b}if(this.minResolution=g)this.maxScale=OpenLayers.Util.getScaleFromResolution(g,this.units);if(this.maxResolution=e)this.minScale=OpenLayers.Util.getScaleFromResolution(e,
this.units)},resolutionsFromScales:function(a){if(a!=null){var b,c,f;f=a.length;b=new Array(f);for(c=0;c<f;c++)b[c]=OpenLayers.Util.getResolutionFromScale(a[c],this.units);return b}},calculateResolutions:function(a){var b,c,f=a.maxResolution;if(a.minScale!=null)f=OpenLayers.Util.getResolutionFromScale(a.minScale,this.units);else if(f=="auto"&&this.maxExtent!=null){b=this.map.getSize();c=this.maxExtent.getWidth()/b.w;b=this.maxExtent.getHeight()/b.h;f=Math.max(c,b)}c=a.minResolution;if(a.maxScale!=
null)c=OpenLayers.Util.getResolutionFromScale(a.maxScale,this.units);else if(a.minResolution=="auto"&&this.minExtent!=null){b=this.map.getSize();c=this.minExtent.getWidth()/b.w;b=this.minExtent.getHeight()/b.h;c=Math.max(c,b)}if(typeof f!=="number"&&typeof c!=="number"&&this.maxExtent!=null){f=this.map.getTileSize();f=Math.max(this.maxExtent.getWidth()/f.w,this.maxExtent.getHeight()/f.h)}b=a.maxZoomLevel;a=a.numZoomLevels;if(typeof c==="number"&&typeof f==="number"&&a===undefined)a=Math.floor(Math.log(f/
c)/Math.log(2))+1;else if(a===undefined&&b!=null)a=b+1;if(!(typeof a!=="number"||a<=0||typeof f!=="number"&&typeof c!=="number")){b=new Array(a);var d=2;if(typeof c=="number"&&typeof f=="number")d=Math.pow(f/c,1/(a-1));var e;if(typeof f==="number")for(e=0;e<a;e++)b[e]=f/Math.pow(d,e);else for(e=0;e<a;e++)b[a-1-e]=c*Math.pow(d,e);return b}},getResolution:function(){return this.getResolutionForZoom(this.map.getZoom())},getExtent:function(){return this.map.calculateBounds()},getZoomForExtent:function(a,
b){var c=this.map.getSize();return this.getZoomForResolution(Math.max(a.getWidth()/c.w,a.getHeight()/c.h),b)},getDataExtent:function(){},getResolutionForZoom:function(a){a=Math.max(0,Math.min(a,this.resolutions.length-1));if(this.map.fractionalZoom){var b=Math.floor(a),c=Math.ceil(a);a=this.resolutions[b]-(a-b)*(this.resolutions[b]-this.resolutions[c])}else a=this.resolutions[Math.round(a)];return a},getZoomForResolution:function(a,b){var c,f;if(this.map.fractionalZoom){b=0;var d=this.resolutions[b],
e=this.resolutions[this.resolutions.length-1],g;c=0;for(f=this.resolutions.length;c<f;++c){g=this.resolutions[c];if(g>=a){d=g;b=c}if(g<=a){e=g;break}}c=d-e;a=c>0?b+(d-a)/c:b}else{e=Number.POSITIVE_INFINITY;c=0;for(f=this.resolutions.length;c<f;c++)if(b){d=Math.abs(this.resolutions[c]-a);if(d>e)break;e=d}else if(this.resolutions[c]<a)break;a=Math.max(0,c-1)}return a},getLonLatFromViewPortPx:function(a){var b=null,c=this.map;if(a!=null&&c.minPx){b=c.getResolution();var f=c.getMaxExtent({restricted:true});
b=new OpenLayers.LonLat((a.x-c.minPx.x)*b+f.left,(c.minPx.y-a.y)*b+f.top);if(this.wrapDateLine)b=b.wrapDateLine(this.maxExtent)}return b},getViewPortPxFromLonLat:function(a,b){var c=null;if(a!=null){b=b||this.map.getResolution();c=this.map.calculateBounds(null,b);c=new OpenLayers.Pixel(1/b*(a.lon-c.left),1/b*(c.top-a.lat))}return c},setOpacity:function(a){if(a!=this.opacity){this.opacity=a;for(var b=this.div.childNodes,c=0,f=b.length;c<f;++c){var d=b[c].firstChild||b[c],e=b[c].lastChild;if(e&&e.nodeName.toLowerCase()===
"iframe")d=e.parentNode;OpenLayers.Util.modifyDOMElement(d,null,null,null,null,null,null,a)}this.map!=null&&this.map.events.triggerEvent("changelayer",{layer:this,property:"opacity"})}},getZIndex:function(){return this.div.style.zIndex},setZIndex:function(a){this.div.style.zIndex=a},adjustBounds:function(a){if(this.gutter){var b=this.gutter*this.map.getResolution();a=new OpenLayers.Bounds(a.left-b,a.bottom-b,a.right+b,a.top+b)}if(this.wrapDateLine){b={rightTolerance:this.getResolution(),leftTolerance:this.getResolution()};
a=a.wrapDateLine(this.maxExtent,b)}return a},CLASS_NAME:"OpenLayers.Layer"});
OpenLayers.Layer.HTTPRequest=OpenLayers.Class(OpenLayers.Layer,{URL_HASH_FACTOR:(Math.sqrt(5)-1)/2,url:null,params:null,reproject:false,initialize:function(a,b,c,f){OpenLayers.Layer.prototype.initialize.apply(this,[a,f]);this.url=b;if(!this.params)this.params=OpenLayers.Util.extend({},c)},destroy:function(){this.params=this.url=null;OpenLayers.Layer.prototype.destroy.apply(this,arguments)},clone:function(a){if(a==null)a=new OpenLayers.Layer.HTTPRequest(this.name,this.url,this.params,this.getOptions());
return a=OpenLayers.Layer.prototype.clone.apply(this,[a])},setUrl:function(a){this.url=a},mergeNewParams:function(a){this.params=OpenLayers.Util.extend(this.params,a);a=this.redraw();this.map!=null&&this.map.events.triggerEvent("changelayer",{layer:this,property:"params"});return a},redraw:function(a){return a?this.mergeNewParams({_olSalt:Math.random()}):OpenLayers.Layer.prototype.redraw.apply(this,[])},selectUrl:function(a,b){for(var c=1,f=0,d=a.length;f<d;f++){c*=a.charCodeAt(f)*this.URL_HASH_FACTOR;
c-=Math.floor(c)}return b[Math.floor(c*b.length)]},getFullRequestString:function(a,b){b=b||this.url;var c=OpenLayers.Util.extend({},this.params);c=OpenLayers.Util.extend(c,a);a=OpenLayers.Util.getParameterString(c);if(OpenLayers.Util.isArray(b))b=this.selectUrl(a,b);a=OpenLayers.Util.upperCaseObject(OpenLayers.Util.getParameters(b));for(var f in c)f.toUpperCase()in a&&delete c[f];a=OpenLayers.Util.getParameterString(c);return OpenLayers.Util.urlAppend(b,a)},CLASS_NAME:"OpenLayers.Layer.HTTPRequest"});
OpenLayers.Tile=OpenLayers.Class({events:null,eventListeners:null,id:null,layer:null,url:null,bounds:null,size:null,position:null,isLoading:false,initialize:function(a,b,c,f,d,e){this.layer=a;this.position=b.clone();this.setBounds(c);this.url=f;if(d)this.size=d.clone();this.id=OpenLayers.Util.createUniqueID("Tile_");OpenLayers.Util.extend(this,e);this.events=new OpenLayers.Events(this);this.eventListeners instanceof Object&&this.events.on(this.eventListeners)},unload:function(){if(this.isLoading){this.isLoading=
false;this.events.triggerEvent("unload")}},destroy:function(){this.position=this.size=this.bounds=this.layer=null;this.eventListeners&&this.events.un(this.eventListeners);this.events.destroy();this.events=this.eventListeners=null},draw:function(a){a||this.clear();var b=this.shouldDraw();if(b&&!a)b=this.events.triggerEvent("beforedraw")!==false;return b},shouldDraw:function(){var a=false,b=this.layer.maxExtent;if(b){var c=this.layer.map;c=c.baseLayer.wrapDateLine&&c.getMaxExtent();if(this.bounds.intersectsBounds(b,
{inclusive:false,worldBounds:c}))a=true}return a||this.layer.displayOutsideMaxExtent},setBounds:function(a){a=a.clone();if(this.layer.map.baseLayer.wrapDateLine){var b=this.layer.map.getMaxExtent(),c=this.layer.map.getResolution();a=a.wrapDateLine(b,{leftTolerance:c,rightTolerance:c})}this.bounds=a},moveTo:function(a,b,c){if(c==null)c=true;this.setBounds(a);this.position=b.clone();c&&this.draw()},clear:function(){},CLASS_NAME:"OpenLayers.Tile"});
OpenLayers.Tile.Image=OpenLayers.Class(OpenLayers.Tile,{url:null,imgDiv:null,frame:null,imageReloadAttempts:null,layerAlphaHack:null,asyncRequestId:null,blankImageUrl:"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAQAIBRAA7",maxGetUrlLength:null,canvasContext:null,crossOriginKeyword:null,initialize:function(a,b,c,f){OpenLayers.Tile.prototype.initialize.apply(this,arguments);this.url=f;this.layerAlphaHack=this.layer.alpha&&OpenLayers.Util.alphaHack();if(this.maxGetUrlLength!=
null||this.layer.gutter||this.layerAlphaHack){this.frame=document.createElement("div");this.frame.style.position="absolute";this.frame.style.overflow="hidden"}this.maxGetUrlLength!=null&&OpenLayers.Util.extend(this,OpenLayers.Tile.Image.IFrame)},destroy:function(){if(this.imgDiv){this.clear();this.frame=this.imgDiv=null}this.asyncRequestId=null;OpenLayers.Tile.prototype.destroy.apply(this,arguments)},draw:function(){var a=OpenLayers.Tile.prototype.draw.apply(this,arguments);if(a){if(this.layer!=this.layer.map.baseLayer&&
this.layer.reproject)this.bounds=this.getBoundsFromBaseLayer(this.position);if(this.isLoading)this._loadEvent="reload";else{this.isLoading=true;this._loadEvent="loadstart"}this.positionTile();this.renderTile()}else this.unload();return a},renderTile:function(){this.layer.div.appendChild(this.getTile());if(this.layer.async){var a=this.asyncRequestId=(this.asyncRequestId||0)+1;this.layer.getURLasync(this.bounds,function(b){if(a==this.asyncRequestId){this.url=b;this.initImage()}},this)}else{this.url=
this.layer.getURL(this.bounds);this.initImage()}},positionTile:function(){var a=this.getTile().style,b=this.frame?this.size:this.layer.getImageSize(this.bounds);a.left=this.position.x+"%";a.top=this.position.y+"%";a.width=b.w+"%";a.height=b.h+"%"},clear:function(){OpenLayers.Tile.prototype.clear.apply(this,arguments);var a=this.imgDiv;if(a){OpenLayers.Event.stopObservingElement(a);var b=this.getTile();b.parentNode===this.layer.div&&this.layer.div.removeChild(b);this.setImgSrc();if(this.layerAlphaHack===
true)a.style.filter="";OpenLayers.Element.removeClass(a,"olImageLoadError")}this.canvasContext=null},getImage:function(){if(!this.imgDiv){this.imgDiv=document.createElement("img");this.imgDiv.className="olTileImage";this.imgDiv.galleryImg="no";var a=this.imgDiv.style;if(this.frame){var b=0,c=0;if(this.layer.gutter){b=this.layer.gutter/this.layer.tileSize.w*100;c=this.layer.gutter/this.layer.tileSize.h*100}a.left=-b+"%";a.top=-c+"%";a.width=2*b+100+"%";a.height=2*c+100+"%"}a.visibility="hidden";a.opacity=
0;if(this.layer.opacity<1)a.filter="alpha(opacity="+this.layer.opacity*100+")";a.position="absolute";if(this.layerAlphaHack){a.paddingTop=a.height;a.height="0";a.width="100%"}this.frame&&this.frame.appendChild(this.imgDiv)}return this.imgDiv},initImage:function(){this.events.triggerEvent(this._loadEvent);var a=this.getImage();if(this.url&&a.getAttribute("src")==this.url)this.onImageLoad();else{var b=OpenLayers.Function.bind(function(){OpenLayers.Event.stopObservingElement(a);OpenLayers.Event.observe(a,
"load",OpenLayers.Function.bind(this.onImageLoad,this));OpenLayers.Event.observe(a,"error",OpenLayers.Function.bind(this.onImageError,this));this.imageReloadAttempts=0;this.setImgSrc(this.url)},this);if(a.getAttribute("src")==this.blankImageUrl)b();else{OpenLayers.Event.observe(a,"load",b);OpenLayers.Event.observe(a,"error",b);this.crossOriginKeyword&&a.removeAttribute("crossorigin");a.src=this.blankImageUrl}}},setImgSrc:function(a){var b=this.imgDiv;b.style.visibility="hidden";b.style.opacity=0;
if(a){if(this.crossOriginKeyword)a.substr(0,5)!=="data:"?b.setAttribute("crossorigin",this.crossOriginKeyword):b.removeAttribute("crossorigin");b.src=a}},getTile:function(){return this.frame?this.frame:this.getImage()},createBackBuffer:function(){if(!(!this.imgDiv||this.isLoading)){var a;if(this.frame){a=this.frame.cloneNode(false);a.appendChild(this.imgDiv)}else a=this.imgDiv;this.imgDiv=null;return a}},onImageLoad:function(){var a=this.imgDiv;OpenLayers.Event.stopObservingElement(a);a.style.visibility=
"inherit";a.style.opacity=this.layer.opacity;this.isLoading=false;this.canvasContext=null;this.events.triggerEvent("loadend");if(parseFloat(navigator.appVersion.split("MSIE")[1])<7&&this.layer&&this.layer.div){var b=document.createElement("span");b.style.display="none";var c=this.layer.div;c.appendChild(b);window.setTimeout(function(){b.parentNode===c&&b.parentNode.removeChild(b)},0)}if(this.layerAlphaHack===true)a.style.filter="progid:DXImageTransform.Microsoft.AlphaImageLoader(src='"+a.src+"', sizingMethod='scale')"},
onImageError:function(){var a=this.imgDiv;if(a.src!=null){this.imageReloadAttempts++;if(this.imageReloadAttempts<=OpenLayers.IMAGE_RELOAD_ATTEMPTS)this.setImgSrc(this.layer.getURL(this.bounds));else{OpenLayers.Element.addClass(a,"olImageLoadError");this.events.triggerEvent("loaderror");this.onImageLoad()}}},getCanvasContext:function(){if(OpenLayers.CANVAS_SUPPORTED&&this.imgDiv&&!this.isLoading){if(!this.canvasContext){var a=document.createElement("canvas");a.width=this.size.w;a.height=this.size.h;
this.canvasContext=a.getContext("2d");this.canvasContext.drawImage(this.imgDiv,0,0)}return this.canvasContext}},CLASS_NAME:"OpenLayers.Tile.Image"});
OpenLayers.Layer.Grid=OpenLayers.Class(OpenLayers.Layer.HTTPRequest,{tileSize:null,tileOriginCorner:"bl",tileOrigin:null,tileOptions:null,tileClass:OpenLayers.Tile.Image,grid:null,singleTile:false,ratio:1.5,buffer:0,transitionEffect:null,numLoadingTiles:0,tileLoadingDelay:85,serverResolutions:null,moveTimerId:null,deferMoveGriddedTiles:null,tileQueueId:null,tileQueue:null,loading:false,backBuffer:null,gridResolution:null,backBufferResolution:null,backBufferLonLat:null,backBufferTimerId:null,removeBackBufferDelay:null,
className:null,initialize:function(){OpenLayers.Layer.HTTPRequest.prototype.initialize.apply(this,arguments);this.grid=[];this.tileQueue=[];if(this.removeBackBufferDelay===null)this.removeBackBufferDelay=this.singleTile?0:2500;if(this.className===null)this.className=this.singleTile?"olLayerGridSingleTile":"olLayerGrid";if(!OpenLayers.Animation.isNative)this.deferMoveGriddedTiles=OpenLayers.Function.bind(function(){this.moveGriddedTiles(true);this.moveTimerId=null},this)},setMap:function(a){OpenLayers.Layer.HTTPRequest.prototype.setMap.call(this,
a);OpenLayers.Element.addClass(this.div,this.className)},removeMap:function(){if(this.moveTimerId!==null){window.clearTimeout(this.moveTimerId);this.moveTimerId=null}this.clearTileQueue();if(this.backBufferTimerId!==null){window.clearTimeout(this.backBufferTimerId);this.backBufferTimerId=null}},destroy:function(){this.removeBackBuffer();this.clearGrid();this.tileSize=this.grid=null;OpenLayers.Layer.HTTPRequest.prototype.destroy.apply(this,arguments)},clearGrid:function(){this.clearTileQueue();if(this.grid){for(var a=
0,b=this.grid.length;a<b;a++)for(var c=this.grid[a],f=0,d=c.length;f<d;f++)this.destroyTile(c[f]);this.grid=[];this.gridResolution=null}},clone:function(a){if(a==null)a=new OpenLayers.Layer.Grid(this.name,this.url,this.params,this.getOptions());a=OpenLayers.Layer.HTTPRequest.prototype.clone.apply(this,[a]);if(this.tileSize!=null)a.tileSize=this.tileSize.clone();a.grid=[];a.gridResolution=null;a.backBuffer=null;a.backBufferTimerId=null;a.tileQueue=[];a.tileQueueId=null;a.loading=false;a.moveTimerId=
null;return a},moveTo:function(a,b,c){OpenLayers.Layer.HTTPRequest.prototype.moveTo.apply(this,arguments);a=a||this.map.getExtent();if(a!=null){var f=!this.grid.length||b,d=this.getTilesBounds(),e=this.map.getResolution(),g=this.getServerResolution(e);if(this.singleTile){if(f||!c&&!d.containsBounds(a)){b&&this.transitionEffect!=="resize"&&this.removeBackBuffer();if(!b||this.transitionEffect==="resize")this.applyBackBuffer(g);this.initSingleTile(a)}}else{f=f||!d.intersectsBounds(a,{worldBounds:this.map.baseLayer.wrapDateLine&&
this.map.getMaxExtent()});if(e!==g){a=this.map.calculateBounds(null,g);f&&this.transformDiv(g/e)}else{this.div.style.width="100%";this.div.style.height="100%";this.div.style.left="0%";this.div.style.top="0%"}if(f){b&&this.transitionEffect==="resize"&&this.applyBackBuffer(g);this.initGriddedTiles(a)}else this.moveGriddedTiles()}}},getTileData:function(a){var b=null,c=a.lon,f=a.lat,d=this.grid.length;if(this.map&&d){var e=this.map.getResolution();a=this.tileSize.w;var g=this.tileSize.h,h=this.grid[0][0].bounds,
i=h.left;h=h.top;if(c<i)if(this.map.baseLayer.wrapDateLine){var j=this.map.getMaxExtent().getWidth(),l=Math.ceil((i-c)/j);c+=j*l}c=(c-i)/(e*a);f=(h-f)/(e*g);e=Math.floor(c);i=Math.floor(f);if(i>=0&&i<d)if(d=this.grid[i][e])b={tile:d,i:Math.floor((c-e)*a),j:Math.floor((f-i)*g)}}return b},queueTileDraw:function(a){a=a.object;~OpenLayers.Util.indexOf(this.tileQueue,a)||this.tileQueue.push(a);if(!this.tileQueueId)this.tileQueueId=OpenLayers.Animation.start(OpenLayers.Function.bind(this.drawTileFromQueue,
this),null,this.div);return false},drawTileFromQueue:function(){this.tileQueue.length===0?this.clearTileQueue():this.tileQueue.shift().draw(true)},clearTileQueue:function(){OpenLayers.Animation.stop(this.tileQueueId);this.tileQueueId=null;this.tileQueue=[]},destroyTile:function(a){this.removeTileMonitoringHooks(a);a.destroy()},getServerResolution:function(a){a=a||this.map.getResolution();if(this.serverResolutions&&OpenLayers.Util.indexOf(this.serverResolutions,a)===-1){var b,c;for(b=this.serverResolutions.length-
1;b>=0;b--){c=this.serverResolutions[b];if(c>a){a=c;break}}if(b===-1)throw"no appropriate resolution in serverResolutions";}return a},getServerZoom:function(){var a=this.getServerResolution();return this.serverResolutions?OpenLayers.Util.indexOf(this.serverResolutions,a):this.map.getZoomForResolution(a)+(this.zoomOffset||0)},transformDiv:function(a){this.div.style.width=100*a+"%";this.div.style.height=100*a+"%";var b=this.map.getSize(),c=parseInt(this.map.layerContainerDiv.style.left,10),f=(parseInt(this.map.layerContainerDiv.style.top,
10)-b.h/2)*(a-1);this.div.style.left=(c-b.w/2)*(a-1)+"%";this.div.style.top=f+"%"},getResolutionScale:function(){return parseInt(this.div.style.width,10)/100},applyBackBuffer:function(a){this.backBufferTimerId!==null&&this.removeBackBuffer();var b=this.backBuffer;if(!b){b=this.createBackBuffer();if(!b)return;this.div.insertBefore(b,this.div.firstChild);this.backBuffer=b;var c=this.grid[0][0].bounds;this.backBufferLonLat={lon:c.left,lat:c.top};this.backBufferResolution=this.gridResolution}c=b.style;
var f=this.backBufferResolution/a;c.width=100*f+"%";c.height=100*f+"%";a=this.getViewPortPxFromLonLat(this.backBufferLonLat,a);c=parseInt(this.map.layerContainerDiv.style.left,10);f=parseInt(this.map.layerContainerDiv.style.top,10);b.style.left=Math.round(a.x-c)+"%";b.style.top=Math.round(a.y-f)+"%"},createBackBuffer:function(){var a;if(this.grid.length>0){a=document.createElement("div");a.id=this.div.id+"_bb";a.className="olBackBuffer";a.style.position="absolute";a.style.width="100%";a.style.height=
"100%";for(var b=0,c=this.grid.length;b<c;b++)for(var f=0,d=this.grid[b].length;f<d;f++){var e=this.grid[b][f].createBackBuffer();if(e){e.style.top=b*this.tileSize.h+"%";e.style.left=f*this.tileSize.w+"%";a.appendChild(e)}}}return a},removeBackBuffer:function(){if(this.backBuffer){this.div.removeChild(this.backBuffer);this.backBufferResolution=this.backBuffer=null;if(this.backBufferTimerId!==null){window.clearTimeout(this.backBufferTimerId);this.backBufferTimerId=null}}},moveByPx:function(){this.singleTile||
this.moveGriddedTiles()},setTileSize:function(a){if(this.singleTile){a=this.map.getSize();a.h=parseInt(a.h*this.ratio);a.w=parseInt(a.w*this.ratio)}OpenLayers.Layer.HTTPRequest.prototype.setTileSize.apply(this,[a])},getTilesBounds:function(){var a=null,b=this.grid.length;if(b){a=this.grid[b-1][0].bounds;b=this.grid[0].length*a.getWidth();var c=this.grid.length*a.getHeight();a=new OpenLayers.Bounds(a.left,a.bottom,a.left+b,a.bottom+c)}return a},initSingleTile:function(a){this.clearTileQueue();var b=
a.getCenterLonLat(),c=a.getWidth()*this.ratio;a=a.getHeight()*this.ratio;b=new OpenLayers.Bounds(b.lon-c/2,b.lat-a/2,b.lon+c/2,b.lat+a/2);c=this.map.getLayerPxFromLonLat({lon:b.left,lat:b.top});this.grid.length||(this.grid[0]=[]);if(a=this.grid[0][0])a.moveTo(b,c);else{a=this.addTile(b,c);this.addTileMonitoringHooks(a);a.draw();this.grid[0][0]=a}this.removeExcessTiles(1,1);this.gridResolution=this.getServerResolution()},calculateGridLayout:function(a,b,c){var f=c*this.tileSize.w;c=c*this.tileSize.h;
var d=a.left-b.lon,e=Math.floor(d/f)-this.buffer;d=-(d/f-e)*this.tileSize.w;e=b.lon+e*f;a=a.top-(b.lat+c);var g=Math.ceil(a/c)+this.buffer;return{tilelon:f,tilelat:c,tileoffsetlon:e,tileoffsetlat:b.lat+g*c,tileoffsetx:d,tileoffsety:-(g-a/c)*this.tileSize.h}},getTileOrigin:function(){var a=this.tileOrigin;if(!a){a=this.getMaxExtent();var b={tl:["left","top"],tr:["right","top"],bl:["left","bottom"],br:["right","bottom"]}[this.tileOriginCorner];a=new OpenLayers.LonLat(a[b[0]],a[b[1]])}return a},initGriddedTiles:function(a){this.clearTileQueue();
var b=this.map.getSize(),c=Math.ceil(b.h/this.tileSize.h)+Math.max(1,2*this.buffer);b=Math.ceil(b.w/this.tileSize.w)+Math.max(1,2*this.buffer);var f=this.getTileOrigin(),d=this.getServerResolution();f=this.calculateGridLayout(a,f,d);d=Math.round(f.tileoffsetx);var e=Math.round(f.tileoffsety),g=f.tileoffsetlon,h=f.tileoffsetlat,i=f.tilelon,j=f.tilelat,l=d,k=g,m=0,n=parseInt(this.map.layerContainerDiv.style.left),q=parseInt(this.map.layerContainerDiv.style.top);f=[];var p=this.map.getCenter();do{var o=
this.grid[m++];if(!o){o=[];this.grid.push(o)}g=k;d=l;var t=0;do{var u=new OpenLayers.Bounds(g,h,g+i,h+j),s=d;s-=n;var v=e;v-=q;v=new OpenLayers.Pixel(s,v);if(s=o[t++])s.moveTo(u,v,false);else{s=this.addTile(u,v);this.addTileMonitoringHooks(s);o.push(s)}u=u.getCenterLonLat();f.push({tile:s,distance:Math.pow(u.lon-p.lon,2)+Math.pow(u.lat-p.lat,2)});g+=i;d+=this.tileSize.w}while(g<=a.right+i*this.buffer||t<b);h-=j;e+=this.tileSize.h}while(h>=a.bottom-j*this.buffer||m<c);this.removeExcessTiles(m,t);this.gridResolution=
this.getServerResolution();f.sort(function(r,w){return r.distance-w.distance});a=0;for(c=f.length;a<c;++a)f[a].tile.draw()},getMaxExtent:function(){return this.maxExtent},addTile:function(a,b){a=new this.tileClass(this,b,a,null,this.tileSize,this.tileOptions);a.events.register("beforedraw",this,this.queueTileDraw);return a},addTileMonitoringHooks:function(a){a.onLoadStart=function(){if(this.loading===false){this.loading=true;this.events.triggerEvent("loadstart")}this.events.triggerEvent("tileloadstart",
{tile:a});this.numLoadingTiles++};a.onLoadEnd=function(){this.numLoadingTiles--;this.events.triggerEvent("tileloaded",{tile:a});if(this.tileQueue.length===0&&this.numLoadingTiles===0){this.loading=false;this.events.triggerEvent("loadend");if(this.backBuffer)this.backBufferTimerId=window.setTimeout(OpenLayers.Function.bind(this.removeBackBuffer,this),this.removeBackBufferDelay)}};a.onLoadError=function(){this.events.triggerEvent("tileerror",{tile:a})};a.events.on({loadstart:a.onLoadStart,loadend:a.onLoadEnd,
unload:a.onLoadEnd,loaderror:a.onLoadError,scope:this})},removeTileMonitoringHooks:function(a){a.unload();a.events.un({loadstart:a.onLoadStart,loadend:a.onLoadEnd,unload:a.onLoadEnd,loaderror:a.onLoadError,scope:this})},moveGriddedTiles:function(a){if(!a&&!OpenLayers.Animation.isNative){this.moveTimerId!=null&&window.clearTimeout(this.moveTimerId);this.moveTimerId=window.setTimeout(this.deferMoveGriddedTiles,this.tileLoadingDelay)}else{a=this.buffer||1;for(var b=this.getResolutionScale();;){var c=
{x:this.grid[0][0].position.x*b+parseInt(this.div.style.left,10)+parseInt(this.map.layerContainerDiv.style.left),y:this.grid[0][0].position.y*b+parseInt(this.div.style.top,10)+parseInt(this.map.layerContainerDiv.style.top)},f={w:this.tileSize.w*b,h:this.tileSize.h*b};if(c.x>-f.w*(a-1))this.shiftColumn(true);else if(c.x<-f.w*a)this.shiftColumn(false);else if(c.y>-f.h*(a-1))this.shiftRow(true);else if(c.y<-f.h*a)this.shiftRow(false);else break}}},shiftRow:function(a){var b=this.grid,c=b[a?0:this.grid.length-
1],f=this.getServerResolution(),d=a?-this.tileSize.h:this.tileSize.h;f=f*-d;for(var e=a?b.pop():b.shift(),g=0,h=c.length;g<h;g++){var i=c[g],j=i.bounds.clone();i=i.position.clone();j.bottom+=f;j.top+=f;i.y+=d;e[g].moveTo(j,i)}a?b.unshift(e):b.push(e)},shiftColumn:function(a){for(var b=a?-this.tileSize.w:this.tileSize.w,c=this.getServerResolution()*b,f=0,d=this.grid.length;f<d;f++){var e=this.grid[f],g=e[a?0:e.length-1],h=g.bounds.clone();g=g.position.clone();h.left+=c;h.right+=c;g.x+=b;var i=a?this.grid[f].pop():
this.grid[f].shift();i.moveTo(h,g);a?e.unshift(i):e.push(i)}},removeExcessTiles:function(a,b){for(var c,f;this.grid.length>a;){var d=this.grid.pop();c=0;for(f=d.length;c<f;c++){var e=d[c];this.destroyTile(e)}}c=0;for(f=this.grid.length;c<f;c++)for(;this.grid[c].length>b;){d=this.grid[c];e=d.pop();this.destroyTile(e)}},onMapResize:function(){if(this.singleTile){this.clearGrid();this.setTileSize()}},getTileBounds:function(a){var b=this.maxExtent,c=this.getResolution(),f=c*this.tileSize.w;c=c*this.tileSize.h;
var d=this.getLonLatFromViewPortPx(a);a=b.left+f*Math.floor((d.lon-b.left)/f);b=b.bottom+c*Math.floor((d.lat-b.bottom)/c);return new OpenLayers.Bounds(a,b,a+f,b+c)},CLASS_NAME:"OpenLayers.Layer.Grid"});
OpenLayers.Handler=OpenLayers.Class({id:null,control:null,map:null,keyMask:null,active:false,evt:null,initialize:function(a,b,c){OpenLayers.Util.extend(this,c);this.control=a;this.callbacks=b;(a=this.map||a.map)&&this.setMap(a);this.id=OpenLayers.Util.createUniqueID(this.CLASS_NAME+"_")},setMap:function(a){this.map=a},checkModifiers:function(a){if(this.keyMask==null)return true;return((a.shiftKey?OpenLayers.Handler.MOD_SHIFT:0)|(a.ctrlKey?OpenLayers.Handler.MOD_CTRL:0)|(a.altKey?OpenLayers.Handler.MOD_ALT:
0))==this.keyMask},activate:function(){if(this.active)return false;for(var a=OpenLayers.Events.prototype.BROWSER_EVENTS,b=0,c=a.length;b<c;b++)this[a[b]]&&this.register(a[b],this[a[b]]);return this.active=true},deactivate:function(){if(!this.active)return false;for(var a=OpenLayers.Events.prototype.BROWSER_EVENTS,b=0,c=a.length;b<c;b++)this[a[b]]&&this.unregister(a[b],this[a[b]]);this.active=false;return true},callback:function(a,b){a&&this.callbacks[a]&&this.callbacks[a].apply(this.control,b)},register:function(a,
b){this.map.events.registerPriority(a,this,b);this.map.events.registerPriority(a,this,this.setEvent)},unregister:function(a,b){this.map.events.unregister(a,this,b);this.map.events.unregister(a,this,this.setEvent)},setEvent:function(a){this.evt=a;return true},destroy:function(){this.deactivate();this.control=this.map=null},CLASS_NAME:"OpenLayers.Handler"});OpenLayers.Handler.MOD_NONE=0;OpenLayers.Handler.MOD_SHIFT=1;OpenLayers.Handler.MOD_CTRL=2;OpenLayers.Handler.MOD_ALT=4;
OpenLayers.Handler.Click=OpenLayers.Class(OpenLayers.Handler,{delay:300,single:true,"double":false,pixelTolerance:0,dblclickTolerance:13,stopSingle:false,stopDouble:false,timerId:null,touch:false,down:null,last:null,first:null,rightclickTimerId:null,touchstart:function(a){if(!this.touch){this.unregisterMouseListeners();this.touch=true}this.down=this.getEventInfo(a);this.last=this.getEventInfo(a);return true},touchmove:function(a){this.last=this.getEventInfo(a);return true},touchend:function(a){if(this.down){a.xy=
this.last.xy;a.lastTouches=this.last.touches;this.handleSingle(a);this.down=null}return true},unregisterMouseListeners:function(){this.map.events.un({mousedown:this.mousedown,mouseup:this.mouseup,click:this.click,dblclick:this.dblclick,scope:this})},mousedown:function(a){this.down=this.getEventInfo(a);this.last=this.getEventInfo(a);return true},mouseup:function(a){var b=true;if(this.checkModifiers(a)&&this.control.handleRightClicks&&OpenLayers.Event.isRightClick(a))b=this.rightclick(a);return b},
rightclick:function(a){if(this.passesTolerance(a))if(this.rightclickTimerId!=null){this.clearTimer();this.callback("dblrightclick",[a]);return!this.stopDouble}else{a=this["double"]?OpenLayers.Util.extend({},a):this.callback("rightclick",[a]);a=OpenLayers.Function.bind(this.delayedRightCall,this,a);this.rightclickTimerId=window.setTimeout(a,this.delay)}return!this.stopSingle},delayedRightCall:function(a){this.rightclickTimerId=null;a&&this.callback("rightclick",[a])},click:function(a){if(!this.last)this.last=
this.getEventInfo(a);this.handleSingle(a);return!this.stopSingle},dblclick:function(a){this.handleDouble(a);return!this.stopDouble},handleDouble:function(a){if(this.passesDblclickTolerance(a)){this["double"]&&this.callback("dblclick",[a]);this.clearTimer()}},handleSingle:function(a){if(this.passesTolerance(a))if(this.timerId!=null){if(this.last.touches&&this.last.touches.length===1){this["double"]&&OpenLayers.Event.stop(a);this.handleDouble(a)}if(!this.last.touches||this.last.touches.length!==2)this.clearTimer()}else{this.first=
this.getEventInfo(a);this.queuePotentialClick(this.single?OpenLayers.Util.extend({},a):null)}},queuePotentialClick:function(a){this.timerId=window.setTimeout(OpenLayers.Function.bind(this.delayedCall,this,a),this.delay)},passesTolerance:function(a){var b=true;if(this.pixelTolerance!=null&&this.down&&this.down.xy)if((b=this.pixelTolerance>=this.down.xy.distanceTo(a.xy))&&this.touch&&this.down.touches.length===this.last.touches.length){a=0;for(var c=this.down.touches.length;a<c;++a)if(this.getTouchDistance(this.down.touches[a],
this.last.touches[a])>this.pixelTolerance){b=false;break}}return b},getTouchDistance:function(a,b){return Math.sqrt(Math.pow(a.clientX-b.clientX,2)+Math.pow(a.clientY-b.clientY,2))},passesDblclickTolerance:function(){var a=true;if(this.down&&this.first)a=this.down.xy.distanceTo(this.first.xy)<=this.dblclickTolerance;return a},clearTimer:function(){if(this.timerId!=null){window.clearTimeout(this.timerId);this.timerId=null}if(this.rightclickTimerId!=null){window.clearTimeout(this.rightclickTimerId);
this.rightclickTimerId=null}},delayedCall:function(a){this.timerId=null;a&&this.callback("click",[a])},getEventInfo:function(a){var b;if(a.touches){var c=a.touches.length;b=new Array(c);for(var f,d=0;d<c;d++){f=a.touches[d];b[d]={clientX:f.clientX,clientY:f.clientY}}}return{xy:a.xy,touches:b}},deactivate:function(){var a=false;if(OpenLayers.Handler.prototype.deactivate.apply(this,arguments)){this.clearTimer();this.last=this.first=this.down=null;this.touch=false;a=true}return a},CLASS_NAME:"OpenLayers.Handler.Click"});
OpenLayers.Kinetic=OpenLayers.Class({threshold:0,deceleration:0.0035,nbPoints:100,delay:200,points:undefined,timerId:undefined,initialize:function(a){OpenLayers.Util.extend(this,a)},begin:function(){OpenLayers.Animation.stop(this.timerId);this.timerId=undefined;this.points=[]},update:function(a){this.points.unshift({xy:a,tick:(new Date).getTime()});this.points.length>this.nbPoints&&this.points.pop()},end:function(a){for(var b,c=(new Date).getTime(),f=0,d=this.points.length,e;f<d;f++){e=this.points[f];
if(c-e.tick>this.delay)break;b=e}if(b){f=(new Date).getTime()-b.tick;c=Math.sqrt(Math.pow(a.x-b.xy.x,2)+Math.pow(a.y-b.xy.y,2));f=c/f;if(!(f==0||f<this.threshold)){c=Math.asin((a.y-b.xy.y)/c);if(b.xy.x<=a.x)c=Math.PI-c;return{speed:f,theta:c}}}},move:function(a,b){var c=a.speed,f=Math.cos(a.theta),d=-Math.sin(a.theta),e=(new Date).getTime(),g=0,h=0;this.timerId=OpenLayers.Animation.start(OpenLayers.Function.bind(function(){if(this.timerId!=null){var i=(new Date).getTime()-e,j=-this.deceleration*Math.pow(i,
2)/2+c*i,l=j*f;j=j*d;var k={};k.end=false;if(-this.deceleration*i+c<=0){OpenLayers.Animation.stop(this.timerId);this.timerId=null;k.end=true}k.x=l-g;k.y=j-h;g=l;h=j;b(k.x,k.y,k.end)}},this))},CLASS_NAME:"OpenLayers.Kinetic"});
OpenLayers.Control=OpenLayers.Class({id:null,map:null,div:null,type:null,allowSelection:false,displayClass:"",title:"",autoActivate:false,active:null,handler:null,eventListeners:null,events:null,initialize:function(a){this.displayClass=this.CLASS_NAME.replace("OpenLayers.","ol").replace(/\./g,"");OpenLayers.Util.extend(this,a);this.events=new OpenLayers.Events(this);this.eventListeners instanceof Object&&this.events.on(this.eventListeners);if(this.id==null)this.id=OpenLayers.Util.createUniqueID(this.CLASS_NAME+
"_")},destroy:function(){if(this.events){this.eventListeners&&this.events.un(this.eventListeners);this.events.destroy();this.events=null}this.eventListeners=null;if(this.handler){this.handler.destroy();this.handler=null}if(this.handlers){for(var a in this.handlers)this.handlers.hasOwnProperty(a)&&typeof this.handlers[a].destroy=="function"&&this.handlers[a].destroy();this.handlers=null}if(this.map){this.map.removeControl(this);this.map=null}this.div=null},setMap:function(a){this.map=a;this.handler&&
this.handler.setMap(a)},draw:function(a){if(this.div==null){this.div=OpenLayers.Util.createDiv(this.id);this.div.className=this.displayClass;if(!this.allowSelection){this.div.className+=" olControlNoSelect";this.div.setAttribute("unselectable","on",0);this.div.onselectstart=OpenLayers.Function.False}if(this.title!="")this.div.title=this.title}if(a!=null)this.position=a.clone();this.moveTo(this.position);return this.div},moveTo:function(a){if(a!=null&&this.div!=null){this.div.style.left=a.x+"px";this.div.style.top=
a.y+"px"}},activate:function(){if(this.active)return false;this.handler&&this.handler.activate();this.active=true;this.map&&OpenLayers.Element.addClass(this.map.viewPortDiv,this.displayClass.replace(/ /g,"")+"Active");this.events.triggerEvent("activate");return true},deactivate:function(){if(this.active){this.handler&&this.handler.deactivate();this.active=false;this.map&&OpenLayers.Element.removeClass(this.map.viewPortDiv,this.displayClass.replace(/ /g,"")+"Active");this.events.triggerEvent("deactivate");
return true}return false},CLASS_NAME:"OpenLayers.Control"});OpenLayers.Control.TYPE_BUTTON=1;OpenLayers.Control.TYPE_TOGGLE=2;OpenLayers.Control.TYPE_TOOL=3;
OpenLayers.Handler.Drag=OpenLayers.Class(OpenLayers.Handler,{started:false,stopDown:true,dragging:false,touch:false,last:null,start:null,lastMoveEvt:null,oldOnselectstart:null,interval:0,timeoutId:null,documentDrag:false,documentEvents:null,initialize:function(){OpenLayers.Handler.prototype.initialize.apply(this,arguments);if(this.documentDrag===true){var a=this;this._docMove=function(b){a.mousemove({xy:{x:b.clientX,y:b.clientY},element:document})};this._docUp=function(b){a.mouseup({xy:{x:b.clientX,
y:b.clientY}})}}},dragstart:function(a){var b=true;this.dragging=false;if(this.checkModifiers(a)&&(OpenLayers.Event.isLeftClick(a)||OpenLayers.Event.isSingleTouch(a))){this.started=true;this.last=this.start=a.xy;OpenLayers.Element.addClass(this.map.viewPortDiv,"olDragDown");this.down(a);this.callback("down",[a.xy]);OpenLayers.Event.stop(a);if(!this.oldOnselectstart)this.oldOnselectstart=document.onselectstart?document.onselectstart:OpenLayers.Function.True;document.onselectstart=OpenLayers.Function.False;
b=!this.stopDown}else{this.started=false;this.last=this.start=null}return b},dragmove:function(a){this.lastMoveEvt=a;if(this.started&&!this.timeoutId&&(a.xy.x!=this.last.x||a.xy.y!=this.last.y)){if(this.documentDrag===true&&this.documentEvents)if(a.element===document){this.adjustXY(a);this.setEvent(a)}else this.removeDocumentEvents();if(this.interval>0)this.timeoutId=setTimeout(OpenLayers.Function.bind(this.removeTimeout,this),this.interval);this.dragging=true;this.move(a);this.callback("move",[a.xy]);
if(!this.oldOnselectstart){this.oldOnselectstart=document.onselectstart;document.onselectstart=OpenLayers.Function.False}this.last=a.xy}return true},dragend:function(a){if(this.started){if(this.documentDrag===true&&this.documentEvents){this.adjustXY(a);this.removeDocumentEvents()}var b=this.start!=this.last;this.dragging=this.started=false;OpenLayers.Element.removeClass(this.map.viewPortDiv,"olDragDown");this.up(a);this.callback("up",[a.xy]);b&&this.callback("done",[a.xy]);document.onselectstart=
this.oldOnselectstart}return true},down:function(){},move:function(){},up:function(){},out:function(){},mousedown:function(a){return this.dragstart(a)},touchstart:function(a){if(!this.touch){this.touch=true;this.map.events.un({mousedown:this.mousedown,mouseup:this.mouseup,mousemove:this.mousemove,click:this.click,scope:this})}return this.dragstart(a)},mousemove:function(a){return this.dragmove(a)},touchmove:function(a){return this.dragmove(a)},removeTimeout:function(){this.timeoutId=null;this.dragging&&
this.mousemove(this.lastMoveEvt)},mouseup:function(a){return this.dragend(a)},touchend:function(a){a.xy=this.last;return this.dragend(a)},mouseout:function(a){if(this.started&&OpenLayers.Util.mouseLeft(a,this.map.viewPortDiv))if(this.documentDrag===true)this.addDocumentEvents();else{var b=this.start!=this.last;this.dragging=this.started=false;OpenLayers.Element.removeClass(this.map.viewPortDiv,"olDragDown");this.out(a);this.callback("out",[]);b&&this.callback("done",[a.xy]);if(document.onselectstart)document.onselectstart=
this.oldOnselectstart}return true},click:function(){return this.start==this.last},activate:function(){var a=false;if(OpenLayers.Handler.prototype.activate.apply(this,arguments)){this.dragging=false;a=true}return a},deactivate:function(){var a=false;if(OpenLayers.Handler.prototype.deactivate.apply(this,arguments)){this.dragging=this.started=this.touch=false;this.last=this.start=null;a=true;OpenLayers.Element.removeClass(this.map.viewPortDiv,"olDragDown")}return a},adjustXY:function(a){var b=OpenLayers.Util.pagePosition(this.map.viewPortDiv);
a.xy.x-=b[0];a.xy.y-=b[1]},addDocumentEvents:function(){OpenLayers.Element.addClass(document.body,"olDragDown");this.documentEvents=true;OpenLayers.Event.observe(document,"mousemove",this._docMove);OpenLayers.Event.observe(document,"mouseup",this._docUp)},removeDocumentEvents:function(){OpenLayers.Element.removeClass(document.body,"olDragDown");this.documentEvents=false;OpenLayers.Event.stopObserving(document,"mousemove",this._docMove);OpenLayers.Event.stopObserving(document,"mouseup",this._docUp)},
CLASS_NAME:"OpenLayers.Handler.Drag"});
OpenLayers.Handler.Box=OpenLayers.Class(OpenLayers.Handler,{dragHandler:null,boxDivClassName:"olHandlerBoxZoomBox",boxOffsets:null,initialize:function(){OpenLayers.Handler.prototype.initialize.apply(this,arguments);this.dragHandler=new OpenLayers.Handler.Drag(this,{down:this.startBox,move:this.moveBox,out:this.removeBox,up:this.endBox},{keyMask:this.keyMask})},destroy:function(){OpenLayers.Handler.prototype.destroy.apply(this,arguments);if(this.dragHandler){this.dragHandler.destroy();this.dragHandler=
null}},setMap:function(a){OpenLayers.Handler.prototype.setMap.apply(this,arguments);this.dragHandler&&this.dragHandler.setMap(a)},startBox:function(){this.callback("start",[]);this.zoomBox=OpenLayers.Util.createDiv("zoomBox",{x:-9999,y:-9999});this.zoomBox.className=this.boxDivClassName;this.zoomBox.style.zIndex=this.map.Z_INDEX_BASE.Popup-1;this.map.viewPortDiv.appendChild(this.zoomBox);OpenLayers.Element.addClass(this.map.viewPortDiv,"olDrawBox")},moveBox:function(a){var b=this.dragHandler.start.x,
c=this.dragHandler.start.y,f=Math.abs(b-a.x),d=Math.abs(c-a.y),e=this.getBoxOffsets();this.zoomBox.style.width=f+e.width+1+"px";this.zoomBox.style.height=d+e.height+1+"px";this.zoomBox.style.left=(a.x<b?b-f-e.left:b-e.left)+"px";this.zoomBox.style.top=(a.y<c?c-d-e.top:c-e.top)+"px"},endBox:function(a){var b;if(Math.abs(this.dragHandler.start.x-a.x)>5||Math.abs(this.dragHandler.start.y-a.y)>5){var c=this.dragHandler.start;b=Math.min(c.y,a.y);var f=Math.max(c.y,a.y),d=Math.min(c.x,a.x);a=Math.max(c.x,
a.x);b=new OpenLayers.Bounds(d,f,a,b)}else b=this.dragHandler.start.clone();this.removeBox();this.callback("done",[b])},removeBox:function(){this.map.viewPortDiv.removeChild(this.zoomBox);this.boxOffsets=this.zoomBox=null;OpenLayers.Element.removeClass(this.map.viewPortDiv,"olDrawBox")},activate:function(){if(OpenLayers.Handler.prototype.activate.apply(this,arguments)){this.dragHandler.activate();return true}else return false},deactivate:function(){if(OpenLayers.Handler.prototype.deactivate.apply(this,
arguments)){this.dragHandler.deactivate()&&this.zoomBox&&this.removeBox();return true}else return false},getBoxOffsets:function(){if(!this.boxOffsets){var a=document.createElement("div");a.style.position="absolute";a.style.border="1px solid black";a.style.width="3px";document.body.appendChild(a);var b=a.clientWidth==3;document.body.removeChild(a);a=parseInt(OpenLayers.Element.getStyle(this.zoomBox,"border-left-width"));var c=parseInt(OpenLayers.Element.getStyle(this.zoomBox,"border-right-width")),
f=parseInt(OpenLayers.Element.getStyle(this.zoomBox,"border-top-width")),d=parseInt(OpenLayers.Element.getStyle(this.zoomBox,"border-bottom-width"));this.boxOffsets={left:a,right:c,top:f,bottom:d,width:b===false?a+c:0,height:b===false?f+d:0}}return this.boxOffsets},CLASS_NAME:"OpenLayers.Handler.Box"});
OpenLayers.Control.ZoomBox=OpenLayers.Class(OpenLayers.Control,{type:OpenLayers.Control.TYPE_TOOL,out:false,keyMask:null,alwaysZoom:false,draw:function(){this.handler=new OpenLayers.Handler.Box(this,{done:this.zoomBox},{keyMask:this.keyMask})},zoomBox:function(a){if(a instanceof OpenLayers.Bounds){var b;if(this.out){b=Math.abs(a.right-a.left);var c=Math.abs(a.top-a.bottom);b=Math.min(this.map.size.h/c,this.map.size.w/b);c=this.map.getExtent();var f=this.map.getLonLatFromPixel(a.getCenterPixel());
a=f.lon-c.getWidth()/2*b;var d=f.lon+c.getWidth()/2*b,e=f.lat-c.getHeight()/2*b;b=f.lat+c.getHeight()/2*b;b=new OpenLayers.Bounds(a,e,d,b)}else{b=this.map.getLonLatFromPixel({x:a.left,y:a.bottom});c=this.map.getLonLatFromPixel({x:a.right,y:a.top});b=new OpenLayers.Bounds(b.lon,b.lat,c.lon,c.lat)}c=this.map.getZoom();this.map.zoomToExtent(b);if(c==this.map.getZoom()&&this.alwaysZoom==true)this.map.zoomTo(c+(this.out?-1:1))}else this.out?this.map.setCenter(this.map.getLonLatFromPixel(a),this.map.getZoom()-
1):this.map.setCenter(this.map.getLonLatFromPixel(a),this.map.getZoom()+1)},CLASS_NAME:"OpenLayers.Control.ZoomBox"});
OpenLayers.Control.DragPan=OpenLayers.Class(OpenLayers.Control,{type:OpenLayers.Control.TYPE_TOOL,panned:false,interval:1,documentDrag:false,kinetic:null,enableKinetic:false,kineticInterval:10,draw:function(){if(this.enableKinetic){var a={interval:this.kineticInterval};if(typeof this.enableKinetic==="object")a=OpenLayers.Util.extend(a,this.enableKinetic);this.kinetic=new OpenLayers.Kinetic(a)}this.handler=new OpenLayers.Handler.Drag(this,{move:this.panMap,done:this.panMapDone,down:this.panMapStart},
{interval:this.interval,documentDrag:this.documentDrag})},panMapStart:function(){this.kinetic&&this.kinetic.begin()},panMap:function(a){this.kinetic&&this.kinetic.update(a);this.panned=true;this.map.pan(this.handler.last.x-a.x,this.handler.last.y-a.y,{dragging:true,animate:false})},panMapDone:function(a){if(this.panned){var b=null;if(this.kinetic)b=this.kinetic.end(a);this.map.pan(this.handler.last.x-a.x,this.handler.last.y-a.y,{dragging:!!b,animate:false});if(b){var c=this;this.kinetic.move(b,function(f,
d,e){c.map.pan(f,d,{dragging:!e,animate:false})})}this.panned=false}},CLASS_NAME:"OpenLayers.Control.DragPan"});
OpenLayers.Handler.MouseWheel=OpenLayers.Class(OpenLayers.Handler,{wheelListener:null,mousePosition:null,interval:0,delta:0,cumulative:true,initialize:function(){OpenLayers.Handler.prototype.initialize.apply(this,arguments);this.wheelListener=OpenLayers.Function.bindAsEventListener(this.onWheelEvent,this)},destroy:function(){OpenLayers.Handler.prototype.destroy.apply(this,arguments);this.wheelListener=null},onWheelEvent:function(a){if(this.map&&this.checkModifiers(a)){for(var b=false,c=false,f=false,
d=OpenLayers.Event.element(a);d!=null&&!f&&!b;){if(!b)try{var e=d.currentStyle?d.currentStyle.overflow:document.defaultView.getComputedStyle(d,null).getPropertyValue("overflow");b=e&&e=="auto"||e=="scroll"}catch(g){}if(!c){f=0;for(var h=this.map.layers.length;f<h;f++)if(d==this.map.layers[f].div||d==this.map.layers[f].pane){c=true;break}}f=d==this.map.div;d=d.parentNode}if(!b&&f){if(c){b=0;if(!a)a=window.event;if(a.wheelDelta){b=a.wheelDelta/120;if(window.opera&&window.opera.version()<9.2)b=-b}else if(a.detail)b=
-a.detail/3;this.delta+=b;if(this.interval){window.clearTimeout(this._timeoutId);this._timeoutId=window.setTimeout(OpenLayers.Function.bind(function(){this.wheelZoom(a)},this),this.interval)}else this.wheelZoom(a)}OpenLayers.Event.stop(a)}}},wheelZoom:function(a){var b=this.delta;this.delta=0;if(b){if(this.mousePosition)a.xy=this.mousePosition;if(!a.xy)a.xy=this.map.getPixelFromLonLat(this.map.getCenter());b<0?this.callback("down",[a,this.cumulative?b:-1]):this.callback("up",[a,this.cumulative?b:
1])}},mousemove:function(a){this.mousePosition=a.xy},activate:function(){if(OpenLayers.Handler.prototype.activate.apply(this,arguments)){var a=this.wheelListener;OpenLayers.Event.observe(window,"DOMMouseScroll",a);OpenLayers.Event.observe(window,"mousewheel",a);OpenLayers.Event.observe(document,"mousewheel",a);return true}else return false},deactivate:function(){if(OpenLayers.Handler.prototype.deactivate.apply(this,arguments)){var a=this.wheelListener;OpenLayers.Event.stopObserving(window,"DOMMouseScroll",
a);OpenLayers.Event.stopObserving(window,"mousewheel",a);OpenLayers.Event.stopObserving(document,"mousewheel",a);return true}else return false},CLASS_NAME:"OpenLayers.Handler.MouseWheel"});
OpenLayers.Control.Navigation=OpenLayers.Class(OpenLayers.Control,{dragPan:null,dragPanOptions:null,pinchZoom:null,pinchZoomOptions:null,documentDrag:false,zoomBox:null,zoomBoxEnabled:true,zoomWheelEnabled:true,mouseWheelOptions:null,handleRightClicks:false,zoomBoxKeyMask:OpenLayers.Handler.MOD_SHIFT,autoActivate:true,initialize:function(){this.handlers={};OpenLayers.Control.prototype.initialize.apply(this,arguments)},destroy:function(){this.deactivate();this.dragPan&&this.dragPan.destroy();this.dragPan=
null;this.zoomBox&&this.zoomBox.destroy();this.zoomBox=null;this.pinchZoom&&this.pinchZoom.destroy();this.pinchZoom=null;OpenLayers.Control.prototype.destroy.apply(this,arguments)},activate:function(){this.dragPan.activate();this.zoomWheelEnabled&&this.handlers.wheel.activate();this.handlers.click.activate();this.zoomBoxEnabled&&this.zoomBox.activate();this.pinchZoom&&this.pinchZoom.activate();return OpenLayers.Control.prototype.activate.apply(this,arguments)},deactivate:function(){this.pinchZoom&&
this.pinchZoom.deactivate();this.zoomBox.deactivate();this.dragPan.deactivate();this.handlers.click.deactivate();this.handlers.wheel.deactivate();return OpenLayers.Control.prototype.deactivate.apply(this,arguments)},draw:function(){if(this.handleRightClicks)this.map.viewPortDiv.oncontextmenu=OpenLayers.Function.False;this.handlers.click=new OpenLayers.Handler.Click(this,{click:this.defaultClick,dblclick:this.defaultDblClick,dblrightclick:this.defaultDblRightClick},{"double":true,stopDouble:true});
this.dragPan=new OpenLayers.Control.DragPan(OpenLayers.Util.extend({map:this.map,documentDrag:this.documentDrag},this.dragPanOptions));this.zoomBox=new OpenLayers.Control.ZoomBox({map:this.map,keyMask:this.zoomBoxKeyMask});this.dragPan.draw();this.zoomBox.draw();this.handlers.wheel=new OpenLayers.Handler.MouseWheel(this,{up:this.wheelUp,down:this.wheelDown},this.mouseWheelOptions);if(OpenLayers.Control.PinchZoom)this.pinchZoom=new OpenLayers.Control.PinchZoom(OpenLayers.Util.extend({map:this.map},
this.pinchZoomOptions))},defaultClick:function(a){a.lastTouches&&a.lastTouches.length==2&&this.map.zoomOut()},defaultDblClick:function(a){this.map.setCenter(this.map.getLonLatFromViewPortPx(a.xy),this.map.zoom+1)},defaultDblRightClick:function(a){this.map.setCenter(this.map.getLonLatFromViewPortPx(a.xy),this.map.zoom-1)},wheelChange:function(a,b){var c=this.map.getZoom();b=this.map.getZoom()+Math.round(b);b=Math.max(b,0);b=Math.min(b,this.map.getNumZoomLevels());if(b!==c){var f=this.map.getSize();
c=f.w/2-a.xy.x;f=a.xy.y-f.h/2;var d=this.map.baseLayer.getResolutionForZoom(b);a=this.map.getLonLatFromPixel(a.xy);this.map.setCenter(new OpenLayers.LonLat(a.lon+c*d,a.lat+f*d),b)}},wheelUp:function(a,b){this.wheelChange(a,b||1)},wheelDown:function(a,b){this.wheelChange(a,b||-1)},disableZoomBox:function(){this.zoomBoxEnabled=false;this.zoomBox.deactivate()},enableZoomBox:function(){this.zoomBoxEnabled=true;this.active&&this.zoomBox.activate()},disableZoomWheel:function(){this.zoomWheelEnabled=false;
this.handlers.wheel.deactivate()},enableZoomWheel:function(){this.zoomWheelEnabled=true;this.active&&this.handlers.wheel.activate()},CLASS_NAME:"OpenLayers.Control.Navigation"});
OpenLayers.Layer.Image=OpenLayers.Class(OpenLayers.Layer,{isBaseLayer:true,url:null,extent:null,size:null,tile:null,aspectRatio:null,initialize:function(a,b,c,f,d){this.url=b;this.maxExtent=this.extent=c;this.size=f;OpenLayers.Layer.prototype.initialize.apply(this,[a,d]);this.aspectRatio=this.extent.getHeight()/this.size.h/(this.extent.getWidth()/this.size.w)},destroy:function(){if(this.tile){this.removeTileMonitoringHooks(this.tile);this.tile.destroy();this.tile=null}OpenLayers.Layer.prototype.destroy.apply(this,
arguments)},clone:function(a){if(a==null)a=new OpenLayers.Layer.Image(this.name,this.url,this.extent,this.size,this.getOptions());return a=OpenLayers.Layer.prototype.clone.apply(this,[a])},setMap:function(){if(this.options.maxResolution==null)this.options.maxResolution=this.aspectRatio*this.extent.getWidth()/this.size.w;OpenLayers.Layer.prototype.setMap.apply(this,arguments)},moveTo:function(a,b){OpenLayers.Layer.prototype.moveTo.apply(this,arguments);var c=this.tile==null;if(b||c){this.setTileSize();
var f=this.map.getLayerPxFromLonLat({lon:this.extent.left,lat:this.extent.top});if(c){this.tile=new OpenLayers.Tile.Image(this,f,this.extent,null,this.tileSize);this.addTileMonitoringHooks(this.tile)}else{this.tile.size=this.tileSize.clone();this.tile.position=f.clone()}this.tile.draw()}},setTileSize:function(){var a=this.extent.getWidth()/this.map.getResolution(),b=this.extent.getHeight()/this.map.getResolution();this.tileSize=new OpenLayers.Size(a,b)},addTileMonitoringHooks:function(a){a.onLoadStart=
function(){this.events.triggerEvent("loadstart")};a.events.register("loadstart",this,a.onLoadStart);a.onLoadEnd=function(){this.events.triggerEvent("loadend")};a.events.register("loadend",this,a.onLoadEnd);a.events.register("unload",this,a.onLoadEnd)},removeTileMonitoringHooks:function(a){a.unload();a.events.un({loadstart:a.onLoadStart,loadend:a.onLoadEnd,unload:a.onLoadEnd,scope:this})},setUrl:function(a){this.url=a;this.tile.draw()},getURL:function(){return this.url},CLASS_NAME:"OpenLayers.Layer.Image"});
OpenLayers.Handler.Pinch=OpenLayers.Class(OpenLayers.Handler,{started:false,stopDown:false,pinching:false,last:null,start:null,touchstart:function(a){var b=true;this.pinching=false;if(OpenLayers.Event.isMultiTouch(a)){this.started=true;this.last=this.start={distance:this.getDistance(a.touches),delta:0,scale:1};this.callback("start",[a,this.start]);b=!this.stopDown}else{this.started=false;this.last=this.start=null}OpenLayers.Event.stop(a);return b},touchmove:function(a){if(this.started&&OpenLayers.Event.isMultiTouch(a)){this.pinching=
true;var b=this.getPinchData(a);this.callback("move",[a,b]);this.last=b;OpenLayers.Event.stop(a)}return true},touchend:function(a){if(this.started){this.pinching=this.started=false;this.callback("done",[a,this.start,this.last]);this.last=this.start=null}return true},activate:function(){var a=false;if(OpenLayers.Handler.prototype.activate.apply(this,arguments)){this.pinching=false;a=true}return a},deactivate:function(){var a=false;if(OpenLayers.Handler.prototype.deactivate.apply(this,arguments)){this.pinching=
this.started=false;this.last=this.start=null;a=true}return a},getDistance:function(a){var b=a[0];a=a[1];return Math.sqrt(Math.pow(b.clientX-a.clientX,2)+Math.pow(b.clientY-a.clientY,2))},getPinchData:function(a){a=this.getDistance(a.touches);return{distance:a,delta:this.last.distance-a,scale:a/this.start.distance}},CLASS_NAME:"OpenLayers.Handler.Pinch"});
OpenLayers.Events.buttonclick=OpenLayers.Class({target:null,events:["mousedown","mouseup","click","dblclick","touchstart","touchmove","touchend","keydown"],startRegEx:/^mousedown|touchstart$/,cancelRegEx:/^touchmove$/,completeRegEx:/^mouseup|touchend$/,initialize:function(a){this.target=a;for(a=this.events.length-1;a>=0;--a)this.target.register(this.events[a],this,this.buttonClick,{extension:true})},destroy:function(){for(var a=this.events.length-1;a>=0;--a)this.target.unregister(this.events[a],this,
this.buttonClick);delete this.target},getPressedButton:function(a){var b=3,c;do{if(OpenLayers.Element.hasClass(a,"olButton")){c=a;break}a=a.parentNode}while(--b>0&&a);return c},buttonClick:function(a){var b=true,c=OpenLayers.Event.element(a);if(c&&(OpenLayers.Event.isLeftClick(a)||!~a.type.indexOf("mouse")))if(c=this.getPressedButton(c)){if(a.type==="keydown")switch(a.keyCode){case OpenLayers.Event.KEY_RETURN:case OpenLayers.Event.KEY_SPACE:this.target.triggerEvent("buttonclick",{buttonElement:c});
OpenLayers.Event.stop(a);b=false;break}else if(this.startEvt){if(this.completeRegEx.test(a.type)){b=OpenLayers.Util.pagePosition(c);this.target.triggerEvent("buttonclick",{buttonElement:c,buttonXY:{x:this.startEvt.clientX-b[0],y:this.startEvt.clientY-b[1]}})}this.cancelRegEx.test(a.type)&&delete this.startEvt;OpenLayers.Event.stop(a);b=false}if(this.startRegEx.test(a.type)){this.startEvt=a;OpenLayers.Event.stop(a);b=false}}else delete this.startEvt;return b}});
OpenLayers.Control.PinchZoom=OpenLayers.Class(OpenLayers.Control,{type:OpenLayers.Control.TYPE_TOOL,containerCenter:null,pinchOrigin:null,currentCenter:null,autoActivate:true,initialize:function(){OpenLayers.Control.prototype.initialize.apply(this,arguments);this.handler=new OpenLayers.Handler.Pinch(this,{start:this.pinchStart,move:this.pinchMove,done:this.pinchDone},this.handlerOptions)},activate:function(){var a=OpenLayers.Control.prototype.activate.apply(this,arguments);if(a){this.map.events.on({moveend:this.updateContainerCenter,
scope:this});this.updateContainerCenter()}return a},deactivate:function(){var a=OpenLayers.Control.prototype.deactivate.apply(this,arguments);this.map&&this.map.events&&this.map.events.un({moveend:this.updateContainerCenter,scope:this});return a},updateContainerCenter:function(){var a=this.map.layerContainerDiv;this.containerCenter={x:parseInt(a.style.left,10)+50,y:parseInt(a.style.top,10)+50}},pinchStart:function(a){this.currentCenter=this.pinchOrigin=a.xy},pinchMove:function(a,b){b=b.scale;var c=
this.containerCenter,f=this.pinchOrigin;a=a.xy;var d=Math.round(a.x-f.x+(b-1)*(c.x-f.x));c=Math.round(a.y-f.y+(b-1)*(c.y-f.y));this.applyTransform("translate("+d+"px, "+c+"px) scale("+b+")");this.currentCenter=a},applyTransform:function(a){var b=this.map.layerContainerDiv.style;b["-webkit-transform"]=a;b["-moz-transform"]=a},pinchDone:function(a,b,c){this.applyTransform("");a=this.map.getZoomForResolution(this.map.getResolution()/c.scale,true);if(a!==this.map.getZoom()||!this.currentCenter.equals(this.pinchOrigin)){b=
this.map.getResolutionForZoom(a);c=this.map.getLonLatFromPixel(this.pinchOrigin);var f=this.currentCenter,d=this.map.getSize();c.lon+=b*(d.w/2-f.x);c.lat-=b*(d.h/2-f.y);this.map.div.clientWidth=this.map.div.clientWidth;this.map.setCenter(c,a)}},CLASS_NAME:"OpenLayers.Control.PinchZoom"});
OpenLayers.Control.TouchNavigation=OpenLayers.Class(OpenLayers.Control,{dragPan:null,dragPanOptions:null,pinchZoom:null,pinchZoomOptions:null,clickHandlerOptions:null,documentDrag:false,autoActivate:true,initialize:function(){this.handlers={};OpenLayers.Control.prototype.initialize.apply(this,arguments)},destroy:function(){this.deactivate();this.dragPan&&this.dragPan.destroy();this.dragPan=null;if(this.pinchZoom){this.pinchZoom.destroy();delete this.pinchZoom}OpenLayers.Control.prototype.destroy.apply(this,
arguments)},activate:function(){if(OpenLayers.Control.prototype.activate.apply(this,arguments)){this.dragPan.activate();this.handlers.click.activate();this.pinchZoom.activate();return true}return false},deactivate:function(){if(OpenLayers.Control.prototype.deactivate.apply(this,arguments)){this.dragPan.deactivate();this.handlers.click.deactivate();this.pinchZoom.deactivate();return true}return false},draw:function(){var a={click:this.defaultClick,dblclick:this.defaultDblClick},b=OpenLayers.Util.extend({"double":true,
stopDouble:true,pixelTolerance:2},this.clickHandlerOptions);this.handlers.click=new OpenLayers.Handler.Click(this,a,b);this.dragPan=new OpenLayers.Control.DragPan(OpenLayers.Util.extend({map:this.map,documentDrag:this.documentDrag},this.dragPanOptions));this.dragPan.draw();this.pinchZoom=new OpenLayers.Control.PinchZoom(OpenLayers.Util.extend({map:this.map},this.pinchZoomOptions))},defaultClick:function(a){a.lastTouches&&a.lastTouches.length==2&&this.map.zoomOut()},defaultDblClick:function(a){this.map.setCenter(this.map.getLonLatFromViewPortPx(a.xy),
this.map.zoom+1)},CLASS_NAME:"OpenLayers.Control.TouchNavigation"});
OpenLayers.Control.OverviewMap=OpenLayers.Class(OpenLayers.Control,{element:null,ovmap:null,size:{w:180,h:90},layers:null,minRectSize:15,minRectDisplayClass:"RectReplacement",minRatio:8,maxRatio:32,mapOptions:null,autoPan:false,handlers:null,resolutionFactor:1,maximized:false,initialize:function(a){this.layers=[];this.handlers={};OpenLayers.Control.prototype.initialize.apply(this,[a])},destroy:function(){if(this.mapDiv){this.handlers.click&&this.handlers.click.destroy();this.handlers.drag&&this.handlers.drag.destroy();
this.ovmap&&this.ovmap.viewPortDiv.removeChild(this.extentRectangle);this.extentRectangle=null;if(this.rectEvents){this.rectEvents.destroy();this.rectEvents=null}if(this.ovmap){this.ovmap.destroy();this.ovmap=null}this.element.removeChild(this.mapDiv);this.mapDiv=null;this.div.removeChild(this.element);this.element=null;if(this.maximizeDiv){this.div.removeChild(this.maximizeDiv);this.maximizeDiv=null}if(this.minimizeDiv){this.div.removeChild(this.minimizeDiv);this.minimizeDiv=null}this.map.events.un({buttonclick:this.onButtonClick,
moveend:this.update,changebaselayer:this.baseLayerDraw,scope:this});OpenLayers.Control.prototype.destroy.apply(this,arguments)}},draw:function(){OpenLayers.Control.prototype.draw.apply(this,arguments);if(this.layers.length===0)if(this.map.baseLayer)this.layers=[this.map.baseLayer.clone()];else{this.map.events.register("changebaselayer",this,this.baseLayerDraw);return this.div}this.element=document.createElement("div");this.element.className=this.displayClass+"Element";this.element.style.display="none";
this.mapDiv=document.createElement("div");this.mapDiv.style.width=this.size.w+"px";this.mapDiv.style.height=this.size.h+"px";this.mapDiv.style.position="relative";this.mapDiv.style.overflow="hidden";this.mapDiv.id=OpenLayers.Util.createUniqueID("overviewMap");this.extentRectangle=document.createElement("div");this.extentRectangle.style.position="absolute";this.extentRectangle.style.zIndex=1E3;this.extentRectangle.className=this.displayClass+"ExtentRectangle";this.element.appendChild(this.mapDiv);
this.div.appendChild(this.element);if(this.outsideViewport)this.element.style.display="";else{this.div.className+=" "+this.displayClass+"Container";var a=OpenLayers.Util.getImageLocation("layer-switcher-maximize.png");this.maximizeDiv=OpenLayers.Util.createAlphaImageDiv(this.displayClass+"MaximizeButton",null,null,a,"absolute");this.maximizeDiv.style.display="none";this.maximizeDiv.className=this.displayClass+"MaximizeButton olButton";this.div.appendChild(this.maximizeDiv);a=OpenLayers.Util.getImageLocation("layer-switcher-minimize.png");
this.minimizeDiv=OpenLayers.Util.createAlphaImageDiv("OpenLayers_Control_minimizeDiv",null,null,a,"absolute");this.minimizeDiv.style.display="none";this.minimizeDiv.className=this.displayClass+"MinimizeButton olButton";this.div.appendChild(this.minimizeDiv);this.minimizeControl()}this.map.getExtent()&&this.update();this.map.events.on({buttonclick:this.onButtonClick,moveend:this.update,scope:this});this.maximized&&this.maximizeControl();return this.div},baseLayerDraw:function(){this.draw();this.map.events.unregister("changebaselayer",
this,this.baseLayerDraw)},rectDrag:function(a){var b=this.handlers.drag.last.x-a.x,c=this.handlers.drag.last.y-a.y;if(b!=0||c!=0){var f=this.rectPxBounds.top,d=this.rectPxBounds.left;a=Math.abs(this.rectPxBounds.getHeight());var e=this.rectPxBounds.getWidth();c=Math.max(0,f-c);c=Math.min(c,this.ovmap.size.h-this.hComp-a);b=Math.max(0,d-b);b=Math.min(b,this.ovmap.size.w-this.wComp-e);this.setRectPxBounds(new OpenLayers.Bounds(b,c+a,b+e,c))}},mapDivClick:function(a){var b=this.rectPxBounds.getCenterPixel(),
c=a.xy.x-b.x,f=a.xy.y-b.y,d=this.rectPxBounds.top,e=this.rectPxBounds.left;a=Math.abs(this.rectPxBounds.getHeight());b=this.rectPxBounds.getWidth();f=Math.max(0,d+f);f=Math.min(f,this.ovmap.size.h-a);c=Math.max(0,e+c);c=Math.min(c,this.ovmap.size.w-b);this.setRectPxBounds(new OpenLayers.Bounds(c,f+a,c+b,f));this.updateMapToRect()},onButtonClick:function(a){if(a.buttonElement===this.minimizeDiv)this.minimizeControl();else a.buttonElement===this.maximizeDiv&&this.maximizeControl()},maximizeControl:function(a){this.element.style.display=
"";this.showToggle(false);a!=null&&OpenLayers.Event.stop(a)},minimizeControl:function(a){this.element.style.display="none";this.showToggle(true);a!=null&&OpenLayers.Event.stop(a)},showToggle:function(a){this.maximizeDiv.style.display=a?"":"none";this.minimizeDiv.style.display=a?"none":""},update:function(){this.ovmap==null&&this.createMap();if(this.autoPan||!this.isSuitableOverview())this.updateOverview();this.updateRectToMap()},isSuitableOverview:function(){var a=this.map.getExtent(),b=this.map.maxExtent;
a=new OpenLayers.Bounds(Math.max(a.left,b.left),Math.max(a.bottom,b.bottom),Math.min(a.right,b.right),Math.min(a.top,b.top));if(this.ovmap.getProjection()!=this.map.getProjection())a=a.transform(this.map.getProjectionObject(),this.ovmap.getProjectionObject());b=this.ovmap.getResolution()/this.map.getResolution();return b>this.minRatio&&b<=this.maxRatio&&this.ovmap.getExtent().containsBounds(a)},updateOverview:function(){var a=this.map.getResolution(),b=this.ovmap.getResolution(),c=b/a;if(c>this.maxRatio)b=
this.minRatio*a;else if(c<=this.minRatio)b=this.maxRatio*a;if(this.ovmap.getProjection()!=this.map.getProjection()){a=this.map.center.clone();a.transform(this.map.getProjectionObject(),this.ovmap.getProjectionObject())}else a=this.map.center;this.ovmap.setCenter(a,this.ovmap.getZoomForResolution(b*this.resolutionFactor));this.updateRectToMap()},createMap:function(){var a=OpenLayers.Util.extend({controls:[],maxResolution:"auto",fallThrough:false},this.mapOptions);this.ovmap=new OpenLayers.Map(this.mapDiv,
a);this.ovmap.viewPortDiv.appendChild(this.extentRectangle);OpenLayers.Event.stopObserving(window,"unload",this.ovmap.unloadDestroy);this.ovmap.addLayers(this.layers);this.ovmap.zoomToMaxExtent();this.wComp=(this.wComp=parseInt(OpenLayers.Element.getStyle(this.extentRectangle,"border-left-width"))+parseInt(OpenLayers.Element.getStyle(this.extentRectangle,"border-right-width")))?this.wComp:2;this.hComp=(this.hComp=parseInt(OpenLayers.Element.getStyle(this.extentRectangle,"border-top-width"))+parseInt(OpenLayers.Element.getStyle(this.extentRectangle,
"border-bottom-width")))?this.hComp:2;this.handlers.drag=new OpenLayers.Handler.Drag(this,{move:this.rectDrag,done:this.updateMapToRect},{map:this.ovmap});this.handlers.click=new OpenLayers.Handler.Click(this,{click:this.mapDivClick},{single:true,"double":false,stopSingle:true,stopDouble:true,pixelTolerance:1,map:this.ovmap});this.handlers.click.activate();this.rectEvents=new OpenLayers.Events(this,this.extentRectangle,null,true);this.rectEvents.register("mouseover",this,function(){!this.handlers.drag.active&&
!this.map.dragging&&this.handlers.drag.activate()});this.rectEvents.register("mouseout",this,function(){this.handlers.drag.dragging||this.handlers.drag.deactivate()});if(this.ovmap.getProjection()!=this.map.getProjection()){a=this.map.getProjectionObject().getUnits()||this.map.units||this.map.baseLayer.units;var b=this.ovmap.getProjectionObject().getUnits()||this.ovmap.units||this.ovmap.baseLayer.units;this.resolutionFactor=a&&b?OpenLayers.INCHES_PER_UNIT[a]/OpenLayers.INCHES_PER_UNIT[b]:1}},updateRectToMap:function(){var a=
this.getRectBoundsFromMapBounds(this.ovmap.getProjection()!=this.map.getProjection()?this.map.getExtent().transform(this.map.getProjectionObject(),this.ovmap.getProjectionObject()):this.map.getExtent());a&&this.setRectPxBounds(a)},updateMapToRect:function(){var a=this.getMapBoundsFromRectBounds(this.rectPxBounds);if(this.ovmap.getProjection()!=this.map.getProjection())a=a.transform(this.ovmap.getProjectionObject(),this.map.getProjectionObject());this.map.panTo(a.getCenterLonLat())},setRectPxBounds:function(a){var b=
Math.max(a.top,0),c=Math.max(a.left,0),f=Math.min(a.top+Math.abs(a.getHeight()),this.ovmap.size.h-this.hComp);a=Math.min(a.left+a.getWidth(),this.ovmap.size.w-this.wComp);var d=Math.max(a-c,0),e=Math.max(f-b,0);if(d<this.minRectSize||e<this.minRectSize){this.extentRectangle.className=this.displayClass+this.minRectDisplayClass;d=c+d/2-this.minRectSize/2;this.extentRectangle.style.top=Math.round(b+e/2-this.minRectSize/2)+"px";this.extentRectangle.style.left=Math.round(d)+"px";this.extentRectangle.style.height=
this.minRectSize+"px";this.extentRectangle.style.width=this.minRectSize+"px"}else{this.extentRectangle.className=this.displayClass+"ExtentRectangle";this.extentRectangle.style.top=Math.round(b)+"px";this.extentRectangle.style.left=Math.round(c)+"px";this.extentRectangle.style.height=Math.round(e)+"px";this.extentRectangle.style.width=Math.round(d)+"px"}this.rectPxBounds=new OpenLayers.Bounds(Math.round(c),Math.round(f),Math.round(a),Math.round(b))},getRectBoundsFromMapBounds:function(a){var b=this.getOverviewPxFromLonLat({lon:a.left,
lat:a.bottom});a=this.getOverviewPxFromLonLat({lon:a.right,lat:a.top});var c=null;if(b&&a)c=new OpenLayers.Bounds(b.x,b.y,a.x,a.y);return c},getMapBoundsFromRectBounds:function(a){var b=this.getLonLatFromOverviewPx({x:a.left,y:a.bottom});a=this.getLonLatFromOverviewPx({x:a.right,y:a.top});return new OpenLayers.Bounds(b.lon,b.lat,a.lon,a.lat)},getLonLatFromOverviewPx:function(a){var b=this.ovmap.size,c=this.ovmap.getResolution(),f=this.ovmap.getExtent().getCenterLonLat();return{lon:f.lon+(a.x-b.w/
2)*c,lat:f.lat-(a.y-b.h/2)*c}},getOverviewPxFromLonLat:function(a){var b=this.ovmap.getResolution(),c=this.ovmap.getExtent();if(c)return{x:Math.round(1/b*(a.lon-c.left)),y:Math.round(1/b*(c.top-a.lat))}},CLASS_NAME:"OpenLayers.Control.OverviewMap"});
OpenLayers.Control.Zoom=OpenLayers.Class(OpenLayers.Control,{zoomInText:"+",zoomInId:"olZoomInLink",zoomOutText:"-",zoomOutId:"olZoomOutLink",draw:function(){var a=OpenLayers.Control.prototype.draw.apply(this),b=this.getOrCreateLinks(a),c=b.zoomIn;b=b.zoomOut;var f=this.map.events;if(b.parentNode!==a){f=this.events;f.attachToElement(b.parentNode)}f.register("buttonclick",this,this.onZoomClick);this.zoomInLink=c;this.zoomOutLink=b;return a},getOrCreateLinks:function(a){var b=document.getElementById(this.zoomInId),
c=document.getElementById(this.zoomOutId);if(!b){b=document.createElement("a");b.href="#zoomIn";b.appendChild(document.createTextNode(this.zoomInText));b.className="olControlZoomIn";a.appendChild(b)}OpenLayers.Element.addClass(b,"olButton");if(!c){c=document.createElement("a");c.href="#zoomOut";c.appendChild(document.createTextNode(this.zoomOutText));c.className="olControlZoomOut";a.appendChild(c)}OpenLayers.Element.addClass(c,"olButton");return{zoomIn:b,zoomOut:c}},onZoomClick:function(a){a=a.buttonElement;
if(a===this.zoomInLink)this.map.zoomIn();else a===this.zoomOutLink&&this.map.zoomOut()},destroy:function(){this.map&&this.map.events.unregister("buttonclick",this,this.onZoomClick);delete this.zoomInLink;delete this.zoomOutLink;OpenLayers.Control.prototype.destroy.apply(this)},CLASS_NAME:"OpenLayers.Control.Zoom"});OpenLayers.ProxyHost="";
OpenLayers.Request={DEFAULT_CONFIG:{method:"GET",url:window.location.href,async:true,user:undefined,password:undefined,params:null,proxy:OpenLayers.ProxyHost,headers:{},data:null,callback:function(){},success:null,failure:null,scope:null},URL_SPLIT_REGEX:/([^:]*:)\/\/([^:]*:?[^@]*@)?([^:\/\?]*):?([^\/\?]*)/,events:new OpenLayers.Events(this),makeSameOrigin:function(a,b){var c=a.indexOf("http")!==0,f=!c&&a.match(this.URL_SPLIT_REGEX);if(f){var d=window.location;c=f[1]==d.protocol&&f[3]==d.hostname;
f=f[4];d=d.port;if(f!=80&&f!=""||d!="80"&&d!="")c=c&&f==d}if(!c)if(b)a=typeof b=="function"?b(a):b+encodeURIComponent(a);else OpenLayers.Console.warn(OpenLayers.i18n("proxyNeeded"),{url:a});return a},issue:function(a){var b=OpenLayers.Util.extend(this.DEFAULT_CONFIG,{proxy:OpenLayers.ProxyHost});a=OpenLayers.Util.applyDefaults(a,b);b=false;var c;for(c in a.headers)if(a.headers.hasOwnProperty(c))if(c.toLowerCase()==="x-requested-with")b=true;if(b===false)a.headers["X-Requested-With"]="XMLHttpRequest";
var f=new OpenLayers.Request.XMLHttpRequest,d=OpenLayers.Util.urlAppend(a.url,OpenLayers.Util.getParameterString(a.params||{}));d=OpenLayers.Request.makeSameOrigin(d,a.proxy);f.open(a.method,d,a.async,a.user,a.password);for(var e in a.headers)f.setRequestHeader(e,a.headers[e]);var g=this.events,h=this;f.onreadystatechange=function(){f.readyState==OpenLayers.Request.XMLHttpRequest.DONE&&g.triggerEvent("complete",{request:f,config:a,requestUrl:d})!==false&&h.runCallbacks({request:f,config:a,requestUrl:d})};
a.async===false?f.send(a.data):window.setTimeout(function(){f.readyState!==0&&f.send(a.data)},0);return f},runCallbacks:function(a){var b=a.request,c=a.config,f=c.scope?OpenLayers.Function.bind(c.callback,c.scope):c.callback,d;if(c.success)d=c.scope?OpenLayers.Function.bind(c.success,c.scope):c.success;var e;if(c.failure)e=c.scope?OpenLayers.Function.bind(c.failure,c.scope):c.failure;if(OpenLayers.Util.createUrlObject(c.url).protocol=="file:"&&b.responseText)b.status=200;f(b);if(!b.status||b.status>=
200&&b.status<300){this.events.triggerEvent("success",a);d&&d(b)}if(b.status&&(b.status<200||b.status>=300)){this.events.triggerEvent("failure",a);e&&e(b)}},GET:function(a){a=OpenLayers.Util.extend(a,{method:"GET"});return OpenLayers.Request.issue(a)},POST:function(a){a=OpenLayers.Util.extend(a,{method:"POST"});a.headers=a.headers?a.headers:{};"CONTENT-TYPE"in OpenLayers.Util.upperCaseObject(a.headers)||(a.headers["Content-Type"]="application/xml");return OpenLayers.Request.issue(a)},PUT:function(a){a=
OpenLayers.Util.extend(a,{method:"PUT"});a.headers=a.headers?a.headers:{};"CONTENT-TYPE"in OpenLayers.Util.upperCaseObject(a.headers)||(a.headers["Content-Type"]="application/xml");return OpenLayers.Request.issue(a)},DELETE:function(a){a=OpenLayers.Util.extend(a,{method:"DELETE"});return OpenLayers.Request.issue(a)},HEAD:function(a){a=OpenLayers.Util.extend(a,{method:"HEAD"});return OpenLayers.Request.issue(a)},OPTIONS:function(a){a=OpenLayers.Util.extend(a,{method:"OPTIONS"});return OpenLayers.Request.issue(a)}};
(function(){function a(){this._object=h&&!l?new h:new window.ActiveXObject("Microsoft.XMLHTTP");this._listeners=[]}function b(){return new a}function c(k){k._object.send(k._data);if(i&&!k._async){k.readyState=b.OPENED;for(e(k);k.readyState<b.DONE;){k.readyState++;f(k);if(k._aborted)return}}}function f(k){b.onreadystatechange&&b.onreadystatechange.apply(k);k.dispatchEvent({type:"readystatechange",bubbles:false,cancelable:false,timeStamp:new Date+0})}function d(k){var m=k.responseXML,n=k.responseText;
if(j&&n&&m&&!m.documentElement&&k.getResponseHeader("Content-Type").match(/[^\/]+\/[^\+]+\+xml/)){m=new window.ActiveXObject("Microsoft.XMLDOM");m.async=false;m.validateOnParse=false;m.loadXML(n)}if(m)if(j&&m.parseError!=0||!m.documentElement||m.documentElement&&m.documentElement.tagName=="parsererror")return null;return m}function e(k){try{k.responseText=k._object.responseText}catch(m){}try{k.responseXML=d(k._object)}catch(n){}try{k.status=k._object.status}catch(q){}try{k.statusText=k._object.statusText}catch(p){}}
function g(k){k._object.onreadystatechange=new window.Function}var h=window.XMLHttpRequest,i=!!window.controllers,j=window.document.all&&!window.opera,l=j&&window.navigator.userAgent.match(/MSIE 7.0/);b.prototype=a.prototype;if(i&&h.wrapped)b.wrapped=h.wrapped;b.UNSENT=0;b.OPENED=1;b.HEADERS_RECEIVED=2;b.LOADING=3;b.DONE=4;b.prototype.readyState=b.UNSENT;b.prototype.responseText="";b.prototype.responseXML=null;b.prototype.status=0;b.prototype.statusText="";b.prototype.priority="NORMAL";b.prototype.onreadystatechange=
null;b.onreadystatechange=null;b.onopen=null;b.onsend=null;b.onabort=null;b.prototype.open=function(k,m,n,q,p){delete this._headers;if(arguments.length<3)n=true;this._async=n;var o=this,t=this.readyState,u;if(j&&n){u=function(){if(t!=b.DONE){g(o);o.abort()}};window.attachEvent("onunload",u)}b.onopen&&b.onopen.apply(this,arguments);if(arguments.length>4)this._object.open(k,m,n,q,p);else arguments.length>3?this._object.open(k,m,n,q):this._object.open(k,m,n);this.readyState=b.OPENED;f(this);this._object.onreadystatechange=
function(){if(!(i&&!n)){o.readyState=o._object.readyState;e(o);if(o._aborted)o.readyState=b.UNSENT;else{if(o.readyState==b.DONE){delete o._data;g(o);j&&n&&window.detachEvent("onunload",u)}t!=o.readyState&&f(o);t=o.readyState}}}};b.prototype.send=function(k){b.onsend&&b.onsend.apply(this,arguments);arguments.length||(k=null);if(k&&k.nodeType){k=window.XMLSerializer?(new window.XMLSerializer).serializeToString(k):k.xml;this._headers["Content-Type"]||this._object.setRequestHeader("Content-Type","application/xml")}this._data=
k;c(this)};b.prototype.abort=function(){b.onabort&&b.onabort.apply(this,arguments);if(this.readyState>b.UNSENT)this._aborted=true;this._object.abort();g(this);this.readyState=b.UNSENT;delete this._data};b.prototype.getAllResponseHeaders=function(){return this._object.getAllResponseHeaders()};b.prototype.getResponseHeader=function(k){return this._object.getResponseHeader(k)};b.prototype.setRequestHeader=function(k,m){if(!this._headers)this._headers={};this._headers[k]=m;return this._object.setRequestHeader(k,
m)};b.prototype.addEventListener=function(k,m,n){for(var q=0,p;p=this._listeners[q];q++)if(p[0]==k&&p[1]==m&&p[2]==n)return;this._listeners.push([k,m,n])};b.prototype.removeEventListener=function(k,m,n){for(var q=0,p;p=this._listeners[q];q++)if(p[0]==k&&p[1]==m&&p[2]==n)break;p&&this._listeners.splice(q,1)};b.prototype.dispatchEvent=function(k){k={type:k.type,target:this,currentTarget:this,eventPhase:2,bubbles:k.bubbles,cancelable:k.cancelable,timeStamp:k.timeStamp,stopPropagation:function(){},preventDefault:function(){},
initEvent:function(){}};if(k.type=="readystatechange"&&this.onreadystatechange)(this.onreadystatechange.handleEvent||this.onreadystatechange).apply(this,[k]);for(var m=0,n;n=this._listeners[m];m++)if(n[0]==k.type&&!n[2])(n[1].handleEvent||n[1]).apply(this,[k])};b.prototype.toString=function(){return"[object XMLHttpRequest]"};b.toString=function(){return"[XMLHttpRequest]"};if(!window.Function.prototype.apply)window.Function.prototype.apply=function(k,m){m||(m=[]);k.__func=this;k.__func(m[0],m[1],m[2],
m[3],m[4]);delete k.__func};OpenLayers.Request.XMLHttpRequest=b})();
OpenLayers.Handler.Keyboard=OpenLayers.Class(OpenLayers.Handler,{KEY_EVENTS:["keydown","keyup"],eventListener:null,observeElement:null,initialize:function(){OpenLayers.Handler.prototype.initialize.apply(this,arguments);this.eventListener=OpenLayers.Function.bindAsEventListener(this.handleKeyEvent,this)},destroy:function(){this.deactivate();this.eventListener=null;OpenLayers.Handler.prototype.destroy.apply(this,arguments)},activate:function(){if(OpenLayers.Handler.prototype.activate.apply(this,arguments)){this.observeElement=
this.observeElement||document;for(var a=0,b=this.KEY_EVENTS.length;a<b;a++)OpenLayers.Event.observe(this.observeElement,this.KEY_EVENTS[a],this.eventListener);return true}else return false},deactivate:function(){var a=false;if(OpenLayers.Handler.prototype.deactivate.apply(this,arguments)){a=0;for(var b=this.KEY_EVENTS.length;a<b;a++)OpenLayers.Event.stopObserving(this.observeElement,this.KEY_EVENTS[a],this.eventListener);a=true}return a},handleKeyEvent:function(a){this.checkModifiers(a)&&this.callback(a.type,
[a])},CLASS_NAME:"OpenLayers.Handler.Keyboard"});
OpenLayers.Control.KeyboardDefaults=OpenLayers.Class(OpenLayers.Control,{autoActivate:true,slideFactor:75,observeElement:null,draw:function(){this.handler=new OpenLayers.Handler.Keyboard(this,{keydown:this.defaultKeyPress},{observeElement:this.observeElement||document})},defaultKeyPress:function(a){var b,c=true;switch(a.keyCode){case OpenLayers.Event.KEY_LEFT:this.map.pan(-this.slideFactor,0);break;case OpenLayers.Event.KEY_RIGHT:this.map.pan(this.slideFactor,0);break;case OpenLayers.Event.KEY_UP:this.map.pan(0,
-this.slideFactor);break;case OpenLayers.Event.KEY_DOWN:this.map.pan(0,this.slideFactor);break;case 33:b=this.map.getSize();this.map.pan(0,-0.75*b.h);break;case 34:b=this.map.getSize();this.map.pan(0,0.75*b.h);break;case 35:b=this.map.getSize();this.map.pan(0.75*b.w,0);break;case 36:b=this.map.getSize();this.map.pan(-0.75*b.w,0);break;case 43:case 61:case 187:case 107:this.map.zoomIn();break;case 45:case 109:case 189:case 95:this.map.zoomOut();break;default:c=false}c&&OpenLayers.Event.stop(a)},CLASS_NAME:"OpenLayers.Control.KeyboardDefaults"});
OpenLayers.Layer.Zoomify=OpenLayers.Class(OpenLayers.Layer.Grid,{size:null,isBaseLayer:true,standardTileSize:256,tileOriginCorner:"tl",numberOfTiers:0,tileCountUpToTier:null,tierSizeInTiles:null,tierImageSize:null,initialize:function(a,b,c,f){this.initializeZoomify(c);OpenLayers.Layer.Grid.prototype.initialize.apply(this,[a,b,c,{},f])},initializeZoomify:function(a){a=a.clone();var b=new OpenLayers.Size(Math.ceil(a.w/this.standardTileSize),Math.ceil(a.h/this.standardTileSize));this.tierSizeInTiles=
[b];for(this.tierImageSize=[a];a.w>this.standardTileSize||a.h>this.standardTileSize;){a=new OpenLayers.Size(Math.floor(a.w/2),Math.floor(a.h/2));b=new OpenLayers.Size(Math.ceil(a.w/this.standardTileSize),Math.ceil(a.h/this.standardTileSize));this.tierSizeInTiles.push(b);this.tierImageSize.push(a)}this.tierSizeInTiles.reverse();this.tierImageSize.reverse();this.numberOfTiers=this.tierSizeInTiles.length;this.tileCountUpToTier=[0];for(a=1;a<this.numberOfTiers;a++)this.tileCountUpToTier.push(this.tierSizeInTiles[a-
1].w*this.tierSizeInTiles[a-1].h+this.tileCountUpToTier[a-1])},destroy:function(){OpenLayers.Layer.Grid.prototype.destroy.apply(this,arguments);this.tileCountUpToTier.length=0;this.tierSizeInTiles.length=0;this.tierImageSize.length=0},clone:function(a){if(a==null)a=new OpenLayers.Layer.Zoomify(this.name,this.url,this.size,this.options);return a=OpenLayers.Layer.Grid.prototype.clone.apply(this,[a])},getURL:function(a){a=this.adjustBounds(a);var b=this.map.getResolution(),c=Math.round((a.left-this.tileOrigin.lon)/
(b*this.tileSize.w));a=Math.round((this.tileOrigin.lat-a.top)/(b*this.tileSize.h));b=this.map.getZoom();c="TileGroup"+Math.floor((c+a*this.tierSizeInTiles[b].w+this.tileCountUpToTier[b])/256)+"/"+b+"-"+c+"-"+a+".jpg";a=this.url;if(OpenLayers.Util.isArray(a))a=this.selectUrl(c,a);return a+c},getImageSize:function(){if(arguments.length>0){var a=this.adjustBounds(arguments[0]),b=this.map.getResolution(),c=Math.round((a.left-this.tileOrigin.lon)/(b*this.tileSize.w));a=Math.round((this.tileOrigin.lat-
a.top)/(b*this.tileSize.h));b=this.map.getZoom();var f=this.standardTileSize,d=this.standardTileSize;if(c==this.tierSizeInTiles[b].w-1){f=this.tierImageSize[b].w%this.standardTileSize;if(f==0)f=this.standardTileSize}if(a==this.tierSizeInTiles[b].h-1){d=this.tierImageSize[b].h%this.standardTileSize;if(d==0)d=this.standardTileSize}if(c==this.tierSizeInTiles[b].w)f=Math.ceil(this.size.w/Math.pow(2,this.numberOfTiers-1-b)-this.tierImageSize[b].w);if(a==this.tierSizeInTiles[b].h)d=Math.ceil(this.size.h/
Math.pow(2,this.numberOfTiers-1-b)-this.tierImageSize[b].h);return new OpenLayers.Size(f,d)}else return this.tileSize},setMap:function(){OpenLayers.Layer.Grid.prototype.setMap.apply(this,arguments);this.tileOrigin=new OpenLayers.LonLat(this.map.maxExtent.left,this.map.maxExtent.top)},calculateGridLayout:function(a,b,c){var f=c*this.tileSize.w;c=c*this.tileSize.h;var d=a.left-b.lon,e=Math.floor(d/f)-this.buffer;d=-(d/f-e)*this.tileSize.w;e=b.lon+e*f;a=b.lat-a.top+c;var g=Math.floor(a/c)-this.buffer;
return{tilelon:f,tilelat:c,tileoffsetlon:e,tileoffsetlat:b.lat-c*g,tileoffsetx:d,tileoffsety:(g-a/c)*this.tileSize.h}},CLASS_NAME:"OpenLayers.Layer.Zoomify"});(function(){var a=this.SpriteLoader={};a.preload=function(b,c){if(typeof b==="string")b=[b];var f={callback:c,numLoaded:0,numImages:b.length,images:[]};for(c=0;c<b.length;c+=1)a.load(b[c],f)};a.load=function(b,c){var f=new Image;c.images.push(f);f.onload=function(){c.numLoaded+=1;c.numLoaded===c.numImages&&c.callback(c.images)};f.src=b}})();
(function(a,b){var c=b.SpriteSpin={},f=c.api={};c.modules={};c.behaviors={};c.disableSelection=function(d){d.attr("unselectable","on").css({"-moz-user-select":"none","-khtml-user-select":"none","-webkit-user-select":"none","user-select":"none"}).on("selectstart",false);return d};c.updateInput=function(d,e){if(d.touches===undefined&&d.originalEvent!==undefined)d.touches=d.originalEvent.touches;e.oldX=e.currentX;e.oldY=e.currentY;if(d.touches!==undefined&&d.touches.length>0){e.currentX=d.touches[0].clientX;
e.currentY=d.touches[0].clientY}else{e.currentX=d.clientX;e.currentY=d.clientY}if(e.startX===undefined||e.startY===undefined){e.startX=e.currentX;e.startY=e.currentY;e.clickframe=e.frame}if(e.oldX===undefined||e.oldY===undefined){e.oldX=e.currentX;e.oldY=e.currentY}e.dX=e.currentX-e.startX;e.dY=e.currentY-e.startY;e.dW=e.dX*e.dragDirX+e.dY*e.dragDirY;e.ddX=e.currentX-e.oldX;e.ddY=e.currentY-e.oldY;e.ddW=e.ddX*e.dragDirX+e.ddY*e.dragDirY;return false};c.resetInput=function(d){d.startX=undefined;d.startY=
undefined;d.currentX=undefined;d.currentY=undefined;d.oldX=undefined;d.oldY=undefined;d.dX=0;d.dY=0;d.dW=0;d.ddX=0;d.ddY=0;d.ddW=0;typeof d.module.resetInput==="function"&&d.module.resetInput(d)};c.clamp=function(d,e,g){return d>g?g:d<e?e:d};c.wrap=function(d,e,g,h){for(;d>g;)d-=h;for(;d<e;)d+=h;return d};c.reload=function(d,e){e&&d.module.initialize&&d.module.initialize(d);c.prepareBackground(d);c.preloadImages(d,function(){c.rebindEvents(d);d.module.reload(d);d.target.trigger("onLoad",d)})};c.preloadImages=
function(d,e){d.preload.fadeIn(250,function(){SpriteLoader.preload(d.source,function(g){d.preload.fadeOut(250,function(){d.preload.hide()});d.stage.show();d.canvas&&d.canvas.show();d.images=g;e.apply(d.target,[d])})})};c.prepareBackground=function(d){var e=[d.width,"px"].join(""),g=[d.height,"px"].join("");d.target.css({width:e,height:g,position:"relative"});var h={width:e,height:g,top:"0px",left:"0px",position:"absolute"};a.extend(h,d.preloadCSS||{});d.preload.css(h).html(d.preloadHtml||"").hide();
d.stage.css({width:e,height:g,top:"0px",left:"0px",position:"absolute"}).hide();if(d.canvas){d.canvas[0].width=d.width;d.canvas[0].height=d.height;d.canvas.css({width:e,height:g,top:"0px",left:"0px",position:"absolute"}).hide()}};c.draw=function(d){d.module.draw(d)};c.rebindEvents=function(d){var e=d.target;e.unbind(".spritespin");var g=d.behavior;if(typeof d.behavior==="string")g=c.behaviors[d.behavior];g=g||{};var h=function(i){i.cancelable&&i.preventDefault();return false};e.bind("mousedown.spritespin",
g.mousedown||a.noop);e.bind("mousemove.spritespin",g.mousemove||a.noop);e.bind("mouseup.spritespin",g.mouseup||a.noop);e.bind("mouseenter.spritespin",g.mouseenter||a.noop);e.bind("mouseover.spritespin",g.mouseover||a.noop);e.bind("mouseleave.spritespin",g.mouseleave||a.noop);e.bind("dblclick.spritespin",g.dblclick||a.noop);e.bind("onFrame.spritespin",g.onFrame||a.noop);if(d.touchable){e.bind("touchstart.spritespin",g.mousedown||a.noop);e.bind("touchmove.spritespin",g.mousemove||a.noop);e.bind("touchend.spritespin",
g.mouseup||a.noop);e.bind("touchcancel.spritespin",g.mouseleave||a.noop);e.bind("click.spritespin",h);e.bind("gesturestart.spritespin",h);e.bind("gesturechange.spritespin",h);e.bind("gestureend.spritespin",h)}e.bind("mousedown.spritespin selectstart.spritespin",h);e.bind("onFrame.spritespin",function(i,j){c.draw(j)});e.bind("onLoad.spritespin",function(i,j){j.target.spritespin("animate",j.animate,j.loop)});typeof d.onFrame==="function"&&e.bind("onFrame.spritespin",d.onFrame);typeof d.onLoad==="function"&&
e.bind("onLoad.spritespin",d.onLoad)};a.fn.spritespin=function(d){if(f[d])return f[d].apply(this,Array.prototype.slice.call(arguments,1));if(typeof d==="object"||!d)return f.init.apply(this,arguments);a.error("Method "+d+" does not exist on jQuery.spritespin")};f.init=function(d){var e={width:undefined,height:undefined,frames:36,frame:0,module:"360",behavior:"drag",animate:true,loop:false,loopFrame:0,frameStep:1,frameTime:36,frameWrap:true,reverse:false,sense:1,orientation:"horizontal",source:undefined,
preloadHtml:undefined,preloadCSS:undefined,onFrame:undefined,onLoad:undefined,touchable:undefined};d=d||{};a.extend(e,d);return this.each(function(){var g=a(this),h=g.data("spritespin");if(h){a.extend(h,d);d.source?SpriteSpin.reload(h):g.spritespin("animate",h.animate,h.loop)}else{h=g.find("img");var i=0;if(h.length>0){e.source=[];for(i=0;i<h.length;i+=1)e.source.push(a(h[i]).attr("src"))}if(typeof e.source==="string")e.source=[e.source];c.disableSelection(g).css({overflow:"hidden",position:"relative"});
g.empty();g.append(a("<div class='spritespin-stage'/>"));g.append(a("<div class='spritespin-preload'/>"));g.addClass("spritespin-instance");if(e.enableCanvas){h=a("<canvas class='spritespin-canvas'/>")[0];if(h.getContext&&h.getContext("2d")){e.canvas=a(h);e.context=h.getContext("2d");g.append(e.canvas)}}if(typeof e.module==="string")e.module=SpriteSpin.modules[e.module];e.target=g;e.stage=g.find(".spritespin-stage");e.preload=g.find(".spritespin-preload");e.animation=null;e.touchable=e.touchable||
/iphone|ipod|ipad|android/i.test(b.navigator.userAgent);g.data("spritespin",e);SpriteSpin.reload(e,true)}})};f.destroy=function(){return this.each(function(){var d=a(this);d.unbind(".spritespin");var e=d.data("spritespin");if(e&&e.animation){b.clearInterval(e.animation);e.animation=null}d.removeData("spritespin")})};f.update=function(d){return this.each(function(){var e=a(this).data("spritespin");if(d===undefined)e.frame+=e.animation&&e.reverse?-e.frameStep:e.frameStep;else e.frame=d;e.frame=e.animation||
!e.animation&&e.frameWrap?c.wrap(e.frame,0,e.frames-1,e.frames):c.clamp(e.frame,0,e.frames-1);!e.loop&&e.animation&&e.frame===e.loopFrame&&f.animate.apply(e.target,[false]);e.target.trigger("onFrame",e)})};f.animate=function(d,e){if(d===undefined)return a(this).data("spritespin").animation!==null;return this.each(function(){var g=a(this),h=g.data("spritespin");if(typeof e==="boolean")h.loop=e;if(d==="toggle")h.animate=!h.animate;if(typeof d==="boolean")h.animate=d;if(h.animation){b.clearInterval(h.animation);
h.animation=null}if(h.animate)h.animation=b.setInterval(function(){try{g.spritespin("update")}catch(i){}},h.frameTime)})};f.frame=function(d){if(d===undefined)return a(this).data("spritespin").frame;return this.each(function(){a(this).spritespin("update",d)})};f.loop=function(d){if(d===undefined)return a(this).data("spritespin").loop;return this.each(function(){var e=a(this);e.spritespin("animate",e.data("spritespin").animate,d)})};f.next=function(){return this.each(function(){var d=a(this);d.spritespin("frame",
d.spritespin("frame")+1)})};f.prev=function(){return this.each(function(){var d=a(this);d.spritespin("frame",d.spritespin("frame")-1)})};f.animateTo=function(d){return this.each(function(){a(this).spritespin({animate:true,loop:false,loopFrame:d})})};c.behaviors.none={name:"none",mousedown:a.noop,mousemove:a.noop,mouseup:a.noop,mouseenter:a.noop,mouseover:a.noop,mouseleave:a.noop,dblclick:a.noop,onFrame:a.noop}})(jQuery,window);
(function(a,b,c){c.behaviors.click={name:"click",mouseup:function(f){var d=a(this),e=d.data("spritespin");c.updateInput(f,e);d.spritespin("animate",false);var g;g=e.target.offset();if(e.orientation=="horizontal"){f=e.width/2;g=e.currentX-g.left}else{f=e.height/2;g=e.currentY-g.top}if(g>f){d.spritespin("frame",e.frame+1);e.reverse=false}else{d.spritespin("frame",e.frame-1);e.reverse=true}}}})(jQuery,window,window.SpriteSpin);
(function(a,b,c){c.behaviors.drag={name:"drag",mousedown:function(f){var d=a(this).data("spritespin");c.updateInput(f,d);d.onDrag=true},mousemove:function(f){var d=a(this),e=d.data("spritespin");if(e.onDrag){c.updateInput(f,e);f=Math.round(e.clickframe+(e.orientation=="horizontal"?e.dX/e.width:e.dY/e.height)*e.frames*e.sense);d.spritespin("update",f);d.spritespin("animate",false)}},mouseup:function(){var f=a(this).data("spritespin");c.resetInput(f);f.onDrag=false},mouseleave:function(){var f=a(this).data("spritespin");
c.resetInput(f);f.onDrag=false}}})(jQuery,window,window.SpriteSpin);
(function(a,b,c){c.behaviors.hold={name:"hold",mousedown:function(f){var d=a(this),e=d.data("spritespin");c.updateInput(f,e);e.onDrag=true;d.spritespin("animate",true)},mousemove:function(f){var d=a(this).data("spritespin");if(d.onDrag){c.updateInput(f,d);var e=d.target.offset();if(d.orientation=="horizontal"){f=d.width/2;f=(d.currentX-e.left-f)/f}else{f=d.height/2;f=(d.currentY-e.top-f)/f}d.reverse=f<0;f=f<0?-f:f;d.frameTime=80*(1-f)+20}},mouseup:function(){var f=a(this),d=f.data("spritespin");c.resetInput(d);
d.onDrag=false;f.spritespin("animate",false)},mouseleave:function(){var f=a(this),d=f.data("spritespin");c.resetInput(d);d.onDrag=false;f.spritespin("animate",false)},onFrame:function(){a(this).spritespin("animate",true)}}})(jQuery,window,window.SpriteSpin);
(function(a,b,c){c.behaviors.swipe={name:"swipe",mousedown:function(f){var d=a(this).data("spritespin");c.updateInput(f,d);d.onDrag=true},mousemove:function(f){var d=a(this),e=d.data("spritespin");if(e.onDrag){c.updateInput(f,e);f=e.frame;var g=e.snap||0.25,h;if(e.orientation=="horizontal"){h=e.dX;g=e.width*g}else{h=e.dY;g=e.height*g}if(h>g){f=e.frame-1;e.onDrag=false}else if(h<-g){f=e.frame+1;e.onDrag=false}d.spritespin("update",f);d.spritespin("animate",false)}},mouseup:function(){var f=a(this).data("spritespin");
f.onDrag=false;c.resetInput(f)},mouseleave:function(){var f=a(this).data("spritespin");f.onDrag=false;c.resetInput(f)}}})(jQuery,window,window.SpriteSpin);
(function(a,b){var c=b.SpriteSpin.modules["360"]={};c.reload=function(f){var d=a(f.images);f.stage.empty();f.modopts={is_sprite:f.images.length==1,resX:f.resolutionX||f.images[0].width,resY:f.resolutionY||f.images[0].height,offX:f.offsetX||0,offY:f.offsetY||0,stepX:f.stepX||f.width,stepY:f.stepY||f.height,numFramesX:f.framesX||f.frames,oldFrame:f.frame,images:d};!f.modopts.is_sprite&&!f.canvas&&f.stage.append(d);d.css({width:f.modopts.resX,height:f.modopts.resY});c.draw(f)};c.draw=function(f){f.modopts.is_sprite?
c.drawSpritesheet(f):c.drawImages(f)};c.drawSpritesheet=function(f){var d=f.modopts,e=f.source[0],g=d.offX+f.frame%d.numFramesX*d.stepX,h=d.offY+(f.frame/d.numFramesX|0)*d.stepY;if(f.canvas){f.context.clearRect(0,0,f.width,f.height);f.context.drawImage(f.images[0],g,h,f.width,f.height,0,0,f.width,f.height)}else f.stage.css({width:[f.width,"px"].join(""),height:[f.height,"px"].join(""),"background-image":["url('",e,"')"].join(""),"background-repeat":"no-repeat","background-position":[-g,"px ",-h,"px"].join(""),
"-webkit-background-size":[d.resX,"px ",d.resY,"px"].join(""),"-moz-background-size":[d.resX,"px ",d.resY,"px"].join(""),"background-size":[d.resX,"px ",d.resY,"px"].join("")})};c.drawImages=function(f){var d=f.images[f.frame];if(f.canvas){f.context.clearRect(0,0,f.width,f.height);f.context.drawImage(d,0,0)}else{f=f.stage.css({width:[f.width,"px"].join(""),height:[f.height,"px"].join("")}).children().hide()[f.frame];SpriteSpin.disableSelection(a(f)).show()}}})(window.jQuery,window);
(function(a,b){b=b.SpriteSpin.modules.gallery={};b.reload=function(c){c.images=[];c.offsets=[];c.stage.empty();c.speed=500;c.opacity=0.25;var f=c.oldFrame=0,d=0;for(d=0;d<c.source.length;d+=1){var e=a("<img src='"+c.source[d]+"'/>");c.stage.append(e);c.images.push(e);c.offsets.push(-f+(c.width-e[0].width)/2);f+=e[0].width;e.css({opacity:0.25})}c.stage.css({width:f});c.images[c.oldFrame].animate({opacity:1},c.speed)};b.draw=function(c){if(c.oldFrame!=c.frame&&c.offsets){c.stage.stop(true,false);c.stage.animate({left:c.offsets[c.frame]},
c.speed);c.images[c.oldFrame].animate({opacity:c.opacity},c.speed);c.oldFrame=c.frame;c.images[c.oldFrame].animate({opacity:1},c.speed)}else c.stage.css({left:c.offsets[c.frame]+c.dX})};b.resetInput=function(c){c.onDrag||c.stage.animate({left:c.offsets[c.frame]})}})(jQuery,window);
(function(a,b){var c=b.SpriteSpin.modules.panorama={};c.reload=function(f){f.stage.empty();var d=f.modopts={};d.resX=f.resolutionX||f.images[0].width;d.resY=f.resolutionY||f.images[0].height;d.frames=f.orientation=="horizontal"?f.frames||d.resX:f.frames||d.resY;c.drawFirst(f)};c.draw=function(f){var d=f.modopts,e;if(f.orientation=="horizontal"){e=f.frame%d.frames;d=0}else{e=0;d=f.frame%d.frames}f.stage.css({"background-position":[-e,"px ",-d,"px"].join("")})};c.drawFirst=function(f){var d=f.modopts,
e,g;if(f.orientation=="horizontal"){e=f.frame%d.frames;g=0}else{e=0;g=f.frame%d.frames}f.stage.css({width:[f.width,"px"].join(""),height:[f.height,"px"].join(""),"background-image":["url('",f.source[0],"')"].join(""),"background-repeat":"repeat-both","background-position":[-e,"px ",-g,"px"].join(""),"-webkit-background-size":[d.resX,"px ",d.resY,"px"].join("")})}})(window.jQuery,window);
(function(){function a(g,h){h=h||[];var i,j,l=null;if(typeof g==="function"){g=g.apply(null,h);if(typeof g!=="object")return false}h=g.constructor;l=g.superclass||f;g.superclass=new l;h.prototype=new l;for(i in g)h.prototype[i]=g[i];h.prototype.constructor=g.constructor;for(j in l)if(!l.prototype[j]&&j!=="prototype")h[j]=l[j];return h}var b,c,f,d,e;f=function(){};b=a({constructor:function(){this.is_queueing=false;this.message_queue=[];this.messages_attached=[]},pause:function(){this.is_queueing=true},
play:function(){var g,h,i;g=0;for(h=this.message_queue.length;g<h;g++){i=this.message_queue[g];jQuery(i.element).trigger(i.event,[i.data])}this.is_queueing=false},send:function(g,h,i){this.is_queueing?this.message_queue.push({event:"message-"+h,element:g,data:i||{}}):jQuery(g).trigger("message-"+h,[i])},listen:function(g,h,i,j){j?jQuery(document).delegate(g,"message-"+h,i):jQuery(g).bind("message-"+h,i)},remove:function(g,h,i){i?jQuery(g).unbind("message-"+h,i):jQuery(g).unbind("message-"+h)}});c=
a({constructor:function(){this._loaded=false;this._widgets=[];this._message_bus=e;this.debug=window._NGBSDEBUG;this.objectify=a},legacy:function(g){this.widget(false,g,true)},page:function(g,h){this.widget(false,g,h)},widget:function(g,h,i){if(typeof h!=="function")h=this.objectify(h);g=this._widgets.push({callback:h,loaded:false,name:g});if(this._loaded||i)this.initialize(g-1,h)},initialize:function(g){var h;g=this._widgets[g];if(g.name)h=jQuery("."+g.name);if(g.callback.prototype instanceof f)new g.callback(this._message_bus,
h);else g.callback(this._message_bus,h)},load:function(){var g,h;this._message_bus.pause();g=0;for(h=this._widgets.length;g<h;g++)if(this._widgets[g].loaded===false){this.initialize(g);this._widgets[g].loaded=true}this._message_bus.play();this._loaded=true},_reinitialize:function(g){var h,i,j,l;h=0;for(i=this._widgets.length;h<i;h++)if(this._widgets[h].name===g){l=this._widgets[h];j=jQuery("."+l.name);if(l.callback.prototype instanceof f)new l.callback(this._message_bus,j);else l.callback(this._message_bus,
j)}}});d=window.ngbs&&window.ngbs._classes||{};e=new b;window.ngbs=new c;window.ngbs.u={};window.ngbs._classes=window.ngbs._classes||d;window.ngbs._classes.Widgets=c;window.ngbs._classes.MessageBus=b;window.ngbs._classes.BaseObject=f;jQuery(document).ready(function(){window.ngbs.metrics&&window.ngbs.metrics._load();window.ngbs.load()})})();
(function(a,b){if(a.u)a.u.region=function(){var c={fpi:"/services/geo/PostalCodes.json?postalCode="},f=function(d,e){this.val="";this.baseURL=__params.baseURL||"";this.make=__params.make||"";this.zipCode=a.u.cookie.zip();this.oldMetrics=e===true?true:false;this.callback=d&&typeof d==="function"?d:false;this.init()};f.prototype={init:function(){var d;if(this.zipCode===false||typeof this.zipCode==="undefined"){this.setDefaultCookie();this.callback!==false&&this.callback();this.oldMetrics&&b(document.body).trigger("region-set");
return false}d=a.u.cookie.get("regions");d===false?this.setCookieRegion():this.isRegionZipTodate(d)},setDefaultCookie:function(){a.u.cookie.set("regions","zip=00000&FDAF=none&LMDA=none&DMA=none&Marketing=none&PACode=none",{domain:document.domain,expires:"1",path:"/"})},setCookieRegion:function(){var d,e,g;g=this;this.getRegionData(function(){d=g.val;e={domain:document.domain,expires:"1",path:"/"};a.u.cookie.set("regions",d,e);g.callback!==false&&g.callback();g.oldMetrics&&b(document.body).trigger("region-set")})},
getRegionData:function(d){var e=this;b.ajax({url:this.baseURL+c.fpi+this.zipCode,dataType:"json",error:function(){}}).done(function(g){if(g)e.val+=e.handelData(g.Response)},function(){e.getLocateDealerData(d)}).fail(function(){e.setDefaultCookie();e.callback!==false&&e.callback();e.oldMetrics&&b(document.body).trigger("region-set")})},getLocateDealerData:function(d){var e;e=this;b.ajax({url:this.baseURL+"/core-services/dealers/byzipcode.json?zipCode="+this.zipCode+"&distance=50&pageSize=1&pageIndex=1",
dataType:"json",error:function(){}}).done(function(g){if(g)e.val+="&PACode="+g.Response.Dealer.PACode},function(){d&&typeof d==="function"&&d()}).fail(function(){e.setDefaultCookie();e.callback!==false&&e.callback();e.oldMetrics&&b(document.body).trigger("region-set")})},handelData:function(d){var e="",g=[],h=d.PostalCode.Regions.Region;e+="zip="+d.PostalCode.Name.content;if(h){b.each(h,function(i,j){g.push(j.type+"="+j.Code)});e+="&"+g.join("&")}return e},isRegionZipTodate:function(d){d=d.split("&",
1).join();d=d.split("=");if(d[0]==="zip"){d=d[1];if(this.zipCode!==d)this.setCookieRegion();else{this.callback!==false&&this.callback();this.oldMetrics&&b(document.body).trigger("region-set")}}else this.setCookieRegion()}};f.factory=function(d,e){return new f(d,e)};return f.factory}()})(ngbs,jQuery,window);
(function(a){a.u.cookie=function(){var b=function(c){var f=[];if(typeof c.expires==="number"){var d=new Date;d.setDate(d.getDate()+c.expires);f.push("expires="+d.toUTCString())}typeof c.path==="string"&&f.push("path="+c.path);typeof c.domain==="string"&&f.push("domain="+c.domain);typeof c.secure!=="undefined"&&f.push("secure");return f.length?"; "+f.join("; "):""};return{get:function(c){var f,d,e,g,h;if(document.cookie.indexOf(c)!==-1){f=document.cookie.split(";");d=0;for(h=f.length;d<h;d++){e=f[d].split("=");
g=e.shift().replace(/^\s*/,"").replace(/\s*$/,"");if(e.length&&g===c)return unescape(e.join("="))}}return false},getSub:function(c,f,d){var e,g;d=d||"&";if(c=this.get(c)){d=c.split(d);e=0;for(g=d.length;e<g;e++){c=d[e].split("=");if(c.length===2&&c[0]===f)return unescape(c[1])}}return false},set:function(c,f,d){d=d||{};d=b(d);f=encodeURI(f).replace(/;/g,"%3B");document.cookie=c+"="+f+d},setSub:function(c,f,d,e){e=e||{};var g=e.sep||e.separator||"&",h=this.get(c),i=this.getSub(c,f,g);d=encodeURI(d).replace(/;/g,
"%3B");e=b(e);d=i?h.replace(i,d):h+g+f+"="+d;document.cookie=c+"="+d+e},zip:function(c){var f;c=c||false;f=this.getSub("FPI","zip");if(!f&&!c)f=(f=(c=this.getSub("userInfo","zip",","))&&c!==""?c:false)?f.substr(0,5):f;return f},setZip:function(c,f){if(/\d{5}/.test(c)){this.setSub("FPI","zip",c,f);return true}return false}}}()})(ngbs);ngbs.metrics={page:function(){},click:function(){},_load:function(){}};
ngbs.page(function(a){var b=jQuery,c,f=function(){this.PREFIX="s550-";this.$container=b("#"+this.PREFIX+"container");this.$sections=this.$container.find("."+this.PREFIX+"section");this.$nav=this.$container.find(".autofill-stickynav");this.$navItems=this.$nav.find("li");this.ACT_CLASS="active";this.HID_CLASS="hidden";this.firedSocial=this.firedBuzz=false;this.init();this.bindHandlers()};f.prototype={init:function(){this.updateHead();this.isMobile=("ontouchstart"in document.body||"ontouchstart"in window||
"ontouchstart"in document.documentElement)&&b(window).width()<=480;this.badBrowser=navigator.appVersion.indexOf("MSIE 9")===-1&&navigator.appVersion.indexOf("MSIE 1")===-1;this.configurePictureLoader();this.getContentDirection();this.badBrowser||this.configureCollapser();this.configureNav();this.configureBillboard();this.configureViewpoints();this.configureGallerySlider();this.configureView360();this.configureRevealer();this.configureBuzz();this.configureSocialFeed();!this.isMobile&&this.configureParallax();
this.configureBackToTop();a.send(document.body,"s550-metrics",{action:"page",name:"mr-page"})},updateHead:function(){var d=b("head"),e=jQuery(".getupdates-social-list").find(".share-facebook").data("image");d.append('<meta property="og:image" content="'+e+' " />')},bindHandlers:function(){var d=this;this.$container.on("click",".feature-buttons",function(e){e.preventDefault();if(b(this).hasClass("open")&&!b(this).data("opened")){a.send(document.body,"s550-metrics",{action:"click",name:"mr-feature-read-more-interaction",
feature:b(this).data("feature-id")});b(this).attr("data-opened",true)}b(this).toggleClass("open").toggleClass("close").prev(".feature-list").slideToggle();GWS&&GWS.broadcast("features-button",b(this))});this.$container.on("click","#s550-getupdates a",function(e){e.preventDefault();b(this).data("id")&&GWS&&GWS.broadcast("getupdates-"+b(this).data("id"),b(this))});this.$container.on("click",".get-updates-link",function(){d.configureForm();GWS&&GWS.broadcast("getupdates-getupdates",b(this))});this.$container.on("click",
"buzz-item a",function(){GWS&&GWS.broadcast("carousel-slider-read-article")});b(".share-btn").on("click",function(e){e.preventDefault();d.share(b(this));if(e=b(this).data("id"))d.isMobile&&e==="email"?ngbs.metrics.page("mr-share-email-mobile"):a.send(document.body,"s550-metrics",{action:"click",name:"mr-social-share",social:e})});this.$container.on("click","#s550-buzz-slider .arrow",function(){if(!d.firedBuzz){a.send(document.body,"s550-metrics",{action:"click",name:"mr-buzz-news-interaction"});d.firedBuzz=
true}});this.$container.on("click","#s550-social-slider .arrow",function(){if(!d.firedSocial){a.send(document.body,"s550-metrics",{action:"click",name:"mr-buzz-social-interaction"});d.firedSocial=true}});this.$container.on("click",".section-collapser",function(){var e=b(this).parent().attr("data-title");if(!b(this).hasClass("collapsed")&&e){e=e.toLowerCase();ngbs.metrics.page("mr-page-"+e)}})},getSections:function(){for(var d=[],e,g=0;g<this.$sections.length;g++){e=b(this.$sections[g]).attr("id").replace(this.PREFIX,
"");d.push(e)}return d},getElement:function(d){if(this.$container.find(d).length)return this.$container.find(d);return false},getContentDirection:function(){this.direction=b('[dir="rtl"]').length?"right":"left"},configurePictureLoader:function(){var d,e=this;a.send(document.body,"picture-loader",{onInitialized:function(){},onComplete:function(){b("#s550-features .section-collapser, #s550-buzz .section-collapser").trigger("click")},onChange:function(){if(!e.badBrowser){clearTimeout(d);d=setTimeout(function(){a.send(document.body,
"parallax-refresh")},100)}}})},configureNav:function(){this.$nav.length&&a.send(document.body,"sticky-add",{$el:this.$nav,items:this.getSections(),offset:this.$nav.offset().top})},configureBillboard:function(){var d=this.getElement("#s550-billboard-slider"),e=this;if(d){var g=d.find(".carousel-text");a.send(document.body,"carousel-create",{$el:d,onInitialized:function(){d.height()>0?e.showSections():window.setTimeout(function(){e.showSections()},1E3)},onSlideStart:function(h){if(h.toPage!==h.currentPage){g.eq(h.toPage-
1).stop().animate({"margin-left":h.currentPage<h.toPage?"-100%":"100%"},h.speed);g.eq(h.toPage).css({"margin-left":h.currentPage<h.toPage?"100%":"-100%"})}},onSlideEnd:function(h){g.eq(h.toPage-1).css({"margin-left":0});g.eq(h.toPage).stop().animate({"margin-left":0},h.speed/3)}})}},configureViewpoints:function(){var d=this,e,g={$el:b("#s550-billboard, #s550-gallery, #s550-features, #s550-buzz, #s550-CTA"),offset:this.$nav.outerHeight(),inside:function(i,j){e=j.$el[0].id.replace("s550-","");d.$navItems.removeClass(d.ACT_CLASS);
d.$navItems.filter('[data-section="'+e+'"]').addClass(d.ACT_CLASS)}},h={$el:this.$container.find("#s550-view360"),offset:function(){return b(window).height()-d.$container.find(".view360-player").height()},crossing:function(i,j){if(j.direction==="down")if(!d.badBrowser){d.$container.find(".view360-player").spritespin("animate",true,false);i.active=false}}};a.send(document.body,"viewpoints",g);a.send(document.body,"viewpoints",h)},configureBackToTop:function(){var d=this.getElement(".back-to-top-button");
d&&a.send(document.body,"back-to-top-config",{$el:d})},configureGallerySlider:function(){var d=this.getElement(".gallery-slider");d&&a.send(document.body,"gallery-add",{$el:d,arrows:d.data("arrows"),scrollbar:d.data("scrollbar"),direction:this.direction,zoom:!this.isMobile})},configureView360:function(){this.$container.find(".feature-list").hide();var d={$el:this.$container.find("#s550-view360-view")};a.send(document.body,"view360-apply",d)},configureRevealer:function(){var d=this.getElement(".reveal-slider"),
e;if(d){d.find(".scroller-limit").append("<div class='limit-border'/>");e=d.find(".limit-border");a.send(document.body,"revealer-config",{$el:d,onDrag:function(g){e.eq(0).css({opacity:1-g.value/100});e.eq(1).css({opacity:g.value/100})}})}},configureBuzz:function(){var d=this.getElement("#"+this.PREFIX+"buzz"),e,g;if(d){if(this.isMobile){e=d.find(".carousel-item");g=d.find(".buzz-item");d.attr("data-adjustslide",true);b("#s550-buzz-slider").find(".carousel-widget").css({"padding-left":16});g.width(d.width()-
64);e.width(d.width()-32);e.last().css({width:e.last().width()+32})}a.send(document.body,"carousel-create",{$el:d.find("#s550-buzz-slider"),name:"news"})}},configureSocialFeed:function(){var d=0,e=this,g=this.getElement("#s550-social-feed");if(g){g.hide();var h=g.find(".carousel-slider-list");b.ajax({url:g.data("feed-source"),data:{"networks[]":["facebook","twitter"]},dataType:"jsonp"}).done(function(i){i=e.shuffleArray(i.data);if(i.length){g.show();for(d=0;d<=20;d++){var j=i[d],l="",k=jQuery("<li></li>");
k.addClass("carousel-item");if(j&&j.network&&(j.message||j.text)){if(j.network=="facebook"){l=j.message.substring(0,200)+"...";k.addClass("fb")}else{l=j.text;k.addClass("tw")}k.html('<div><span class="social-icon"></span><p>'+l+"</p></div>");h.append(k)}}if(e.isMobile){g.find(".carousel-item").width(g.width());g.find(".carousel-slider").attr("data-adjustslide",true)}a.send(document.body,"carousel-create",{$el:g.find("#s550-social-slider"),name:"social"})}})}},share:function(d){var e=d.attr("href"),
g=d.attr("data-deeplink")||window.location.href;if(d.hasClass("share-twitter")||d.hasClass("share-google"))e+=encodeURIComponent(g);if(d.hasClass("share-twitter")){if(d.data("text"))e+="&text="+d.data("text");if(d.data("hashtags"))e+="&hashtags="+d.data("hashtags")}if(d.hasClass("share-facebook")){if(this.isMobile)e=e.replace("s=100","m2w&s=100");e+="&p[url]="+encodeURIComponent(g)+"&p[title]="+encodeURIComponent(d.data("title"))+"&p[summary]="+encodeURIComponent(d.data("summary"))+"&p[images][0]="+
encodeURIComponent(d.data("image"))}if(d.hasClass("share-by-email"))if(this.isMobile)window.location.href="mailto:?body="+encodeURIComponent((d.data("description")||"")+"\n\n"+g)+"&subject="+encodeURIComponent(d.data("title"))||"";else this.openEmailWindow(d.data());else window.open(e);return false},openEmailWindow:function(d){var e=screen.width/2-357.5,g=screen.height/2-275;d=ngbs.u.encoder(JSON.stringify({t:d.title,l:d.deeplink||window.location.href,d:d.description,s:d.image,n:__params.metricsname,
y:__params.year,level:"asset"}),"base64").encode().replace(/\=/g,"%3D");window.open("/share-email?params="+d,"","width=715,height=550,top="+g+",left="+e+",location=no,resizable=no,scrollbars=no,toolbar=no");return false},shuffleArray:function(d){for(var e,g,h=d.length;h;e=parseInt(Math.random()*h),g=d[--h],d[h]=d[e],d[e]=g);return d},configureParallax:function(){var d=this.getElement(".parallax-feature, .reveal-slider-player");this.getElement(".reveal-slider-player");if(d){d=b.extend({$el:d},d.data());
a.send(document.body,"parallax",d)}},configureCollapser:function(){a.send(document.body,"section-collapser",{$el:this.$sections})},configureScrolling:function(){a.send(document.body,"smooth-scrolling")},configureForm:function(){var d=b("#getupdates-vehicles-select-1");d.length&&window.setTimeout(function(){d.find('option[data-name="Mustang"]').attr("selected","selected")},100)},showSections:function(d){(d||this.$sections).removeClass(this.HID_CLASS)},hideSections:function(d){(d||this.$sections).addClass(this.HID_CLASS)}};
a.listen(document.body,"s550-metrics",function(d,e){c&&c.isMobile?ngbs.metrics[e.action](e.name+"-mobile",e):ngbs.metrics[e.action](e.name,e)});a.listen(document.body,"page-init",function(){c=new f})});
ngbs.widget("picture-loader",function(a){function b(e){this.$preImages=jQuery(".picture-loader");this.mediaCount=this.$preImages.length;this.loadedCount=0;this.options=e;this.largerWidth=c(window).width();this.init();this.bindings();if(navigator.appName.indexOf("Internet Explorer")!==-1)this.badBrowser=navigator.appVersion.indexOf("MSIE 9")===-1&&navigator.appVersion.indexOf("MSIE 1")===-1;typeof e.onInitialized==="function"&&e.onInitialized()}var c=jQuery,f=true,d;b.prototype.init=function(){this.retina=
this.checkPixelRatio();this.update()};b.prototype.loadedCheck=function(e,g){var h=this;c("<img>").on("load",function(){h.loadedCount++;if(h.mediaCount===h.loadedCount)if(g&&typeof h.options.onComplete==="function")h.options.onComplete();else typeof h.options.onChange==="function"&&h.options.onChange()}).attr("src",e)};b.prototype.replaceImage=function(e,g){var h=this,i=e.parent(),j,l,k;i.find("img").remove();l=e.data("class")||"";k=i.data("alt")||"";j=this.retina&&e.data("retina")?e.data("retina"):
e.data("src");g?e.html("<img src='"+j+"' class='"+l+"' alt='"+k+"'/>"):c("<img>").on("load",function(){e.html("<img src='"+j+"' class='"+l+"' alt='"+k+"'/>")}).attr("src",j);h.loadedCheck(j,g)};b.prototype.update=function(){var e=this,g=c(window).width();this.loadedCount=0;this.$preImages.each(function(h,i){h=c(i);h.data("class");h.find(".media-selector").each(function(j,l){j=c(l);l=parseInt(j.data("min-width"),10)||0;var k=parseInt(j.data("max-width"),10)||9999999999999;if(g>=l&&g<=k){if(f){this.largerWidth=
l;e.replaceImage(j,true)}else if(g<e.largerWidth&&j.data("force-replace"))e.replaceImage(j,false);else g>e.largerWidth&&e.replaceImage(j,false);return false}})});f=false};b.prototype.bindings=function(){var e=this;c(window).on("resize",function(){if(!e.badBrowser){clearTimeout(d);setTimeout(function(){e.update()},1E3)}})};b.prototype.checkPixelRatio=function(){return window.devicePixelRatio>1?true:window.matchMedia&&window.matchMedia("(-webkit-min-device-pixel-ratio: 2), (min--moz-device-pixel-ratio: 2), (-o-min-device-pixel-ratio: 2/2), (min-resolution: 2dppx)").matches?
true:false};a.listen(document.body,"picture-loader",function(e,g){new b(g)})});
ngbs.widget("autofill-stickynav",function(a){function b(d){this.$nav=d.$el;this.$content=this.$nav.find(".nav-content");this.$items=this.$content.find("li");this.offset=d.offset;this.items_active=d.items;this.duration=d.duration||500;this.CLASS_NAV="sticky";this.CLASS_ACT="active";this.CLASS_DIS="disabled";this.init();this.bindHandlers()}var c=jQuery,f;b.prototype={init:function(){this.populateNav()},bindHandlers:function(){var d=this;this.$content.on("click","a",function(e){e.preventDefault();e=
c(this).parent("li");GWS&&GWS.broadcast("subnav-item",c(this));if(e.data("section")){c(window).trigger("disableViewPoints");d.toggleActive(e);d.scrollTo(c(this).attr("href"))}e.data("metric")&&a.send(document.body,"s550-metrics",{action:"click",name:"mr-"+e.data("metric")+"-interaction"})});c(window).on("scroll",function(){c(window).scrollTop()>=d.offset?d.enable():d.disable();GWS&&GWS.broadcast("subnav-scroll")})},populateNav:function(){var d=this;this.$items.each(function(){c.inArray(c(this).data("section"),
d.items_active)>-1||c(this).data("show")===true?c(this).removeClass(d.CLASS_DIS):c(this).remove()})},enable:function(){this.$nav.addClass(this.CLASS_NAV)},disable:function(){this.$nav.removeClass(this.CLASS_NAV)},toggleActive:function(d){this.$content.find("li").removeClass(this.CLASS_ACT);d.addClass(this.CLASS_ACT)},scrollTo:function(d){d=c(d).offset().top-this.$content.outerHeight()+1;c("html, body").stop().animate({scrollTop:d},f.duration,function(){c(window).trigger("enableViewPoints")})}};a.listen(document.body,
"sticky-add",function(d,e){f=new b(e)})});
ngbs.widget("carousel-slider",function(a){function b(e){if(!e.$el.hasClass("carousel-enabled")){this.$el=e.$el;this.options={name:e.name,selector:".carousel-item",initialPage:this.$el.data("initialpage")||0,showArrows:this.$el.data("arrows")==false?false:true,speed:this.$el.data("speed")||400,animate:this.$el.data("animate")==false?false:true,easing:this.$el.data("easing")||"swing",autoscroll:this.$el.data("autoscroll")||false,autoscrollTime:this.$el.data("autoscrolltime")||4E3,scrollAmount:this.$el.data("scrollamount")||
0,adjustSlide:this.$el.data("adjustslide")==false?false:true,forceCarousel:this.$el.data("forcecaruosel")||false,hideControls:this.$el.data("hidecontrols")||false,autoControls:this.$el.data("autocontrols")==false?false:true,cycle:this.$el.data("cycle")==false?false:true,infinite:this.$el.data("infinite")||false,onInitialized:e.onInitialized||this.$el.data("oninitialized")||undefined,onSlideStart:e.onSlideStart||this.$el.data("onslidestart")||undefined,onSlideEnd:e.onSlideEnd||this.$el.data("onslideend")||
undefined};this.$disclaimer=e.$disclaimer;this.firedSwipe=this.animating=false;this.init()}}var c=jQuery,f,d="ontouchstart"in window?"touchstart":"click";b.prototype.getImgsToLoad=function(){var e=this.$slides.find("img[data-lazy]");this.imgsLoaded=0;return e};b.prototype.init=function(){var e=this;this.$slider=this.$el.find(".carousel-slider-list");this.$slides=this.$slider.find(this.options.selector);this.imgsToLoad=this.getImgsToLoad();this.slidesLength=this.$slides.length;this.slidesLength===
1&&!this.options.forceCarousel||(this.imgsToLoad.length?this.imgsToLoad.each(function(g,h){e.loadImg(c(h))}):this.launchCarousel())};b.prototype.loadImg=function(e){var g=this,h=e.data("lazy");c("<img>").load(function(){e.attr("src",h);g.imgsLoaded++;g.checkLoaded()}).attr("src",h)};b.prototype.checkLoaded=function(){this.imgsLoaded===this.imgsToLoad.length&&this.launchCarousel()};b.prototype.launchCarousel=function(){var e=0;this.$el.addClass("carousel-enabled");this.createControls();if(this.options.adjustSlide){e=
100*this.slidesLength+"%";this.$slides.addClass("fit-width").css({width:(100/this.slidesLength).toFixed(2)+"%"})}else{this.$slider.width("auto");this.$slides.each(function(){e+=c(this).outerWidth()});this.totalSlidesWidth=e;this.trimLeft=this.$slider.outerWidth()-this.totalSlidesWidth;e+="px"}this.$slider.css({width:e,height:"auto"});this.visibleSlides=Math.round(this.$el.outerWidth()/this.$slides.first().outerWidth());this.totalPages=Math.ceil(this.$slides.length/this.visibleSlides);this.slideTo({to:this.options.initialPage,
animate:false});this.options.autoscroll&&this.autoscroll();if(this.options.hideControls){this.hideControls();this.options.autoControls&&this.autoControls()}if("touchstart"in window||"ontouchstart"in document.documentElement)this.mobileNavigation();this.bindings();typeof this.options.onInitialized==="function"&&this.options.onInitialized.call()};b.prototype.bindings=function(){var e=this;this.$navigationButtons.on(d,function(){e.autoscrollPause();e.slideTo(c(this).index());GWS&&GWS.broadcast("carousel-slider-bullet")});
this.$navigationArrows.on(d,function(){e.autoscrollPause();c(this).hasClass("carousel-prev")?e.prev():e.next();GWS&&GWS.broadcast("carousel-slider-arrow")});c(window).on("resize",function(){e.updateView()})};b.prototype.mobileNavigation=function(){var e,g,h,i,j=0,l=this;c(window).width();this.$el.find(".carousel-item").width();this.$slides.on("touchstart",function(k){if(k.touches===undefined&&k.originalEvent!==undefined)k.touches=k.originalEvent.touches;e=k.touches[0].pageX;g=k.touches[0].pageY;i=
0});this.$slides.on("touchmove",function(k){var m,n;n=k.originalEvent;if(!(n.touches.length>1||n.scale&&n.scale!==1)){n=n.touches[0];n={x:n.pageX-e,y:n.pageY-g};if(typeof m=="undefined")m=!!(m||Math.abs(n.x)<Math.abs(n.y));if(!m){if(k.touches===undefined&&k.originalEvent!==undefined)k.touches=k.originalEvent.touches;h=-((k.touches[0].clientX||k.touches[0].pageX)-e);j=Math.abs(h);if(!(j>10&&j<=15))if(j>15){i=(k.touches[0].clientY||k.touches[0].pageY)-g;if(n.x>0)l.animating||l.prev();else if(n.x<0)l.animating||
l.next()}l.autoscrollPause();if(l.options.name&&!l.firedSwipe){ngbs.metrics.click("mr-buzz-"+l.options.name+"-interaction-mobile");l.firedSwipe=true}}}})};b.prototype.next=function(){return this.slideTo(this.currentPage+1)};b.prototype.prev=function(){return this.slideTo(this.currentPage-1)};b.prototype.slideTo=function(e){var g=this,h;this.animating=true;h=typeof e==="number"?this.checkRange(e):typeof e==="object"?e.to:-1;if(h===-1)return false;this.updateControls(h);this.$slider.attr("data-page",
h);if(this.options.adjustSlide)e=-100*h+"%";else{e=this.options.scrollAmount?parseInt(this.$slider.css("margin-left"),10)-this.options.scrollAmount:Math.abs(h*this.$slides.width()*this.visibleSlides)*-1;if(e<this.trimLeft&&h!==0){e=this.trimLeft;this.currentPage=this.slidesLength-1}}typeof g.options.onSlideStart==="function"&&g.options.onSlideStart.call(g,{toPage:h,currentPage:g.currentPage,speed:g.options.speed});if(this.options.animate)this.$slider.stop().animate({"margin-left":e},g.options.speed,
g.options.easing,function(){g.animating=false;typeof g.options.onSlideEnd==="function"&&g.options.onSlideEnd.call(g,{toPage:h,currentPage:g.currentPage,speed:g.options.speed})});else{this.$slider.stop().css({"margin-left":e});typeof g.options.onSlideEnd==="function"&&g.options.onSlideEnd.call(g,{to:h,currentPage:g.currentPage,speed:g.options.speed})}this.currentPage=h;return true};b.prototype.checkRange=function(e){return e===this.currentPage?-1:e<0?this.options.cycle?this.slidesLength-1:0:e>this.slidesLength-
1?this.options.cycle?0:this.slidesLength-1:e};b.prototype.createControls=function(){var e="",g;for(g=0;g<this.slidesLength;g++)e+="<li class='carousel-meatball'></li>";this.$slider.after("<div class='carousel-text-centered'><ul class='carousel-navigation'>"+e+"</ul></div>");this.options.showArrows&&this.$slider.after("<div class='carousel-prev arrow'></div><div class='carousel-next arrow'></div>");this.$navigationArrows=this.$el.find(".arrow");this.$navigationButtons=this.$el.find(".carousel-meatball");
this.$disclaimer&&this.$disclaimer.length&&this.$disclaimer.addClass("carousel-disclaimer").appendTo(this.$el)};b.prototype.showControls=function(e){e=c.extend({},this.options,e);if(e.animate){this.$navigationArrows.fadeIn(e.speed);this.$navigationButtons.fadeIn(e.speed)}else{this.$navigationArrows.show();this.$navigationButtons.show()}};b.prototype.hideControls=function(e){e=c.extend({},this.options,e);if(e.animate){this.$navigationArrows.fadeOut(e.speed);this.$navigationButtons.fadeOut(e.speed)}else{this.$navigationArrows.hide();
this.$navigationButtons.hide()}};b.prototype.autoControls=function(){var e=this;this.$el.on("mouseenter",function(){clearTimeout(f);f=setTimeout(function(){e.showControls()},e.options.speed/2)});this.$el.on("mouseleave",function(){clearTimeout(f);f=setTimeout(function(){e.hideControls()},e.options.speed/2)})};b.prototype.updateView=function(){if(!this.options.adjustSlide)this.trimLeft=this.$slider.parent().outerWidth()-this.totalSlidesWidth};b.prototype.updateControls=function(e){if(this.options.adjustSlide)if(e===
0&&!this.options.cycle&&!this.options.hideControls)if(this.options.animate){this.$navigationArrows.eq(0).fadeOut();this.slidesLength===2&&this.$navigationArrows.eq(1).fadeIn()}else{this.$navigationArrows.eq(0).hide();this.slidesLength===2&&this.$navigationArrows.eq(1).show()}else if(e===this.slidesLength-1&&!this.options.cycle&&!this.options.hideControls)if(this.options.animate){this.$navigationArrows.eq(1).fadeOut();this.slidesLength===2&&this.$navigationArrows.eq(0).fadeIn()}else{this.$navigationArrows.eq(1).hide();
this.slidesLength===2&&this.$navigationArrows.eq(0).show()}else this.options.hideControls||(this.options.animate?this.$navigationArrows.fadeIn():this.$navigationArrows.show());else{if(e!==0)this.options.animate?this.$navigationArrows.eq(0).fadeIn():this.$navigationArrows.eq(0).show();else this.options.animate?this.$navigationArrows.eq(0).fadeOut():this.$navigationArrows.eq(0).hide();if(e!==this.totalPages-1)this.options.animate?this.$navigationArrows.eq(1).fadeIn():this.$navigationArrows.eq(1).show();
else this.options.animate?this.$navigationArrows.eq(1).fadeOut():this.$navigationArrows.eq(1).hide()}this.$navigationButtons.removeClass("active").eq(e).addClass("active")};b.prototype.autoscroll=function(e){var g=this;e=e||this.options.autoscrollTime;this.timer=setTimeout(function(){g.next()&&g.autoscroll(e+g.options.speed)},e)};b.prototype.autoscrollPause=function(){clearTimeout(this.timer)};a.listen(document.body,"carousel-create",function(e,g){var h={};h=c.extend({},g);g.$el.each(function(i){h.$el=
g.$el.eq(i);new b(h)})})});
ngbs.widget("gallery-slider",function(a){function b(d){this.$gallery=d.$el;this.$container=this.$gallery.find(".gallery-container");this.$wrapper=this.$container.find(".gallery-wrapper");this.$photos=this.$wrapper.find(".gallery-photo");this.$scrollbar=this.$container.find(".gallery-scroller");this.$arrows=this.$container.find(".arrow");if(this.$scrollbar.length)this.$wheel=this.$scrollbar.find(".wheel");this.zoomEnabled=d.zoom;this.firedFull=this.firedScroll=false;this.ACT_CLASS="active";this.DIS_CLASS=
"disabled";if(navigator.appName.indexOf("Internet Explorer")!==-1)this.badBrowser=navigator.appVersion.indexOf("MSIE 9")===-1&&navigator.appVersion.indexOf("MSIE 1")===-1;this.touchSupport="ontouchstart"in document.body;this.animating=false;this.init()}var c=jQuery,f;b.prototype={init:function(){var d=this;this.buildImgs();this.imgsToLoad=this.getImgsToLoad();this.imgsToLoad.length?this.imgsToLoad.each(function(e,g){d.loadImg(c(g))}):this.launch();this.touchSupport&&this.addSwipeSupport()},buildImgs:function(){this.$photos.each(function(d,
e){d=c(e);e=c(window).width();var g=d.find("input[type='hidden']"),h="";d.find("img").remove();if(e<=568)h=g.data("small")||g.data("medium")||g.data("large");else if(e>568&&e<=768)h=g.data("medium")||g.data("large");else if(e>768)h=g.data("large");d.append("<img src='"+h+"' >")})},getImgsToLoad:function(){var d=this.$photos.find("img[data-lazy]");this.imgsLoaded=0;return d},loadImg:function(d){var e=this,g=d.data("lazy");c("<img>").load(function(){d.attr("src",g);e.imgsLoaded++;e.checkLoaded()}).attr("src",
g)},checkLoaded:function(){var d=this;this.imgsLoaded===this.imgsToLoad.length&&window.setTimeout(function(){d.launch()},1E3)},launch:function(){this.$gallery.addClass("gallery-enabled");this.configureWrapper();this.checkArrows();this.setHandlers()},setHandlers:function(){var d=this;this.$container.on("click",".gallery-scroller",function(e){if(!c(e.target).is(d.$wheel)){e=d.calculateShift(e.clientX);d.moveTo(d.$wrapper,-e.wrapper,true);d.moveTo(d.$wheel,e.scroller,true);if(!d.firedScroll){a.send(document.body,
"s550-metrics",{action:"click",name:"mr-gallery-scroll-interaction"});d.firedScroll=true}GWS&&GWS.broadcast("gallery-slider-scroll-click")}});this.$container.on("mousedown",".wheel",".gallery-scroller",function(e){e.preventDefault();d.isMouseDown=true;d.configureDrag(e);GWS&&GWS.broadcast("gallery-slider-scroll-mousedown")});this.$container.on("click",".arrow",function(){var e=c(this).hasClass("prev")?-1:1;d.handleArrows(e);if(!d.firedScroll){a.send(document.body,"s550-metrics",{action:"click",name:"mr-gallery-scroll-interaction"});
d.firedScroll=true}GWS&&GWS.broadcast("gallery-slider-arrow")});this.$container.on("touchstart",".arrow",function(e){e.preventDefault();var g=c(this).hasClass("prev")?-1:1;d.handleArrows(g);if(!d.firedScroll){ngbs.metrics.click("mr-gallery-scroll-interaction-mobile");d.firedScroll=true}GWS&&GWS.broadcast("gallery-slider-arrow");e.stopPropagation()});this.$container.on("touchmove",".arrow",function(e){e.preventDefault();e.stopPropagation()});this.$container.on("touchend",".arrow",function(e){e.preventDefault();
e.stopPropagation()});c("body, html").on("mousemove",function(e){if(e.which===1&&d.isMouseDown){d.configureDrag(e);if(!d.firedScroll){a.send(document.body,"s550-metrics",{action:"click",name:"mr-gallery-scroll-interaction"});d.firedScroll=true}GWS&&GWS.broadcast("gallery-slider-scroll-mousemove")}});c("body, html").on("mouseup",function(){if(d.isMouseDown){d.isMouseDown=false;GWS&&GWS.broadcast("gallery-slider-scroll-mouseup")}});this.$container.on("click",".zoomable",function(e){e.stopPropagation();
if(d.zoomEnabled){d.fireZoom(c(this));if(!d.firedFull){a.send(document.body,"s550-metrics",{action:"click",name:"mr-gallery-full-interaction"});d.firedFull=true}GWS&&GWS.broadcast("gallery-slider-image",c(this))}});c(window).on("resize",function(){if(!d.badBrowser){d.buildImgs();d.configureWrapper()}})},checkArrows:function(){if(this.$arrows){this.$arrows.removeClass(this.DIS_CLASS);if(this.$wrapper.position().left===0)this.$arrows.filter(".prev").addClass(this.DIS_CLASS);else this.$wrapper.position().left-
this.$container.outerWidth()+this.$wrapper.outerWidth()===0&&this.$arrows.filter(".next").addClass(this.DIS_CLASS)}},configureWrapper:function(){var d=this,e=0,g=this.$photos.length,h=0,i;this.$photos.each(function(){c("<img/>").on("load",function(){h++}).attr("src",c(this).find("img").attr("src"))});i=setInterval(function(){if(g===h){clearTimeout(i);d.$photos.each(function(){var j=c(this),l=j.find("img");if(d.badBrowser)e+=l.outerWidth();else{e+=j.outerWidth();l.css("width",j.outerWidth())}});e>
0&&d.$wrapper.width(e+1);d.zoomEnabled&&d.checkDeepLink()}},100)},configureDrag:function(d){var e=d.clientX;this.$wheel.offset();var g={};switch(d.type){case "mousedown":this.wheel_left_ini=e;this.wheel_left_end=null;break;case "mousemove":this.wheel_left_end=e;break}if(this.wheel_left_end){g=this.calculateShift(this.wheel_left_end);this.moveTo(this.$wrapper,-g.wrapper);this.moveTo(this.$wheel,g.scroller)}},handleArrows:function(d){var e=this.$photos.filter("."+this.ACT_CLASS),g=e.position().left;
e.outerWidth();var h;if(!this.animating){this.animating=true;switch(d){case -1:h=this.$wrapper.position().left!==-g?g:e.prev(".gallery-photo").position().left;break;case 1:h=g+e.outerWidth();break}if(-h<=-(this.$wrapper.outerWidth()-this.$container.outerWidth()))h=this.$wrapper.outerWidth()-this.$container.outerWidth();this.moveTo(this.$wrapper,-h,true);if(this.$wheel){d=h/(this.$wrapper.outerWidth()-this.$container.outerWidth())*(this.$scrollbar.outerWidth()-this.$wheel.outerWidth());this.moveTo(this.$wheel,
d,true)}}},calculateShift:function(d){var e=this.$scrollbar.outerWidth(),g=this.$wheel.outerWidth(),h=g/2;d=d+h>=e?e-g:d-h<=0?0:d-h;return{wrapper:(this.$wrapper.outerWidth()-this.$container.outerWidth())*d/(e-g),scroller:d}},moveTo:function(d,e,g){var h=this;if(g)d.animate({left:e},500,function(){h.callback();h.animating=false});else{d.css("left",e);this.callback()}},callback:function(){this.toggleActive();this.checkArrows()},toggleActive:function(){var d=this;this.$photos.removeClass(this.ACT_CLASS);
this.$photos.each(function(){d.$wrapper.position().left<=-c(this).position().left&&d.$wrapper.position().left>-c(this).position().left-c(this).outerWidth()&&c(c(this)[0]).addClass(d.ACT_CLASS)})},addSwipeSupport:function(){var d,e,g,h,i=0,j=this;c(window).width();this.$gallery.on("touchstart",function(l){l=l.originalEvent;d=l.touches[0].pageX;e=l.touches[0].pageY;h=0});this.$gallery.on("touchmove",function(l){var k,m,n;m=l.originalEvent;if(!(m.touches.length>1||m.scale&&m.scale!==1)){m=m.touches[0];
m={x:m.pageX-d,y:m.pageY-e};if(typeof k=="undefined")k=!!(k||Math.abs(m.x)<Math.abs(m.y));if(!k){if(l.touches===undefined&&l.originalEvent!==undefined)l.touches=l.originalEvent.touches;g=-((l.touches[0].clientX||l.touches[0].pageX)-d);i=Math.abs(g);if(!(i>10&&i<=15))if(i>15){h=(l.touches[0].clientY||l.touches[0].pageY)-e;if(m.x>0)j.animating||(n=-1);else if(m.x<0)j.animating||(n=1);j.handleArrows(n);if(!j.firedScroll){ngbs.metrics.click("mr-gallery-scroll-interaction-mobile");j.firedScroll=true}}}}})},
checkDeepLink:function(){var d=this.checkRegex(),e=this;if(d){var g=d[4].indexOf("&")>-1?d[4].split("&")[0]:d[4];this.$photos.each(function(){if(g===c(this).data("name")){e.fireZoom(c(this),window.location.href);return false}})}},checkRegex:function(){return window.location.href.match(/(\?|\&)(gallery)(\=)(.*)/)},constructDeepLink:function(d){var e=this.checkRegex(),g=window.location.href;if(e){e=e[4].indexOf("&")>-1?e[4].split("&")[0]:e[4];d=g.replace(e,d)}else{e=g.indexOf("?")>-1?"&":"?";d=g+e+
"gallery="+d}return d},fireZoom:function(d,e){a.send(document.body,"zoom-open",{$el:d,config:c.extend(d.data(),{deeplink:e||this.constructDeepLink(d.data("name"))})})}};a.listen(document.body,"gallery-add",function(d,e){f=new b(e)});a.listen(document.body,"zoom-deeplink",function(d,e){f.fireZoom(e.$el)})});
ngbs.widget("zoom-fullscreen",function(a){function b(){this.$container=c(".zoom-fullscreen");this.$controls=this.$container.find(".zoom-controlbar");this.firedZoom=this.in_place=false;this.ACT_CLASS="active";this.DIS_CLASS="disabled"}var c=jQuery,f;b.prototype={init:function(d){this.$selected=d.$el;this.config=d.config;this.$controls.find("li").first().addClass("first");if(!this.in_place){this.$container.prependTo("body");this.in_place=true}this.$controls.find(".save").length&&this.configureSave();
this.$controls.find(".share-btn").length&&this.configureShare();this.configureZoom();this.bindHandlers()},bindHandlers:function(){var d=this;this.$container.on("click",".zoom-arrow",function(){if(!c(this).hasClass(d.DIS_CLASS)){d.$selected=c(this).hasClass("prev")?d.$selected.prev():d.$selected.next();d.destroy();a.send(document.body,"zoom-deeplink",{$el:d.$selected});GWS&&GWS.broadcast("zoom-fullscreen-arrow")}});this.$container.on("click",".zoom-close",function(){d.close();GWS&&GWS.broadcast("zoom-fullscreen-close")});
this.$controls.on("click",".save",function(){GWS&&GWS.broadcast("zoom-fullscreen-save")});this.$controls.on("click",".share",function(){c(this).find(".share-popup").toggleClass(d.ACT_CLASS);GWS&&GWS.broadcast("zoom-fullscreen-share")})},configureSave:function(){var d=this.config.src,e=this.config.name?"="+this.config.name:"";this.$controls.find(".save").html('<a href="'+d+'" download'+e+' target="_blank"></a>')},configureShare:function(){this.$controls.find(".share-btn").attr("data-deeplink",this.config.deeplink)},
configureZoom:function(){var d,e=this.config.width||5E3,g=this.config.height||2300,h=this.config.tilespath,i=[],j,l;this.open();d=new OpenLayers.Layer.Zoomify("Zoomify",h,new OpenLayers.Size(e,g));d.transitionEffect="resize";d.isBaseLayer=false;for(j=d.numberOfTiers-1;j>=0;j--)i.push(Math.pow(2,j));h=new OpenLayers.Layer.Image("Image",h+"TileGroup0/0-0-0.jpg",new OpenLayers.Bounds(0,0,e,g),d.tierImageSize[0],{alwaysInRange:true});e={resolutions:i,maxExtent:new OpenLayers.Bounds(0,0,e,g),restrictedExtent:new OpenLayers.Bounds(0,
0,e,g),numZoomLevels:d.numberOfTiers,units:"pixels",controls:[],theme:null};this.map=new OpenLayers.Map("zoom-flip-map",e);this.map.addLayer(d);this.map.addLayer(h);this.map.addControl(new OpenLayers.Control.Zoom({zoomInId:"zoomin",zoomOutId:"zoomout"}));this.map.addControl(new OpenLayers.Control.KeyboardDefaults);this.map.addControl(new OpenLayers.Control.Navigation({mouseWheelOptions:{cumulative:false,interval:0},dragPanOptions:{enableKinetic:false},zoomBoxEnabled:false,zoomWheelEnabled:true}));
if(this.$container.find("#zoom-overviewmap").length){j={div:document.getElementById("zoom-overviewmap"),size:d.tierImageSize[0],autoPan:false,mapOptions:{numZoomLevels:1}};j=new OpenLayers.Control.OverviewMap(j);j.isSuitableOverview=function(){return true};this.map.addControl(j)}for(j=0;j<=e.numZoomLevels;j++){g=h.size.w*i[d.numberOfTiers-1-j];if(g>=this.map.size.w){l=j;this.map.zoomTo(l);break}}this.map.events.register("zoomend",this,function(){this.map.getZoom()<l&&this.map.zoomTo(l);this.fireZoomMetrics()});
this.map.events.register("move",this,function(){this.fireZoomMetrics()})},checkArrows:function(){var d=this.$container.find(".zoom-arrow");d.addClass(this.DIS_CLASS);this.$selected.prev().length&&d.filter(".prev").removeClass(this.DIS_CLASS);this.$selected.next().length&&d.filter(".next").removeClass(this.DIS_CLASS)},open:function(){this.$container.addClass(this.ACT_CLASS);this.checkArrows();a.send(document.body,"view360-remove")},close:function(){this.$container.removeClass(this.ACT_CLASS);this.destroy()},
destroy:function(){this.map.destroy()},fireZoomMetrics:function(){if(!this.firedZoom){a.send(document.body,"s550-metrics",{action:"click",name:"mr-gallery-zoom-interaction"});this.firedZoom=true}}};a.listen(document.body,"zoom-open",function(d,e){if(f instanceof b){f.$controls.off("click");f.$container.off("click")}else f=new b;f.init(e)})});
ngbs.widget("view360",function(a){var b=jQuery,c,f=function(d){this.$el=d instanceof jQuery?d:d.$el;this.options={showControls:this.$el.data("showcontrols")==false?false:true,showArrows:this.$el.data("showarrows")==false?false:true,autoHideControls:this.$el.data("autohidecontrols")==false?false:true,initialColor:parseInt(this.$el.data("initialcolor"),10)||0,initialTrim:parseInt(this.$el.data("initialtrim"),10)||0,initialBackground:parseInt(this.$el.data("initialbackground"),10)||0,fixedOnBadIE:this.$el.data("fixedonbadie")==
false?false:true,direction:this.$el.data("direction")||-1};this.init(d)};f.prototype.init=function(d){this.$player=this.$el.find(".view360-player");this.$components=this.$el.find(".view360-components");this.$arrows=this.$el.find(".view360-arrows").children("div");this.firedRim=this.firedColor=this.firedSpin=false;this.$components.find(".view360-color-picker li").each(function(e){var g=b(this).data("color");b(this).attr("data-index",e).css({"background-color":g})});this.options.showControls||this.$components.hide();
this.options.showArrows||this.$arrows.hide();this.fn=d.onFrame||function(){};this.readSettings();if(this.resX&&this.resY)this.ratio=this.resX/this.framesX/(this.resY/this.framesY);if(this.options.fixedOnBadIE)if(navigator.appName.indexOf("Internet Explorer")!==-1)(this.badBrowser=navigator.appVersion.indexOf("MSIE 9")===-1&&navigator.appVersion.indexOf("MSIE 1")===-1)&&this.$arrows.parent().addClass("light");this.bindings();this.trimPath=this.$components.find(".view360-trims li").eq(this.options.initialTrim).addClass("active").data("trim-path");
this.backgroundSuffix=this.$components.find(".view360-backgrounds li").eq(this.options.initialBackground).addClass("active").data("background-id");d=this.$components.find(".view360-color-picker li").eq(this.options.initialColor);this.changeColor(d);d.addClass("active");this.preload=this.preloadHtml();this.render()};f.prototype.readSettings=function(){var d=this,e=b(window).width();this.$el.find(".qualityChoser").each(function(g,h){g=b(h);h=parseInt(g.data("min-width"),10)||0;var i=parseInt(g.data("max-width"),
10)||9999999999999;if(e>=h&&e<i){d.quality=g.val();d.extension=g.data("extension");d.framesX=parseInt(g.data("columns"),10);d.framesY=parseInt(g.data("rows"),10);d.framesCount=d.framesX*d.framesY;d.resX=parseInt(g.data("asset-width"),10);d.resY=parseInt(g.data("asset-height"),10);return false}})};f.prototype.preloadHtml=function(){return"<div class='view360-preloader'><div class='view360-spinner-container'></div></div>"};f.prototype.bindings=function(){var d=this,e,g;this.$arrows.on("mousedown",function(){var h=
b(this);d.badBrowser||(e=setInterval(function(){if(h.data("direction")==="right"){d.$player.spritespin("animate",false);d.$player.spritespin("prev")}else{d.$player.spritespin("animate",false);d.$player.spritespin("next")}},60))}).on("mouseup mouseleave",function(){if(!d.badBrowser){clearInterval(e);d.fireRotateMetrics();GWS&&GWS.broadcast("360-view-rotate")}});this.$components.on("click","li",function(){var h=b(this),i=h.parent();if(!h.hasClass("active")){i.find("li").removeClass("active");h.addClass("active");
if(i.hasClass("trims")){d.trimPath=h.data("trim-path");d.$components.find(".view360-modifier-label")&&d.$components.find(".view360-modifier-label").css("display")==="block"&&d.$components.find(".view360-modifier-label").text(h.find(".picker-title").text());if(!d.firedRim){a.send(document.body,"s550-metrics",{action:"click",name:"mr-360-rim-interaction"});d.firedRim=true}GWS&&GWS.broadcast("360-view-wheel",h)}else if(i.hasClass("backgrounds"))d.backgroundSuffix=h.data("background-id");else if(i.hasClass("colors")){d.changeColor(h);
if(!d.firedColor){a.send(document.body,"s550-metrics",{action:"click",name:"mr-360-colorizor-interaction"});d.firedColor=true}GWS&&GWS.broadcast("360-view-color",h)}d.preload=d.preloadHtml();d.render()}});if(/android/i.test(navigator.userAgent)&&/webkit/i.test(navigator.userAgent)||/chrome/i.test(navigator.userAgent))this.$player.on("touchstart",function(h){h.preventDefault()});this.$player.on("mousedown",function(){if(!d.badBrowser){d.$player.spritespin("animate",false).addClass("playing");d.options.autoHideControls&&
d.$components.stop(false,true).fadeOut();b(window).on("mouseup",function(){d.$player.removeClass("playing");d.options.autoHideControls&&d.$components.stop(false,true).fadeIn();d.fireRotateMetrics();GWS&&GWS.broadcast("360-view-rotate")})}});this.$player.on("touchstart",function(){d.fireRotateMetrics()});b(window).on("resize",function(){clearTimeout(g);g=setTimeout(function(){d.readjust()},200)})};f.prototype.render=function(d){var e=this,g=this.$el.width();d=b.extend({},d);d.source=this.trimPath+
this.folder+this.quality+this.filename+this.backgroundSuffix+this.extension;this.currentOptions={width:g,height:g/e.ratio,resolutionX:g*e.framesX,resolutionY:g/e.ratio*e.framesY,resX:e.resX,resY:e.resY,frames:this.framesCount,framesX:this.framesX,frame:d.frame||this.$player.hasClass("spritespin-instance")?this.$player.spritespin("frame"):0,animate:false,sense:d.direction||e.options.direction,source:d.source,preloadHtml:this.preload};this.destroy()};f.prototype.changeColor=function(d){this.folder=
d.data("folder");this.filename=d.data("filename");this.$components.find(".picker-label")&&this.$components.find(".picker-label").css("display")==="block"&&this.$components.find(".picker-label").text(d.find(".picker-title").text())};f.prototype.destroy=function(){var d=this;this.$player.removeClass("light");if(this.badBrowser){d.$player.addClass("light");a.send(document.body,"view360-light-init",{element:d.$player,options:d.currentOptions})}else{this.$player.spritespin("destroy");this.$player.spritespin(this.currentOptions)}};
f.prototype.readjust=function(){var d=this;if(this.badBrowser)a.send(document.body,"view360-light-reset",{element:d.$player,options:d.currentOptions});else{this.preload=undefined;this.render(this.currentOptions)}};f.prototype.fireRotateMetrics=function(){if(!this.firedSpin){a.send(document.body,"s550-metrics",{action:"click",name:"mr-360-spin-interaction"});this.firedSpin=true}};a.listen(document.body,"view360-apply",function(d,e){c=new f(e)});a.listen(document.body,"view360-remove",function(){c.destroy()})});
jQuery(function(){function a(){i=h=1;b()}function b(){h++;i++;var r={x:0,y:0};r.y=(Math.ceil(h/l)-1)*s.height();r.x=(i-1)*s.width();v.css({left:-1*r.x+"px",top:-1*r.y+"px"});if(i>=4)i=0}function c(){h--;i--;if(i<=0)i=4;var r={x:0,y:0};r.y=(Math.ceil(h/l)-1)*s.height();r.x=(i-1)*s.width();v.css({left:-1*r.x+"px",top:-1*r.y+"px"})}function f(){h=36;i=4;c()}function d(){if(s!==undefined&&s.length>0&&v!==undefined&&v.length>0){p=k=false;i=h=1;j=0;v.css({top:0,left:0})}}function e(){s.find(".draggable").on("mousedown",
function(r){r.preventDefault();p=k=true;m=r.clientX});s.find(".draggable").on("mouseup",function(r){r.preventDefault();m=p=k=false});u.on("mousedown","div",function(r){p=false;r.preventDefault();var w=jQuery(this).data("direction");if(w==="left")t=setInterval(function(){if(h<36){b();k=false;setTimeout(function(){k=true},50)}else if(h===36){i=4;a()}},100);else if(w==="right")t=setInterval(function(){if(h<1)h=1;if(h>1){c();k=false;setTimeout(function(){k=true},50)}else h===1&&f()},100);r.stopPropagation()});
u.find("div").on("mouseup",function(r){k=p=false;r.preventDefault();clearInterval(t);r.stopPropagation()});u.find("div").on("mouseleave",function(r){k=p=false;r.preventDefault();clearInterval(t);r.stopPropagation()});s.find(".draggable").on("mousemove",function(r){r.preventDefault();if(k===true){n=r.clientX;if(n>m&&n-m>50)if(h>1){c();k=false;setTimeout(function(){if(p)k=true},30)}else h===1&&f();else if(n<m&&h<=36&&m-n>50)if(h===36){i=4;a()}else{b();k=false;setTimeout(function(){if(p)k=true},30)}}});
jQuery(window).on("resize",function(){s.height(s.width()/q);v.width(s.width()*l);d()})}function g(r,w){if(o)v.attr("src",w.source);else{s=r;s.html('<div class="draggable"></div>');v=jQuery("<img/>");v.attr("src",w.source);s.find(".draggable").html(v);s.height(s.width()/q);v.width(s.width()*l);e();o=true}}var h=1,i=1,j=0,l=4,k=false,m=0,n=false,q=2.23,p=false,o=false,t=false,u=jQuery(".view360-arrows"),s,v;ngbs._message_bus.listen(document.body,"view360-light-init",function(r,w){g(w.element,w.options)});
ngbs._message_bus.listen(document.body,"view360-light-reset",function(r,w){o?d():g(w.element,w.options)})});
ngbs.widget("reveal-slider",function(a){function b(e){if(!e.$el.hasClass("reveal-slider-enabled")){this.$slider=e.$el;this.options=c.extend({},d,e);this.onDrag=e.onDrag;this.$scroller=this.$slider.find(".reveal-scroller");this.$dragger=this.$scroller.find(".scroller-dragger");this.$limits=this.$scroller.find(".scroller-limit");this.$background=this.$slider.find(".reveal-img").eq(0);this.rangeStart=this.$slider.data("rangestart")||0;this.rangeEnd=this.$slider.data("rangeend")||100;this.lastPos=this.initPos=
this.$slider.data("initposition")||0;this.firedMetric=false;this.init()}}var c=jQuery,f,d={maskSelector:"*:first"};b.prototype.init=function(){this.$slider.addClass("reveal-slider-enabled");this.drag(0);this.setHandlers()};b.prototype.setHandlers=function(){var e=this;this.$dragger.on("mousedown touchstart",function(g){g.preventDefault();g.stopPropagation();GWS&&GWS.broadcast("reveal-slider-scroll-mousedown");c("body").on("mouseup touchend",function(){e.$dragger.removeClass("active");c("body").off("mousemove.reveal-slider, touchmove.reveal-slider");
GWS&&GWS.broadcast("reveal-slider-scroll-mouseup")}).on("mousemove.reveal-slider, touchmove.reveal-slider",function(h){h.preventDefault();e.$dragger.addClass("active");e.calculateDrag(h);if(!e.firedMetric){a.send(document.body,"s550-metrics",{action:"click",name:"mr-convertible-interaction"});e.firedMetric=true}GWS&&GWS.broadcast("reveal-slider-scroll-mousemove")})})};b.prototype.calculateDrag=function(e){var g;g=e.originalEvent.clientX||e.clientX||e.originalEvent.touches[0].clientX||e.touches[0].clientX||
e.originalEvent.pageX||e.pageX||e.originalEvent.touches[0].pageX||e.touches[0].pageX;e=this.$scroller.outerWidth();var h=this.$dragger.outerWidth(),i=h/2;g=g-this.$scroller.offset().left-i;g=g>=e-h?e-h:g<=0?0:g;this.drag(g)};b.prototype.drag=function(e){var g=e*100/this.$scroller.outerWidth();e=e*100/(this.$scroller.outerWidth()-this.$dragger.outerWidth());var h=e*(this.rangeEnd-this.rangeStart)/100+this.rangeStart;this.$dragger.css("left",g+"%");this.play(h);this.lastPos=h;typeof this.onDrag==="function"&&
this.onDrag({value:e,bounded:h})};b.prototype.play=function(e){this.$background.css("left",e+"%").find(this.options.maskSelector).css("left",-e+"%")};a.listen(document.body,"revealer-update",function(){f.play(f.lastPos)});a.listen(document.body,"revealer-config",function(e,g){f=new b(g)})});
ngbs.widget("back-to-top-button",function(a){function b(f){this.$widget=f.$el;this.$button=this.$widget.find(".btt-button");this.duration=f.duration||500;this.$button.on("click",function(){c("body, html").animate({scrollTop:0},self.duration);GWS.broadcast("back-to-top")})}var c=jQuery;a.listen(document.body,"back-to-top-config",function(f,d){new b(d)})});
ngbs.widget("wechat-barcode",function(){function a(){c.on("click",function(){f.hasClass("show")?f.removeClass("show"):f.addClass("show")})}var b=jQuery,c=b(".share-by-wechat"),f=b(".wechat-qrcode");a()});
ngbs.widget("viewpoints",function(a){function b(d){this.viewpoints=d.$el;this.options=c.extend({},f,d);this.init(d);return this.viewpoints}var c=jQuery,f={offset:0,autoUpdate:true,forceUpdate:false};b.prototype.init=function(d){this.active=true;this.offsets=[];this.heights=[];this.triggered=[];this.inside=d.inside;this.before=d.before;this.after=d.after;this.crossing=d.crossing;this.update();this.bindHandlers();this.events();c(window).trigger("scroll")};b.prototype.bindHandlers=function(){var d=this,
e=c(window),g,h=[],i=[],j,l,k;for(g=0;g<this.viewpoints.length;g++){h.push(false);i.push(false)}if(this.options.autoUpdate){e.on("resize.viewpoints, load",function(){d.update()});this.options.forceUpdate&&e.on("scroll.viewpoints",function(){++g%3===0&&d.update()})}e.on("scroll.viewpoints",function(){var m={};if(d.active){j=e.scrollTop()+d.offset;if(l!==j){if(j>l)k="down";else if(j<l)k="up";m={direction:k,scrollTop:j-d.offset,scroll:j};d.viewpoints.each(function(n,q){if(d.inside&&j>=d.offsets[n]&&
j<=d.offsets[n]+d.heights[n]&&!d.triggered[n]){c.each(d.triggered,function(p){d.triggered[p]=false});d.triggered[n]=true;m.$el=c(q);d.inside(d,m)}if(d.before&&j<d.offsets[n]){m.$el=c(q);d.before(d,m)}if(d.after&&j>d.offsets[n]+d.heights[n]){m.$el=c(q);d.after(d,m)}if(d.crossing)if(j>=d.offsets[n]&&k==="down"&&!h[n]){m.$el=c(q);d.crossing(d,m);h[n]=true;i[n]=false}else if(j<=d.offsets[n]&&k==="up"&&!i[n]){m.$el=c(q);d.crossing(d,m);h[n]=false;i[n]=true}});l=j}}})};b.prototype.destroy=function(){c(window).off("scroll.viewpoints")};
b.prototype.update=function(){var d=this;this.offsets.length=0;this.heights.length=0;this.triggered.length=0;this.viewpoints.each(function(e,g){d.offsets.push(c(g).offset().top);d.heights.push(c(g).outerHeight());d.triggered.push(false)});this.offset=typeof this.options.offset==="function"?this.options.offset():this.options.offset||0};b.prototype.enable=function(){this.active=false};b.prototype.disable=function(){this.active=true};b.prototype.events=function(){var d=this;a.listen(document.body,"viewpoints-update",
function(){d.update()});a.listen(document.body,"viewpoints-enable",function(){d.enable()});a.listen(document.body,"viewpoints-disable",function(){d.disable()})};a.listen(document.body,"viewpoints",function(d,e){new b(e)})});
ngbs.widget("parallax",function(a){function b(g){this.options=c.extend({},e,g);this.$el=g.$el||c();this.$container=g.cont||c("body");this.init()}var c=jQuery,f,d=0,e={adjustSize:false,heightcrop:0.875,animate:true,animateSpeed:180,offset:0};b.prototype.init=function(){var g=this,h,i;this.$el.wrap("<div class='parallax-container' />");this.$parallax=this.$el.parent(".parallax-container");this.$insideImages=this.$parallax.find("img");h=this.$insideImages.length;this.active=true;if(h){this.insideImagesCount=
0;this.$insideImages.each(function(j,l){c("<img/>").on("load",function(){g.insideImagesCount++}).attr("src",l.src)});i=setInterval(function(){if(g.insideImagesCount===h){clearInterval(i);g.updateView();g.bindings()}},500)}else{g.updateView();g.bindings()}};b.prototype.bindings=function(){var g=this,h;c(window).on("resize",function(){clearTimeout(h);h=setTimeout(function(){g.updateView()},500)}).on("scroll",function(){if(g.active){d=c(window).scrollTop()-g.options.offset;g.parallax(d)}})};b.prototype.parallax=
function(g){var h=this;this.$parallax.each(function(i,j){var l=c(j),k,m,n=l.offset().top-h.wHeight;i=l.children().eq(0);j=l.height();k=h.wHeight+j;m=i.height();if(g>n&&g<n+l.outerHeight()+h.wHeight){l=-1*(g-l.offset().top-j);k=100-l*100/k;j=(m-j)*k/100;h.options.animate?i.css("position","relative").stop().animate({top:-j+"px"},h.options.animateSpeed):i.css({position:"relative",top:-j+"px"})}})};b.prototype.disable=function(){this.active=false};b.prototype.enable=function(){this.active=true};b.prototype.updateView=
function(){var g=this,h;this.wHeight=c(window).height();this.wWidth=c(window).width();if(g.options.heightcrop!==1){h=g.options.heightcrop*g.$el.height();g.$parallax.css({height:h})}this.parallax(d);a.send(document.body,"paralax-update-view-done")};a.listen(document.body,"parallax-refresh",function(){f.updateView()});a.listen(document.body,"parallax-enable",function(){f.enable()});a.listen(document.body,"parallax-disable",function(){f.disable()});a.listen(document.body,"parallax",function(g,h){if("ontouchstart"in
document.body||"ontouchstart"in window||"ontouchstart"in document.documentElement)return false;f=new b(h)})});
ngbs.widget("smooth-scrolling",function(a){function b(e){this.options=c.extend({},d,e);navigator.appVersion.indexOf("Mac")>-1||this.bindings()}var c=jQuery,f,d={speed:200,distance:150,deltaScalar:3,easing:"linear"};b.prototype.bindings=function(){var e=this;c(window).on("mousewheel.scrolling",function(g){e.wheel(g.originalEvent)})};b.prototype.wheel=function(e){var g=this,h=0;e.preventDefault();if(e.wheelDelta)h=e.wheelDelta/(g.options.deltaScalar*40);else if(e.detail)h=-e.detail/g.options.deltaScalar;
c("html, body").stop(false,false).animate({scrollTop:c(window).scrollTop()-g.options.distance*h},g.options.speed,g.options.easing)};b.prototype.disable=function(){c(window).off("mousewheel.scrolling")};b.prototype.enable=function(){this.bindings()};a.listen(document.body,"smooth-scrolling",function(e,g){g=g||{};f=new b(g)});a.listen(document.body,"smooth-scrolling-disable",function(){f.disable()});a.listen(document.body,"smooth-scrolling-enable",function(){f.enable()})});
ngbs.widget("section-collapser",function(a){function b(d){this.$el=d.$el;this.options=c.extend({},f,d);this.init();this.bindings()}var c=jQuery,f={speed:400};b.prototype.init=function(){this.$el.each(function(d,e){d=c(e);e=false;if(d.data("collapsible")){if(d.data("collapsed")===true)e=true;d.wrapInner("<div class='collapsible' style='display: "+(e?"none":"block")+"'/>");d.prepend("<div class='section-collapser "+(e?"collapsed":"")+"'>"+(d.data("title")?d.data("title"):d[0].id)+"<div class='collapser-status' /></div>")}});
this.$collapserBtn=this.$el.find(".section-collapser");this.$collapserArea=this.$el.find(".collapsible")};b.prototype.bindings=function(){var d=this;this.$collapserBtn.on("click",function(e){e.preventDefault();c(this).toggleClass("collapsed").next(".collapsible").slideToggle(d.options.speed,function(){typeof d.options.onChange==="function"&&d.options.onChange()})})};b.prototype.deactivate=function(){this.$el.find(".section-collapser").hide();this.$el.find(".collapsible").show()};b.prototype.activate=
function(){this.$el.find(".section-collapser").show();this.$el.find(".collapsible").hide()};a.listen(document.body,"section-collapser",function(d,e){new b(e)})});
var GWS=function(){var a=jQuery,b={},c=false;return{listen:function(f,d){if(typeof d=="function"){b[f]=d;return true}return false},broadcast:function(f,d){if(typeof d=="undefined")d={};var e;if(f in b){try{if(d instanceof HTMLElement)d=a(d)}catch(g){}if(d instanceof jQuery){e=a(d).data();d=a(d).attr("id");if(typeof d!=="undefined"&&d!==false)e=a.extend(e,{id:d})}else e=d;e.event=f;b[f](e);return true}return false},ignore:function(f){if(f in b){delete b[f];return true}return false},init:function(){if(!c){this.$widgets=
a(".GWS-widget");if(this.$widgets.length){this.$widgets.wrapAll('<div id="s550-container"></div>');window.ngbs._message_bus.send(document.body,"page-init");a.each(".feature-buttons.open",function(){a(this).attr("data-feature-id",a(this))})}c=true}}}}();

var s550eventmap={};function flagEventFired(c){s550eventmap[c]=true}function hasEventFired(c){return!(s550eventmap[c]===undefined||s550eventmap[c]===false)}function showShareThisLink(c,a){$.publish("/analytics/link/",{title:"share this",nameplate:"none",link:true,type:"e",onclicks:"share this:"+c});window.open(a)}function showFollowLink(c,a){$.publish("/analytics/link/",{title:"social:follow",nameplate:"none",link:true,type:"e",onclicks:"social:follow:"+c,events:"event4"});window.open(a)}
function publishS550Link(c,a,h,g){if(g===undefined)$.publish("/analytics/link/",{title:c,link:true,type:a,onclicks:h});else if(!hasEventFired(g)){flagEventFired(g);$.publish("/analytics/link/",{title:c,link:true,type:a,onclicks:h})}}
$(document).bind("mobileinit",function(){$(document).bind("pagechange",function(){GWS.init();GWS.listen("features-button",function(e){var b="",f="";if(e.featuresId)if(e.featuresId==="performance"){b=f="reveal:performance:read more:ford mustang";publishS550Link("reveal:performance:read more","o",b,f)}else if(e.featuresId==="tech"){b=f="reveal:tech:read more:ford mustang";publishS550Link("reveal:tech:read more","o",b,f)}});GWS.listen("gallery-slider-image",function(){publishS550Link("reveal:gallery:image",
"o","reveal:gallery:image:ford mustang","gallery-slider-image")});GWS.listen("gallery-slider-arrow",function(){publishS550Link("reveal:gallery:scroll","o","reveal:gallery:scroll:ford mustang","gallery-slider-arrow")});GWS.listen("360-view-rotate",function(){publishS550Link("reveal:360:spin","o","reveal:360:spin:ford mustang","360-view-rotate")});GWS.listen("360-view-color",function(){publishS550Link("reveal:360:colorizor","o","reveal:360:colorizor:ford mustang","360-view-color")});GWS.listen("360-view-wheel",
function(){publishS550Link("reveal:360:select rim","o","reveal:360:select rim:ford mustang","360-view-wheel")});GWS.listen("zoom-fullscreen-save",function(){publishS550Link("reveal:gallery:image:download","d","reveal:gallery:image:download:ford mustang","zoom-fullscreen-save")});GWS.listen("reveal-slider-scroll-mousemove",function(){publishS550Link("reveal:convertible","o","reveal:convertible:ford mustang","reveal-slider-scroll-mousemove")});if($("#s550-billboard").length>0){$.each(["facebook","twitter",
"googleplus","weibo"],function(e,b){$("a[data-id='"+b+"']").each(function(f,d){$(d).unbind();var i=$(d).data("url");f===0?$(d).click(function(){showShareThisLink(b,i);return false}):$(d).click(function(){showFollowLink(b,i);return false})})});$("a.share-by-email").each(function(e){var b=$(this),f=e===0?"share this":"social:follow",d=e===0?"share this:email":"social:follow:email";b.unbind();b.on("click",function(){$.publish("/analytics/link/",{title:f,nameplate:"none",link:true,type:"e",onclicks:d,
events:"event4"});window.location.href="mailto:"+b.data("email")})});var c=["gallery","features"];$("ul.nav-content").find("li > a").each(function(){var e=$(this),b=$(this).attr("href");$.each(c,function(f,d){if(b==="#s550-"+d){$(e).on("click",function(){publishS550Link("reveal:"+d,"o","reveal:"+d+":ford mustang","subnav:"+d)});return false}})});var a=document.querySelectorAll(".get-updates-link");if(a.length>=2){if(typeof a[0]!=="undefined"){var h=a[0].getAttribute("href");a[0].onclick=function(){window.location=
h}}if(typeof a[1]!=="undefined"){var g=a[1].getAttribute("href");a[1].onclick=function(){window.location=g}}}}})});

/*! jQuery Mobile 1.3.1 | Git HEAD hash: 74b4bec <> 2013-04-10T21:57:23Z | (c) 2010, 2013 jQuery Foundation, Inc. | jquery.org/license */
(function(e,t,i){"function"==typeof define&&define.amd?define(["jquery"],function(n){return i(n,e,t),n.mobile}):i(e.jQuery,e,t)})(this,document,function(e,t,i,n){(function(e){e.mobile={}})(e),function(e,t,n){var a={};e.mobile=e.extend(e.mobile,{version:"1.3.1",ns:"",subPageUrlKey:"ui-page",activePageClass:"ui-page-active",activeBtnClass:"ui-btn-active",focusClass:"ui-focus",ajaxEnabled:!0,hashListeningEnabled:!0,linkBindingEnabled:!0,defaultPageTransition:"fade",maxTransitionWidth:!1,minScrollBack:250,touchOverflowEnabled:!1,defaultDialogTransition:"pop",pageLoadErrorMessage:"Error Loading Page",pageLoadErrorMessageTheme:"e",phonegapNavigationEnabled:!1,autoInitializePage:!0,pushStateEnabled:!0,ignoreContentEnabled:!1,orientationChangeEnabled:!0,buttonMarkup:{hoverDelay:200},window:e(t),document:e(i),keyCode:{ALT:18,BACKSPACE:8,CAPS_LOCK:20,COMMA:188,COMMAND:91,COMMAND_LEFT:91,COMMAND_RIGHT:93,CONTROL:17,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,INSERT:45,LEFT:37,MENU:93,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SHIFT:16,SPACE:32,TAB:9,UP:38,WINDOWS:91},behaviors:{},silentScroll:function(i){"number"!==e.type(i)&&(i=e.mobile.defaultHomeScroll),e.event.special.scrollstart.enabled=!1,setTimeout(function(){t.scrollTo(0,i),e.mobile.document.trigger("silentscroll",{x:0,y:i})},20),setTimeout(function(){e.event.special.scrollstart.enabled=!0},150)},nsNormalizeDict:a,nsNormalize:function(t){return t?a[t]||(a[t]=e.camelCase(e.mobile.ns+t)):n},getInheritedTheme:function(e,t){for(var i,n,a=e[0],o="",s=/ui-(bar|body|overlay)-([a-z])\b/;a&&(i=a.className||"",!(i&&(n=s.exec(i))&&(o=n[2])));)a=a.parentNode;return o||t||"a"},closestPageData:function(e){return e.closest(':jqmData(role="page"), :jqmData(role="dialog")').data("mobile-page")},enhanceable:function(e){return this.haveParents(e,"enhance")},hijackable:function(e){return this.haveParents(e,"ajax")},haveParents:function(t,i){if(!e.mobile.ignoreContentEnabled)return t;for(var n,a,o,s=t.length,r=e(),l=0;s>l;l++){for(a=t.eq(l),o=!1,n=t[l];n;){var d=n.getAttribute?n.getAttribute("data-"+e.mobile.ns+i):"";if("false"===d){o=!0;break}n=n.parentNode}o||(r=r.add(a))}return r},getScreenHeight:function(){return t.innerHeight||e.mobile.window.height()}},e.mobile),e.fn.jqmData=function(t,i){var a;return t!==n&&(t&&(t=e.mobile.nsNormalize(t)),a=2>arguments.length||i===n?this.data(t):this.data(t,i)),a},e.jqmData=function(t,i,a){var o;return i!==n&&(o=e.data(t,i?e.mobile.nsNormalize(i):i,a)),o},e.fn.jqmRemoveData=function(t){return this.removeData(e.mobile.nsNormalize(t))},e.jqmRemoveData=function(t,i){return e.removeData(t,e.mobile.nsNormalize(i))},e.fn.removeWithDependents=function(){e.removeWithDependents(this)},e.removeWithDependents=function(t){var i=e(t);(i.jqmData("dependents")||e()).remove(),i.remove()},e.fn.addDependents=function(t){e.addDependents(e(this),t)},e.addDependents=function(t,i){var n=e(t).jqmData("dependents")||e();e(t).jqmData("dependents",e.merge(n,i))},e.fn.getEncodedText=function(){return e("<div/>").text(e(this).text()).html()},e.fn.jqmEnhanceable=function(){return e.mobile.enhanceable(this)},e.fn.jqmHijackable=function(){return e.mobile.hijackable(this)};var o=e.find,s=/:jqmData\(([^)]*)\)/g;e.find=function(t,i,n,a){return t=t.replace(s,"[data-"+(e.mobile.ns||"")+"$1]"),o.call(this,t,i,n,a)},e.extend(e.find,o),e.find.matches=function(t,i){return e.find(t,null,null,i)},e.find.matchesSelector=function(t,i){return e.find(i,null,null,[t]).length>0}}(e,this),function(e,t){var i=0,n=Array.prototype.slice,a=e.cleanData;e.cleanData=function(t){for(var i,n=0;null!=(i=t[n]);n++)try{e(i).triggerHandler("remove")}catch(o){}a(t)},e.widget=function(i,n,a){var o,s,r,l,d=i.split(".")[0];i=i.split(".")[1],o=d+"-"+i,a||(a=n,n=e.Widget),e.expr[":"][o.toLowerCase()]=function(t){return!!e.data(t,o)},e[d]=e[d]||{},s=e[d][i],r=e[d][i]=function(e,i){return this._createWidget?(arguments.length&&this._createWidget(e,i),t):new r(e,i)},e.extend(r,s,{version:a.version,_proto:e.extend({},a),_childConstructors:[]}),l=new n,l.options=e.widget.extend({},l.options),e.each(a,function(t,i){e.isFunction(i)&&(a[t]=function(){var e=function(){return n.prototype[t].apply(this,arguments)},a=function(e){return n.prototype[t].apply(this,e)};return function(){var t,n=this._super,o=this._superApply;return this._super=e,this._superApply=a,t=i.apply(this,arguments),this._super=n,this._superApply=o,t}}())}),r.prototype=e.widget.extend(l,{widgetEventPrefix:s?l.widgetEventPrefix:i},a,{constructor:r,namespace:d,widgetName:i,widgetFullName:o}),s?(e.each(s._childConstructors,function(t,i){var n=i.prototype;e.widget(n.namespace+"."+n.widgetName,r,i._proto)}),delete s._childConstructors):n._childConstructors.push(r),e.widget.bridge(i,r)},e.widget.extend=function(i){for(var a,o,s=n.call(arguments,1),r=0,l=s.length;l>r;r++)for(a in s[r])o=s[r][a],s[r].hasOwnProperty(a)&&o!==t&&(i[a]=e.isPlainObject(o)?e.isPlainObject(i[a])?e.widget.extend({},i[a],o):e.widget.extend({},o):o);return i},e.widget.bridge=function(i,a){var o=a.prototype.widgetFullName||i;e.fn[i]=function(s){var r="string"==typeof s,l=n.call(arguments,1),d=this;return s=!r&&l.length?e.widget.extend.apply(null,[s].concat(l)):s,r?this.each(function(){var n,a=e.data(this,o);return a?e.isFunction(a[s])&&"_"!==s.charAt(0)?(n=a[s].apply(a,l),n!==a&&n!==t?(d=n&&n.jquery?d.pushStack(n.get()):n,!1):t):e.error("no such method '"+s+"' for "+i+" widget instance"):e.error("cannot call methods on "+i+" prior to initialization; "+"attempted to call method '"+s+"'")}):this.each(function(){var t=e.data(this,o);t?t.option(s||{})._init():e.data(this,o,new a(s,this))}),d}},e.Widget=function(){},e.Widget._childConstructors=[],e.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(t,n){n=e(n||this.defaultElement||this)[0],this.element=e(n),this.uuid=i++,this.eventNamespace="."+this.widgetName+this.uuid,this.options=e.widget.extend({},this.options,this._getCreateOptions(),t),this.bindings=e(),this.hoverable=e(),this.focusable=e(),n!==this&&(e.data(n,this.widgetFullName,this),this._on(!0,this.element,{remove:function(e){e.target===n&&this.destroy()}}),this.document=e(n.style?n.ownerDocument:n.document||n),this.window=e(this.document[0].defaultView||this.document[0].parentWindow)),this._create(),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:e.noop,_getCreateEventData:e.noop,_create:e.noop,_init:e.noop,destroy:function(){this._destroy(),this.element.unbind(this.eventNamespace).removeData(this.widgetName).removeData(this.widgetFullName).removeData(e.camelCase(this.widgetFullName)),this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled "+"ui-state-disabled"),this.bindings.unbind(this.eventNamespace),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")},_destroy:e.noop,widget:function(){return this.element},option:function(i,n){var a,o,s,r=i;if(0===arguments.length)return e.widget.extend({},this.options);if("string"==typeof i)if(r={},a=i.split("."),i=a.shift(),a.length){for(o=r[i]=e.widget.extend({},this.options[i]),s=0;a.length-1>s;s++)o[a[s]]=o[a[s]]||{},o=o[a[s]];if(i=a.pop(),n===t)return o[i]===t?null:o[i];o[i]=n}else{if(n===t)return this.options[i]===t?null:this.options[i];r[i]=n}return this._setOptions(r),this},_setOptions:function(e){var t;for(t in e)this._setOption(t,e[t]);return this},_setOption:function(e,t){return this.options[e]=t,"disabled"===e&&(this.widget().toggleClass(this.widgetFullName+"-disabled ui-state-disabled",!!t).attr("aria-disabled",t),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")),this},enable:function(){return this._setOption("disabled",!1)},disable:function(){return this._setOption("disabled",!0)},_on:function(i,n,a){var o,s=this;"boolean"!=typeof i&&(a=n,n=i,i=!1),a?(n=o=e(n),this.bindings=this.bindings.add(n)):(a=n,n=this.element,o=this.widget()),e.each(a,function(a,r){function l(){return i||s.options.disabled!==!0&&!e(this).hasClass("ui-state-disabled")?("string"==typeof r?s[r]:r).apply(s,arguments):t}"string"!=typeof r&&(l.guid=r.guid=r.guid||l.guid||e.guid++);var d=a.match(/^(\w+)\s*(.*)$/),c=d[1]+s.eventNamespace,h=d[2];h?o.delegate(h,c,l):n.bind(c,l)})},_off:function(e,t){t=(t||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,e.unbind(t).undelegate(t)},_delay:function(e,t){function i(){return("string"==typeof e?n[e]:e).apply(n,arguments)}var n=this;return setTimeout(i,t||0)},_hoverable:function(t){this.hoverable=this.hoverable.add(t),this._on(t,{mouseenter:function(t){e(t.currentTarget).addClass("ui-state-hover")},mouseleave:function(t){e(t.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(t){this.focusable=this.focusable.add(t),this._on(t,{focusin:function(t){e(t.currentTarget).addClass("ui-state-focus")},focusout:function(t){e(t.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(t,i,n){var a,o,s=this.options[t];if(n=n||{},i=e.Event(i),i.type=(t===this.widgetEventPrefix?t:this.widgetEventPrefix+t).toLowerCase(),i.target=this.element[0],o=i.originalEvent)for(a in o)a in i||(i[a]=o[a]);return this.element.trigger(i,n),!(e.isFunction(s)&&s.apply(this.element[0],[i].concat(n))===!1||i.isDefaultPrevented())}},e.each({show:"fadeIn",hide:"fadeOut"},function(t,i){e.Widget.prototype["_"+t]=function(n,a,o){"string"==typeof a&&(a={effect:a});var s,r=a?a===!0||"number"==typeof a?i:a.effect||i:t;a=a||{},"number"==typeof a&&(a={duration:a}),s=!e.isEmptyObject(a),a.complete=o,a.delay&&n.delay(a.delay),s&&e.effects&&e.effects.effect[r]?n[t](a):r!==t&&n[r]?n[r](a.duration,a.easing,o):n.queue(function(i){e(this)[t](),o&&o.call(n[0]),i()})}})}(e),function(e,t){e.widget("mobile.widget",{_createWidget:function(){e.Widget.prototype._createWidget.apply(this,arguments),this._trigger("init")},_getCreateOptions:function(){var i=this.element,n={};return e.each(this.options,function(e){var a=i.jqmData(e.replace(/[A-Z]/g,function(e){return"-"+e.toLowerCase()}));a!==t&&(n[e]=a)}),n},enhanceWithin:function(t,i){this.enhance(e(this.options.initSelector,e(t)),i)},enhance:function(t,i){var n,a,o=e(t);o=e.mobile.enhanceable(o),i&&o.length&&(n=e.mobile.closestPageData(o),a=n&&n.keepNativeSelector()||"",o=o.not(a)),o[this.widgetName]()},raise:function(e){throw"Widget ["+this.widgetName+"]: "+e}})}(e),function(e){e.extend(e.mobile,{loadingMessageTextVisible:n,loadingMessageTheme:n,loadingMessage:n,showPageLoadingMsg:function(t,i,n){e.mobile.loading("show",t,i,n)},hidePageLoadingMsg:function(){e.mobile.loading("hide")},loading:function(){this.loaderWidget.loader.apply(this.loaderWidget,arguments)}});var t="ui-loader",i=e("html"),a=e.mobile.window;e.widget("mobile.loader",{options:{theme:"a",textVisible:!1,html:"",text:"loading"},defaultHtml:"<div class='"+t+"'>"+"<span class='ui-icon ui-icon-loading'></span>"+"<h1></h1>"+"</div>",fakeFixLoader:function(){var t=e("."+e.mobile.activeBtnClass).first();this.element.css({top:e.support.scrollTop&&a.scrollTop()+a.height()/2||t.length&&t.offset().top||100})},checkLoaderPosition:function(){var t=this.element.offset(),i=a.scrollTop(),n=e.mobile.getScreenHeight();(i>t.top||t.top-i>n)&&(this.element.addClass("ui-loader-fakefix"),this.fakeFixLoader(),a.unbind("scroll",this.checkLoaderPosition).bind("scroll",e.proxy(this.fakeFixLoader,this)))},resetHtml:function(){this.element.html(e(this.defaultHtml).html())},show:function(o,s,r){var l,d,c;this.resetHtml(),"object"===e.type(o)?(c=e.extend({},this.options,o),o=c.theme||e.mobile.loadingMessageTheme):(c=this.options,o=o||e.mobile.loadingMessageTheme||c.theme),d=s||e.mobile.loadingMessage||c.text,i.addClass("ui-loading"),(e.mobile.loadingMessage!==!1||c.html)&&(l=e.mobile.loadingMessageTextVisible!==n?e.mobile.loadingMessageTextVisible:c.textVisible,this.element.attr("class",t+" ui-corner-all ui-body-"+o+" ui-loader-"+(l||s||o.text?"verbose":"default")+(c.textonly||r?" ui-loader-textonly":"")),c.html?this.element.html(c.html):this.element.find("h1").text(d),this.element.appendTo(e.mobile.pageContainer),this.checkLoaderPosition(),a.bind("scroll",e.proxy(this.checkLoaderPosition,this)))},hide:function(){i.removeClass("ui-loading"),e.mobile.loadingMessage&&this.element.removeClass("ui-loader-fakefix"),e.mobile.window.unbind("scroll",this.fakeFixLoader),e.mobile.window.unbind("scroll",this.checkLoaderPosition)}}),a.bind("pagecontainercreate",function(){e.mobile.loaderWidget=e.mobile.loaderWidget||e(e.mobile.loader.prototype.defaultHtml).loader()})}(e,this),function(e,t,n){function a(e){return e=e||location.href,"#"+e.replace(/^[^#]*#?(.*)$/,"$1")}var o,s="hashchange",r=i,l=e.event.special,d=r.documentMode,c="on"+s in t&&(d===n||d>7);e.fn[s]=function(e){return e?this.bind(s,e):this.trigger(s)},e.fn[s].delay=50,l[s]=e.extend(l[s],{setup:function(){return c?!1:(e(o.start),n)},teardown:function(){return c?!1:(e(o.stop),n)}}),o=function(){function i(){var n=a(),r=p(d);n!==d?(u(d=n,r),e(t).trigger(s)):r!==d&&(location.href=location.href.replace(/#.*/,"")+r),o=setTimeout(i,e.fn[s].delay)}var o,l={},d=a(),h=function(e){return e},u=h,p=h;return l.start=function(){o||i()},l.stop=function(){o&&clearTimeout(o),o=n},t.attachEvent&&!t.addEventListener&&!c&&function(){var t,n;l.start=function(){t||(n=e.fn[s].src,n=n&&n+a(),t=e('<iframe tabindex="-1" title="empty"/>').hide().one("load",function(){n||u(a()),i()}).attr("src",n||"javascript:0").insertAfter("body")[0].contentWindow,r.onpropertychange=function(){try{"title"===event.propertyName&&(t.document.title=r.title)}catch(e){}})},l.stop=h,p=function(){return a(t.location.href)},u=function(i,n){var a=t.document,o=e.fn[s].domain;i!==n&&(a.title=r.title,a.open(),o&&a.write('<script>document.domain="'+o+'"</script>'),a.close(),t.location.hash=i)}}(),l}()}(e,this),function(e){t.matchMedia=t.matchMedia||function(e){var t,i=e.documentElement,n=i.firstElementChild||i.firstChild,a=e.createElement("body"),o=e.createElement("div");return o.id="mq-test-1",o.style.cssText="position:absolute;top:-100em",a.style.background="none",a.appendChild(o),function(e){return o.innerHTML='&shy;<style media="'+e+'"> #mq-test-1 { width: 42px; }</style>',i.insertBefore(a,n),t=42===o.offsetWidth,i.removeChild(a),{matches:t,media:e}}}(i),e.mobile.media=function(e){return t.matchMedia(e).matches}}(e),function(e){var t={touch:"ontouchend"in i};e.mobile.support=e.mobile.support||{},e.extend(e.support,t),e.extend(e.mobile.support,t)}(e),function(e){e.extend(e.support,{orientation:"orientation"in t&&"onorientationchange"in t})}(e),function(e,n){function a(e){var t=e.charAt(0).toUpperCase()+e.substr(1),i=(e+" "+p.join(t+" ")+t).split(" ");for(var a in i)if(u[i[a]]!==n)return!0}function o(e,t,n){for(var a,o=i.createElement("div"),s=function(e){return e.charAt(0).toUpperCase()+e.substr(1)},r=function(e){return""===e?"":"-"+e.charAt(0).toLowerCase()+e.substr(1)+"-"},l=function(i){var n=r(i)+e+": "+t+";",l=s(i),d=l+(""===l?e:s(e));o.setAttribute("style",n),o.style[d]&&(a=!0)},d=n?n:p,c=0;d.length>c;c++)l(d[c]);return!!a}function s(){var a="transform-3d",o=e.mobile.media("(-"+p.join("-"+a+"),(-")+"-"+a+"),("+a+")");if(o)return!!o;var s=i.createElement("div"),r={MozTransform:"-moz-transform",transform:"transform"};h.append(s);for(var l in r)s.style[l]!==n&&(s.style[l]="translate3d( 100px, 1px, 1px )",o=t.getComputedStyle(s).getPropertyValue(r[l]));return!!o&&"none"!==o}function r(){var t,i,n=location.protocol+"//"+location.host+location.pathname+"ui-dir/",a=e("head base"),o=null,s="";return a.length?s=a.attr("href"):a=o=e("<base>",{href:n}).appendTo("head"),t=e("<a href='testurl' />").prependTo(h),i=t[0].href,a[0].href=s||location.pathname,o&&o.remove(),0===i.indexOf(n)}function l(){var e,n=i.createElement("x"),a=i.documentElement,o=t.getComputedStyle;return"pointerEvents"in n.style?(n.style.pointerEvents="auto",n.style.pointerEvents="x",a.appendChild(n),e=o&&"auto"===o(n,"").pointerEvents,a.removeChild(n),!!e):!1}function d(){var e=i.createElement("div");return e.getBoundingClientRect!==n}function c(){var e=t,i=navigator.userAgent,n=navigator.platform,a=i.match(/AppleWebKit\/([0-9]+)/),o=!!a&&a[1],s=i.match(/Fennec\/([0-9]+)/),r=!!s&&s[1],l=i.match(/Opera Mobi\/([0-9]+)/),d=!!l&&l[1];return(n.indexOf("iPhone")>-1||n.indexOf("iPad")>-1||n.indexOf("iPod")>-1)&&o&&534>o||e.operamini&&"[object OperaMini]"==={}.toString.call(e.operamini)||l&&7458>d||i.indexOf("Android")>-1&&o&&533>o||r&&6>r||"palmGetResource"in t&&o&&534>o||i.indexOf("MeeGo")>-1&&i.indexOf("NokiaBrowser/8.5.0")>-1?!1:!0}var h=e("<body>").prependTo("html"),u=h[0].style,p=["Webkit","Moz","O"],m="palmGetResource"in t,f=t.opera,g=t.operamini&&"[object OperaMini]"==={}.toString.call(t.operamini),b=t.blackberry&&!a("-webkit-transform");e.extend(e.mobile,{browser:{}}),e.mobile.browser.oldIE=function(){var e=3,t=i.createElement("div"),n=t.all||[];do t.innerHTML="<!--[if gt IE "+ ++e+"]><br><![endif]-->";while(n[0]);return e>4?e:!e}(),e.extend(e.support,{cssTransitions:"WebKitTransitionEvent"in t||o("transition","height 100ms linear",["Webkit","Moz",""])&&!e.mobile.browser.oldIE&&!f,pushState:"pushState"in history&&"replaceState"in history&&!(t.navigator.userAgent.indexOf("Firefox")>=0&&t.top!==t)&&-1===t.navigator.userAgent.search(/CriOS/),mediaquery:e.mobile.media("only all"),cssPseudoElement:!!a("content"),touchOverflow:!!a("overflowScrolling"),cssTransform3d:s(),boxShadow:!!a("boxShadow")&&!b,fixedPosition:c(),scrollTop:("pageXOffset"in t||"scrollTop"in i.documentElement||"scrollTop"in h[0])&&!m&&!g,dynamicBaseTag:r(),cssPointerEvents:l(),boundingRect:d()}),h.remove();var v=function(){var e=t.navigator.userAgent;return e.indexOf("Nokia")>-1&&(e.indexOf("Symbian/3")>-1||e.indexOf("Series60/5")>-1)&&e.indexOf("AppleWebKit")>-1&&e.match(/(BrowserNG|NokiaBrowser)\/7\.[0-3]/)}();e.mobile.gradeA=function(){return(e.support.mediaquery||e.mobile.browser.oldIE&&e.mobile.browser.oldIE>=7)&&(e.support.boundingRect||null!==e.fn.jquery.match(/1\.[0-7+]\.[0-9+]?/))},e.mobile.ajaxBlacklist=t.blackberry&&!t.WebKitPoint||g||v,v&&e(function(){e("head link[rel='stylesheet']").attr("rel","alternate stylesheet").attr("rel","stylesheet")}),e.support.boxShadow||e("html").addClass("ui-mobile-nosupport-boxshadow")}(e),function(e,t){var i,n=e.mobile.window;e.event.special.navigate=i={bound:!1,pushStateEnabled:!0,originalEventName:t,isPushStateEnabled:function(){return e.support.pushState&&e.mobile.pushStateEnabled===!0&&this.isHashChangeEnabled()},isHashChangeEnabled:function(){return e.mobile.hashListeningEnabled===!0},popstate:function(t){var i=new e.Event("navigate"),a=new e.Event("beforenavigate"),o=t.originalEvent.state||{};location.href,n.trigger(a),a.isDefaultPrevented()||(t.historyState&&e.extend(o,t.historyState),i.originalEvent=t,setTimeout(function(){n.trigger(i,{state:o})},0))},hashchange:function(t){var i=new e.Event("navigate"),a=new e.Event("beforenavigate");n.trigger(a),a.isDefaultPrevented()||(i.originalEvent=t,n.trigger(i,{state:t.hashchangeState||{}}))},setup:function(){i.bound||(i.bound=!0,i.isPushStateEnabled()?(i.originalEventName="popstate",n.bind("popstate.navigate",i.popstate)):i.isHashChangeEnabled()&&(i.originalEventName="hashchange",n.bind("hashchange.navigate",i.hashchange)))}}}(e),function(e,i){var n,a,o="&ui-state=dialog";e.mobile.path=n={uiStateKey:"&ui-state",urlParseRE:/^\s*(((([^:\/#\?]+:)?(?:(\/\/)((?:(([^:@\/#\?]+)(?:\:([^:@\/#\?]+))?)@)?(([^:\/#\?\]\[]+|\[[^\/\]@#?]+\])(?:\:([0-9]+))?))?)?)?((\/?(?:[^\/\?#]+\/+)*)([^\?#]*)))?(\?[^#]+)?)(#.*)?/,getLocation:function(e){var t=e?this.parseUrl(e):location,i=this.parseUrl(e||location.href).hash;return i="#"===i?"":i,t.protocol+"//"+t.host+t.pathname+t.search+i},parseLocation:function(){return this.parseUrl(this.getLocation())},parseUrl:function(t){if("object"===e.type(t))return t;var i=n.urlParseRE.exec(t||"")||[];return{href:i[0]||"",hrefNoHash:i[1]||"",hrefNoSearch:i[2]||"",domain:i[3]||"",protocol:i[4]||"",doubleSlash:i[5]||"",authority:i[6]||"",username:i[8]||"",password:i[9]||"",host:i[10]||"",hostname:i[11]||"",port:i[12]||"",pathname:i[13]||"",directory:i[14]||"",filename:i[15]||"",search:i[16]||"",hash:i[17]||""}},makePathAbsolute:function(e,t){if(e&&"/"===e.charAt(0))return e;e=e||"",t=t?t.replace(/^\/|(\/[^\/]*|[^\/]+)$/g,""):"";for(var i=t?t.split("/"):[],n=e.split("/"),a=0;n.length>a;a++){var o=n[a];switch(o){case".":break;case"..":i.length&&i.pop();break;default:i.push(o)}}return"/"+i.join("/")},isSameDomain:function(e,t){return n.parseUrl(e).domain===n.parseUrl(t).domain},isRelativeUrl:function(e){return""===n.parseUrl(e).protocol},isAbsoluteUrl:function(e){return""!==n.parseUrl(e).protocol},makeUrlAbsolute:function(e,t){if(!n.isRelativeUrl(e))return e;t===i&&(t=this.documentBase);var a=n.parseUrl(e),o=n.parseUrl(t),s=a.protocol||o.protocol,r=a.protocol?a.doubleSlash:a.doubleSlash||o.doubleSlash,l=a.authority||o.authority,d=""!==a.pathname,c=n.makePathAbsolute(a.pathname||o.filename,o.pathname),h=a.search||!d&&o.search||"",u=a.hash;return s+r+l+c+h+u},addSearchParams:function(t,i){var a=n.parseUrl(t),o="object"==typeof i?e.param(i):i,s=a.search||"?";return a.hrefNoSearch+s+("?"!==s.charAt(s.length-1)?"&":"")+o+(a.hash||"")},convertUrlToDataUrl:function(e){var i=n.parseUrl(e);return n.isEmbeddedPage(i)?i.hash.split(o)[0].replace(/^#/,"").replace(/\?.*$/,""):n.isSameDomain(i,this.documentBase)?i.hrefNoHash.replace(this.documentBase.domain,"").split(o)[0]:t.decodeURIComponent(e)},get:function(e){return e===i&&(e=n.parseLocation().hash),n.stripHash(e).replace(/[^\/]*\.[^\/*]+$/,"")},set:function(e){location.hash=e},isPath:function(e){return/\//.test(e)},clean:function(e){return e.replace(this.documentBase.domain,"")},stripHash:function(e){return e.replace(/^#/,"")},stripQueryParams:function(e){return e.replace(/\?.*$/,"")},cleanHash:function(e){return n.stripHash(e.replace(/\?.*$/,"").replace(o,""))},isHashValid:function(e){return/^#[^#]+$/.test(e)},isExternal:function(e){var t=n.parseUrl(e);return t.protocol&&t.domain!==this.documentUrl.domain?!0:!1},hasProtocol:function(e){return/^(:?\w+:)/.test(e)},isEmbeddedPage:function(e){var t=n.parseUrl(e);return""!==t.protocol?!this.isPath(t.hash)&&t.hash&&(t.hrefNoHash===this.documentUrl.hrefNoHash||this.documentBaseDiffers&&t.hrefNoHash===this.documentBase.hrefNoHash):/^#/.test(t.href)},squash:function(e,t){var i,a,o,s,r=this.isPath(e),l=this.parseUrl(e),d=l.hash,c="";return t=t||(n.isPath(e)?n.getLocation():n.getDocumentUrl()),a=r?n.stripHash(e):e,a=n.isPath(l.hash)?n.stripHash(l.hash):a,s=a.indexOf(this.uiStateKey),s>-1&&(c=a.slice(s),a=a.slice(0,s)),i=n.makeUrlAbsolute(a,t),o=this.parseUrl(i).search,r?((n.isPath(d)||0===d.replace("#","").indexOf(this.uiStateKey))&&(d=""),c&&-1===d.indexOf(this.uiStateKey)&&(d+=c),-1===d.indexOf("#")&&""!==d&&(d="#"+d),i=n.parseUrl(i),i=i.protocol+"//"+i.host+i.pathname+o+d):i+=i.indexOf("#")>-1?c:"#"+c,i},isPreservableHash:function(e){return 0===e.replace("#","").indexOf(this.uiStateKey)}},n.documentUrl=n.parseLocation(),a=e("head").find("base"),n.documentBase=a.length?n.parseUrl(n.makeUrlAbsolute(a.attr("href"),n.documentUrl.href)):n.documentUrl,n.documentBaseDiffers=n.documentUrl.hrefNoHash!==n.documentBase.hrefNoHash,n.getDocumentUrl=function(t){return t?e.extend({},n.documentUrl):n.documentUrl.href},n.getDocumentBase=function(t){return t?e.extend({},n.documentBase):n.documentBase.href}}(e),function(e,t){e.mobile.path,e.mobile.History=function(e,t){this.stack=e||[],this.activeIndex=t||0},e.extend(e.mobile.History.prototype,{getActive:function(){return this.stack[this.activeIndex]},getLast:function(){return this.stack[this.previousIndex]},getNext:function(){return this.stack[this.activeIndex+1]},getPrev:function(){return this.stack[this.activeIndex-1]},add:function(e,t){t=t||{},this.getNext()&&this.clearForward(),t.hash&&-1===t.hash.indexOf("#")&&(t.hash="#"+t.hash),t.url=e,this.stack.push(t),this.activeIndex=this.stack.length-1},clearForward:function(){this.stack=this.stack.slice(0,this.activeIndex+1)},find:function(e,t,i){t=t||this.stack;var n,a,o,s=t.length;for(a=0;s>a;a++)if(n=t[a],(decodeURIComponent(e)===decodeURIComponent(n.url)||decodeURIComponent(e)===decodeURIComponent(n.hash))&&(o=a,i))return o;return o},closest:function(e){var i,n=this.activeIndex;return i=this.find(e,this.stack.slice(0,n)),i===t&&(i=this.find(e,this.stack.slice(n),!0),i=i===t?i:i+n),i},direct:function(i){var n=this.closest(i.url),a=this.activeIndex;n!==t&&(this.activeIndex=n,this.previousIndex=a),a>n?(i.present||i.back||e.noop)(this.getActive(),"back"):n>a?(i.present||i.forward||e.noop)(this.getActive(),"forward"):n===t&&i.missing&&i.missing(this.getActive())}})}(e),function(e){var a=e.mobile.path,o=location.href;e.mobile.Navigator=function(t){this.history=t,this.ignoreInitialHashChange=!0,e.mobile.window.bind({"popstate.history":e.proxy(this.popstate,this),"hashchange.history":e.proxy(this.hashchange,this)})},e.extend(e.mobile.Navigator.prototype,{squash:function(n,o){var s,r,l=a.isPath(n)?a.stripHash(n):n;return r=a.squash(n),s=e.extend({hash:l,url:r},o),t.history.replaceState(s,s.title||i.title,r),s},hash:function(e,t){var i,n,o;if(i=a.parseUrl(e),n=a.parseLocation(),n.pathname+n.search===i.pathname+i.search)o=i.hash?i.hash:i.pathname+i.search;else if(a.isPath(e)){var s=a.parseUrl(t);o=s.pathname+s.search+(a.isPreservableHash(s.hash)?s.hash.replace("#",""):"")}else o=e;return o},go:function(n,o,s){var r,l,d,c,h=e.event.special.navigate.isPushStateEnabled();l=a.squash(n),d=this.hash(n,l),s&&d!==a.stripHash(a.parseLocation().hash)&&(this.preventNextHashChange=s),this.preventHashAssignPopState=!0,t.location.hash=d,this.preventHashAssignPopState=!1,r=e.extend({url:l,hash:d,title:i.title},o),h&&(c=new e.Event("popstate"),c.originalEvent={type:"popstate",state:null},this.squash(n,r),s||(this.ignorePopState=!0,e.mobile.window.trigger(c))),this.history.add(r.url,r)},popstate:function(t){var i,s;if(e.event.special.navigate.isPushStateEnabled())return this.preventHashAssignPopState?(this.preventHashAssignPopState=!1,t.stopImmediatePropagation(),n):this.ignorePopState?(this.ignorePopState=!1,n):!t.originalEvent.state&&1===this.history.stack.length&&this.ignoreInitialHashChange&&(this.ignoreInitialHashChange=!1,location.href===o)?(t.preventDefault(),n):(i=a.parseLocation().hash,!t.originalEvent.state&&i?(s=this.squash(i),this.history.add(s.url,s),t.historyState=s,n):(this.history.direct({url:(t.originalEvent.state||{}).url||i,present:function(i,n){t.historyState=e.extend({},i),t.historyState.direction=n}}),n))},hashchange:function(t){var o,s;if(e.event.special.navigate.isHashChangeEnabled()&&!e.event.special.navigate.isPushStateEnabled()){if(this.preventNextHashChange)return this.preventNextHashChange=!1,t.stopImmediatePropagation(),n;o=this.history,s=a.parseLocation().hash,this.history.direct({url:s,present:function(i,n){t.hashchangeState=e.extend({},i),t.hashchangeState.direction=n},missing:function(){o.add(s,{hash:s,title:i.title})}})}}})}(e),function(e){e.mobile.navigate=function(t,i,n){e.mobile.navigate.navigator.go(t,i,n)},e.mobile.navigate.history=new e.mobile.History,e.mobile.navigate.navigator=new e.mobile.Navigator(e.mobile.navigate.history);var t=e.mobile.path.parseLocation();e.mobile.navigate.history.add(t.href,{hash:t.hash})}(e),function(e,t,i,n){function a(e){for(;e&&e.originalEvent!==n;)e=e.originalEvent;return e}function o(t,i){var o,s,r,l,d,c,h,u,p,m=t.type;if(t=e.Event(t),t.type=i,o=t.originalEvent,s=e.event.props,m.search(/^(mouse|click)/)>-1&&(s=q),o)for(h=s.length,l;h;)l=s[--h],t[l]=o[l];if(m.search(/mouse(down|up)|click/)>-1&&!t.which&&(t.which=1),-1!==m.search(/^touch/)&&(r=a(o),m=r.touches,d=r.changedTouches,c=m&&m.length?m[0]:d&&d.length?d[0]:n))for(u=0,p=k.length;p>u;u++)l=k[u],t[l]=c[l];return t}function s(t){for(var i,n,a={};t;){i=e.data(t,T);for(n in i)i[n]&&(a[n]=a.hasVirtualBinding=!0);t=t.parentNode}return a}function r(t,i){for(var n;t;){if(n=e.data(t,T),n&&(!i||n[i]))return t;t=t.parentNode}return null}function l(){M=!1}function d(){M=!0}function c(){U=0,O.length=0,H=!1,d()}function h(){l()}function u(){p(),S=setTimeout(function(){S=0,c()},e.vmouse.resetTimerDuration)}function p(){S&&(clearTimeout(S),S=0)}function m(t,i,n){var a;return(n&&n[t]||!n&&r(i.target,t))&&(a=o(i,t),e(i.target).trigger(a)),a}function f(t){var i=e.data(t.target,D);if(!(H||U&&U===i)){var n=m("v"+t.type,t);n&&(n.isDefaultPrevented()&&t.preventDefault(),n.isPropagationStopped()&&t.stopPropagation(),n.isImmediatePropagationStopped()&&t.stopImmediatePropagation())}}function g(t){var i,n,o=a(t).touches;if(o&&1===o.length&&(i=t.target,n=s(i),n.hasVirtualBinding)){U=L++,e.data(i,D,U),p(),h(),I=!1;var r=a(t).touches[0];A=r.pageX,N=r.pageY,m("vmouseover",t,n),m("vmousedown",t,n)}}function b(e){M||(I||m("vmousecancel",e,s(e.target)),I=!0,u())}function v(t){if(!M){var i=a(t).touches[0],n=I,o=e.vmouse.moveDistanceThreshold,r=s(t.target);I=I||Math.abs(i.pageX-A)>o||Math.abs(i.pageY-N)>o,I&&!n&&m("vmousecancel",t,r),m("vmousemove",t,r),u()}}function _(e){if(!M){d();var t,i=s(e.target);if(m("vmouseup",e,i),!I){var n=m("vclick",e,i);n&&n.isDefaultPrevented()&&(t=a(e).changedTouches[0],O.push({touchID:U,x:t.clientX,y:t.clientY}),H=!0)}m("vmouseout",e,i),I=!1,u()}}function C(t){var i,n=e.data(t,T);if(n)for(i in n)if(n[i])return!0;return!1}function x(){}function y(t){var i=t.substr(1);return{setup:function(){C(this)||e.data(this,T,{});var n=e.data(this,T);n[t]=!0,j[t]=(j[t]||0)+1,1===j[t]&&B.bind(i,f),e(this).bind(i,x),F&&(j.touchstart=(j.touchstart||0)+1,1===j.touchstart&&B.bind("touchstart",g).bind("touchend",_).bind("touchmove",v).bind("scroll",b))},teardown:function(){--j[t],j[t]||B.unbind(i,f),F&&(--j.touchstart,j.touchstart||B.unbind("touchstart",g).unbind("touchmove",v).unbind("touchend",_).unbind("scroll",b));var n=e(this),a=e.data(this,T);a&&(a[t]=!1),n.unbind(i,x),C(this)||n.removeData(T)}}}var w,T="virtualMouseBindings",D="virtualTouchID",P="vmouseover vmousedown vmousemove vmouseup vclick vmouseout vmousecancel".split(" "),k="clientX clientY pageX pageY screenX screenY".split(" "),E=e.event.mouseHooks?e.event.mouseHooks.props:[],q=e.event.props.concat(E),j={},S=0,A=0,N=0,I=!1,O=[],H=!1,M=!1,F="addEventListener"in i,B=e(i),L=1,U=0;e.vmouse={moveDistanceThreshold:10,clickDistanceThreshold:10,resetTimerDuration:1500};for(var z=0;P.length>z;z++)e.event.special[P[z]]=y(P[z]);F&&i.addEventListener("click",function(t){var i,a,o,s,r,l,d=O.length,c=t.target;if(d)for(i=t.clientX,a=t.clientY,w=e.vmouse.clickDistanceThreshold,o=c;o;){for(s=0;d>s;s++)if(r=O[s],l=0,o===c&&w>Math.abs(r.x-i)&&w>Math.abs(r.y-a)||e.data(o,D)===r.touchID)return t.preventDefault(),t.stopPropagation(),n;o=o.parentNode}},!0)}(e,t,i),function(e,t,n){function a(t,i,n){var a=n.type;n.type=i,e.event.dispatch.call(t,n),n.type=a}var o=e(i);e.each("touchstart touchmove touchend tap taphold swipe swipeleft swiperight scrollstart scrollstop".split(" "),function(t,i){e.fn[i]=function(e){return e?this.bind(i,e):this.trigger(i)},e.attrFn&&(e.attrFn[i]=!0)});var s=e.mobile.support.touch,r="touchmove scroll",l=s?"touchstart":"mousedown",d=s?"touchend":"mouseup",c=s?"touchmove":"mousemove";e.event.special.scrollstart={enabled:!0,setup:function(){function t(e,t){i=t,a(o,i?"scrollstart":"scrollstop",e)}var i,n,o=this,s=e(o);s.bind(r,function(a){e.event.special.scrollstart.enabled&&(i||t(a,!0),clearTimeout(n),n=setTimeout(function(){t(a,!1)},50))})}},e.event.special.tap={tapholdThreshold:750,setup:function(){var t=this,i=e(t);i.bind("vmousedown",function(n){function s(){clearTimeout(d)}function r(){s(),i.unbind("vclick",l).unbind("vmouseup",s),o.unbind("vmousecancel",r)}function l(e){r(),c===e.target&&a(t,"tap",e)}if(n.which&&1!==n.which)return!1;var d,c=n.target;n.originalEvent,i.bind("vmouseup",s).bind("vclick",l),o.bind("vmousecancel",r),d=setTimeout(function(){a(t,"taphold",e.Event("taphold",{target:c}))
},e.event.special.tap.tapholdThreshold)})}},e.event.special.swipe={scrollSupressionThreshold:30,durationThreshold:1e3,horizontalDistanceThreshold:30,verticalDistanceThreshold:75,start:function(t){var i=t.originalEvent.touches?t.originalEvent.touches[0]:t;return{time:(new Date).getTime(),coords:[i.pageX,i.pageY],origin:e(t.target)}},stop:function(e){var t=e.originalEvent.touches?e.originalEvent.touches[0]:e;return{time:(new Date).getTime(),coords:[t.pageX,t.pageY]}},handleSwipe:function(t,i){i.time-t.time<e.event.special.swipe.durationThreshold&&Math.abs(t.coords[0]-i.coords[0])>e.event.special.swipe.horizontalDistanceThreshold&&Math.abs(t.coords[1]-i.coords[1])<e.event.special.swipe.verticalDistanceThreshold&&t.origin.trigger("swipe").trigger(t.coords[0]>i.coords[0]?"swipeleft":"swiperight")},setup:function(){var t=this,i=e(t);i.bind(l,function(t){function a(t){s&&(o=e.event.special.swipe.stop(t),Math.abs(s.coords[0]-o.coords[0])>e.event.special.swipe.scrollSupressionThreshold&&t.preventDefault())}var o,s=e.event.special.swipe.start(t);i.bind(c,a).one(d,function(){i.unbind(c,a),s&&o&&e.event.special.swipe.handleSwipe(s,o),s=o=n})})}},e.each({scrollstop:"scrollstart",taphold:"tap",swipeleft:"swipe",swiperight:"swipe"},function(t,i){e.event.special[t]={setup:function(){e(this).bind(i,e.noop)}}})}(e,this),function(e){e.event.special.throttledresize={setup:function(){e(this).bind("resize",o)},teardown:function(){e(this).unbind("resize",o)}};var t,i,n,a=250,o=function(){i=(new Date).getTime(),n=i-s,n>=a?(s=i,e(this).trigger("throttledresize")):(t&&clearTimeout(t),t=setTimeout(o,a-n))},s=0}(e),function(e,t){function a(){var e=o();e!==s&&(s=e,d.trigger(c))}var o,s,r,l,d=e(t),c="orientationchange",h={0:!0,180:!0};if(e.support.orientation){var u=t.innerWidth||d.width(),p=t.innerHeight||d.height(),m=50;r=u>p&&u-p>m,l=h[t.orientation],(r&&l||!r&&!l)&&(h={"-90":!0,90:!0})}e.event.special.orientationchange=e.extend({},e.event.special.orientationchange,{setup:function(){return e.support.orientation&&!e.event.special.orientationchange.disabled?!1:(s=o(),d.bind("throttledresize",a),n)},teardown:function(){return e.support.orientation&&!e.event.special.orientationchange.disabled?!1:(d.unbind("throttledresize",a),n)},add:function(e){var t=e.handler;e.handler=function(e){return e.orientation=o(),t.apply(this,arguments)}}}),e.event.special.orientationchange.orientation=o=function(){var n=!0,a=i.documentElement;return n=e.support.orientation?h[t.orientation]:a&&1.1>a.clientWidth/a.clientHeight,n?"portrait":"landscape"},e.fn[c]=function(e){return e?this.bind(c,e):this.trigger(c)},e.attrFn&&(e.attrFn[c]=!0)}(e,this),function(e){e.widget("mobile.page",e.mobile.widget,{options:{theme:"c",domCache:!1,keepNativeDefault:":jqmData(role='none'), :jqmData(role='nojs')"},_create:function(){return this._trigger("beforecreate")===!1?!1:(this.element.attr("tabindex","0").addClass("ui-page ui-body-"+this.options.theme),this._on(this.element,{pagebeforehide:"removeContainerBackground",pagebeforeshow:"_handlePageBeforeShow"}),n)},_handlePageBeforeShow:function(){this.setContainerBackground()},removeContainerBackground:function(){e.mobile.pageContainer.removeClass("ui-overlay-"+e.mobile.getInheritedTheme(this.element.parent()))},setContainerBackground:function(t){this.options.theme&&e.mobile.pageContainer.addClass("ui-overlay-"+(t||this.options.theme))},keepNativeSelector:function(){var t=this.options,i=t.keepNative&&e.trim(t.keepNative);return i&&t.keepNative!==t.keepNativeDefault?[t.keepNative,t.keepNativeDefault].join(", "):t.keepNativeDefault}})}(e),function(e,t,i){var n=function(n){return n===i&&(n=!0),function(i,a,o,s){var r=new e.Deferred,l=a?" reverse":"",d=e.mobile.urlHistory.getActive(),c=d.lastScroll||e.mobile.defaultHomeScroll,h=e.mobile.getScreenHeight(),u=e.mobile.maxTransitionWidth!==!1&&e.mobile.window.width()>e.mobile.maxTransitionWidth,p=!e.support.cssTransitions||u||!i||"none"===i||Math.max(e.mobile.window.scrollTop(),c)>e.mobile.getMaxScrollForTransition(),m=" ui-page-pre-in",f=function(){e.mobile.pageContainer.toggleClass("ui-mobile-viewport-transitioning viewport-"+i)},g=function(){e.event.special.scrollstart.enabled=!1,t.scrollTo(0,c),setTimeout(function(){e.event.special.scrollstart.enabled=!0},150)},b=function(){s.removeClass(e.mobile.activePageClass+" out in reverse "+i).height("")},v=function(){n?s.animationComplete(_):_(),s.height(h+e.mobile.window.scrollTop()).addClass(i+" out"+l)},_=function(){s&&n&&b(),C()},C=function(){o.css("z-index",-10),o.addClass(e.mobile.activePageClass+m),e.mobile.focusPage(o),o.height(h+c),g(),o.css("z-index",""),p||o.animationComplete(x),o.removeClass(m).addClass(i+" in"+l),p&&x()},x=function(){n||s&&b(),o.removeClass("out in reverse "+i).height(""),f(),e.mobile.window.scrollTop()!==c&&g(),r.resolve(i,a,o,s,!0)};return f(),s&&!p?v():_(),r.promise()}},a=n(),o=n(!1),s=function(){return 3*e.mobile.getScreenHeight()};e.mobile.defaultTransitionHandler=a,e.mobile.transitionHandlers={"default":e.mobile.defaultTransitionHandler,sequential:a,simultaneous:o},e.mobile.transitionFallbacks={},e.mobile._maybeDegradeTransition=function(t){return t&&!e.support.cssTransform3d&&e.mobile.transitionFallbacks[t]&&(t=e.mobile.transitionFallbacks[t]),t},e.mobile.getMaxScrollForTransition=e.mobile.getMaxScrollForTransition||s}(e,this),function(e,n){function a(t){!f||f.closest("."+e.mobile.activePageClass).length&&!t||f.removeClass(e.mobile.activeBtnClass),f=null}function o(){_=!1,v.length>0&&e.mobile.changePage.apply(null,v.pop())}function s(t,i,n,a){i&&i.data("mobile-page")._trigger("beforehide",null,{nextPage:t}),t.data("mobile-page")._trigger("beforeshow",null,{prevPage:i||e("")}),e.mobile.hidePageLoadingMsg(),n=e.mobile._maybeDegradeTransition(n);var o=e.mobile.transitionHandlers[n||"default"]||e.mobile.defaultTransitionHandler,s=o(n,a,t,i);return s.done(function(){i&&i.data("mobile-page")._trigger("hide",null,{nextPage:t}),t.data("mobile-page")._trigger("show",null,{prevPage:i||e("")})}),s}function r(t,i){i&&t.attr("data-"+e.mobile.ns+"role",i),t.page()}function l(){var t=e.mobile.activePage&&c(e.mobile.activePage);return t||w.hrefNoHash}function d(e){for(;e&&("string"!=typeof e.nodeName||"a"!==e.nodeName.toLowerCase());)e=e.parentNode;return e}function c(t){var i=e(t).closest(".ui-page").jqmData("url"),n=w.hrefNoHash;return i&&p.isPath(i)||(i=n),p.makeUrlAbsolute(i,n)}var h=e.mobile.window,u=(e("html"),e("head")),p=e.extend(e.mobile.path,{getFilePath:function(t){var i="&"+e.mobile.subPageUrlKey;return t&&t.split(i)[0].split(C)[0]},isFirstPageUrl:function(t){var i=p.parseUrl(p.makeUrlAbsolute(t,this.documentBase)),a=i.hrefNoHash===this.documentUrl.hrefNoHash||this.documentBaseDiffers&&i.hrefNoHash===this.documentBase.hrefNoHash,o=e.mobile.firstPage,s=o&&o[0]?o[0].id:n;return a&&(!i.hash||"#"===i.hash||s&&i.hash.replace(/^#/,"")===s)},isPermittedCrossDomainRequest:function(t,i){return e.mobile.allowCrossDomainPages&&"file:"===t.protocol&&-1!==i.search(/^https?:/)}}),m=null,f=null,g=e.Deferred(),b=e.mobile.navigate.history,v=[],_=!1,C="&ui-state=dialog",x=u.children("base"),y=p.documentUrl,w=p.documentBase,T=(p.documentBaseDiffers,e.mobile.getScreenHeight),D=e.support.dynamicBaseTag?{element:x.length?x:e("<base>",{href:w.hrefNoHash}).prependTo(u),set:function(e){e=p.parseUrl(e).hrefNoHash,D.element.attr("href",p.makeUrlAbsolute(e,w))},reset:function(){D.element.attr("href",w.hrefNoSearch)}}:n;e.mobile.getDocumentUrl=p.getDocumentUrl,e.mobile.getDocumentBase=p.getDocumentBase,e.mobile.back=function(){var e=t.navigator;this.phonegapNavigationEnabled&&e&&e.app&&e.app.backHistory?e.app.backHistory():t.history.back()},e.mobile.focusPage=function(e){var t=e.find("[autofocus]"),i=e.find(".ui-title:eq(0)");return t.length?(t.focus(),n):(i.length?i.focus():e.focus(),n)};var P,k,E=!0;P=function(){if(E){var t=e.mobile.urlHistory.getActive();if(t){var i=h.scrollTop();t.lastScroll=e.mobile.minScrollBack>i?e.mobile.defaultHomeScroll:i}}},k=function(){setTimeout(P,100)},h.bind(e.support.pushState?"popstate":"hashchange",function(){E=!1}),h.one(e.support.pushState?"popstate":"hashchange",function(){E=!0}),h.one("pagecontainercreate",function(){e.mobile.pageContainer.bind("pagechange",function(){E=!0,h.unbind("scrollstop",k),h.bind("scrollstop",k)})}),h.bind("scrollstop",k),e.mobile._maybeDegradeTransition=e.mobile._maybeDegradeTransition||function(e){return e},e.mobile.resetActivePageHeight=function(t){var i=e("."+e.mobile.activePageClass),n=parseFloat(i.css("padding-top")),a=parseFloat(i.css("padding-bottom")),o=parseFloat(i.css("border-top-width")),s=parseFloat(i.css("border-bottom-width"));t="number"==typeof t?t:T(),i.css("min-height",t-n-a-o-s)},e.fn.animationComplete=function(t){return e.support.cssTransitions?e(this).one("webkitAnimationEnd animationend",t):(setTimeout(t,0),e(this))},e.mobile.path=p,e.mobile.base=D,e.mobile.urlHistory=b,e.mobile.dialogHashKey=C,e.mobile.allowCrossDomainPages=!1,e.mobile._bindPageRemove=function(){var t=e(this);!t.data("mobile-page").options.domCache&&t.is(":jqmData(external-page='true')")&&t.bind("pagehide.remove",function(){var t=e(this),i=new e.Event("pageremove");t.trigger(i),i.isDefaultPrevented()||t.removeWithDependents()})},e.mobile.loadPage=function(t,i){var a=e.Deferred(),o=e.extend({},e.mobile.loadPage.defaults,i),s=null,d=null,c=p.makeUrlAbsolute(t,l());o.data&&"get"===o.type&&(c=p.addSearchParams(c,o.data),o.data=n),o.data&&"post"===o.type&&(o.reloadPage=!0);var h=p.getFilePath(c),u=p.convertUrlToDataUrl(c);if(o.pageContainer=o.pageContainer||e.mobile.pageContainer,s=o.pageContainer.children("[data-"+e.mobile.ns+"url='"+u+"']"),0===s.length&&u&&!p.isPath(u)&&(s=o.pageContainer.children("#"+u).attr("data-"+e.mobile.ns+"url",u).jqmData("url",u)),0===s.length)if(e.mobile.firstPage&&p.isFirstPageUrl(h))e.mobile.firstPage.parent().length&&(s=e(e.mobile.firstPage));else if(p.isEmbeddedPage(h))return a.reject(c,i),a.promise();if(s.length){if(!o.reloadPage)return r(s,o.role),a.resolve(c,i,s),D&&!i.prefetch&&D.set(t),a.promise();d=s}var m=o.pageContainer,f=new e.Event("pagebeforeload"),g={url:t,absUrl:c,dataUrl:u,deferred:a,options:o};if(m.trigger(f,g),f.isDefaultPrevented())return a.promise();if(o.showLoadMsg)var b=setTimeout(function(){e.mobile.showPageLoadingMsg()},o.loadMsgDelay),v=function(){clearTimeout(b),e.mobile.hidePageLoadingMsg()};return D&&i.prefetch===n&&D.reset(),e.mobile.allowCrossDomainPages||p.isSameDomain(y,c)?e.ajax({url:h,type:o.type,data:o.data,contentType:o.contentType,dataType:"html",success:function(l,m,f){var b=e("<div></div>"),_=l.match(/<title[^>]*>([^<]*)/)&&RegExp.$1,C=RegExp("(<[^>]+\\bdata-"+e.mobile.ns+"role=[\"']?page[\"']?[^>]*>)"),x=RegExp("\\bdata-"+e.mobile.ns+"url=[\"']?([^\"'>]*)[\"']?");if(C.test(l)&&RegExp.$1&&x.test(RegExp.$1)&&RegExp.$1&&(t=h=p.getFilePath(e("<div>"+RegExp.$1+"</div>").text())),D&&i.prefetch===n&&D.set(h),b.get(0).innerHTML=l,s=b.find(":jqmData(role='page'), :jqmData(role='dialog')").first(),s.length||(s=e("<div data-"+e.mobile.ns+"role='page'>"+(l.split(/<\/?body[^>]*>/gim)[1]||"")+"</div>")),_&&!s.jqmData("title")&&(~_.indexOf("&")&&(_=e("<div>"+_+"</div>").text()),s.jqmData("title",_)),!e.support.dynamicBaseTag){var y=p.get(h);s.find("[src], link[href], a[rel='external'], :jqmData(ajax='false'), a[target]").each(function(){var t=e(this).is("[href]")?"href":e(this).is("[src]")?"src":"action",i=e(this).attr(t);i=i.replace(location.protocol+"//"+location.host+location.pathname,""),/^(\w+:|#|\/)/.test(i)||e(this).attr(t,y+i)})}s.attr("data-"+e.mobile.ns+"url",p.convertUrlToDataUrl(h)).attr("data-"+e.mobile.ns+"external-page",!0).appendTo(o.pageContainer),s.one("pagecreate",e.mobile._bindPageRemove),r(s,o.role),c.indexOf("&"+e.mobile.subPageUrlKey)>-1&&(s=o.pageContainer.children("[data-"+e.mobile.ns+"url='"+u+"']")),o.showLoadMsg&&v(),g.xhr=f,g.textStatus=m,g.page=s,o.pageContainer.trigger("pageload",g),a.resolve(c,i,s,d)},error:function(t,n,s){D&&D.set(p.get()),g.xhr=t,g.textStatus=n,g.errorThrown=s;var r=new e.Event("pageloadfailed");o.pageContainer.trigger(r,g),r.isDefaultPrevented()||(o.showLoadMsg&&(v(),e.mobile.showPageLoadingMsg(e.mobile.pageLoadErrorMessageTheme,e.mobile.pageLoadErrorMessage,!0),setTimeout(e.mobile.hidePageLoadingMsg,1500)),a.reject(c,i))}}):a.reject(c,i),a.promise()},e.mobile.loadPage.defaults={type:"get",data:n,reloadPage:!1,role:n,showLoadMsg:!1,pageContainer:n,loadMsgDelay:50},e.mobile.changePage=function(t,d){if(_)return v.unshift(arguments),n;var c,h=e.extend({},e.mobile.changePage.defaults,d);h.pageContainer=h.pageContainer||e.mobile.pageContainer,h.fromPage=h.fromPage||e.mobile.activePage,c="string"==typeof t;var u=h.pageContainer,m=new e.Event("pagebeforechange"),f={toPage:t,options:h};if(f.absUrl=c?p.makeUrlAbsolute(t,l()):t.data("absUrl"),u.trigger(m,f),!m.isDefaultPrevented()){if(t=f.toPage,c="string"==typeof t,_=!0,c)return h.target=t,e.mobile.loadPage(t,h).done(function(t,i,n,a){_=!1,i.duplicateCachedPage=a,n.data("absUrl",f.absUrl),e.mobile.changePage(n,i)}).fail(function(){a(!0),o(),h.pageContainer.trigger("pagechangefailed",f)}),n;t[0]!==e.mobile.firstPage[0]||h.dataUrl||(h.dataUrl=y.hrefNoHash);var g=h.fromPage,x=h.dataUrl&&p.convertUrlToDataUrl(h.dataUrl)||t.jqmData("url"),w=x,T=(p.getFilePath(x),b.getActive()),D=0===b.activeIndex,P=0,k=i.title,E="dialog"===h.role||"dialog"===t.jqmData("role");if(g&&g[0]===t[0]&&!h.allowSamePageTransition)return _=!1,u.trigger("pagechange",f),h.fromHashChange&&b.direct({url:x}),n;r(t,h.role),h.fromHashChange&&(P="back"===d.direction?-1:1);try{i.activeElement&&"body"!==i.activeElement.nodeName.toLowerCase()?e(i.activeElement).blur():e("input:focus, textarea:focus, select:focus").blur()}catch(q){}var j=!1;E&&T&&(T.url&&T.url.indexOf(C)>-1&&e.mobile.activePage&&!e.mobile.activePage.is(".ui-dialog")&&b.activeIndex>0&&(h.changeHash=!1,j=!0),x=T.url||"",x+=!j&&x.indexOf("#")>-1?C:"#"+C,0===b.activeIndex&&x===b.initialDst&&(x+=C));var S=T?t.jqmData("title")||t.children(":jqmData(role='header')").find(".ui-title").text():k;if(S&&k===i.title&&(k=S),t.jqmData("title")||t.jqmData("title",k),h.transition=h.transition||(P&&!D?T.transition:n)||(E?e.mobile.defaultDialogTransition:e.mobile.defaultPageTransition),!P&&j&&(b.getActive().pageUrl=w),x&&!h.fromHashChange){var A;!p.isPath(x)&&0>x.indexOf("#")&&(x="#"+x),A={transition:h.transition,title:k,pageUrl:w,role:h.role},h.changeHash!==!1&&e.mobile.hashListeningEnabled?e.mobile.navigate(x,A,!0):t[0]!==e.mobile.firstPage[0]&&e.mobile.navigate.history.add(x,A)}i.title=k,e.mobile.activePage=t,h.reverse=h.reverse||0>P,s(t,g,h.transition,h.reverse).done(function(i,n,s,r,l){a(),h.duplicateCachedPage&&h.duplicateCachedPage.remove(),l||e.mobile.focusPage(t),o(),u.trigger("pagechange",f)})}},e.mobile.changePage.defaults={transition:n,reverse:!1,changeHash:!0,fromHashChange:!1,role:n,duplicateCachedPage:n,pageContainer:n,showLoadMsg:!0,dataUrl:n,fromPage:n,allowSamePageTransition:!1},e.mobile.navreadyDeferred=e.Deferred(),e.mobile._registerInternalEvents=function(){var i=function(t,i){var a,o,s,r,l=!0;return!e.mobile.ajaxEnabled||t.is(":jqmData(ajax='false')")||!t.jqmHijackable().length||t.attr("target")?!1:(a=t.attr("action"),r=(t.attr("method")||"get").toLowerCase(),a||(a=c(t),"get"===r&&(a=p.parseUrl(a).hrefNoSearch),a===w.hrefNoHash&&(a=y.hrefNoSearch)),a=p.makeUrlAbsolute(a,c(t)),p.isExternal(a)&&!p.isPermittedCrossDomainRequest(y,a)?!1:(i||(o=t.serializeArray(),m&&m[0].form===t[0]&&(s=m.attr("name"),s&&(e.each(o,function(e,t){return t.name===s?(s="",!1):n}),s&&o.push({name:s,value:m.attr("value")}))),l={url:a,options:{type:r,data:e.param(o),transition:t.jqmData("transition"),reverse:"reverse"===t.jqmData("direction"),reloadPage:!0}}),l))};e.mobile.document.delegate("form","submit",function(t){var n=i(e(this));n&&(e.mobile.changePage(n.url,n.options),t.preventDefault())}),e.mobile.document.bind("vclick",function(t){var n,o,s=t.target,r=!1;if(!(t.which>1)&&e.mobile.linkBindingEnabled){if(m=e(s),e.data(s,"mobile-button")){if(!i(e(s).closest("form"),!0))return;s.parentNode&&(s=s.parentNode)}else{if(s=d(s),!s||"#"===p.parseUrl(s.getAttribute("href")||"#").hash)return;if(!e(s).jqmHijackable().length)return}~s.className.indexOf("ui-link-inherit")?s.parentNode&&(o=e.data(s.parentNode,"buttonElements")):o=e.data(s,"buttonElements"),o?s=o.outer:r=!0,n=e(s),r&&(n=n.closest(".ui-btn")),n.length>0&&!n.hasClass("ui-disabled")&&(a(!0),f=n,f.addClass(e.mobile.activeBtnClass))}}),e.mobile.document.bind("click",function(i){if(e.mobile.linkBindingEnabled&&!i.isDefaultPrevented()){var o,s=d(i.target),r=e(s);if(s&&!(i.which>1)&&r.jqmHijackable().length){if(o=function(){t.setTimeout(function(){a(!0)},200)},r.is(":jqmData(rel='back')"))return e.mobile.back(),!1;var l=c(r),h=p.makeUrlAbsolute(r.attr("href")||"#",l);if(!e.mobile.ajaxEnabled&&!p.isEmbeddedPage(h))return o(),n;if(-1!==h.search("#")){if(h=h.replace(/[^#]*#/,""),!h)return i.preventDefault(),n;h=p.isPath(h)?p.makeUrlAbsolute(h,l):p.makeUrlAbsolute("#"+h,y.hrefNoHash)}var u=r.is("[rel='external']")||r.is(":jqmData(ajax='false')")||r.is("[target]"),m=u||p.isExternal(h)&&!p.isPermittedCrossDomainRequest(y,h);if(m)return o(),n;var f=r.jqmData("transition"),g="reverse"===r.jqmData("direction")||r.jqmData("back"),b=r.attr("data-"+e.mobile.ns+"rel")||n;e.mobile.changePage(h,{transition:f,reverse:g,role:b,link:r}),i.preventDefault()}}}),e.mobile.document.delegate(".ui-page","pageshow.prefetch",function(){var t=[];e(this).find("a:jqmData(prefetch)").each(function(){var i=e(this),n=i.attr("href");n&&-1===e.inArray(n,t)&&(t.push(n),e.mobile.loadPage(n,{role:i.attr("data-"+e.mobile.ns+"rel"),prefetch:!0}))})}),e.mobile._handleHashChange=function(i,a){var o=p.stripHash(i),s=0===e.mobile.urlHistory.stack.length?"none":n,r={changeHash:!1,fromHashChange:!0,reverse:"back"===a.direction};if(e.extend(r,a,{transition:(b.getLast()||{}).transition||s}),b.activeIndex>0&&o.indexOf(C)>-1&&b.initialDst!==o){if(e.mobile.activePage&&!e.mobile.activePage.is(".ui-dialog"))return"back"===a.direction?e.mobile.back():t.history.forward(),n;o=a.pageUrl;var l=e.mobile.urlHistory.getActive();e.extend(r,{role:l.role,transition:l.transition,reverse:"back"===a.direction})}o?(o=p.isPath(o)?o:p.makeUrlAbsolute("#"+o,w),o===p.makeUrlAbsolute("#"+b.initialDst,w)&&b.stack.length&&b.stack[0].url!==b.initialDst.replace(C,"")&&(o=e.mobile.firstPage),e.mobile.changePage(o,r)):e.mobile.changePage(e.mobile.firstPage,r)},h.bind("navigate",function(t,i){var n;t.originalEvent&&t.originalEvent.isDefaultPrevented()||(n=e.event.special.navigate.originalEventName.indexOf("hashchange")>-1?i.state.hash:i.state.url,n||(n=e.mobile.path.parseLocation().hash),n&&"#"!==n&&0!==n.indexOf("#"+e.mobile.path.uiStateKey)||(n=location.href),e.mobile._handleHashChange(n,i.state))}),e.mobile.document.bind("pageshow",e.mobile.resetActivePageHeight),e.mobile.window.bind("throttledresize",e.mobile.resetActivePageHeight)},e(function(){g.resolve()}),e.when(g,e.mobile.navreadyDeferred).done(function(){e.mobile._registerInternalEvents()})}(e),function(e){e.mobile.transitionFallbacks.flip="fade"}(e,this),function(e){e.mobile.transitionFallbacks.flow="fade"}(e,this),function(e){e.mobile.transitionFallbacks.pop="fade"}(e,this),function(e){e.mobile.transitionHandlers.slide=e.mobile.transitionHandlers.simultaneous,e.mobile.transitionFallbacks.slide="fade"}(e,this),function(e){e.mobile.transitionFallbacks.slidedown="fade"}(e,this),function(e){e.mobile.transitionFallbacks.slidefade="fade"}(e,this),function(e){e.mobile.transitionFallbacks.slideup="fade"}(e,this),function(e){e.mobile.transitionFallbacks.turn="fade"}(e,this),function(e){e.mobile.page.prototype.options.degradeInputs={color:!1,date:!1,datetime:!1,"datetime-local":!1,email:!1,month:!1,number:!1,range:"number",search:"text",tel:!1,time:!1,url:!1,week:!1},e.mobile.document.bind("pagecreate create",function(t){var i,n=e.mobile.closestPageData(e(t.target));n&&(i=n.options,e(t.target).find("input").not(n.keepNativeSelector()).each(function(){var t=e(this),n=this.getAttribute("type"),a=i.degradeInputs[n]||"text";if(i.degradeInputs[n]){var o=e("<div>").html(t.clone()).html(),s=o.indexOf(" type=")>-1,r=s?/\s+type=["']?\w+['"]?/:/\/?>/,l=' type="'+a+'" data-'+e.mobile.ns+'type="'+n+'"'+(s?"":">");t.replaceWith(o.replace(r,l))}}))})}(e),function(e){e.widget("mobile.dialog",e.mobile.widget,{options:{closeBtn:"left",closeBtnText:"Close",overlayTheme:"a",corners:!0,initSelector:":jqmData(role='dialog')"},_handlePageBeforeShow:function(){this._isCloseable=!0,this.options.overlayTheme&&this.element.page("removeContainerBackground").page("setContainerBackground",this.options.overlayTheme)},_create:function(){var t=this.element,i=this.options.corners?" ui-corner-all":"",n=e("<div/>",{role:"dialog","class":"ui-dialog-contain ui-overlay-shadow"+i});t.addClass("ui-dialog ui-overlay-"+this.options.overlayTheme),t.wrapInner(n),t.bind("vclick submit",function(t){var i,n=e(t.target).closest("vclick"===t.type?"a":"form");n.length&&!n.jqmData("transition")&&(i=e.mobile.urlHistory.getActive()||{},n.attr("data-"+e.mobile.ns+"transition",i.transition||e.mobile.defaultDialogTransition).attr("data-"+e.mobile.ns+"direction","reverse"))}),this._on(t,{pagebeforeshow:"_handlePageBeforeShow"}),e.extend(this,{_createComplete:!1}),this._setCloseBtn(this.options.closeBtn)},_setCloseBtn:function(t){var i,n,a=this;this._headerCloseButton&&(this._headerCloseButton.remove(),this._headerCloseButton=null),"none"!==t&&(n="left"===t?"left":"right",i=e("<a href='#' class='ui-btn-"+n+"' data-"+e.mobile.ns+"icon='delete' data-"+e.mobile.ns+"iconpos='notext'>"+this.options.closeBtnText+"</a>"),this.element.children().find(":jqmData(role='header')").first().prepend(i),this._createComplete&&e.fn.buttonMarkup&&i.buttonMarkup(),this._createComplete=!0,i.bind("click",function(){a.close()}),this._headerCloseButton=i)},_setOption:function(e,t){"closeBtn"===e&&this._setCloseBtn(t),this._super(e,t)},close:function(){var t,i,n=e.mobile.navigate.history;this._isCloseable&&(this._isCloseable=!1,e.mobile.hashListeningEnabled&&n.activeIndex>0?e.mobile.back():(t=Math.max(0,n.activeIndex-1),i=n.stack[t].pageUrl||n.stack[t].url,n.previousIndex=n.activeIndex,n.activeIndex=t,e.mobile.path.isPath(i)||(i=e.mobile.path.makeUrlAbsolute("#"+i)),e.mobile.changePage(i,{direction:"back",changeHash:!1,fromHashChange:!0})))}}),e.mobile.document.delegate(e.mobile.dialog.prototype.options.initSelector,"pagecreate",function(){e.mobile.dialog.prototype.enhance(this)})}(e,this),function(e){e.mobile.page.prototype.options.backBtnText="Back",e.mobile.page.prototype.options.addBackBtn=!1,e.mobile.page.prototype.options.backBtnTheme=null,e.mobile.page.prototype.options.headerTheme="a",e.mobile.page.prototype.options.footerTheme="a",e.mobile.page.prototype.options.contentTheme=null,e.mobile.document.bind("pagecreate",function(t){var i=e(t.target),n=i.data("mobile-page").options,a=i.jqmData("role"),o=n.theme;e(":jqmData(role='header'), :jqmData(role='footer'), :jqmData(role='content')",i).jqmEnhanceable().each(function(){var t,s,r,l,d=e(this),c=d.jqmData("role"),h=d.jqmData("theme"),u=h||n.contentTheme||"dialog"===a&&o;if(d.addClass("ui-"+c),"header"===c||"footer"===c){var p=h||("header"===c?n.headerTheme:n.footerTheme)||o;d.addClass("ui-bar-"+p).attr("role","header"===c?"banner":"contentinfo"),"header"===c&&(t=d.children("a, button"),s=t.hasClass("ui-btn-left"),r=t.hasClass("ui-btn-right"),s=s||t.eq(0).not(".ui-btn-right").addClass("ui-btn-left").length,r=r||t.eq(1).addClass("ui-btn-right").length),n.addBackBtn&&"header"===c&&e(".ui-page").length>1&&i.jqmData("url")!==e.mobile.path.stripHash(location.hash)&&!s&&(l=e("<a href='javascript:void(0);' class='ui-btn-left' data-"+e.mobile.ns+"rel='back' data-"+e.mobile.ns+"icon='arrow-l'>"+n.backBtnText+"</a>").attr("data-"+e.mobile.ns+"theme",n.backBtnTheme||p).prependTo(d)),d.children("h1, h2, h3, h4, h5, h6").addClass("ui-title").attr({role:"heading","aria-level":"1"})}else"content"===c&&(u&&d.addClass("ui-body-"+u),d.attr("role","main"))})})}(e),function(e,t){function n(e){for(var t;e&&(t="string"==typeof e.className&&e.className+" ",!(t&&t.indexOf("ui-btn ")>-1&&0>t.indexOf("ui-disabled ")));)e=e.parentNode;return e}function a(n,a,o,s,r){var l=e.data(n[0],"buttonElements");n.removeClass(a).addClass(o),l&&(l.bcls=e(i.createElement("div")).addClass(l.bcls+" "+o).removeClass(a).attr("class"),s!==t&&(l.hover=s),l.state=r)}var o=function(e,i){var n=e.getAttribute(i);return"true"===n?!0:"false"===n?!1:null===n?t:n};e.fn.buttonMarkup=function(n){var a,r=this,l="data-"+e.mobile.ns;n=n&&"object"===e.type(n)?n:{};for(var d=0;r.length>d;d++){var c,h,u,p,m,f,g=r.eq(d),b=g[0],v=e.extend({},e.fn.buttonMarkup.defaults,{icon:n.icon!==t?n.icon:o(b,l+"icon"),iconpos:n.iconpos!==t?n.iconpos:o(b,l+"iconpos"),theme:n.theme!==t?n.theme:o(b,l+"theme")||e.mobile.getInheritedTheme(g,"c"),inline:n.inline!==t?n.inline:o(b,l+"inline"),shadow:n.shadow!==t?n.shadow:o(b,l+"shadow"),corners:n.corners!==t?n.corners:o(b,l+"corners"),iconshadow:n.iconshadow!==t?n.iconshadow:o(b,l+"iconshadow"),mini:n.mini!==t?n.mini:o(b,l+"mini")},n),_="ui-btn-inner",C="ui-btn-text",x=!1,y="up";for(a in v)v[a]===t||null===v[a]?g.removeAttr(l+a):b.setAttribute(l+a,v[a]);for("popup"===o(b,l+"rel")&&g.attr("href")&&(b.setAttribute("aria-haspopup",!0),b.setAttribute("aria-owns",g.attr("href"))),f=e.data("INPUT"===b.tagName||"BUTTON"===b.tagName?b.parentNode:b,"buttonElements"),f?(b=f.outer,g=e(b),u=f.inner,p=f.text,e(f.icon).remove(),f.icon=null,x=f.hover,y=f.state):(u=i.createElement(v.wrapperEls),p=i.createElement(v.wrapperEls)),m=v.icon?i.createElement("span"):null,s&&!f&&s(),v.theme||(v.theme=e.mobile.getInheritedTheme(g,"c")),c="ui-btn ",c+=x?"ui-btn-hover-"+v.theme:"",c+=y?" ui-btn-"+y+"-"+v.theme:"",c+=v.shadow?" ui-shadow":"",c+=v.corners?" ui-btn-corner-all":"",v.mini!==t&&(c+=v.mini===!0?" ui-mini":" ui-fullsize"),v.inline!==t&&(c+=v.inline===!0?" ui-btn-inline":" ui-btn-block"),v.icon&&(v.icon="ui-icon-"+v.icon,v.iconpos=v.iconpos||"left",h="ui-icon "+v.icon,v.iconshadow&&(h+=" ui-icon-shadow")),v.iconpos&&(c+=" ui-btn-icon-"+v.iconpos,"notext"!==v.iconpos||g.attr("title")||g.attr("title",g.getEncodedText())),f&&g.removeClass(f.bcls||""),g.removeClass("ui-link").addClass(c),u.className=_,p.className=C,f||u.appendChild(p),m&&(m.className=h,f&&f.icon||(m.innerHTML="&#160;",u.appendChild(m)));b.firstChild&&!f;)p.appendChild(b.firstChild);f||b.appendChild(u),f={hover:x,state:y,bcls:c,outer:b,inner:u,text:p,icon:m},e.data(b,"buttonElements",f),e.data(u,"buttonElements",f),e.data(p,"buttonElements",f),m&&e.data(m,"buttonElements",f)}return this},e.fn.buttonMarkup.defaults={corners:!0,shadow:!0,iconshadow:!0,wrapperEls:"span"};var s=function(){var i,o,r=e.mobile.buttonMarkup.hoverDelay;e.mobile.document.bind({"vmousedown vmousecancel vmouseup vmouseover vmouseout focus blur scrollstart":function(s){var l,d=e(n(s.target)),c=s.originalEvent&&/^touch/.test(s.originalEvent.type),h=s.type;d.length&&(l=d.attr("data-"+e.mobile.ns+"theme"),"vmousedown"===h?c?i=setTimeout(function(){a(d,"ui-btn-up-"+l,"ui-btn-down-"+l,t,"down")},r):a(d,"ui-btn-up-"+l,"ui-btn-down-"+l,t,"down"):"vmousecancel"===h||"vmouseup"===h?a(d,"ui-btn-down-"+l,"ui-btn-up-"+l,t,"up"):"vmouseover"===h||"focus"===h?c?o=setTimeout(function(){a(d,"ui-btn-up-"+l,"ui-btn-hover-"+l,!0,"")},r):a(d,"ui-btn-up-"+l,"ui-btn-hover-"+l,!0,""):("vmouseout"===h||"blur"===h||"scrollstart"===h)&&(a(d,"ui-btn-hover-"+l+" ui-btn-down-"+l,"ui-btn-up-"+l,!1,"up"),i&&clearTimeout(i),o&&clearTimeout(o)))},"focusin focus":function(t){e(n(t.target)).addClass(e.mobile.focusClass)},"focusout blur":function(t){e(n(t.target)).removeClass(e.mobile.focusClass)}}),s=null};e.mobile.document.bind("pagecreate create",function(t){e(":jqmData(role='button'), .ui-bar > a, .ui-header > a, .ui-footer > a, .ui-bar > :jqmData(role='controlgroup') > a",t.target).jqmEnhanceable().not("button, input, .ui-btn, :jqmData(role='none'), :jqmData(role='nojs')").buttonMarkup()})}(e),function(e,t){e.widget("mobile.collapsible",e.mobile.widget,{options:{expandCueText:" click to expand contents",collapseCueText:" click to collapse contents",collapsed:!0,heading:"h1,h2,h3,h4,h5,h6,legend",collapsedIcon:"plus",expandedIcon:"minus",iconpos:"left",theme:null,contentTheme:null,inset:!0,corners:!0,mini:!1,initSelector:":jqmData(role='collapsible')"},_create:function(){var i=this.element,n=this.options,a=i.addClass("ui-collapsible"),o=i.children(n.heading).first(),s=a.wrapInner("<div class='ui-collapsible-content'></div>").children(".ui-collapsible-content"),r=i.closest(":jqmData(role='collapsible-set')").addClass("ui-collapsible-set"),l="";o.is("legend")&&(o=e("<div role='heading'>"+o.html()+"</div>").insertBefore(o),o.next().remove()),r.length?(n.theme||(n.theme=r.jqmData("theme")||e.mobile.getInheritedTheme(r,"c")),n.contentTheme||(n.contentTheme=r.jqmData("content-theme")),n.collapsedIcon=i.jqmData("collapsed-icon")||r.jqmData("collapsed-icon")||n.collapsedIcon,n.expandedIcon=i.jqmData("expanded-icon")||r.jqmData("expanded-icon")||n.expandedIcon,n.iconpos=i.jqmData("iconpos")||r.jqmData("iconpos")||n.iconpos,n.inset=r.jqmData("inset")!==t?r.jqmData("inset"):!0,n.corners=!1,n.mini||(n.mini=r.jqmData("mini"))):n.theme||(n.theme=e.mobile.getInheritedTheme(i,"c")),n.inset&&(l+=" ui-collapsible-inset",n.corners&&(l+=" ui-corner-all")),n.contentTheme&&(l+=" ui-collapsible-themed-content",s.addClass("ui-body-"+n.contentTheme)),""!==l&&a.addClass(l),o.insertBefore(s).addClass("ui-collapsible-heading").append("<span class='ui-collapsible-heading-status'></span>").wrapInner("<a href='#' class='ui-collapsible-heading-toggle'></a>").find("a").first().buttonMarkup({shadow:!1,corners:!1,iconpos:n.iconpos,icon:n.collapsedIcon,mini:n.mini,theme:n.theme}),a.bind("expand collapse",function(t){if(!t.isDefaultPrevented()){var i=e(this),a="collapse"===t.type;t.preventDefault(),o.toggleClass("ui-collapsible-heading-collapsed",a).find(".ui-collapsible-heading-status").text(a?n.expandCueText:n.collapseCueText).end().find(".ui-icon").toggleClass("ui-icon-"+n.expandedIcon,!a).toggleClass("ui-icon-"+n.collapsedIcon,a||n.expandedIcon===n.collapsedIcon).end().find("a").first().removeClass(e.mobile.activeBtnClass),i.toggleClass("ui-collapsible-collapsed",a),s.toggleClass("ui-collapsible-content-collapsed",a).attr("aria-hidden",a),s.trigger("updatelayout")}}).trigger(n.collapsed?"collapse":"expand"),o.bind("tap",function(){o.find("a").first().addClass(e.mobile.activeBtnClass)}).bind("click",function(e){var t=o.is(".ui-collapsible-heading-collapsed")?"expand":"collapse";a.trigger(t),e.preventDefault(),e.stopPropagation()})}}),e.mobile.document.bind("pagecreate create",function(t){e.mobile.collapsible.prototype.enhanceWithin(t.target)})}(e),function(e){e.mobile.behaviors.addFirstLastClasses={_getVisibles:function(e,t){var i;return t?i=e.not(".ui-screen-hidden"):(i=e.filter(":visible"),0===i.length&&(i=e.not(".ui-screen-hidden"))),i},_addFirstLastClasses:function(e,t,i){e.removeClass("ui-first-child ui-last-child"),t.eq(0).addClass("ui-first-child").end().last().addClass("ui-last-child"),i||this.element.trigger("updatelayout")}}}(e),function(e,t){e.widget("mobile.collapsibleset",e.mobile.widget,e.extend({options:{initSelector:":jqmData(role='collapsible-set')"},_create:function(){var i=this.element.addClass("ui-collapsible-set"),n=this.options;n.theme||(n.theme=e.mobile.getInheritedTheme(i,"c")),n.contentTheme||(n.contentTheme=i.jqmData("content-theme")),n.corners||(n.corners=i.jqmData("corners")),i.jqmData("inset")!==t&&(n.inset=i.jqmData("inset")),n.inset=n.inset!==t?n.inset:!0,n.corners=n.corners!==t?n.corners:!0,n.corners&&n.inset&&i.addClass("ui-corner-all"),i.jqmData("collapsiblebound")||i.jqmData("collapsiblebound",!0).bind("expand",function(t){var i=e(t.target).closest(".ui-collapsible");i.parent().is(":jqmData(role='collapsible-set')")&&i.siblings(".ui-collapsible").trigger("collapse")})},_init:function(){var e=this.element,t=e.children(":jqmData(role='collapsible')"),i=t.filter(":jqmData(collapsed='false')");
this._refresh("true"),i.trigger("expand")},_refresh:function(t){var i=this.element.children(":jqmData(role='collapsible')");e.mobile.collapsible.prototype.enhance(i.not(".ui-collapsible")),this._addFirstLastClasses(i,this._getVisibles(i,t),t)},refresh:function(){this._refresh(!1)}},e.mobile.behaviors.addFirstLastClasses)),e.mobile.document.bind("pagecreate create",function(t){e.mobile.collapsibleset.prototype.enhanceWithin(t.target)})}(e),function(e){e.fn.fieldcontain=function(){return this.addClass("ui-field-contain ui-body ui-br").contents().filter(function(){return 3===this.nodeType&&!/\S/.test(this.nodeValue)}).remove()},e(i).bind("pagecreate create",function(t){e(":jqmData(role='fieldcontain')",t.target).jqmEnhanceable().fieldcontain()})}(e),function(e){e.fn.grid=function(t){return this.each(function(){var i,n=e(this),a=e.extend({grid:null},t),o=n.children(),s={solo:1,a:2,b:3,c:4,d:5},r=a.grid;if(!r)if(5>=o.length)for(var l in s)s[l]===o.length&&(r=l);else r="a",n.addClass("ui-grid-duo");i=s[r],n.addClass("ui-grid-"+r),o.filter(":nth-child("+i+"n+1)").addClass("ui-block-a"),i>1&&o.filter(":nth-child("+i+"n+2)").addClass("ui-block-b"),i>2&&o.filter(":nth-child("+i+"n+3)").addClass("ui-block-c"),i>3&&o.filter(":nth-child("+i+"n+4)").addClass("ui-block-d"),i>4&&o.filter(":nth-child("+i+"n+5)").addClass("ui-block-e")})}}(e),function(e,t){e.widget("mobile.navbar",e.mobile.widget,{options:{iconpos:"top",grid:null,initSelector:":jqmData(role='navbar')"},_create:function(){var n=this.element,a=n.find("a"),o=a.filter(":jqmData(icon)").length?this.options.iconpos:t;n.addClass("ui-navbar ui-mini").attr("role","navigation").find("ul").jqmEnhanceable().grid({grid:this.options.grid}),a.buttonMarkup({corners:!1,shadow:!1,inline:!0,iconpos:o}),n.delegate("a","vclick",function(t){var n=e(t.target).is("a")?e(this):e(this).parent("a");if(!n.is(".ui-disabled, .ui-btn-active")){a.removeClass(e.mobile.activeBtnClass),e(this).addClass(e.mobile.activeBtnClass);var o=e(this);e(i).one("pagehide",function(){o.removeClass(e.mobile.activeBtnClass)})}}),n.closest(".ui-page").bind("pagebeforeshow",function(){a.filter(".ui-state-persist").addClass(e.mobile.activeBtnClass)})}}),e.mobile.document.bind("pagecreate create",function(t){e.mobile.navbar.prototype.enhanceWithin(t.target)})}(e),function(e){var t={};e.widget("mobile.listview",e.mobile.widget,e.extend({options:{theme:null,countTheme:"c",headerTheme:"b",dividerTheme:"b",icon:"arrow-r",splitIcon:"arrow-r",splitTheme:"b",corners:!0,shadow:!0,inset:!1,initSelector:":jqmData(role='listview')"},_create:function(){var e=this,t="";t+=e.options.inset?" ui-listview-inset":"",e.options.inset&&(t+=e.options.corners?" ui-corner-all":"",t+=e.options.shadow?" ui-shadow":""),e.element.addClass(function(e,i){return i+" ui-listview"+t}),e.refresh(!0)},_findFirstElementByTagName:function(e,t,i,n){var a={};for(a[i]=a[n]=!0;e;){if(a[e.nodeName])return e;e=e[t]}return null},_getChildrenByTagName:function(t,i,n){var a=[],o={};for(o[i]=o[n]=!0,t=t.firstChild;t;)o[t.nodeName]&&a.push(t),t=t.nextSibling;return e(a)},_addThumbClasses:function(t){var i,n,a=t.length;for(i=0;a>i;i++)n=e(this._findFirstElementByTagName(t[i].firstChild,"nextSibling","img","IMG")),n.length&&(n.addClass("ui-li-thumb"),e(this._findFirstElementByTagName(n[0].parentNode,"parentNode","li","LI")).addClass(n.is(".ui-li-icon")?"ui-li-has-icon":"ui-li-has-thumb"))},refresh:function(t){this.parentPage=this.element.closest(".ui-page"),this._createSubPages();var n,a,o,s,r,l,d,c,h,u,p,m,f=this.options,g=this.element,b=g.jqmData("dividertheme")||f.dividerTheme,v=g.jqmData("splittheme"),_=g.jqmData("spliticon"),C=g.jqmData("icon"),x=this._getChildrenByTagName(g[0],"li","LI"),y=!!e.nodeName(g[0],"ol"),w=!e.support.cssPseudoElement,T=g.attr("start"),D={};y&&w&&g.find(".ui-li-dec").remove(),y&&(T||0===T?w?d=parseInt(T,10):(c=parseInt(T,10)-1,g.css("counter-reset","listnumbering "+c)):w&&(d=1)),f.theme||(f.theme=e.mobile.getInheritedTheme(this.element,"c"));for(var P=0,k=x.length;k>P;P++){if(n=x.eq(P),a="ui-li",t||!n.hasClass("ui-li")){o=n.jqmData("theme")||f.theme,s=this._getChildrenByTagName(n[0],"a","A");var E="list-divider"===n.jqmData("role");s.length&&!E?(p=n.jqmData("icon"),n.buttonMarkup({wrapperEls:"div",shadow:!1,corners:!1,iconpos:"right",icon:s.length>1||p===!1?!1:p||C||f.icon,theme:o}),p!==!1&&1===s.length&&n.addClass("ui-li-has-arrow"),s.first().removeClass("ui-link").addClass("ui-link-inherit"),s.length>1&&(a+=" ui-li-has-alt",r=s.last(),l=v||r.jqmData("theme")||f.splitTheme,m=r.jqmData("icon"),r.appendTo(n).attr("title",e.trim(r.getEncodedText())).addClass("ui-li-link-alt").empty().buttonMarkup({shadow:!1,corners:!1,theme:o,icon:!1,iconpos:"notext"}).find(".ui-btn-inner").append(e(i.createElement("span")).buttonMarkup({shadow:!0,corners:!0,theme:l,iconpos:"notext",icon:m||p||_||f.splitIcon})))):E?(a+=" ui-li-divider ui-bar-"+(n.jqmData("theme")||b),n.attr("role","heading"),y&&(T||0===T?w?d=parseInt(T,10):(h=parseInt(T,10)-1,n.css("counter-reset","listnumbering "+h)):w&&(d=1))):a+=" ui-li-static ui-btn-up-"+o}y&&w&&0>a.indexOf("ui-li-divider")&&(u=a.indexOf("ui-li-static")>0?n:n.find(".ui-link-inherit"),u.addClass("ui-li-jsnumbering").prepend("<span class='ui-li-dec'>"+d++ +". </span>")),D[a]||(D[a]=[]),D[a].push(n[0])}for(a in D)e(D[a]).addClass(a).children(".ui-btn-inner").addClass(a);g.find("h1, h2, h3, h4, h5, h6").addClass("ui-li-heading").end().find("p, dl").addClass("ui-li-desc").end().find(".ui-li-aside").each(function(){var t=e(this);t.prependTo(t.parent())}).end().find(".ui-li-count").each(function(){e(this).closest("li").addClass("ui-li-has-count")}).addClass("ui-btn-up-"+(g.jqmData("counttheme")||this.options.countTheme)+" ui-btn-corner-all"),this._addThumbClasses(x),this._addThumbClasses(g.find(".ui-link-inherit")),this._addFirstLastClasses(x,this._getVisibles(x,t),t),this._trigger("afterrefresh")},_idStringEscape:function(e){return e.replace(/[^a-zA-Z0-9]/g,"-")},_createSubPages:function(){var i,a=this.element,o=a.closest(".ui-page"),s=o.jqmData("url"),r=s||o[0][e.expando],l=a.attr("id"),d=this.options,c="data-"+e.mobile.ns,h=this,u=o.find(":jqmData(role='footer')").jqmData("id");if(t[r]===n&&(t[r]=-1),l=l||++t[r],e(a.find("li>ul, li>ol").toArray().reverse()).each(function(t){var n,o,r=e(this),h=r.attr("id")||l+"-"+t,p=r.parent(),m=e(r.prevAll().toArray().reverse()),f=m.length?m:e("<span>"+e.trim(p.contents()[0].nodeValue)+"</span>"),g=f.first().getEncodedText(),b=(s||"")+"&"+e.mobile.subPageUrlKey+"="+h,v=r.jqmData("theme")||d.theme,_=r.jqmData("counttheme")||a.jqmData("counttheme")||d.countTheme;i=!0,n=r.detach().wrap("<div "+c+"role='page' "+c+"url='"+b+"' "+c+"theme='"+v+"' "+c+"count-theme='"+_+"'><div "+c+"role='content'></div></div>").parent().before("<div "+c+"role='header' "+c+"theme='"+d.headerTheme+"'><div class='ui-title'>"+g+"</div></div>").after(u?e("<div "+c+"role='footer' "+c+"id='"+u+"'>"):"").parent().appendTo(e.mobile.pageContainer),n.page(),o=p.find("a:first"),o.length||(o=e("<a/>").html(f||g).prependTo(p.empty())),o.attr("href","#"+b)}).listview(),i&&o.is(":jqmData(external-page='true')")&&o.data("mobile-page").options.domCache===!1){var p=function(t,i){var n,a=i.nextPage,r=new e.Event("pageremove");i.nextPage&&(n=a.jqmData("url"),0!==n.indexOf(s+"&"+e.mobile.subPageUrlKey)&&(h.childPages().remove(),o.trigger(r),r.isDefaultPrevented()||o.removeWithDependents()))};o.unbind("pagehide.remove").bind("pagehide.remove",p)}},childPages:function(){var t=this.parentPage.jqmData("url");return e(":jqmData(url^='"+t+"&"+e.mobile.subPageUrlKey+"')")}},e.mobile.behaviors.addFirstLastClasses)),e.mobile.document.bind("pagecreate create",function(t){e.mobile.listview.prototype.enhanceWithin(t.target)})}(e),function(e){var t=e("meta[name=viewport]"),i=t.attr("content"),n=i+",maximum-scale=1, user-scalable=no",a=i+",maximum-scale=10, user-scalable=yes",o=/(user-scalable[\s]*=[\s]*no)|(maximum-scale[\s]*=[\s]*1)[$,\s]/.test(i);e.mobile.zoom=e.extend({},{enabled:!o,locked:!1,disable:function(i){o||e.mobile.zoom.locked||(t.attr("content",n),e.mobile.zoom.enabled=!1,e.mobile.zoom.locked=i||!1)},enable:function(i){o||e.mobile.zoom.locked&&i!==!0||(t.attr("content",a),e.mobile.zoom.enabled=!0,e.mobile.zoom.locked=!1)},restore:function(){o||(t.attr("content",i),e.mobile.zoom.enabled=!0)}})}(e),function(e){e.widget("mobile.textinput",e.mobile.widget,{options:{theme:null,mini:!1,preventFocusZoom:/iPhone|iPad|iPod/.test(navigator.platform)&&navigator.userAgent.indexOf("AppleWebKit")>-1,initSelector:"input[type='text'], input[type='search'], :jqmData(type='search'), input[type='number'], :jqmData(type='number'), input[type='password'], input[type='email'], input[type='url'], input[type='tel'], textarea, input[type='time'], input[type='date'], input[type='month'], input[type='week'], input[type='datetime'], input[type='datetime-local'], input[type='color'], input:not([type]), input[type='file']",clearBtn:!1,clearSearchButtonText:null,clearBtnText:"clear text",disabled:!1},_create:function(){function t(){setTimeout(function(){a.toggleClass("ui-input-clear-hidden",!s.val())},0)}var i,a,o=this,s=this.element,r=this.options,l=r.theme||e.mobile.getInheritedTheme(this.element,"c"),d=" ui-body-"+l,c=r.mini?" ui-mini":"",h=s.is("[type='search'], :jqmData(type='search')"),u=r.clearSearchButtonText||r.clearBtnText,p=s.is("textarea, :jqmData(type='range')"),m=!!r.clearBtn&&!p,f=s.is("input")&&!s.is(":jqmData(type='range')");if(e("label[for='"+s.attr("id")+"']").addClass("ui-input-text"),i=s.addClass("ui-input-text ui-body-"+l),s[0].autocorrect===n||e.support.touchOverflow||(s[0].setAttribute("autocorrect","off"),s[0].setAttribute("autocomplete","off")),h?i=s.wrap("<div class='ui-input-search ui-shadow-inset ui-btn-corner-all ui-btn-shadow ui-icon-searchfield"+d+c+"'></div>").parent():f&&(i=s.wrap("<div class='ui-input-text ui-shadow-inset ui-corner-all ui-btn-shadow"+d+c+"'></div>").parent()),m||h?(a=e("<a href='#' class='ui-input-clear' title='"+u+"'>"+u+"</a>").bind("click",function(e){s.val("").focus().trigger("change"),a.addClass("ui-input-clear-hidden"),e.preventDefault()}).appendTo(i).buttonMarkup({icon:"delete",iconpos:"notext",corners:!0,shadow:!0,mini:r.mini}),h||i.addClass("ui-input-has-clear"),t(),s.bind("paste cut keyup input focus change blur",t)):f||h||s.addClass("ui-corner-all ui-shadow-inset"+d+c),s.focus(function(){r.preventFocusZoom&&e.mobile.zoom.disable(!0),i.addClass(e.mobile.focusClass)}).blur(function(){i.removeClass(e.mobile.focusClass),r.preventFocusZoom&&e.mobile.zoom.enable(!0)}),s.is("textarea")){var g,b=15,v=100;this._keyup=function(){var e=s[0].scrollHeight,t=s[0].clientHeight;if(e>t){var i=parseFloat(s.css("padding-top")),n=parseFloat(s.css("padding-bottom")),a=i+n;s.height(e-a+b)}},s.on("keyup change input paste",function(){clearTimeout(g),g=setTimeout(o._keyup,v)}),this._on(!0,e.mobile.document,{pagechange:"_keyup"}),e.trim(s.val())&&this._on(!0,e.mobile.window,{load:"_keyup"})}s.attr("disabled")&&this.disable()},disable:function(){var e,t=this.element.is("[type='search'], :jqmData(type='search')"),i=this.element.is("input")&&!this.element.is(":jqmData(type='range')"),n=this.element.attr("disabled",!0)&&(i||t);return e=n?this.element.parent():this.element,e.addClass("ui-disabled"),this._setOption("disabled",!0)},enable:function(){var e,t=this.element.is("[type='search'], :jqmData(type='search')"),i=this.element.is("input")&&!this.element.is(":jqmData(type='range')"),n=this.element.attr("disabled",!1)&&(i||t);return e=n?this.element.parent():this.element,e.removeClass("ui-disabled"),this._setOption("disabled",!1)}}),e.mobile.document.bind("pagecreate create",function(t){e.mobile.textinput.prototype.enhanceWithin(t.target,!0)})}(e),function(e){e.mobile.listview.prototype.options.filter=!1,e.mobile.listview.prototype.options.filterPlaceholder="Filter items...",e.mobile.listview.prototype.options.filterTheme="c",e.mobile.listview.prototype.options.filterReveal=!1;var t=function(e,t){return-1===(""+e).toLowerCase().indexOf(t)};e.mobile.listview.prototype.options.filterCallback=t,e.mobile.document.delegate("ul, ol","listviewcreate",function(){var i=e(this),n=i.data("mobile-listview");if(n&&n.options.filter){n.options.filterReveal&&i.children().addClass("ui-screen-hidden");var a=e("<form>",{"class":"ui-listview-filter ui-bar-"+n.options.filterTheme,role:"search"}).submit(function(e){e.preventDefault(),s.blur()}),o=function(){var a,o=e(this),s=this.value.toLowerCase(),r=null,l=i.children(),d=o.jqmData("lastval")+"",c=!1,h="",u=n.options.filterCallback!==t;if(!d||d!==s){if(n._trigger("beforefilter","beforefilter",{input:this}),o.jqmData("lastval",s),u||s.length<d.length||0!==s.indexOf(d)?r=i.children():(r=i.children(":not(.ui-screen-hidden)"),!r.length&&n.options.filterReveal&&(r=i.children(".ui-screen-hidden"))),s){for(var p=r.length-1;p>=0;p--)a=e(r[p]),h=a.jqmData("filtertext")||a.text(),a.is("li:jqmData(role=list-divider)")?(a.toggleClass("ui-filter-hidequeue",!c),c=!1):n.options.filterCallback(h,s,a)?a.toggleClass("ui-filter-hidequeue",!0):c=!0;r.filter(":not(.ui-filter-hidequeue)").toggleClass("ui-screen-hidden",!1),r.filter(".ui-filter-hidequeue").toggleClass("ui-screen-hidden",!0).toggleClass("ui-filter-hidequeue",!1)}else r.toggleClass("ui-screen-hidden",!!n.options.filterReveal);n._addFirstLastClasses(l,n._getVisibles(l,!1),!1)}},s=e("<input>",{placeholder:n.options.filterPlaceholder}).attr("data-"+e.mobile.ns+"type","search").jqmData("lastval","").bind("keyup change input",o).appendTo(a).textinput();n.options.inset&&a.addClass("ui-listview-filter-inset"),a.bind("submit",function(){return!1}).insertBefore(i)}})}(e),function(e){e.mobile.listview.prototype.options.autodividers=!1,e.mobile.listview.prototype.options.autodividersSelector=function(t){var i=e.trim(t.text())||null;return i?i=i.slice(0,1).toUpperCase():null},e.mobile.document.delegate("ul,ol","listviewcreate",function(){var t=e(this),n=t.data("mobile-listview");if(n&&n.options.autodividers){var a=function(){t.find("li:jqmData(role='list-divider')").remove();for(var a,o,s=t.find("li"),r=null,l=0;s.length>l;l++){if(a=s[l],o=n.options.autodividersSelector(e(a)),o&&r!==o){var d=i.createElement("li");d.appendChild(i.createTextNode(o)),d.setAttribute("data-"+e.mobile.ns+"role","list-divider"),a.parentNode.insertBefore(d,a)}r=o}},o=function(){t.unbind("listviewafterrefresh",o),a(),n.refresh(),t.bind("listviewafterrefresh",o)};o()}})}(e),function(e){e(i).bind("pagecreate create",function(t){e(":jqmData(role='nojs')",t.target).addClass("ui-nojs")})}(e),function(e){e.mobile.behaviors.formReset={_handleFormReset:function(){this._on(this.element.closest("form"),{reset:function(){this._delay("_reset")}})}}}(e),function(e){e.widget("mobile.checkboxradio",e.mobile.widget,e.extend({options:{theme:null,mini:!1,initSelector:"input[type='checkbox'],input[type='radio']"},_create:function(){var t=this,a=this.element,o=this.options,s=function(e,t){return e.jqmData(t)||e.closest("form, fieldset").jqmData(t)},r=e(a).closest("label"),l=r.length?r:e(a).closest("form, fieldset, :jqmData(role='page'), :jqmData(role='dialog')").find("label").filter("[for='"+a[0].id+"']").first(),d=a[0].type,c=s(a,"mini")||o.mini,h=d+"-on",u=d+"-off",p=s(a,"iconpos"),m="ui-"+h,f="ui-"+u;if("checkbox"===d||"radio"===d){e.extend(this,{label:l,inputtype:d,checkedClass:m,uncheckedClass:f,checkedicon:h,uncheckedicon:u}),o.theme||(o.theme=e.mobile.getInheritedTheme(this.element,"c")),l.buttonMarkup({theme:o.theme,icon:u,shadow:!1,mini:c,iconpos:p});var g=i.createElement("div");g.className="ui-"+d,a.add(l).wrapAll(g),l.bind({vmouseover:function(t){e(this).parent().is(".ui-disabled")&&t.stopPropagation()},vclick:function(e){return a.is(":disabled")?(e.preventDefault(),n):(t._cacheVals(),a.prop("checked","radio"===d&&!0||!a.prop("checked")),a.triggerHandler("click"),t._getInputSet().not(a).prop("checked",!1),t._updateAll(),!1)}}),a.bind({vmousedown:function(){t._cacheVals()},vclick:function(){var i=e(this);i.is(":checked")?(i.prop("checked",!0),t._getInputSet().not(i).prop("checked",!1)):i.prop("checked",!1),t._updateAll()},focus:function(){l.addClass(e.mobile.focusClass)},blur:function(){l.removeClass(e.mobile.focusClass)}}),this._handleFormReset(),this.refresh()}},_cacheVals:function(){this._getInputSet().each(function(){e(this).jqmData("cacheVal",this.checked)})},_getInputSet:function(){return"checkbox"===this.inputtype?this.element:this.element.closest("form, :jqmData(role='page'), :jqmData(role='dialog')").find("input[name='"+this.element[0].name+"'][type='"+this.inputtype+"']")},_updateAll:function(){var t=this;this._getInputSet().each(function(){var i=e(this);(this.checked||"checkbox"===t.inputtype)&&i.trigger("change")}).checkboxradio("refresh")},_reset:function(){this.refresh()},refresh:function(){var t=this.element[0],i=" "+e.mobile.activeBtnClass,n=this.checkedClass+(this.element.parents(".ui-controlgroup-horizontal").length?i:""),a=this.label;t.checked?a.removeClass(this.uncheckedClass+i).addClass(n).buttonMarkup({icon:this.checkedicon}):a.removeClass(n).addClass(this.uncheckedClass).buttonMarkup({icon:this.uncheckedicon}),t.disabled?this.disable():this.enable()},disable:function(){this.element.prop("disabled",!0).parent().addClass("ui-disabled")},enable:function(){this.element.prop("disabled",!1).parent().removeClass("ui-disabled")}},e.mobile.behaviors.formReset)),e.mobile.document.bind("pagecreate create",function(t){e.mobile.checkboxradio.prototype.enhanceWithin(t.target,!0)})}(e),function(e){e.widget("mobile.button",e.mobile.widget,{options:{theme:null,icon:null,iconpos:null,corners:!0,shadow:!0,iconshadow:!0,inline:null,mini:null,initSelector:"button, [type='button'], [type='submit'], [type='reset']"},_create:function(){var t,i=this.element,a=function(e){var t,i={};for(t in e)null!==e[t]&&"initSelector"!==t&&(i[t]=e[t]);return i}(this.options),o="";return"A"===i[0].tagName?(i.hasClass("ui-btn")||i.buttonMarkup(),n):(this.options.theme||(this.options.theme=e.mobile.getInheritedTheme(this.element,"c")),~i[0].className.indexOf("ui-btn-left")&&(o="ui-btn-left"),~i[0].className.indexOf("ui-btn-right")&&(o="ui-btn-right"),("submit"===i.attr("type")||"reset"===i.attr("type"))&&(o?o+=" ui-submit":o="ui-submit"),e("label[for='"+i.attr("id")+"']").addClass("ui-submit"),this.button=e("<div></div>")[i.html()?"html":"text"](i.html()||i.val()).insertBefore(i).buttonMarkup(a).addClass(o).append(i.addClass("ui-btn-hidden")),t=this.button,i.bind({focus:function(){t.addClass(e.mobile.focusClass)},blur:function(){t.removeClass(e.mobile.focusClass)}}),this.refresh(),n)},_setOption:function(t,i){var n={};n[t]=i,"initSelector"!==t&&(this.button.buttonMarkup(n),this.element.attr("data-"+(e.mobile.ns||"")+t.replace(/([A-Z])/,"-$1").toLowerCase(),i)),this._super("_setOption",t,i)},enable:function(){return this.element.attr("disabled",!1),this.button.removeClass("ui-disabled").attr("aria-disabled",!1),this._setOption("disabled",!1)},disable:function(){return this.element.attr("disabled",!0),this.button.addClass("ui-disabled").attr("aria-disabled",!0),this._setOption("disabled",!0)},refresh:function(){var t=this.element;t.prop("disabled")?this.disable():this.enable(),e(this.button.data("buttonElements").text)[t.html()?"html":"text"](t.html()||t.val())}}),e.mobile.document.bind("pagecreate create",function(t){e.mobile.button.prototype.enhanceWithin(t.target,!0)})}(e),function(e,n){e.widget("mobile.slider",e.mobile.widget,e.extend({widgetEventPrefix:"slide",options:{theme:null,trackTheme:null,disabled:!1,initSelector:"input[type='range'], :jqmData(type='range'), :jqmData(role='slider')",mini:!1,highlight:!1},_create:function(){var a,o,s=this,r=this.element,l=e.mobile.getInheritedTheme(r,"c"),d=this.options.theme||l,c=this.options.trackTheme||l,h=r[0].nodeName.toLowerCase(),u=(this.isToggleSwitch="select"===h,r.parent().is(":jqmData(role='rangeslider')")),p=this.isToggleSwitch?"ui-slider-switch":"",m=r.attr("id"),f=e("[for='"+m+"']"),g=f.attr("id")||m+"-label",b=f.attr("id",g),v=this.isToggleSwitch?0:parseFloat(r.attr("min")),_=this.isToggleSwitch?r.find("option").length-1:parseFloat(r.attr("max")),C=t.parseFloat(r.attr("step")||1),x=this.options.mini||r.jqmData("mini")?" ui-mini":"",y=i.createElement("a"),w=e(y),T=i.createElement("div"),D=e(T),P=this.options.highlight&&!this.isToggleSwitch?function(){var t=i.createElement("div");return t.className="ui-slider-bg "+e.mobile.activeBtnClass+" ui-btn-corner-all",e(t).prependTo(D)}():!1;if(y.setAttribute("href","#"),T.setAttribute("role","application"),T.className=[this.isToggleSwitch?"ui-slider ":"ui-slider-track ",p," ui-btn-down-",c," ui-btn-corner-all",x].join(""),y.className="ui-slider-handle",T.appendChild(y),w.buttonMarkup({corners:!0,theme:d,shadow:!0}).attr({role:"slider","aria-valuemin":v,"aria-valuemax":_,"aria-valuenow":this._value(),"aria-valuetext":this._value(),title:this._value(),"aria-labelledby":g}),e.extend(this,{slider:D,handle:w,type:h,step:C,max:_,min:v,valuebg:P,isRangeslider:u,dragging:!1,beforeStart:null,userModified:!1,mouseMoved:!1}),this.isToggleSwitch){o=i.createElement("div"),o.className="ui-slider-inneroffset";for(var k=0,E=T.childNodes.length;E>k;k++)o.appendChild(T.childNodes[k]);T.appendChild(o),w.addClass("ui-slider-handle-snapping"),a=r.find("option");for(var q=0,j=a.length;j>q;q++){var S=q?"a":"b",A=q?" "+e.mobile.activeBtnClass:" ui-btn-down-"+c,N=(i.createElement("div"),i.createElement("span"));N.className=["ui-slider-label ui-slider-label-",S,A," ui-btn-corner-all"].join(""),N.setAttribute("role","img"),N.appendChild(i.createTextNode(a[q].innerHTML)),e(N).prependTo(D)}s._labels=e(".ui-slider-label",D)}b.addClass("ui-slider"),r.addClass(this.isToggleSwitch?"ui-slider-switch":"ui-slider-input"),this._on(r,{change:"_controlChange",keyup:"_controlKeyup",blur:"_controlBlur",vmouseup:"_controlVMouseUp"}),D.bind("vmousedown",e.proxy(this._sliderVMouseDown,this)).bind("vclick",!1),this._on(i,{vmousemove:"_preventDocumentDrag"}),this._on(D.add(i),{vmouseup:"_sliderVMouseUp"}),D.insertAfter(r),this.isToggleSwitch||u||(o=this.options.mini?"<div class='ui-slider ui-mini'>":"<div class='ui-slider'>",r.add(D).wrapAll(o)),this.isToggleSwitch&&this.handle.bind({focus:function(){D.addClass(e.mobile.focusClass)},blur:function(){D.removeClass(e.mobile.focusClass)}}),this._on(this.handle,{vmousedown:"_handleVMouseDown",keydown:"_handleKeydown",keyup:"_handleKeyup"}),this.handle.bind("vclick",!1),this._handleFormReset(),this.refresh(n,n,!0)},_controlChange:function(e){return this._trigger("controlchange",e)===!1?!1:(this.mouseMoved||this.refresh(this._value(),!0),n)},_controlKeyup:function(){this.refresh(this._value(),!0,!0)},_controlBlur:function(){this.refresh(this._value(),!0)},_controlVMouseUp:function(){this._checkedRefresh()},_handleVMouseDown:function(){this.handle.focus()},_handleKeydown:function(t){var i=this._value();if(!this.options.disabled){switch(t.keyCode){case e.mobile.keyCode.HOME:case e.mobile.keyCode.END:case e.mobile.keyCode.PAGE_UP:case e.mobile.keyCode.PAGE_DOWN:case e.mobile.keyCode.UP:case e.mobile.keyCode.RIGHT:case e.mobile.keyCode.DOWN:case e.mobile.keyCode.LEFT:t.preventDefault(),this._keySliding||(this._keySliding=!0,this.handle.addClass("ui-state-active"))}switch(t.keyCode){case e.mobile.keyCode.HOME:this.refresh(this.min);break;case e.mobile.keyCode.END:this.refresh(this.max);break;case e.mobile.keyCode.PAGE_UP:case e.mobile.keyCode.UP:case e.mobile.keyCode.RIGHT:this.refresh(i+this.step);break;case e.mobile.keyCode.PAGE_DOWN:case e.mobile.keyCode.DOWN:case e.mobile.keyCode.LEFT:this.refresh(i-this.step)}}},_handleKeyup:function(){this._keySliding&&(this._keySliding=!1,this.handle.removeClass("ui-state-active"))},_sliderVMouseDown:function(e){return this.options.disabled||1!==e.which&&0!==e.which?!1:this._trigger("beforestart",e)===!1?!1:(this.dragging=!0,this.userModified=!1,this.mouseMoved=!1,this.isToggleSwitch&&(this.beforeStart=this.element[0].selectedIndex),this.refresh(e),this._trigger("start"),!1)},_sliderVMouseUp:function(){return this.dragging?(this.dragging=!1,this.isToggleSwitch&&(this.handle.addClass("ui-slider-handle-snapping"),this.mouseMoved?this.userModified?this.refresh(0===this.beforeStart?1:0):this.refresh(this.beforeStart):this.refresh(0===this.beforeStart?1:0)),this.mouseMoved=!1,this._trigger("stop"),!1):n},_preventDocumentDrag:function(e){return this._trigger("drag",e)===!1?!1:this.dragging&&!this.options.disabled?(this.mouseMoved=!0,this.isToggleSwitch&&this.handle.removeClass("ui-slider-handle-snapping"),this.refresh(e),this.userModified=this.beforeStart!==this.element[0].selectedIndex,!1):n},_checkedRefresh:function(){this.value!==this._value()&&this.refresh(this._value())},_value:function(){return this.isToggleSwitch?this.element[0].selectedIndex:parseFloat(this.element.val())},_reset:function(){this.refresh(n,!1,!0)},refresh:function(t,a,o){var s,r,l,d,c=this,h=e.mobile.getInheritedTheme(this.element,"c"),u=this.options.theme||h,p=this.options.trackTheme||h;c.slider[0].className=[this.isToggleSwitch?"ui-slider ui-slider-switch":"ui-slider-track"," ui-btn-down-"+p," ui-btn-corner-all",this.options.mini?" ui-mini":""].join(""),(this.options.disabled||this.element.attr("disabled"))&&this.disable(),this.value=this._value(),this.options.highlight&&!this.isToggleSwitch&&0===this.slider.find(".ui-slider-bg").length&&(this.valuebg=function(){var t=i.createElement("div");return t.className="ui-slider-bg "+e.mobile.activeBtnClass+" ui-btn-corner-all",e(t).prependTo(c.slider)}()),this.handle.buttonMarkup({corners:!0,theme:u,shadow:!0});var m,f,g=this.element,b=!this.isToggleSwitch,v=b?[]:g.find("option"),_=b?parseFloat(g.attr("min")):0,C=b?parseFloat(g.attr("max")):v.length-1,x=b&&parseFloat(g.attr("step"))>0?parseFloat(g.attr("step")):1;if("object"==typeof t){if(l=t,d=8,s=this.slider.offset().left,r=this.slider.width(),m=r/((C-_)/x),!this.dragging||s-d>l.pageX||l.pageX>s+r+d)return;f=m>1?100*((l.pageX-s)/r):Math.round(100*((l.pageX-s)/r))}else null==t&&(t=b?parseFloat(g.val()||0):g[0].selectedIndex),f=100*((parseFloat(t)-_)/(C-_));if(!isNaN(f)){var y=f/100*(C-_)+_,w=(y-_)%x,T=y-w;2*Math.abs(w)>=x&&(T+=w>0?x:-x);var D=100/((C-_)/x);if(y=parseFloat(T.toFixed(5)),m===n&&(m=r/((C-_)/x)),m>1&&b&&(f=(y-_)*D*(1/x)),0>f&&(f=0),f>100&&(f=100),_>y&&(y=_),y>C&&(y=C),this.handle.css("left",f+"%"),this.handle[0].setAttribute("aria-valuenow",b?y:v.eq(y).attr("value")),this.handle[0].setAttribute("aria-valuetext",b?y:v.eq(y).getEncodedText()),this.handle[0].setAttribute("title",b?y:v.eq(y).getEncodedText()),this.valuebg&&this.valuebg.css("width",f+"%"),this._labels){var P=100*(this.handle.width()/this.slider.width()),k=f&&P+(100-P)*f/100,E=100===f?0:Math.min(P+100-k,100);this._labels.each(function(){var t=e(this).is(".ui-slider-label-a");e(this).width((t?k:E)+"%")})}if(!o){var q=!1;if(b?(q=g.val()!==y,g.val(y)):(q=g[0].selectedIndex!==y,g[0].selectedIndex=y),this._trigger("beforechange",t)===!1)return!1;!a&&q&&g.trigger("change")}}},enable:function(){return this.element.attr("disabled",!1),this.slider.removeClass("ui-disabled").attr("aria-disabled",!1),this._setOption("disabled",!1)},disable:function(){return this.element.attr("disabled",!0),this.slider.addClass("ui-disabled").attr("aria-disabled",!0),this._setOption("disabled",!0)}},e.mobile.behaviors.formReset)),e.mobile.document.bind("pagecreate create",function(t){e.mobile.slider.prototype.enhanceWithin(t.target,!0)})}(e),function(e){e.widget("mobile.rangeslider",e.mobile.widget,{options:{theme:null,trackTheme:null,disabled:!1,initSelector:":jqmData(role='rangeslider')",mini:!1,highlight:!0},_create:function(){var t,i=this.element,n=this.options.mini?"ui-rangeslider ui-mini":"ui-rangeslider",a=i.find("input").first(),o=i.find("input").last(),s=i.find("label").first(),r=e.data(a.get(0),"mobileSlider").slider,l=e.data(o.get(0),"mobileSlider").slider,d=e.data(a.get(0),"mobileSlider").handle,c=e('<div class="ui-rangeslider-sliders" />').appendTo(i);i.find("label").length>1&&(t=i.find("label").last().hide()),a.addClass("ui-rangeslider-first"),o.addClass("ui-rangeslider-last"),i.addClass(n),r.appendTo(c),l.appendTo(c),s.prependTo(i),d.prependTo(l),e.extend(this,{_inputFirst:a,_inputLast:o,_sliderFirst:r,_sliderLast:l,_targetVal:null,_sliderTarget:!1,_sliders:c,_proxy:!1}),this.refresh(),this._on(this.element.find("input.ui-slider-input"),{slidebeforestart:"_slidebeforestart",slidestop:"_slidestop",slidedrag:"_slidedrag",slidebeforechange:"_change",blur:"_change",keyup:"_change"}),this._on({mousedown:"_change"}),this._on(this.element.closest("form"),{reset:"_handleReset"}),this._on(d,{vmousedown:"_dragFirstHandle"})},_handleReset:function(){var e=this;setTimeout(function(){e._updateHighlight()},0)},_dragFirstHandle:function(t){return e.data(this._inputFirst.get(0),"mobileSlider").dragging=!0,e.data(this._inputFirst.get(0),"mobileSlider").refresh(t),!1},_slidedrag:function(t){var i=e(t.target).is(this._inputFirst),a=i?this._inputLast:this._inputFirst;return this._sliderTarget=!1,"first"===this._proxy&&i||"last"===this._proxy&&!i?(e.data(a.get(0),"mobileSlider").dragging=!0,e.data(a.get(0),"mobileSlider").refresh(t),!1):n},_slidestop:function(t){var i=e(t.target).is(this._inputFirst);this._proxy=!1,this.element.find("input").trigger("vmouseup"),this._sliderFirst.css("z-index",i?1:"")},_slidebeforestart:function(t){this._sliderTarget=!1,e(t.originalEvent.target).hasClass("ui-slider-track")&&(this._sliderTarget=!0,this._targetVal=e(t.target).val())},_setOption:function(e){this._superApply(e),this.refresh()},refresh:function(){var e=this.element,t=this.options;e.find("input").slider({theme:t.theme,trackTheme:t.trackTheme,disabled:t.disabled,mini:t.mini,highlight:t.highlight}).slider("refresh"),this._updateHighlight()},_change:function(t){if("keyup"===t.type)return this._updateHighlight(),!1;var i=this,a=parseFloat(this._inputFirst.val(),10),o=parseFloat(this._inputLast.val(),10),s=e(t.target).hasClass("ui-rangeslider-first"),r=s?this._inputFirst:this._inputLast,l=s?this._inputLast:this._inputFirst;if(this._inputFirst.val()>this._inputLast.val()&&"mousedown"===t.type&&!e(t.target).hasClass("ui-slider-handle"))r.blur();else if("mousedown"===t.type)return;return a>o&&!this._sliderTarget?(r.val(s?o:a).slider("refresh"),this._trigger("normalize")):a>o&&(r.val(this._targetVal).slider("refresh"),setTimeout(function(){l.val(s?a:o).slider("refresh"),e.data(l.get(0),"mobileSlider").handle.focus(),i._sliderFirst.css("z-index",s?"":1),i._trigger("normalize")},0),this._proxy=s?"first":"last"),a===o?(e.data(r.get(0),"mobileSlider").handle.css("z-index",1),e.data(l.get(0),"mobileSlider").handle.css("z-index",0)):(e.data(l.get(0),"mobileSlider").handle.css("z-index",""),e.data(r.get(0),"mobileSlider").handle.css("z-index","")),this._updateHighlight(),a>=o?!1:n},_updateHighlight:function(){var t=parseInt(e.data(this._inputFirst.get(0),"mobileSlider").handle.get(0).style.left,10),i=parseInt(e.data(this._inputLast.get(0),"mobileSlider").handle.get(0).style.left,10),n=i-t;this.element.find(".ui-slider-bg").css({"margin-left":t+"%",width:n+"%"})},_destroy:function(){this.element.removeClass("ui-rangeslider ui-mini").find("label").show(),this._inputFirst.after(this._sliderFirst),this._inputLast.after(this._sliderLast),this._sliders.remove(),this.element.find("input").removeClass("ui-rangeslider-first ui-rangeslider-last").slider("destroy")}}),e.widget("mobile.rangeslider",e.mobile.rangeslider,e.mobile.behaviors.formReset),e(i).bind("pagecreate create",function(t){e.mobile.rangeslider.prototype.enhanceWithin(t.target,!0)})}(e),function(e){e.widget("mobile.selectmenu",e.mobile.widget,e.extend({options:{theme:null,disabled:!1,icon:"arrow-d",iconpos:"right",inline:!1,corners:!0,shadow:!0,iconshadow:!0,overlayTheme:"a",dividerTheme:"b",hidePlaceholderMenuItems:!0,closeText:"Close",nativeMenu:!0,preventFocusZoom:/iPhone|iPad|iPod/.test(navigator.platform)&&navigator.userAgent.indexOf("AppleWebKit")>-1,initSelector:"select:not( :jqmData(role='slider') )",mini:!1},_button:function(){return e("<div/>")
},_setDisabled:function(e){return this.element.attr("disabled",e),this.button.attr("aria-disabled",e),this._setOption("disabled",e)},_focusButton:function(){var e=this;setTimeout(function(){e.button.focus()},40)},_selectOptions:function(){return this.select.find("option")},_preExtension:function(){var t="";~this.element[0].className.indexOf("ui-btn-left")&&(t=" ui-btn-left"),~this.element[0].className.indexOf("ui-btn-right")&&(t=" ui-btn-right"),this.select=this.element.removeClass("ui-btn-left ui-btn-right").wrap("<div class='ui-select"+t+"'>"),this.selectID=this.select.attr("id"),this.label=e("label[for='"+this.selectID+"']").addClass("ui-select"),this.isMultiple=this.select[0].multiple,this.options.theme||(this.options.theme=e.mobile.getInheritedTheme(this.select,"c"))},_destroy:function(){var e=this.element.parents(".ui-select");e.length>0&&(e.is(".ui-btn-left, .ui-btn-right")&&this.element.addClass(e.is(".ui-btn-left")?"ui-btn-left":"ui-btn-right"),this.element.insertAfter(e),e.remove())},_create:function(){this._preExtension(),this._trigger("beforeCreate"),this.button=this._button();var i=this,n=this.options,a=n.inline||this.select.jqmData("inline"),o=n.mini||this.select.jqmData("mini"),s=n.icon?n.iconpos||this.select.jqmData("iconpos"):!1,r=(-1===this.select[0].selectedIndex?0:this.select[0].selectedIndex,this.button.insertBefore(this.select).buttonMarkup({theme:n.theme,icon:n.icon,iconpos:s,inline:a,corners:n.corners,shadow:n.shadow,iconshadow:n.iconshadow,mini:o}));this.setButtonText(),n.nativeMenu&&t.opera&&t.opera.version&&r.addClass("ui-select-nativeonly"),this.isMultiple&&(this.buttonCount=e("<span>").addClass("ui-li-count ui-btn-up-c ui-btn-corner-all").hide().appendTo(r.addClass("ui-li-has-count"))),(n.disabled||this.element.attr("disabled"))&&this.disable(),this.select.change(function(){i.refresh(),n.nativeMenu&&this.blur()}),this._handleFormReset(),this.build()},build:function(){var t=this;this.select.appendTo(t.button).bind("vmousedown",function(){t.button.addClass(e.mobile.activeBtnClass)}).bind("focus",function(){t.button.addClass(e.mobile.focusClass)}).bind("blur",function(){t.button.removeClass(e.mobile.focusClass)}).bind("focus vmouseover",function(){t.button.trigger("vmouseover")}).bind("vmousemove",function(){t.button.removeClass(e.mobile.activeBtnClass)}).bind("change blur vmouseout",function(){t.button.trigger("vmouseout").removeClass(e.mobile.activeBtnClass)}).bind("change blur",function(){t.button.removeClass("ui-btn-down-"+t.options.theme)}),t.button.bind("vmousedown",function(){t.options.preventFocusZoom&&e.mobile.zoom.disable(!0)}),t.label.bind("click focus",function(){t.options.preventFocusZoom&&e.mobile.zoom.disable(!0)}),t.select.bind("focus",function(){t.options.preventFocusZoom&&e.mobile.zoom.disable(!0)}),t.button.bind("mouseup",function(){t.options.preventFocusZoom&&setTimeout(function(){e.mobile.zoom.enable(!0)},0)}),t.select.bind("blur",function(){t.options.preventFocusZoom&&e.mobile.zoom.enable(!0)})},selected:function(){return this._selectOptions().filter(":selected")},selectedIndices:function(){var e=this;return this.selected().map(function(){return e._selectOptions().index(this)}).get()},setButtonText:function(){var t=this,n=this.selected(),a=this.placeholder,o=e(i.createElement("span"));this.button.find(".ui-btn-text").html(function(){return a=n.length?n.map(function(){return e(this).text()}).get().join(", "):t.placeholder,o.text(a).addClass(t.select.attr("class")).addClass(n.attr("class"))})},setButtonCount:function(){var e=this.selected();this.isMultiple&&this.buttonCount[e.length>1?"show":"hide"]().text(e.length)},_reset:function(){this.refresh()},refresh:function(){this.setButtonText(),this.setButtonCount()},open:e.noop,close:e.noop,disable:function(){this._setDisabled(!0),this.button.addClass("ui-disabled")},enable:function(){this._setDisabled(!1),this.button.removeClass("ui-disabled")}},e.mobile.behaviors.formReset)),e.mobile.document.bind("pagecreate create",function(t){e.mobile.selectmenu.prototype.enhanceWithin(t.target,!0)})}(e),function(e,n){function a(e,t,i,n){var a=n;return a=t>e?i+(e-t)/2:Math.min(Math.max(i,n-t/2),i+e-t)}function o(){var i=e.mobile.window;return{x:i.scrollLeft(),y:i.scrollTop(),cx:t.innerWidth||i.width(),cy:t.innerHeight||i.height()}}e.widget("mobile.popup",e.mobile.widget,{options:{theme:null,overlayTheme:null,shadow:!0,corners:!0,transition:"none",positionTo:"origin",tolerance:null,initSelector:":jqmData(role='popup')",closeLinkSelector:"a:jqmData(rel='back')",closeLinkEvents:"click.popup",navigateEvents:"navigate.popup",closeEvents:"navigate.popup pagebeforechange.popup",dismissible:!0,history:!e.mobile.browser.oldIE},_eatEventAndClose:function(e){return e.preventDefault(),e.stopImmediatePropagation(),this.options.dismissible&&this.close(),!1},_resizeScreen:function(){var e=this._ui.container.outerHeight(!0);this._ui.screen.removeAttr("style"),e>this._ui.screen.height()&&this._ui.screen.height(e)},_handleWindowKeyUp:function(t){return this._isOpen&&t.keyCode===e.mobile.keyCode.ESCAPE?this._eatEventAndClose(t):n},_expectResizeEvent:function(){var t=o();if(this._resizeData){if(t.x===this._resizeData.winCoords.x&&t.y===this._resizeData.winCoords.y&&t.cx===this._resizeData.winCoords.cx&&t.cy===this._resizeData.winCoords.cy)return!1;clearTimeout(this._resizeData.timeoutId)}return this._resizeData={timeoutId:setTimeout(e.proxy(this,"_resizeTimeout"),200),winCoords:t},!0},_resizeTimeout:function(){this._isOpen?this._expectResizeEvent()||(this._ui.container.hasClass("ui-popup-hidden")&&(this._ui.container.removeClass("ui-popup-hidden"),this.reposition({positionTo:"window"}),this._ignoreResizeEvents()),this._resizeScreen(),this._resizeData=null,this._orientationchangeInProgress=!1):(this._resizeData=null,this._orientationchangeInProgress=!1)},_ignoreResizeEvents:function(){var e=this;this._ignoreResizeTo&&clearTimeout(this._ignoreResizeTo),this._ignoreResizeTo=setTimeout(function(){e._ignoreResizeTo=0},1e3)},_handleWindowResize:function(){this._isOpen&&0===this._ignoreResizeTo&&(!this._expectResizeEvent()&&!this._orientationchangeInProgress||this._ui.container.hasClass("ui-popup-hidden")||this._ui.container.addClass("ui-popup-hidden").removeAttr("style"))},_handleWindowOrientationchange:function(){!this._orientationchangeInProgress&&this._isOpen&&0===this._ignoreResizeTo&&(this._expectResizeEvent(),this._orientationchangeInProgress=!0)},_handleDocumentFocusIn:function(t){var n,a=t.target,o=this._ui;if(this._isOpen){if(a!==o.container[0]){if(n=e(t.target),0===n.parents().filter(o.container[0]).length)return e(i.activeElement).one("focus",function(){n.blur()}),o.focusElement.focus(),t.preventDefault(),t.stopImmediatePropagation(),!1;o.focusElement[0]===o.container[0]&&(o.focusElement=n)}this._ignoreResizeEvents()}},_create:function(){var t={screen:e("<div class='ui-screen-hidden ui-popup-screen'></div>"),placeholder:e("<div style='display: none;'><!-- placeholder --></div>"),container:e("<div class='ui-popup-container ui-popup-hidden'></div>")},i=this.element.closest(".ui-page"),a=this.element.attr("id"),o=this;this.options.history=this.options.history&&e.mobile.ajaxEnabled&&e.mobile.hashListeningEnabled,0===i.length&&(i=e("body")),this.options.container=this.options.container||e.mobile.pageContainer,i.append(t.screen),t.container.insertAfter(t.screen),t.placeholder.insertAfter(this.element),a&&(t.screen.attr("id",a+"-screen"),t.container.attr("id",a+"-popup"),t.placeholder.html("<!-- placeholder for "+a+" -->")),t.container.append(this.element),t.focusElement=t.container,this.element.addClass("ui-popup"),e.extend(this,{_scrollTop:0,_page:i,_ui:t,_fallbackTransition:"",_currentTransition:!1,_prereqs:null,_isOpen:!1,_tolerance:null,_resizeData:null,_ignoreResizeTo:0,_orientationchangeInProgress:!1}),e.each(this.options,function(e,t){o.options[e]=n,o._setOption(e,t,!0)}),t.screen.bind("vclick",e.proxy(this,"_eatEventAndClose")),this._on(e.mobile.window,{orientationchange:e.proxy(this,"_handleWindowOrientationchange"),resize:e.proxy(this,"_handleWindowResize"),keyup:e.proxy(this,"_handleWindowKeyUp")}),this._on(e.mobile.document,{focusin:e.proxy(this,"_handleDocumentFocusIn")})},_applyTheme:function(e,t,i){for(var n,a=(e.attr("class")||"").split(" "),o=null,s=t+"";a.length>0;){if(o=a.pop(),n=RegExp("^ui-"+i+"-([a-z])$").exec(o),n&&n.length>1){o=n[1];break}o=null}t!==o&&(e.removeClass("ui-"+i+"-"+o),null!==t&&"none"!==t&&e.addClass("ui-"+i+"-"+s))},_setTheme:function(e){this._applyTheme(this.element,e,"body")},_setOverlayTheme:function(e){this._applyTheme(this._ui.screen,e,"overlay"),this._isOpen&&this._ui.screen.addClass("in")},_setShadow:function(e){this.element.toggleClass("ui-overlay-shadow",e)},_setCorners:function(e){this.element.toggleClass("ui-corner-all",e)},_applyTransition:function(t){this._ui.container.removeClass(this._fallbackTransition),t&&"none"!==t&&(this._fallbackTransition=e.mobile._maybeDegradeTransition(t),"none"===this._fallbackTransition&&(this._fallbackTransition=""),this._ui.container.addClass(this._fallbackTransition))},_setTransition:function(e){this._currentTransition||this._applyTransition(e)},_setTolerance:function(t){var i={t:30,r:15,b:30,l:15};if(t!==n){var a=(t+"").split(",");switch(e.each(a,function(e,t){a[e]=parseInt(t,10)}),a.length){case 1:isNaN(a[0])||(i.t=i.r=i.b=i.l=a[0]);break;case 2:isNaN(a[0])||(i.t=i.b=a[0]),isNaN(a[1])||(i.l=i.r=a[1]);break;case 4:isNaN(a[0])||(i.t=a[0]),isNaN(a[1])||(i.r=a[1]),isNaN(a[2])||(i.b=a[2]),isNaN(a[3])||(i.l=a[3]);break;default:}}this._tolerance=i},_setOption:function(t,i){var a,o="_set"+t.charAt(0).toUpperCase()+t.slice(1);this[o]!==n&&this[o](i),a=["initSelector","closeLinkSelector","closeLinkEvents","navigateEvents","closeEvents","history","container"],e.mobile.widget.prototype._setOption.apply(this,arguments),-1===e.inArray(t,a)&&this.element.attr("data-"+(e.mobile.ns||"")+t.replace(/([A-Z])/,"-$1").toLowerCase(),i)},_placementCoords:function(e){var t,n,s=o(),r={x:this._tolerance.l,y:s.y+this._tolerance.t,cx:s.cx-this._tolerance.l-this._tolerance.r,cy:s.cy-this._tolerance.t-this._tolerance.b};this._ui.container.css("max-width",r.cx),t={cx:this._ui.container.outerWidth(!0),cy:this._ui.container.outerHeight(!0)},n={x:a(r.cx,t.cx,r.x,e.x),y:a(r.cy,t.cy,r.y,e.y)},n.y=Math.max(0,n.y);var l=i.documentElement,d=i.body,c=Math.max(l.clientHeight,d.scrollHeight,d.offsetHeight,l.scrollHeight,l.offsetHeight);return n.y-=Math.min(n.y,Math.max(0,n.y+t.cy-c)),{left:n.x,top:n.y}},_createPrereqs:function(t,i,n){var a,o=this;a={screen:e.Deferred(),container:e.Deferred()},a.screen.then(function(){a===o._prereqs&&t()}),a.container.then(function(){a===o._prereqs&&i()}),e.when(a.screen,a.container).done(function(){a===o._prereqs&&(o._prereqs=null,n())}),o._prereqs=a},_animate:function(t){return this._ui.screen.removeClass(t.classToRemove).addClass(t.screenClassToAdd),t.prereqs.screen.resolve(),t.transition&&"none"!==t.transition&&(t.applyTransition&&this._applyTransition(t.transition),this._fallbackTransition)?(this._ui.container.animationComplete(e.proxy(t.prereqs.container,"resolve")).addClass(t.containerClassToAdd).removeClass(t.classToRemove),n):(this._ui.container.removeClass(t.classToRemove),t.prereqs.container.resolve(),n)},_desiredCoords:function(t){var i,n=null,a=o(),s=t.x,r=t.y,l=t.positionTo;if(l&&"origin"!==l)if("window"===l)s=a.cx/2+a.x,r=a.cy/2+a.y;else{try{n=e(l)}catch(d){n=null}n&&(n.filter(":visible"),0===n.length&&(n=null))}return n&&(i=n.offset(),s=i.left+n.outerWidth()/2,r=i.top+n.outerHeight()/2),("number"!==e.type(s)||isNaN(s))&&(s=a.cx/2+a.x),("number"!==e.type(r)||isNaN(r))&&(r=a.cy/2+a.y),{x:s,y:r}},_reposition:function(e){e={x:e.x,y:e.y,positionTo:e.positionTo},this._trigger("beforeposition",e),this._ui.container.offset(this._placementCoords(this._desiredCoords(e)))},reposition:function(e){this._isOpen&&this._reposition(e)},_openPrereqsComplete:function(){this._ui.container.addClass("ui-popup-active"),this._isOpen=!0,this._resizeScreen(),this._ui.container.attr("tabindex","0").focus(),this._ignoreResizeEvents(),this._trigger("afteropen")},_open:function(t){var i=e.extend({},this.options,t),n=function(){var e=navigator.userAgent,t=e.match(/AppleWebKit\/([0-9\.]+)/),i=!!t&&t[1],n=e.match(/Android (\d+(?:\.\d+))/),a=!!n&&n[1],o=e.indexOf("Chrome")>-1;return null!==n&&"4.0"===a&&i&&i>534.13&&!o?!0:!1}();this._createPrereqs(e.noop,e.noop,e.proxy(this,"_openPrereqsComplete")),this._currentTransition=i.transition,this._applyTransition(i.transition),this.options.theme||this._setTheme(this._page.jqmData("theme")||e.mobile.getInheritedTheme(this._page,"c")),this._ui.screen.removeClass("ui-screen-hidden"),this._ui.container.removeClass("ui-popup-hidden"),this._reposition(i),this.options.overlayTheme&&n&&this.element.closest(".ui-page").addClass("ui-popup-open"),this._animate({additionalCondition:!0,transition:i.transition,classToRemove:"",screenClassToAdd:"in",containerClassToAdd:"in",applyTransition:!1,prereqs:this._prereqs})},_closePrereqScreen:function(){this._ui.screen.removeClass("out").addClass("ui-screen-hidden")},_closePrereqContainer:function(){this._ui.container.removeClass("reverse out").addClass("ui-popup-hidden").removeAttr("style")},_closePrereqsDone:function(){this.options,this._ui.container.removeAttr("tabindex"),e.mobile.popup.active=n,this._trigger("afterclose")},_close:function(t){this._ui.container.removeClass("ui-popup-active"),this._page.removeClass("ui-popup-open"),this._isOpen=!1,this._createPrereqs(e.proxy(this,"_closePrereqScreen"),e.proxy(this,"_closePrereqContainer"),e.proxy(this,"_closePrereqsDone")),this._animate({additionalCondition:this._ui.screen.hasClass("in"),transition:t?"none":this._currentTransition,classToRemove:"in",screenClassToAdd:"out",containerClassToAdd:"reverse out",applyTransition:!0,prereqs:this._prereqs})},_unenhance:function(){this._setTheme("none"),this.element.detach().insertAfter(this._ui.placeholder).removeClass("ui-popup ui-overlay-shadow ui-corner-all"),this._ui.screen.remove(),this._ui.container.remove(),this._ui.placeholder.remove()},_destroy:function(){e.mobile.popup.active===this?(this.element.one("popupafterclose",e.proxy(this,"_unenhance")),this.close()):this._unenhance()},_closePopup:function(i,n){var a,o,s=this.options,r=!1;t.scrollTo(0,this._scrollTop),i&&"pagebeforechange"===i.type&&n&&(a="string"==typeof n.toPage?n.toPage:n.toPage.jqmData("url"),a=e.mobile.path.parseUrl(a),o=a.pathname+a.search+a.hash,this._myUrl!==e.mobile.path.makeUrlAbsolute(o)?r=!0:i.preventDefault()),s.container.unbind(s.closeEvents),this.element.undelegate(s.closeLinkSelector,s.closeLinkEvents),this._close(r)},_bindContainerClose:function(){this.options.container.one(this.options.closeEvents,e.proxy(this,"_closePopup"))},open:function(i){var a,o,s,r,l,d,c=this,h=this.options;if(!e.mobile.popup.active){if(e.mobile.popup.active=this,this._scrollTop=e.mobile.window.scrollTop(),!h.history)return c._open(i),c._bindContainerClose(),c.element.delegate(h.closeLinkSelector,h.closeLinkEvents,function(e){c.close(),e.preventDefault()}),n;if(d=e.mobile.urlHistory,o=e.mobile.dialogHashKey,s=e.mobile.activePage,r=s.is(".ui-dialog"),this._myUrl=a=d.getActive().url,l=a.indexOf(o)>-1&&!r&&d.activeIndex>0)return c._open(i),c._bindContainerClose(),n;-1!==a.indexOf(o)||r?a=e.mobile.path.parseLocation().hash+o:a+=a.indexOf("#")>-1?o:"#"+o,0===d.activeIndex&&a===d.initialDst&&(a+=o),e(t).one("beforenavigate",function(e){e.preventDefault(),c._open(i),c._bindContainerClose()}),this.urlAltered=!0,e.mobile.navigate(a,{role:"dialog"})}},close:function(){e.mobile.popup.active===this&&(this._scrollTop=e.mobile.window.scrollTop(),this.options.history&&this.urlAltered?(e.mobile.back(),this.urlAltered=!1):this._closePopup())}}),e.mobile.popup.handleLink=function(t){var i,n=t.closest(":jqmData(role='page')"),a=0===n.length?e("body"):n,o=e(e.mobile.path.parseUrl(t.attr("href")).hash,a[0]);o.data("mobile-popup")&&(i=t.offset(),o.popup("open",{x:i.left+t.outerWidth()/2,y:i.top+t.outerHeight()/2,transition:t.jqmData("transition"),positionTo:t.jqmData("position-to")})),setTimeout(function(){var i=t.parent().parent();i.hasClass("ui-li")&&(t=i.parent()),t.removeClass(e.mobile.activeBtnClass)},300)},e.mobile.document.bind("pagebeforechange",function(t,i){"popup"===i.options.role&&(e.mobile.popup.handleLink(i.options.link),t.preventDefault())}),e.mobile.document.bind("pagecreate create",function(t){e.mobile.popup.prototype.enhanceWithin(t.target,!0)})}(e),function(e,t){var n=function(n){var a,o,s,r=(n.select,n._destroy),l=n.selectID,d=l?l:(e.mobile.ns||"")+"uuid-"+n.uuid,c=d+"-listbox",h=d+"-dialog",u=n.label,p=n.select.closest(".ui-page"),m=n._selectOptions(),f=n.isMultiple=n.select[0].multiple,g=l+"-button",b=l+"-menu",v=e("<div data-"+e.mobile.ns+"role='dialog' id='"+h+"' data-"+e.mobile.ns+"theme='"+n.options.theme+"' data-"+e.mobile.ns+"overlay-theme='"+n.options.overlayTheme+"'>"+"<div data-"+e.mobile.ns+"role='header'>"+"<div class='ui-title'>"+u.getEncodedText()+"</div>"+"</div>"+"<div data-"+e.mobile.ns+"role='content'></div>"+"</div>"),_=e("<div id='"+c+"' class='ui-selectmenu'>").insertAfter(n.select).popup({theme:n.options.overlayTheme}),C=e("<ul>",{"class":"ui-selectmenu-list",id:b,role:"listbox","aria-labelledby":g}).attr("data-"+e.mobile.ns+"theme",n.options.theme).attr("data-"+e.mobile.ns+"divider-theme",n.options.dividerTheme).appendTo(_),x=e("<div>",{"class":"ui-header ui-bar-"+n.options.theme}).prependTo(_),y=e("<h1>",{"class":"ui-title"}).appendTo(x);n.isMultiple&&(s=e("<a>",{text:n.options.closeText,href:"#","class":"ui-btn-left"}).attr("data-"+e.mobile.ns+"iconpos","notext").attr("data-"+e.mobile.ns+"icon","delete").appendTo(x).buttonMarkup()),e.extend(n,{select:n.select,selectID:l,buttonId:g,menuId:b,popupID:c,dialogID:h,thisPage:p,menuPage:v,label:u,selectOptions:m,isMultiple:f,theme:n.options.theme,listbox:_,list:C,header:x,headerTitle:y,headerClose:s,menuPageContent:a,menuPageClose:o,placeholder:"",build:function(){var i=this;i.refresh(),i._origTabIndex===t&&(i._origTabIndex=null===i.select[0].getAttribute("tabindex")?!1:i.select.attr("tabindex")),i.select.attr("tabindex","-1").focus(function(){e(this).blur(),i.button.focus()}),i.button.bind("vclick keydown",function(t){i.options.disabled||i.isOpen||("vclick"===t.type||t.keyCode&&(t.keyCode===e.mobile.keyCode.ENTER||t.keyCode===e.mobile.keyCode.SPACE))&&(i._decideFormat(),"overlay"===i.menuType?i.button.attr("href","#"+i.popupID).attr("data-"+(e.mobile.ns||"")+"rel","popup"):i.button.attr("href","#"+i.dialogID).attr("data-"+(e.mobile.ns||"")+"rel","dialog"),i.isOpen=!0)}),i.list.attr("role","listbox").bind("focusin",function(t){e(t.target).attr("tabindex","0").trigger("vmouseover")}).bind("focusout",function(t){e(t.target).attr("tabindex","-1").trigger("vmouseout")}).delegate("li:not(.ui-disabled, .ui-li-divider)","click",function(t){var a=i.select[0].selectedIndex,o=i.list.find("li:not(.ui-li-divider)").index(this),s=i._selectOptions().eq(o)[0];s.selected=i.isMultiple?!s.selected:!0,i.isMultiple&&e(this).find(".ui-icon").toggleClass("ui-icon-checkbox-on",s.selected).toggleClass("ui-icon-checkbox-off",!s.selected),(i.isMultiple||a!==o)&&i.select.trigger("change"),i.isMultiple?i.list.find("li:not(.ui-li-divider)").eq(o).addClass("ui-btn-down-"+n.options.theme).find("a").first().focus():i.close(),t.preventDefault()}).keydown(function(t){var i,a,o=e(t.target),s=o.closest("li");switch(t.keyCode){case 38:return i=s.prev().not(".ui-selectmenu-placeholder"),i.is(".ui-li-divider")&&(i=i.prev()),i.length&&(o.blur().attr("tabindex","-1"),i.addClass("ui-btn-down-"+n.options.theme).find("a").first().focus()),!1;case 40:return a=s.next(),a.is(".ui-li-divider")&&(a=a.next()),a.length&&(o.blur().attr("tabindex","-1"),a.addClass("ui-btn-down-"+n.options.theme).find("a").first().focus()),!1;case 13:case 32:return o.trigger("click"),!1}}),i.menuPage.bind("pagehide",function(){e.mobile._bindPageRemove.call(i.thisPage)}),i.listbox.bind("popupafterclose",function(){i.close()}),i.isMultiple&&i.headerClose.click(function(){return"overlay"===i.menuType?(i.close(),!1):t}),i.thisPage.addDependents(this.menuPage)},_isRebuildRequired:function(){var e=this.list.find("li"),t=this._selectOptions();return t.text()!==e.text()},selected:function(){return this._selectOptions().filter(":selected:not( :jqmData(placeholder='true') )")},refresh:function(t){var i,n=this;this.element,this.isMultiple,(t||this._isRebuildRequired())&&n._buildList(),i=this.selectedIndices(),n.setButtonText(),n.setButtonCount(),n.list.find("li:not(.ui-li-divider)").removeClass(e.mobile.activeBtnClass).attr("aria-selected",!1).each(function(t){if(e.inArray(t,i)>-1){var a=e(this);a.attr("aria-selected",!0),n.isMultiple?a.find(".ui-icon").removeClass("ui-icon-checkbox-off").addClass("ui-icon-checkbox-on"):a.is(".ui-selectmenu-placeholder")?a.next().addClass(e.mobile.activeBtnClass):a.addClass(e.mobile.activeBtnClass)}})},close:function(){if(!this.options.disabled&&this.isOpen){var e=this;"page"===e.menuType?(e.menuPage.dialog("close"),e.list.appendTo(e.listbox)):e.listbox.popup("close"),e._focusButton(),e.isOpen=!1}},open:function(){this.button.click()},_decideFormat:function(){function t(){var t=i.list.find("."+e.mobile.activeBtnClass+" a");0===t.length&&(t=i.list.find("li.ui-btn:not( :jqmData(placeholder='true') ) a")),t.first().focus().closest("li").addClass("ui-btn-down-"+n.options.theme)}var i=this,a=e.mobile.window,o=i.list.parent(),s=o.outerHeight(),r=(o.outerWidth(),e("."+e.mobile.activePageClass),a.scrollTop()),l=i.button.offset().top,d=a.height();a.width(),s>d-80||!e.support.scrollTop?(i.menuPage.appendTo(e.mobile.pageContainer).page(),i.menuPageContent=v.find(".ui-content"),i.menuPageClose=v.find(".ui-header a"),i.thisPage.unbind("pagehide.remove"),0===r&&l>d&&i.thisPage.one("pagehide",function(){e(this).jqmData("lastScroll",l)}),i.menuPage.one("pageshow",function(){t()}).one("pagehide",function(){i.close()}),i.menuType="page",i.menuPageContent.append(i.list),i.menuPage.find("div .ui-title").text(i.label.text())):(i.menuType="overlay",i.listbox.one("popupafteropen",t))},_buildList:function(){var t=this,n=this.options,a=this.placeholder,o=!0,s=t.isMultiple?"checkbox-off":"false";t.list.empty().filter(".ui-listview").listview("destroy");for(var r,l=t.select.find("option"),d=l.length,c=this.select[0],h="data-"+e.mobile.ns,u=h+"option-index",p=h+"icon",m=h+"role",f=h+"placeholder",g=i.createDocumentFragment(),b=!1,v=0;d>v;v++,b=!1){var _=l[v],C=e(_),x=_.parentNode,y=C.text(),w=i.createElement("a"),T=[];if(w.setAttribute("href","#"),w.appendChild(i.createTextNode(y)),x!==c&&"optgroup"===x.nodeName.toLowerCase()){var D=x.getAttribute("label");if(D!==r){var P=i.createElement("li");P.setAttribute(m,"list-divider"),P.setAttribute("role","option"),P.setAttribute("tabindex","-1"),P.appendChild(i.createTextNode(D)),g.appendChild(P),r=D}}!o||_.getAttribute("value")&&0!==y.length&&!C.jqmData("placeholder")||(o=!1,b=!0,null===_.getAttribute(f)&&(this._removePlaceholderAttr=!0),_.setAttribute(f,!0),n.hidePlaceholderMenuItems&&T.push("ui-selectmenu-placeholder"),a!==y&&(a=t.placeholder=y));var k=i.createElement("li");_.disabled&&(T.push("ui-disabled"),k.setAttribute("aria-disabled",!0)),k.setAttribute(u,v),k.setAttribute(p,s),b&&k.setAttribute(f,!0),k.className=T.join(" "),k.setAttribute("role","option"),w.setAttribute("tabindex","-1"),k.appendChild(w),g.appendChild(k)}t.list[0].appendChild(g),this.isMultiple||a.length?this.headerTitle.text(this.placeholder):this.header.hide(),t.list.listview()},_button:function(){return e("<a>",{href:"#",role:"button",id:this.buttonId,"aria-haspopup":"true","aria-owns":this.menuId})},_destroy:function(){this.close(),this._origTabIndex!==t&&(this._origTabIndex!==!1?this.select.attr("tabindex",this._origTabIndex):this.select.removeAttr("tabindex")),this._removePlaceholderAttr&&this._selectOptions().removeAttr("data-"+e.mobile.ns+"placeholder"),this.listbox.remove(),r.apply(this,arguments)}})};e.mobile.document.bind("selectmenubeforecreate",function(t){var i=e(t.target).data("mobile-selectmenu");i.options.nativeMenu||0!==i.element.parents(":jqmData(role='popup')").length||n(i)})}(e),function(e,t){e.widget("mobile.controlgroup",e.mobile.widget,e.extend({options:{shadow:!1,corners:!0,excludeInvisible:!0,type:"vertical",mini:!1,initSelector:":jqmData(role='controlgroup')"},_create:function(){var i=this.element,n={inner:e("<div class='ui-controlgroup-controls'></div>"),legend:e("<div role='heading' class='ui-controlgroup-label'></div>")},a=i.children("legend"),o=this;i.wrapInner(n.inner),a.length&&n.legend.append(a).insertBefore(i.children(0)),i.addClass("ui-corner-all ui-controlgroup"),e.extend(this,{_initialRefresh:!0}),e.each(this.options,function(e,i){o.options[e]=t,o._setOption(e,i,!0)})},_init:function(){this.refresh()},_setOption:function(i,n){var a="_set"+i.charAt(0).toUpperCase()+i.slice(1);this[a]!==t&&this[a](n),this._super(i,n),this.element.attr("data-"+(e.mobile.ns||"")+i.replace(/([A-Z])/,"-$1").toLowerCase(),n)},_setType:function(e){this.element.removeClass("ui-controlgroup-horizontal ui-controlgroup-vertical").addClass("ui-controlgroup-"+e),this.refresh()},_setCorners:function(e){this.element.toggleClass("ui-corner-all",e)},_setShadow:function(e){this.element.toggleClass("ui-shadow",e)},_setMini:function(e){this.element.toggleClass("ui-mini",e)},container:function(){return this.element.children(".ui-controlgroup-controls")},refresh:function(){var t=this.element.find(".ui-btn").not(".ui-slider-handle"),i=this._initialRefresh;e.mobile.checkboxradio&&this.element.find(":mobile-checkboxradio").checkboxradio("refresh"),this._addFirstLastClasses(t,this.options.excludeInvisible?this._getVisibles(t,i):t,i),this._initialRefresh=!1}},e.mobile.behaviors.addFirstLastClasses)),e(function(){e.mobile.document.bind("pagecreate create",function(t){e.mobile.controlgroup.prototype.enhanceWithin(t.target,!0)})})}(e),function(e){e(i).bind("pagecreate create",function(t){e(t.target).find("a").jqmEnhanceable().not(".ui-btn, .ui-link-inherit, :jqmData(role='none'), :jqmData(role='nojs')").addClass("ui-link")})}(e),function(e,t){e.widget("mobile.fixedtoolbar",e.mobile.widget,{options:{visibleOnPageShow:!0,disablePageZoom:!0,transition:"slide",fullscreen:!1,tapToggle:!0,tapToggleBlacklist:"a, button, input, select, textarea, .ui-header-fixed, .ui-footer-fixed, .ui-popup, .ui-panel, .ui-panel-dismiss-open",hideDuringFocus:"input, textarea, select",updatePagePadding:!0,trackPersistentToolbars:!0,supportBlacklist:function(){return!e.support.fixedPosition},initSelector:":jqmData(position='fixed')"},_create:function(){var i=this,n=i.options,a=i.element,o=a.is(":jqmData(role='header')")?"header":"footer",s=a.closest(".ui-page");return n.supportBlacklist()?(i.destroy(),t):(a.addClass("ui-"+o+"-fixed"),n.fullscreen?(a.addClass("ui-"+o+"-fullscreen"),s.addClass("ui-page-"+o+"-fullscreen")):s.addClass("ui-page-"+o+"-fixed"),e.extend(this,{_thisPage:null}),i._addTransitionClass(),i._bindPageEvents(),i._bindToggleHandlers(),t)},_addTransitionClass:function(){var e=this.options.transition;e&&"none"!==e&&("slide"===e&&(e=this.element.is(".ui-header")?"slidedown":"slideup"),this.element.addClass(e))},_bindPageEvents:function(){this._thisPage=this.element.closest(".ui-page"),this._on(this._thisPage,{pagebeforeshow:"_handlePageBeforeShow",webkitAnimationStart:"_handleAnimationStart",animationstart:"_handleAnimationStart",updatelayout:"_handleAnimationStart",pageshow:"_handlePageShow",pagebeforehide:"_handlePageBeforeHide"})},_handlePageBeforeShow:function(){var t=this.options;t.disablePageZoom&&e.mobile.zoom.disable(!0),t.visibleOnPageShow||this.hide(!0)},_handleAnimationStart:function(){this.options.updatePagePadding&&this.updatePagePadding(this._thisPage)},_handlePageShow:function(){this.updatePagePadding(this._thisPage),this.options.updatePagePadding&&this._on(e.mobile.window,{throttledresize:"updatePagePadding"})},_handlePageBeforeHide:function(t,i){var n=this.options;if(n.disablePageZoom&&e.mobile.zoom.enable(!0),n.updatePagePadding&&this._off(e.mobile.window,"throttledresize"),n.trackPersistentToolbars){var a=e(".ui-footer-fixed:jqmData(id)",this._thisPage),o=e(".ui-header-fixed:jqmData(id)",this._thisPage),s=a.length&&i.nextPage&&e(".ui-footer-fixed:jqmData(id='"+a.jqmData("id")+"')",i.nextPage)||e(),r=o.length&&i.nextPage&&e(".ui-header-fixed:jqmData(id='"+o.jqmData("id")+"')",i.nextPage)||e();(s.length||r.length)&&(s.add(r).appendTo(e.mobile.pageContainer),i.nextPage.one("pageshow",function(){r.prependTo(this),s.appendTo(this)}))}},_visible:!0,updatePagePadding:function(i){var n=this.element,a=n.is(".ui-header"),o=parseFloat(n.css(a?"top":"bottom"));this.options.fullscreen||(i=i&&i.type===t&&i||this._thisPage||n.closest(".ui-page"),e(i).css("padding-"+(a?"top":"bottom"),n.outerHeight()+o))},_useTransition:function(t){var i=e.mobile.window,n=this.element,a=i.scrollTop(),o=n.height(),s=n.closest(".ui-page").height(),r=e.mobile.getScreenHeight(),l=n.is(":jqmData(role='header')")?"header":"footer";return!t&&(this.options.transition&&"none"!==this.options.transition&&("header"===l&&!this.options.fullscreen&&a>o||"footer"===l&&!this.options.fullscreen&&s-o>a+r)||this.options.fullscreen)},show:function(e){var t="ui-fixed-hidden",i=this.element;this._useTransition(e)?i.removeClass("out "+t).addClass("in").animationComplete(function(){i.removeClass("in")}):i.removeClass(t),this._visible=!0},hide:function(e){var t="ui-fixed-hidden",i=this.element,n="out"+("slide"===this.options.transition?" reverse":"");this._useTransition(e)?i.addClass(n).removeClass("in").animationComplete(function(){i.addClass(t).removeClass(n)}):i.addClass(t).removeClass(n),this._visible=!1},toggle:function(){this[this._visible?"hide":"show"]()},_bindToggleHandlers:function(){var t,i,n=this,a=n.options,o=n.element,s=!0;o.closest(".ui-page").bind("vclick",function(t){a.tapToggle&&!e(t.target).closest(a.tapToggleBlacklist).length&&n.toggle()}).bind("focusin focusout",function(o){1025>screen.width&&e(o.target).is(a.hideDuringFocus)&&!e(o.target).closest(".ui-header-fixed, .ui-footer-fixed").length&&("focusout"!==o.type||s?"focusin"===o.type&&s&&(clearTimeout(t),s=!1,i=setTimeout(function(){n.hide()},0)):(s=!0,clearTimeout(i),t=setTimeout(function(){n.show()},0)))})},_destroy:function(){var e=this.element,t=e.is(".ui-header");e.closest(".ui-page").css("padding-"+(t?"top":"bottom"),""),e.removeClass("ui-header-fixed ui-footer-fixed ui-header-fullscreen ui-footer-fullscreen in out fade slidedown slideup ui-fixed-hidden"),e.closest(".ui-page").removeClass("ui-page-header-fixed ui-page-footer-fixed ui-page-header-fullscreen ui-page-footer-fullscreen")}}),e.mobile.document.bind("pagecreate create",function(t){e(t.target).jqmData("fullscreen")&&e(e.mobile.fixedtoolbar.prototype.options.initSelector,t.target).not(":jqmData(fullscreen)").jqmData("fullscreen",!0),e.mobile.fixedtoolbar.prototype.enhanceWithin(t.target)})}(e),function(e){e.widget("mobile.fixedtoolbar",e.mobile.fixedtoolbar,{_create:function(){this._super(),this._workarounds()},_workarounds:function(){var e=navigator.userAgent,t=navigator.platform,i=e.match(/AppleWebKit\/([0-9]+)/),n=!!i&&i[1],a=null,o=this;if(t.indexOf("iPhone")>-1||t.indexOf("iPad")>-1||t.indexOf("iPod")>-1)a="ios";else{if(!(e.indexOf("Android")>-1))return;a="android"}if("ios"===a)o._bindScrollWorkaround();else{if(!("android"===a&&n&&534>n))return;o._bindScrollWorkaround(),o._bindListThumbWorkaround()}},_viewportOffset:function(){var t=this.element,i=t.is(".ui-header"),n=Math.abs(t.offset().top-e.mobile.window.scrollTop());return i||(n=Math.round(n-e.mobile.window.height()+t.outerHeight())-60),n},_bindScrollWorkaround:function(){var t=this;this._on(e.mobile.window,{scrollstop:function(){var e=t._viewportOffset();e>2&&t._visible&&t._triggerRedraw()}})},_bindListThumbWorkaround:function(){this.element.closest(".ui-page").addClass("ui-android-2x-fixed")},_triggerRedraw:function(){var t=parseFloat(e(".ui-page-active").css("padding-bottom"));
e(".ui-page-active").css("padding-bottom",t+1+"px"),setTimeout(function(){e(".ui-page-active").css("padding-bottom",t+"px")},0)},destroy:function(){this._super(),this.element.closest(".ui-page-active").removeClass("ui-android-2x-fix")}})}(e),function(e,n){e.widget("mobile.panel",e.mobile.widget,{options:{classes:{panel:"ui-panel",panelOpen:"ui-panel-open",panelClosed:"ui-panel-closed",panelFixed:"ui-panel-fixed",panelInner:"ui-panel-inner",modal:"ui-panel-dismiss",modalOpen:"ui-panel-dismiss-open",pagePanel:"ui-page-panel",pagePanelOpen:"ui-page-panel-open",contentWrap:"ui-panel-content-wrap",contentWrapOpen:"ui-panel-content-wrap-open",contentWrapClosed:"ui-panel-content-wrap-closed",contentFixedToolbar:"ui-panel-content-fixed-toolbar",contentFixedToolbarOpen:"ui-panel-content-fixed-toolbar-open",contentFixedToolbarClosed:"ui-panel-content-fixed-toolbar-closed",animate:"ui-panel-animate"},animate:!0,theme:"c",position:"left",dismissible:!0,display:"reveal",initSelector:":jqmData(role='panel')",swipeClose:!0,positionFixed:!1},_panelID:null,_closeLink:null,_page:null,_modal:null,_panelInner:null,_wrapper:null,_fixedToolbar:null,_create:function(){var t=this,i=t.element,n=i.closest(":jqmData(role='page')"),a=function(){var t=e.data(n[0],"mobilePage").options.theme,i="ui-body-"+t;return i},o=function(){var e=i.find("."+t.options.classes.panelInner);return 0===e.length&&(e=i.children().wrapAll('<div class="'+t.options.classes.panelInner+'" />').parent()),e},s=function(){var i=n.find("."+t.options.classes.contentWrap);return 0===i.length&&(i=n.children(".ui-header:not(:jqmData(position='fixed')), .ui-content:not(:jqmData(role='popup')), .ui-footer:not(:jqmData(position='fixed'))").wrapAll('<div class="'+t.options.classes.contentWrap+" "+a()+'" />').parent(),e.support.cssTransform3d&&t.options.animate&&i.addClass(t.options.classes.animate)),i},r=function(){var i=n.find("."+t.options.classes.contentFixedToolbar);return 0===i.length&&(i=n.find(".ui-header:jqmData(position='fixed'), .ui-footer:jqmData(position='fixed')").addClass(t.options.classes.contentFixedToolbar),e.support.cssTransform3d&&t.options.animate&&i.addClass(t.options.classes.animate)),i};e.extend(this,{_panelID:i.attr("id"),_closeLink:i.find(":jqmData(rel='close')"),_page:i.closest(":jqmData(role='page')"),_pageTheme:a(),_panelInner:o(),_wrapper:s(),_fixedToolbar:r()}),t._addPanelClasses(),t._wrapper.addClass(this.options.classes.contentWrapClosed),t._fixedToolbar.addClass(this.options.classes.contentFixedToolbarClosed),t._page.addClass(t.options.classes.pagePanel),e.support.cssTransform3d&&t.options.animate&&this.element.addClass(t.options.classes.animate),t._bindUpdateLayout(),t._bindCloseEvents(),t._bindLinkListeners(),t._bindPageEvents(),t.options.dismissible&&t._createModal(),t._bindSwipeEvents()},_createModal:function(){var t=this;t._modal=e("<div class='"+t.options.classes.modal+"' data-panelid='"+t._panelID+"'></div>").on("mousedown",function(){t.close()}).appendTo(this._page)},_getPosDisplayClasses:function(e){return e+"-position-"+this.options.position+" "+e+"-display-"+this.options.display},_getPanelClasses:function(){var e=this.options.classes.panel+" "+this._getPosDisplayClasses(this.options.classes.panel)+" "+this.options.classes.panelClosed;return this.options.theme&&(e+=" ui-body-"+this.options.theme),this.options.positionFixed&&(e+=" "+this.options.classes.panelFixed),e},_addPanelClasses:function(){this.element.addClass(this._getPanelClasses())},_bindCloseEvents:function(){var e=this;e._closeLink.on("click.panel",function(t){return t.preventDefault(),e.close(),!1}),e.element.on("click.panel","a:jqmData(ajax='false')",function(){e.close()})},_positionPanel:function(){var t=this,i=t._panelInner.outerHeight(),n=i>e.mobile.getScreenHeight();n||!t.options.positionFixed?(n&&(t._unfixPanel(),e.mobile.resetActivePageHeight(i)),t._scrollIntoView(i)):t._fixPanel()},_scrollIntoView:function(i){e(t).scrollTop()>i&&t.scrollTo(0,0)},_bindFixListener:function(){this._on(e(t),{throttledresize:"_positionPanel"})},_unbindFixListener:function(){this._off(e(t),"throttledresize")},_unfixPanel:function(){this.options.positionFixed&&e.support.fixedPosition&&this.element.removeClass(this.options.classes.panelFixed)},_fixPanel:function(){this.options.positionFixed&&e.support.fixedPosition&&this.element.addClass(this.options.classes.panelFixed)},_bindUpdateLayout:function(){var e=this;e.element.on("updatelayout",function(){e._open&&e._positionPanel()})},_bindLinkListeners:function(){var t=this;t._page.on("click.panel","a",function(i){if(this.href.split("#")[1]===t._panelID&&t._panelID!==n){i.preventDefault();var a=e(this);return a.hasClass("ui-link")||(a.addClass(e.mobile.activeBtnClass),t.element.one("panelopen panelclose",function(){a.removeClass(e.mobile.activeBtnClass)})),t.toggle(),!1}})},_bindSwipeEvents:function(){var e=this,t=e._modal?e.element.add(e._modal):e.element;e.options.swipeClose&&("left"===e.options.position?t.on("swipeleft.panel",function(){e.close()}):t.on("swiperight.panel",function(){e.close()}))},_bindPageEvents:function(){var e=this;e._page.on("panelbeforeopen",function(t){e._open&&t.target!==e.element[0]&&e.close()}).on("pagehide",function(){e._open&&e.close(!0)}).on("keyup.panel",function(t){27===t.keyCode&&e._open&&e.close()})},_open:!1,_contentWrapOpenClasses:null,_fixedToolbarOpenClasses:null,_modalOpenClasses:null,open:function(t){if(!this._open){var i=this,n=i.options,a=function(){i._page.off("panelclose"),i._page.jqmData("panel","open"),!t&&e.support.cssTransform3d&&n.animate?i.element.add(i._wrapper).on(i._transitionEndEvents,o):setTimeout(o,0),i.options.theme&&"overlay"!==i.options.display&&i._page.removeClass(i._pageTheme).addClass("ui-body-"+i.options.theme),i.element.removeClass(n.classes.panelClosed).addClass(n.classes.panelOpen),i._positionPanel(),i.options.theme&&"overlay"!==i.options.display&&i._wrapper.css("min-height",i._page.css("min-height")),i._contentWrapOpenClasses=i._getPosDisplayClasses(n.classes.contentWrap),i._wrapper.removeClass(n.classes.contentWrapClosed).addClass(i._contentWrapOpenClasses+" "+n.classes.contentWrapOpen),i._fixedToolbarOpenClasses=i._getPosDisplayClasses(n.classes.contentFixedToolbar),i._fixedToolbar.removeClass(n.classes.contentFixedToolbarClosed).addClass(i._fixedToolbarOpenClasses+" "+n.classes.contentFixedToolbarOpen),i._modalOpenClasses=i._getPosDisplayClasses(n.classes.modal)+" "+n.classes.modalOpen,i._modal&&i._modal.addClass(i._modalOpenClasses)},o=function(){i.element.add(i._wrapper).off(i._transitionEndEvents,o),i._page.addClass(n.classes.pagePanelOpen),i._bindFixListener(),i._trigger("open")};0>this.element.closest(".ui-page-active").length&&(t=!0),i._trigger("beforeopen"),"open"===i._page.jqmData("panel")?i._page.on("panelclose",function(){a()}):a(),i._open=!0}},close:function(t){if(this._open){var i=this.options,n=this,a=function(){!t&&e.support.cssTransform3d&&i.animate?n.element.add(n._wrapper).on(n._transitionEndEvents,o):setTimeout(o,0),n._page.removeClass(i.classes.pagePanelOpen),n.element.removeClass(i.classes.panelOpen),n._wrapper.removeClass(i.classes.contentWrapOpen),n._fixedToolbar.removeClass(i.classes.contentFixedToolbarOpen),n._modal&&n._modal.removeClass(n._modalOpenClasses)},o=function(){n.options.theme&&"overlay"!==n.options.display&&(n._page.removeClass("ui-body-"+n.options.theme).addClass(n._pageTheme),n._wrapper.css("min-height","")),n.element.add(n._wrapper).off(n._transitionEndEvents,o),n.element.addClass(i.classes.panelClosed),n._wrapper.removeClass(n._contentWrapOpenClasses).addClass(i.classes.contentWrapClosed),n._fixedToolbar.removeClass(n._fixedToolbarOpenClasses).addClass(i.classes.contentFixedToolbarClosed),n._fixPanel(),n._unbindFixListener(),e.mobile.resetActivePageHeight(),n._page.jqmRemoveData("panel"),n._trigger("close")};0>this.element.closest(".ui-page-active").length&&(t=!0),n._trigger("beforeclose"),a(),n._open=!1}},toggle:function(){this[this._open?"close":"open"]()},_transitionEndEvents:"webkitTransitionEnd oTransitionEnd otransitionend transitionend msTransitionEnd",_destroy:function(){var t=this.options.classes,i=this.options.theme,n=this.element.siblings("."+t.panel).length;n?this._open&&(this._wrapper.removeClass(t.contentWrapOpen),this._fixedToolbar.removeClass(t.contentFixedToolbarOpen),this._page.jqmRemoveData("panel"),this._page.removeClass(t.pagePanelOpen),i&&this._page.removeClass("ui-body-"+i).addClass(this._pageTheme)):(this._wrapper.children().unwrap(),this._page.find("a").unbind("panelopen panelclose"),this._page.removeClass(t.pagePanel),this._open&&(this._page.jqmRemoveData("panel"),this._page.removeClass(t.pagePanelOpen),i&&this._page.removeClass("ui-body-"+i).addClass(this._pageTheme),e.mobile.resetActivePageHeight())),this._panelInner.children().unwrap(),this.element.removeClass([this._getPanelClasses(),t.panelAnimate].join(" ")).off("swipeleft.panel swiperight.panel").off("panelbeforeopen").off("panelhide").off("keyup.panel").off("updatelayout"),this._closeLink.off("click.panel"),this._modal&&this._modal.remove(),this.element.off(this._transitionEndEvents).removeClass([t.panelUnfixed,t.panelClosed,t.panelOpen].join(" "))}}),e(i).bind("pagecreate create",function(t){e.mobile.panel.prototype.enhanceWithin(t.target)})}(e),function(e,t){e.widget("mobile.table",e.mobile.widget,{options:{classes:{table:"ui-table"},initSelector:":jqmData(role='table')"},_create:function(){var e=this;e.refresh(!0)},refresh:function(i){var n=this,a=this.element.find("thead tr");i&&this.element.addClass(this.options.classes.table),n.headers=this.element.find("tr:eq(0)").children(),n.allHeaders=n.headers.add(a.children()),a.each(function(){var o=0;e(this).children().each(function(){var s=parseInt(e(this).attr("colspan"),10),r=":nth-child("+(o+1)+")";if(e(this).jqmData("colstart",o+1),s)for(var l=0;s-1>l;l++)o++,r+=", :nth-child("+(o+1)+")";i===t&&e(this).jqmData("cells",""),e(this).jqmData("cells",n.element.find("tr").not(a.eq(0)).not(this).children(r)),o++})}),i===t&&this.element.trigger("refresh")}}),e.mobile.document.bind("pagecreate create",function(t){e.mobile.table.prototype.enhanceWithin(t.target)})}(e),function(e,t){e.mobile.table.prototype.options.mode="columntoggle",e.mobile.table.prototype.options.columnBtnTheme=null,e.mobile.table.prototype.options.columnPopupTheme=null,e.mobile.table.prototype.options.columnBtnText="Columns...",e.mobile.table.prototype.options.classes=e.extend(e.mobile.table.prototype.options.classes,{popup:"ui-table-columntoggle-popup",columnBtn:"ui-table-columntoggle-btn",priorityPrefix:"ui-table-priority-",columnToggleTable:"ui-table-columntoggle"}),e.mobile.document.delegate(":jqmData(role='table')","tablecreate refresh",function(i){var n,a,o,s,r=e(this),l=r.data("mobile-table"),d=i.type,c=l.options,h=e.mobile.ns,u=(r.attr("id")||c.classes.popup)+"-popup";"columntoggle"===c.mode&&("refresh"!==d&&(l.element.addClass(c.classes.columnToggleTable),n=e("<a href='#"+u+"' class='"+c.classes.columnBtn+"' data-"+h+"rel='popup' data-"+h+"mini='true'>"+c.columnBtnText+"</a>"),a=e("<div data-"+h+"role='popup' data-"+h+"role='fieldcontain' class='"+c.classes.popup+"' id='"+u+"'></div>"),o=e("<fieldset data-"+h+"role='controlgroup'></fieldset>")),l.headers.not("td").each(function(t){var i=e(this).jqmData("priority"),n=e(this).add(e(this).jqmData("cells"));i&&(n.addClass(c.classes.priorityPrefix+i),"refresh"!==d?e("<label><input type='checkbox' checked />"+e(this).text()+"</label>").appendTo(o).children(0).jqmData("cells",n).checkboxradio({theme:c.columnPopupTheme}):e("#"+u+" fieldset div:eq("+t+")").find("input").jqmData("cells",n))}),"refresh"!==d&&o.appendTo(a),s=o===t?e("#"+u+" fieldset"):o,"refresh"!==d&&(s.on("change","input",function(){this.checked?e(this).jqmData("cells").removeClass("ui-table-cell-hidden").addClass("ui-table-cell-visible"):e(this).jqmData("cells").removeClass("ui-table-cell-visible").addClass("ui-table-cell-hidden")}),n.insertBefore(r).buttonMarkup({theme:c.columnBtnTheme}),a.insertBefore(r).popup()),l.update=function(){s.find("input").each(function(){this.checked?(this.checked="table-cell"===e(this).jqmData("cells").eq(0).css("display"),"refresh"===d&&e(this).jqmData("cells").addClass("ui-table-cell-visible")):e(this).jqmData("cells").addClass("ui-table-cell-hidden"),e(this).checkboxradio("refresh")})},e.mobile.window.on("throttledresize",l.update),l.update())})}(e),function(e){e.mobile.table.prototype.options.mode="reflow",e.mobile.table.prototype.options.classes=e.extend(e.mobile.table.prototype.options.classes,{reflowTable:"ui-table-reflow",cellLabels:"ui-table-cell-label"}),e.mobile.document.delegate(":jqmData(role='table')","tablecreate refresh",function(t){var i=e(this),n=t.type,a=i.data("mobile-table"),o=a.options;if("reflow"===o.mode){"refresh"!==n&&a.element.addClass(o.classes.reflowTable);var s=e(a.allHeaders.get().reverse());s.each(function(){var t=e(this).jqmData("cells"),i=e(this).jqmData("colstart"),n=t.not(this).filter("thead th").length&&" ui-table-cell-label-top",a=e(this).text();if(""!==a)if(n){var s=parseInt(e(this).attr("colspan"),10),r="";s&&(r="td:nth-child("+s+"n + "+i+")"),t.filter(r).prepend("<b class='"+o.classes.cellLabels+n+"'>"+a+"</b>")}else t.prepend("<b class='"+o.classes.cellLabels+"'>"+a+"</b>")})}})}(e),function(e,t){function i(e){o=e.originalEvent,d=o.accelerationIncludingGravity,s=Math.abs(d.x),r=Math.abs(d.y),l=Math.abs(d.z),!t.orientation&&(s>7||(l>6&&8>r||8>l&&r>6)&&s>5)?c.enabled&&c.disable():c.enabled||c.enable()}e.mobile.iosorientationfixEnabled=!0;var a=navigator.userAgent;if(!(/iPhone|iPad|iPod/.test(navigator.platform)&&/OS [1-5]_[0-9_]* like Mac OS X/i.test(a)&&a.indexOf("AppleWebKit")>-1))return e.mobile.iosorientationfixEnabled=!1,n;var o,s,r,l,d,c=e.mobile.zoom;e.mobile.document.on("mobileinit",function(){e.mobile.iosorientationfixEnabled&&e.mobile.window.bind("orientationchange.iosorientationfix",c.enable).bind("devicemotion.iosorientationfix",i)})}(e,this),function(e,t){function n(){a.removeClass("ui-mobile-rendering")}var a=e("html"),o=(e("head"),e.mobile.window);e(t.document).trigger("mobileinit"),e.mobile.gradeA()&&(e.mobile.ajaxBlacklist&&(e.mobile.ajaxEnabled=!1),a.addClass("ui-mobile ui-mobile-rendering"),setTimeout(n,5e3),e.extend(e.mobile,{initializePage:function(){var t=e.mobile.path,a=e(":jqmData(role='page'), :jqmData(role='dialog')"),s=t.stripHash(t.stripQueryParams(t.parseLocation().hash)),r=i.getElementById(s);a.length||(a=e("body").wrapInner("<div data-"+e.mobile.ns+"role='page'></div>").children(0)),a.each(function(){var t=e(this);t.jqmData("url")||t.attr("data-"+e.mobile.ns+"url",t.attr("id")||location.pathname+location.search)}),e.mobile.firstPage=a.first(),e.mobile.pageContainer=e.mobile.firstPage.parent().addClass("ui-mobile-viewport"),o.trigger("pagecontainercreate"),e.mobile.showPageLoadingMsg(),n(),e.mobile.hashListeningEnabled&&e.mobile.path.isHashValid(location.hash)&&(e(r).is(':jqmData(role="page")')||e.mobile.path.isPath(s)||s===e.mobile.dialogHashKey)?e.event.special.navigate.isPushStateEnabled()?(e.mobile.navigate.history.stack=[],e.mobile.navigate(e.mobile.path.isPath(location.hash)?location.hash:location.href)):o.trigger("hashchange",[!0]):(e.mobile.path.isHashValid(location.hash)&&(e.mobile.urlHistory.initialDst=s.replace("#","")),e.event.special.navigate.isPushStateEnabled()&&e.mobile.navigate.navigator.squash(t.parseLocation().href),e.mobile.changePage(e.mobile.firstPage,{transition:"none",reverse:!0,changeHash:!1,fromHashChange:!0}))}}),e.mobile.navreadyDeferred.resolve(),e(function(){t.scrollTo(0,1),e.mobile.defaultHomeScroll=e.support.scrollTop&&1!==e.mobile.window.scrollTop()?1:0,e.mobile.autoInitializePage&&e.mobile.initializePage(),o.load(e.mobile.silentScroll),e.support.cssPointerEvents||e.mobile.document.delegate(".ui-disabled","vclick",function(e){e.preventDefault(),e.stopImmediatePropagation()})}))}(e,this)});
//@ sourceMappingURL=jquery.mobile-1.3.1.min.map


(function(b){var e={init:function(){if(b(".imgnav .bxslider").length>0)slider=b(".imgnav .bxslider").bxSlider({pager:false,speed:300,onSliderLoad:function(a){totalSlides=slider.getSlideCount();e.counterInit(a,totalSlides)},onSlideBefore:function(a,d,c){e.counterUpdate(a,d,c)}})},counterInit:function(a,d){var c=b(".imgnav .bxslider .pager .current"),f=b(".imgnav .bxslider .pager .total");c.html(a+1);f.html(d)},counterUpdate:function(a,d,c){b(".pager .current",a).html(c+1)}};b(function(){e.init()})})(jQuery);

(function(a){var e={init:function(){a(".showlist-two-columns .showlist").each(function(){var b=a(this);b=a("li",b);for(var d=0,c=0;c<b.length;c+=2){d=Math.max(a(b[c]).height(),a(b[c+1]).height());a(b[c]).css("height",d);a(b[c+1]).css("height",d)}})}};a(function(){a(".showlist-two-columns").length>0&&e.init()})})(jQuery);

(function(a){a(function(){var e=function(){var b=a.cookie("dfy.lh.u"),c=JSON.parse(decodeURIComponent(b));b=c.t;c=c.u;var d=a(".welcome-bar .user-name").data("msg").replace("{title}",b).replace("{user}",c);d=b.match(/[\u3400-\u9FBF]/)?a(".welcome-bar .user-name").data("msg").replace("{titleName}",c+" "+b):a(".welcome-bar .user-name").data("msg").replace("{titleName}",b+" "+c);a(".welcome-bar .user-name").html(d);a(".welcome-bar").show();a("#header UL#eyebrow > LI.text > A, #header UL#toolbar > LI.menu-item > A").each(function(){a(this).prop("href").indexOf("/register")!=
-1&&a(this).hide()})};a.cookie("dfy.lh.u")&&a(".welcome-bar")[0]&&e()})})(jQuery);

(function(a){a(function(){var n=a(".landing"),h=a("#select-language"),b=a("#select-country"),i=a(".country-selection label"),j=a("#select-country-language-json"),p=function(){function k(){b.selectmenu("disable");i.css("opacity","0.3")}function o(){b.selectmenu("enable");i.css("opacity","1")}k();h.change(function(){var l=h.val();if(l!==""){o();if(j.length>0){var f=JSON.parse(j.html()),d=null;a.each(f.languages,function(e,c){if(c.language===l)d=c.items});if(d&&d.length>0&&b.length>0&&b.children("option").length>
0){f=b.children("option")[0];b.empty();b.append(f);a.each(d,function(e,c){var m=e="";for(var g in c)if(g){e=g;m=c[g]}b.append("<option value='"+e+"'>"+m+"</option>")});a.mobile&&b.selectmenu("refresh")}}}else k()})};n.length>0&&p()})})(jQuery);

var SB=SB||{};
(function(a){SB.init=false;SB.pagename=_da.pname;SB.dealers={init:function(){a(".service-booking .ui-header .black").parent().hide();a(".dealer-search").hide();SB.dealers.getCurrentLocation();a.cookie("sp.pc")?SB.dealers.nearestDealer():this.searchDealer();this.menuURL=a("#xtimeURL").embeddedData();this.authorisedFilter=this.menuURL.authorisedFilter||"";this.isMobile=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);this.urlAtrrib="&provider=FORDAUPORTAL&keywordParam=null"},fetchData:function(b,
d,c){SB.templateWrap&&SB.templateWrap.addClass("loading");a.ajax({url:b,beforeSend:function(){a.mobile.loading("show")},async:true,dataType:"json",success:function(e){a.mobile.loading("hide");d(e)},error:function(e,f){a.mobile.loading("hide");c(b,e,f)}})},getParameterByName:function(b){return(b=RegExp("[?&]"+b+"=([^&]*)").exec(window.location.search))&&decodeURIComponent(b[1].replace(/\+/g," "))},renderSearchListTemplate:function(b,d){if(b){a("#search-template").tmpl(d).appendTo("#search-items",SB.templateWrap);
SB.templateWrap.removeClass("loading");SB.dlength=d.length;a(".request-service").buttonMarkup("refresh");SB.dealers.resultDetails(d.length,3);a.each(d,function(c){SB.serviceURL=d[c].mobileURL;var e=SB.restServices["dealer.code"].replace("{site}",SB.site).replace("{code}",d[c].dealerCode)+SB.dealers.authorisedFilter;if(d[c].fullXtimeParticipant==="Y"){a(".search-results .request-service").eq(c).attr("href",SB.serviceURL+SB.dealers.getParameterByName("keyword")).attr("data-dcode",d[c].dealerCode);a(".search-results .no-service").eq(c).hide()}else if(d[c].fullXtimeParticipant===
null)if(SB.dealers.isMobile){var f=this.mobileURL;if(f===""||f===null)a(".search-results .request-service").eq(c).hide();else{a(".search-results .request-service").eq(c).attr("href",f+SB.dealers.urlAtrrib);a(".search-results .no-service").eq(c).hide()}}else{f=this.consumerURL;if(f===""||f===null)a(".search-results .request-service").eq(c).hide();else{a(".search-results .request-service").eq(c).attr("href",SB.serviceURL+SB.dealers.getParameterByName("keyword")).attr("data-dcode",d[c].dealerCode+SB.dealers.urlAtrrib);
a(".search-results .no-service").eq(c).hide()}}else a(".search-results .request-service").eq(c).hide();a(".item").eq(c).attr("id",d[c].dealerCode);SB.dealers.fetchData(e,function(g){a("#"+g.dealerCode).find(".dealer-address").attr({"data-lng":g.latitudeLongitude.longitude,"data-lat":g.latitudeLongitude.latitude});SB.dcount+=1;SB.dcount>=SB.dlength&&a(document).trigger("pagechange",function(){nativeMapURLGenerator()})},function(){})});a(".change-dealer.results").show();a(".listing-details .results").show();
a(".btn.request-service").on("click",function(c){c.preventDefault();c=a(this).attr("href");var e=a(this).data("dcode");SB.dealers.requestServiceTracking(e,c)})}else{a(".error").show();SB.templateWrap.removeClass("loading")}},requestServiceTracking:function(b,d){var c={type:"e"};c.link=c.title=SB.pagename+":results:request service";c.onclicks="service:book online";c.pname=SB.pagename+":results";s.prop1=s.eVar1=b;ND.omniture.trackLink(c);setTimeout(function(){window.location.href=d},100)},searchResultsTracking:function(){var b=
{type:"o"};_da.pname=SB.pagename+":results";b.link=b.title=SB.pagename+":results";b.onclicks=SB.pagename;b.pname=SB.pagename+":results";b.events=_da.events="event1".split(",")},searchDealerTracking:function(){var b={type:"o"};_da.pname=SB.pagename;b.link=b.title=SB.pagename;b.onclicks=SB.pagename;b.pname=SB.pagename;b.events=_da.events="event1"},searchDealerBtnTracking:function(){var b={type:"o"};_da.pname=SB.pagename;b.link=b.title=SB.pagename;b.onclicks=SB.pagename;b.pname=SB.pagename;ND.omniture.trackLink(b)},
templateError:function(b){b={error:"An error has occurred: "+b.statusText};a("#dealer-template-error").tmpl(b).appendTo(SB.templateWrap)},templateErrorSearch:function(b){b={error:"An error has occurred: "+b.statusText};a("#search-template-error").tmpl(b).appendTo(SB.templateWrap)},nearestDealer:function(){var b=a.cookie("sp.pc"),d=a(".dealer-search");d=a("form",d);var c=SB.restServices["dealer.byAddressUrl"].replace("{site}",SB.site).replace("{location}",b)+SB.dealers.authorisedFilter;a(".item").remove();
a(".details-user-location").show().find("span").html(b);SB.dealers.searchResultsTracking();SB.dealers.fetchData(c,function(e){a(".dealer-search").hide();a(".search-results").show();SB.dealers.renderSearchListTemplate(true,e);a(".change-dealer").on("click",function(f){SB.dealers.changeDealerBtn(f)})},function(e,f){SB.dealers.renderSearchListTemplate(false,null,f)});d.submit(function(e){e.preventDefault();SB.dealers.formSubmit()})},geoDealers:function(b){var d=a(".dealer-search");a("form",d);d=SB.restServices["dealer.byAddressUrl"].replace("{site}",
SB.site).replace("{location}",b)+SB.dealers.authorisedFilter;a(".item").remove();a(".details-user-location").show().find("span").html(b);SB.dealers.fetchData(d,function(c){a(".dealer-search").hide();a(".search-results").show();a(".details-state").add(".details-city").hide();SB.dealers.renderSearchListTemplate(true,c);a(".change-dealer").on("click",function(e){SB.dealers.changeDealerBtn(e)})},function(){a(".location-error").show()})},searchDealer:function(){var b=a(".dealer-search");a(".search-results").hide();
b.show();a(".service-booking .ui-header .black").parent().show();SB.dealers.searchDealerTracking();a("form",b).submit(function(d){d.preventDefault();SB.dealers.formSubmit()})},getCurrentLocation:function(){a(".sb-currentLocation-btn").on("click",function(b){b.preventDefault();locationTimeout=setTimeout(function(){d.locationNotFound(1)},15E3);a.mobile.loading("show");var d=ND.geoLocator({success:function(c){clearTimeout(locationTimeout);a("#sb-currentLocation").val(c);a.mobile.loading("hide");SB.dealers.geoDealers(c)},
error:function(){clearTimeout(locationTimeout);a(".location-error").show();a.mobile.loading("hide")},maximumAge:1E4,timeout:1E4});d.findLocation()})},formSubmit:function(){a(".error").hide();var b=a(".dealer-search"),d=a("#select-state").val(),c=a("#select-city").val();if(d===""&&c==="")a(".error",b).show();else{a(".item").remove();SB.dealers.runSearch(d,c)}},runSearch:function(b,d){var c=SB.restServices["dealer.byRegionCityUrl"].replace("{site}",SB.site).replace("{region}",b).replace("{city}",d)+
SB.dealers.authorisedFilter;a(".details-user-location").hide();a(".details-state").show().find("span").html(b);a(".details-city").show().find("span").html(d);SB.dealers.searchResultsTracking();a(".item").remove();SB.dealers.fetchData(c,function(e){a(".dealer-search").hide();a(".search-results").show();SB.dealers.renderSearchListTemplate(true,e);a(".change-dealer").on("click",function(f){SB.dealers.changeDealerBtn(f)})},function(e,f){SB.dealers.renderSearchListTemplate(false,null,f)})},changeDealerBtn:function(b){b.preventDefault();
a(".dealer-search").show().find("select").val("").selectmenu("refresh");a("select#select-city").html('<option value="">Select</option>');a(".search-results").hide();a(".location-error").add(".error").hide();a(".change-dealer.results").hide();a(".item").remove();SB.dealers.scrollToTop();SB.dealers.searchDealerBtnTracking()},scrollToTop:function(){a("html, body").animate({scrollTop:a(".dealer-search").offset().top-20},400)},resultDetails:function(b,d){if(b>d){a(".more-results").css("display","block");
a("#search-items > div.item").hide().slice(0,d).css("display","block");a(".search-results").on("click",".more-results",function(c){c.preventDefault();SB.dealers.moreButton(d);a("#search-items > div.item").css("border-bottom","1px solid #ddd");a("#search-items > div.item:visible:last").css("border-bottom",0);a("#search-items > div.item:last-child").css("border-bottom","1px solid #ddd")});a("#search-items > div.item:visible:last").css("border-bottom",0)}else a(".more-results").css("display","none");
setTimeout(function(){var c=a("#search-items > div.item:visible").length;a(".listing-details .details-results span.items-range").html("1-"+c).next().html(" of "+b)},200)},moreButton:function(b){a("#search-items > div.item:hidden").slice(0,b).fadeIn(350);b=a("#search-items > div.item:visible").length;a(".listing-details .details-results span.items-range").html("1-"+b);a("#search-items > div.item:hidden").length>=1||a(".search-results .more-results").remove()}};a(function(){var b=a("#common-config").embeddedData();
SB.site=b.site;SB.restServices=a("#rest-services").embeddedData();SB.templateWrap=a(".ui-content");if(a(".service-booking").length>0&&SB.init===false){SB.init=true;SB.dcount=0;SB.dealers.init()}a(".service-booking-btn").on("click",function(){var d=a(this).attr("href"),c=d.indexOf("?")==-1?"?":"&";SB.keyword=a(this).data("sb-keyword");d.indexOf("keyword")==-1&&a(this).attr("href",d+c+"keyword="+SB.keyword)})});a(document).on("pageinit",function(){var b=a("#common-config").embeddedData();SB.site=b.site;
SB.restServices=a("#rest-services").embeddedData();SB.templateWrap=a(".ui-content");if(a(".service-booking").length>0){SB.init=true;SB.dcount=0;SB.dealers.init()}})})(jQuery);
